

<HTML>
<HEAD>
<TITLE>Possible Data Loss with LBA and INT13 Extensions </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q148821">
<META NAME="KBModify" CONTENT="1997/12/15">
<META NAME="KBCreate" CONTENT="1996/03/25">
<META NAME="Keywords" CONTENT="diskmem win95 winboot kbhw">
<META NAME="KBArea" CONTENT="Support; KB; win95x, crossnet, winprint">
<META NAME="Description" CONTENT="  After you perform one of the following actions, the contents of some Enhanced IDE (EIDE) hard disks may not seem to be correct:   - Choosing  Restart the computer in MS-DOS mode  from the Shut Down    menu.   - Starting an MS-DOS-based program that...">
<META NAME="Product" CONTENT="Windows 95">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAC9,QDJH,QDL9,QBWO,QBWN,QBWQ,QBWS,QANE,QAFV,QAVZ,QAY2,QAPN,QAJ4,QAO0,QA6A V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Possible Data Loss with LBA and INT13 Extensions</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 15, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q148821</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
95
WINDOWS
kbhw
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows 95
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After you perform one of the following actions, the contents of some
Enhanced IDE (EIDE) hard disks may not seem to be correct:

<UL><LI>Choosing "Restart the computer in MS-DOS mode" from the Shut Down
   menu.

<LI>Starting an MS-DOS-based program that is configured to run in
   MS-DOS mode.
<P>
</UL>Specifically, if there are multiple partitions on a large EIDE hard disk,
the extended partitions (usually drive letters D and higher) seem to
contain the contents of the primary partition (usually drive C), or to be
corrupted.
<P>
WARNING: In this situation, attempts to use disk-repair utilities such as
ScanDisk to repair the apparent corruption will cause data corruption on
the primary partition of the affected drive.
<P>
Any action that attempts to write data to the extended partitions when
this symptom is observed may also result in data corruption.
<P>
Running the CHKDSK command when this symptom is observed may result in a
"Probable non-DOS disk" message.
<P>
<P><h2>CAUSE</h2>
 
<P>
This situation is known to occur only when all of the following conditions
exist:

<UL><LI>The hard disk is a large (&gt;504 MB) Enhanced IDE hard disk.

<LI>The hard disk is accessed using Logical Block Addressing (LBA).

<LI>The hard disk has been partitioned into multiple partitions with
   the Windows 95 version of FDISK, or another partitioning utility
   that creates MS-DOS extended partition types 0x0E and 0x0F.

<LI>The system BIOS supports INT13 extensions to access hard disk
   devices.

<LI>You have exited to MS-DOS mode from Windows 95 without rebooting
   the computer.
<P>
</UL>Under these circumstances, certain data structures maintained by the
operating system for accessing these logical drives become corrupted in
the transition from protected mode to real mode.
<P>
This does not occur when you boot the computer to a command prompt or from
a floppy disk.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
This issue is resolved by the following updated file for Windows 95:
<P>
<PRE>   DISKTSD.VXD version 4.00.952 (dated 3/22/96) and later

</PRE><h3>Installation</h3>
 
<P>
To install the updated file, use the following steps:

<OL><P><LI>Download the Dsktsupd.exe file from one of the online services listed
   below to an empty folder.

<P><LI>In My Computer or Windows Explorer, double-click the Dsktsupd.exe file
   you downloaded in step 1.

<P><LI>Follow the instructions on the screen.

<P><LI>After the installation process is finished, shut down and then restart
   your computer.
<P>
</OL><h3>Instructions for Downloading</h3>
 
<P>
<PRE>You can find <A href="http://support.microsoft.com/download/support/mslfiles/dsktsupd.exe">DSKTSUPD.EXE</A> <I>(size: 150624 bytes)</I> 
                         , a self-extracting file, on the following
</PRE></OL>services:

<UL><LI>Microsoft's World Wide Web Site on the Internet
<P><PRE>      On the www.microsoft.com home page, click the Support icon.
      Click Knowledge Base, and select the product.
<PRE></PRE>      Enter kbfile <A href="http://support.microsoft.com/download/support/mslfiles/dsktsupd.exe">DSKTSUPD.EXE</A> <I>(size: 150624 bytes)</I> 
                               , and click GO!
      Open the article, and click the button to download the file.

</PRE><LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the Softlib/Mslfiles folder.
      Get <A href="http://support.microsoft.com/download/support/mslfiles/dsktsupd.exe">DSKTSUPD.EXE</A> <I>(size: 150624 bytes)</I> 
</PRE>
<LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (425) 936-6735 to connect to MSDL
      Download <A href="http://support.microsoft.com/download/support/mslfiles/dsktsupd.exe">DSKTSUPD.EXE</A> <I>(size: 150624 bytes)</I> 
</PRE><P>
</UL>For additional information about downloading, please see the following
article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../zmiscellaneous/q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online Services

</PRE><h2>MORE INFORMATION</h2>
 
<P>
For additional information about INT13H extensions, please see the
following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../win95x/q122052.htm">Q122052</A></B>
   TITLE     : Logical Block Addressing (LBA) Defined

</PRE>For additional information about the use of large hard disks with MS-DOS
and Windows 95, please see the following article in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../win95x/q126855.htm">Q126855</A></B>
   TITLE     : Windows 95 Support for Large IDE Hard Disks

</PRE><h3>Workaround</h3>
 
<P>
To work around this issue, in the event you do not have the updated
DSKTSUPD.EXE file, use either of the following methods:
<P>
<P><h3>Method 1</h3>
 
Avoid exiting to MS-DOS mode from within Windows 95. To run programs that
require MS-DOS mode, boot to a command prompt instead of Windows.
<P>
<P><h3>Method 2</h3>
 
Repartition the hard disk using one of the following methods.
<P>
WARNING: Repartitioning the hard disk will delete all data in the current
partitions (logical disks). Make sure to back up your data before
repartitioning the hard disk.

<UL><LI>Repartition the hard disk into a single primary partition.

<LI>Repartition the hard disk by starting FDISK with the following
   command line:
<P>
<P><PRE>      FDISK /X
</PRE><P>
   This disables support for the LBA extended partition types 0x0E and
   0x0F, and uses the older partition types 0x05 and 0x06 instead.

<LI>Repartition the hard disk with an older version of FDISK (prior to
   Windows 95) that does not support the LBA extended partition types.

<LI>Repartition the hard disk using a third-party tool that does not use
   the LBA extended partition types.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbhw<BR>
KBSubcategory: win95 winboot diskmem<BR>
Additional reference words: 95 XINT13 INT13h INT<BR>
Keywords          : diskmem win95 winboot kbhw<BR>
Version           : 95<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 15, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
