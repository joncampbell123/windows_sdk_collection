

<HTML>
<HEAD>
<TITLE>Memory Leak in Windows 95 Kernel Using Windows Sockets </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q148336">
<META NAME="KBModify" CONTENT="1998/02/24">
<META NAME="KBCreate" CONTENT="1996/03/11">
<META NAME="Keywords" CONTENT="diskmem win95 kbfile kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; win95x, crossnet, winprint">
<META NAME="Description" CONTENT="  When you run a program that uses Windows Sockets in Windows 95, a gradual increase in the memory used by the operating system may occur over time, especially if the program opens and closes a large number of sockets.  CAUSE =====  There is an error...">
<META NAME="Product" CONTENT="Windows 95">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWN,QDL9,QBWO,QBWQ,QAA1,QAXB,QDI2,QBD2,QBWS,QAFI,QAY2,QASR,QAO0,QAH4,QAGB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Memory Leak in Windows 95 Kernel Using Windows Sockets</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 24, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q148336</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows 95
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you run a program that uses Windows Sockets in Windows 95, a gradual
increase in the memory used by the operating system may occur over time,
especially if the program opens and closes a large number of sockets.
<P>
<P><h2>CAUSE</h2>
 
<P>
There is an error in the Windows 95 Kernel (Kernel32.dll) that prevents
the proper freeing of certain small data structures associated with
Windows Socket processes and allocated sockets. Over time, these small
memory leaks can result in a significant loss of available memory.
<P>
Note that you can free the resources associated with a program by closing
the program. If you quit and restart Windows 95, the memory is freed.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Microsoft has released an updated version of the Kernel32.dll file that
corrects the problem described in this article. The updated file is:
<P>
<PRE>   KERNEL32.DLL version 4.00.951 (dated 2/2/96) and later

</PRE>To install the updated Kernel, follow these steps:

<OL><P><LI>Download the Krnlupd.exe file to an empty folder.

<P><LI>In My Computer or Windows Explorer, double-click the KRNLUPD.EXE file
   you downloaded in step 1.

<P><LI>Follow the instructions on the screen.
<P>
</OL>The following file(s) are available for download from the Microsoft
Software Library:
<P>
<PRE> ~ <A href="http://support.microsoft.com/download/support/mslfiles/krnlupd.exe">Krnlupd.exe</A> <I>(size: 337016 bytes)</I> 

</PRE></OL>For more information about downloading files from the Microsoft Software
Library, please see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../zmiscellaneous/q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online Services

</PRE><h2>MORE INFORMATION</h2>
 
<P>
When you run the Krnlupd.exe file, the following file is installed:
<P>
<PRE>   File name      Folder           Size      Date       Version
   -------------------------------------------------------------
   Kernel32.dll   Windows\System   411,136   02/02/96   4.00.951
   Krnl32un.inf   Windows              533   07/25/97

</PRE>If you wish to uninstall the updated Kernel32.dll file, use the right
Mouse button to click the Krnl32un.inf file in the Windows folder, and
then click Install from the menu that appears. This step replaces the
updated Kernel32.dll with the version that was previously installed on
your computer and removes Krnl32un.inf.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 95<BR>
Keywords          : diskmem win95 kbfile kbnetwork<BR>
Version           : 95<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 24, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
