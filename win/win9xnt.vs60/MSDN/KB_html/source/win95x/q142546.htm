

<HTML>
<HEAD>
<TITLE>How to Use a RAM Drive to Troubleshoot Memory </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q142546">
<META NAME="KBModify" CONTENT="1997/03/18">
<META NAME="KBCreate" CONTENT="1996/01/15">
<META NAME="Keywords" CONTENT="kbenv win95 winmem">
<META NAME="KBArea" CONTENT="Support; KB; win95x, crossnet, winprint">
<META NAME="Description" CONTENT="  Windows 95 uses memory differently than earlier versions of Windows. If you encounter unusual random problems in Windows 95 that you did not experience in an earlier version of Windows, your computer may have faulty memory. This article describes h...">
<META NAME="Product" CONTENT="Windows 95">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QDL9,QBWN,QBWO,QBWQ,QDJD,QAKP,QAIJ,QAY2,QAVX,QAVW,QDIO,QAH4,QBSO,QBXT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Use a RAM Drive to Troubleshoot Memory</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q142546</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows 95
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows 95 uses memory differently than earlier versions of Windows. If you
encounter unusual random problems in Windows 95 that you did not experience
in an earlier version of Windows, your computer may have faulty memory.
This article describes how to use a RAM drive to test the memory in your
computer and what to do if this does not solve the problems you are
experiencing.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Microsoft RAMDrive is a memory-resident program that lets you use part of
your computer's RAM as if it were a disk drive. By creating a RAM drive
that uses most of your computer's physical RAM, you may be able to isolate
the memory problem to a particular memory chip. To create a RAM drive using
Windows 95, perform the following steps:

<OL><P><LI>Restart your computer. When you see the "Starting Windows 95" message,
   press the F8 key, and then choose Command Prompt Only from the Startup
   menu.

<P><LI>Use any text editor, such as Edit.com, to add the following line
   to the Config.sys file
<P>
<P><PRE>      device=&lt;path&gt;\ramdrive.sys &lt;x&gt; /E
</PRE><P>
   where &lt;path&gt; specifies the location for Ramdrive.sys and &lt;x&gt; is equal
   to the total amount of RAM (converted from megabytes to kilobytes) minus
   4096 (4 megabytes are required for Windows 95 to start). For example,
   if you installed Windows 95 on drive C in a folder called Windows and
   your computer has 16 megabytes (MB) of RAM, add the following line:
<P>
<P><PRE>      device=c:\windows\ramdrive.sys 12288 /E
</PRE><P>
   The value 12288 is derived from the following formula using the
   example above:
<P>
<P><PRE>      (16 * 1024) - 4096 = 12288 bytes
</PRE><P>
   NOTE: The Ramdrive.sys line must follow the Himem.sys line, or the RAM
   drive may not function.
<P>
   NOTE: Windows 95 is limited to a 16-MB RAM drive. For additional
   information, please see the following article in the Microsoft
   Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A href="../win95x/q126448.htm">Q126448</A></B>
<PRE></PRE>      TITLE     : Err Msg: Not Enough Extended Memory Available to
                  Start...

</PRE><P><LI>Save the Config.sys file and then restart your computer normally.

<P><LI>If the problems no longer occur, halve the value for &lt;x&gt; in the
   Config.sys file and restart your computer. Repeat these steps until
   the problem returns. Once it returns, the faulty RAM is in the area
   that you most recently removed from the RAM drive. Contact your
   hardware manufacturer about replacing this memory.

<P><LI>If the problems persist, there may be a problem in the memory above the
   high memory area (HMA) that Ramdrive.sys is not using. To test the
   memory above the HMA (starting at 1088K), remove Ramdrive.sys from the
   Config.sys file and add the following line to the Config.sys file
<P>
<P><PRE>      device=&lt;path&gt;\himem.sys /int15=&lt;x&gt;
</PRE><P>
   where &lt;path&gt; specifies the location for Himem.sys and &lt;x&gt; is equal to
   the total amount of RAM you want to exclude from Windows 95's use. For
   example, the line "device=c:\windows\himem.sys /int15=4096" prevents
   Windows 95 from using the section of memory from 1088K to 5184K (or
   roughly the first 4 MB of RAM above conventional memory + the UMA + the
   HMA). If the problems no longer occur, this memory needs to be
   replaced.
<P>
</OL>If you continue to have problems, one of the following situations may
exist:

<UL><LI>The problems may be caused by memory within the 1088K of RAM that the
   RAMdrive and HIMEM statements cannot reserve for Windows 95. To test
   this, try new memory modules or switch the order of the RAM modules in
   your computer. If you are unfamiliar with this process, Microsoft
   recommends that you contact your hardware manufacturer for assistance.

<LI>The problems may be caused by CPU cache RAM. Many new processors
   implement a method of optimization that uses motherboard and internal
   CPU cache RAM to increase performance and optimize data and code
   execution. This cache is used to offset the number of direct reads that
   are performed against main memory for frequently used data and code.
<P>
   To test this, disable the internal and external CPU cache. For
   information on how to do this, please read your hardware documentation
   or contact your hardware manufacturer.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 95 bad hang kbhowto<BR>
Keywords            : kbenv win95 winmem<BR>
Version             : 95<BR>
Platform            : WINDOWS<BR>
Hardware            : x86<BR>
Issue type          : kbtshoot<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
