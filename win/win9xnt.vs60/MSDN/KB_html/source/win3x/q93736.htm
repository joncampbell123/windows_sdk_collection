

<HTML>
<HEAD>
<TITLE>Enabling the Microsoft TCP/IP Protocol with WFWG 3.1 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q93736 ">
<META NAME="KBModify" CONTENT="1997/04/08">
<META NAME="KBCreate" CONTENT="1992/12/20">
<META NAME="Keywords" CONTENT="kbnetwork wfwg">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  Microsoft Windows for Workgroups fully supports connectivity with Microsoft LAN Manager (using NetBEUI protocol) and Novell NetWare (using MSIPX protocol).  This article contains information on enabling the Microsoft TCP/IP protocol included with M...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWO,QBFY,QDL9,QBWQ,QBWN,QAA1,QDNT,QDI2,QAVZ,QBWD,QAIB,QAB5,QBXT,QA5V,QDNP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Enabling the Microsoft TCP/IP Protocol with WFWG 3.1</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 8, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q93736 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows for Workgroups version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft Windows for Workgroups fully supports connectivity with
Microsoft LAN Manager (using NetBEUI protocol) and Novell NetWare
(using MSIPX protocol).
<P>
This article contains information on enabling the Microsoft TCP/IP
protocol included with Microsoft LAN Manager for use with Windows for
Workgroups version 3.1.
<P>
NOTE: This article applies to Windows for Workgroups version 3.1 only; it
does not apply to later versions of the product.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The information in this article was taken from the "Windows for
Workgroups Resource Kit" manual, Appendix E, page E3. For more
information concerning enabling additional protocols with Windows for
Workgroups, please refer to that manual.
<P>
<P><h3>Configuring the Microsoft TCP/IP Protocol</h3>
 
<P>
Installation of the TCP/IP protocol stack requires the manipulation of
the CONFIG.SYS, AUTOEXEC.BAT, PROTOCOL.INI, and SYSTEM.INI files on
Windows for Workgroups computers. The following steps were prepared
to make the task easier. A completed example of each of these files
has been provided at the end of this section for reference.
<P>
NOTE: The following steps discuss the installation of the basic TCP/IP
protocol stack. These procedures do not discuss the installation of
the TCP/IP Utility pack. Thus, this installation won't permit the use
of the sockets library.

<OL><P><LI>Install MS-DOS LAN Manager on a computer.
<P>
   Before installing TCP/IP, you must first get a copy of the files.
   To do this, install MS-DOS LAN Manager on a single computer, then
   copy the files on a floppy disk or a file share point for
   distribution to Windows for Workgroups computers.
<P>
   NOTE: Please follow the procedures and installation prompts for
   installing the TCP/IP protocol stack. When prompted for the IP
   address, sub-net mask, and the default gateway address, you may
   want to use information for one of the workstations you will be
   installing. You will be adding this information manually to the
   PROTOCOL.INI file during the actual installation.

<P><LI>Copy the following files to a floppy disk:
<P>
<P><PRE>      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\EMSBFR.EXE
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\NEMM.DOS
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\TCPTSR.EXE
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\TCPDRV.DOS
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\TINYRFC.EXE
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\UMB.COM
      C:\LANMAN.DOS\DRIVERS\PROTOCOL\TCPIP\NMTSR.EXE
      C:\LANMAN.DOS\TCPUTILS.INI
      C:\LANMAN.DOS\NETPROG\PING.EXE
</PRE>
<P><LI>Install Windows for Workgroups on a computer.

<P><LI>Copy the TCP/IP files from the floppy disk in step 2 on the Windows
   directory of the Windows for Workgroups computer. (If Windows for
   Workgroups was installed in a directory besides Windows, copy these
   files to that directory.)

<P><LI>In the CONFIG.SYS file, insert the following lines immediately
   after the line that installs PROTMAN.DOS (before WORKGRP.SYS is
   referenced):
<P>
<P><PRE>      device=c:\Windows\nemm.DOS
      device=c:\Windows\tcpdrv.DOS /i:c:\Windows
</PRE><P>
   NOTE: The directories for the device drivers and the information
   pointer for the TCPUTILS.INI file (/i:c:\Windows) may be different if
   Windows for Workgroups was installed in a directory other than that
   referenced in these procedures. Refer to the directory discussion in
   step 4.

<P><LI>Make the following modifications to the AUTOEXEC.BAT file:
<P>
<P><PRE>    - Immediately before the net start line, add the following line:
</PRE><P>
<PRE>         c:\Windows\umb.com

    - Immediately after the net start line, add the following lines:

         c:\windows\emsbfr
         c:\windows\tcptsr
         c:\windows\tinyrfc
         c:\windows\nmtsr

</PRE><P><LI>Make the following modifications to the \WINDOWS\PROTOCOL.INI file:
<P>
<P><PRE>    - After the last existing transport line in the [network.setup]
      section, add the following line:
</PRE><P>
<PRE>         transport=ms$tcp,ms$tcp

    - After the last existing LANA number line in the [network.setup]
      section, add the following line:

         lana1=ms$elnkii,1,ms$tcp

      NOTE: The LANA number may be different if other protocols are being
      loaded before the TCP/IP stack. Also, the device driver identifier
      (shown as MS$ELNKII in these steps) is dependent on the type of
      network interface card you are using.

    - Add the following lines to the end of the PROTOCOL.INI file:

         [ms$tcp]
         drivername=TCPIP$
         nbsessions=10
         bindings=ms$elnkii
         lanabase=1
         ipaddress0=11 1 7 99
         subnetmask0=255 255 0 0
         defaultgateway0=11 1 0 1

      NOTE: The resource kit has a documentation error in the steps for
      installing the TCP/IP Protocol Stack on Windows for Workgroups. On
      page E-8, the instruction

         drivername=tcpip$

      should read as follows:

         drivername=TCPIP$

   NOTES
   -----

   - The lanabase= value must match the lanax= entry in the [network.
     setup] section. The bindings= entry is the section name ( [xxxxxx] )
     of the device driver to which the TCP/IP stack will be bound. This
     value is dependent on the type of network interface card used. The
     ipaddress0, subnetmask0, and defaultgateway0 values are computer-and
     site-dependent. These values are provided as an example. Of special
     interest is that spaces are used as separators in the numbers instead
     of the more traditional periods.

   - Notice the nbsessions value was increased from its LAN Manager
     default value of 6, to increase the number of sessions supported by
     the TCP/IP device driver.

</PRE><P><LI>In the \Windows\SYSTEM.INI file, increase the netheapsize= parameter
   in the [386Enh] section from its default value of 20 to 60.
<P>
   NOTE: The additional memory is needed as buffer space for passing
   network frames between real and protected mode.

<P><LI>Restart the target computer. Once all steps are completed and verified,
   restart the computer to load the needed device drivers and TSRs.
<P>
   Notice that NMTSR.EXE is an optional component and is used only with
   the PING utility. The following are the final installation images of
   CONFIG.SYS, AUTOEXEC.BAT, and PROTOCOL.INI.
<P>
   The following is an example of a CONFIG.SYS file image:
<P>
<P><PRE>      device=c:\dos\setver.exe
      device=c:\windows\himem.sys
      device=c:\windows\emm386.exe noems x=b800-c800
      dos=high,umb
      files=30
      buffers=10
      lastdrive=z
      device=c:\windows\protman.dos /i:c:\windows
      device=c:\windows\nemm.dos
      device=c:\windows\tcpdrv.dos /i:c:\windows
      device=c:\windows\workgrp.sys
      device=c:\windows\elnkii.dos
      stacks=9,256
</PRE><P>
   The following is an example of a AUTOEXEC.BAT file image:
<P>
<P><PRE>      c:\windows\smartdrv.exe
      c:\windows\umb.com
      c:\windows\net start
      c:\windows\emsbfr
      c:\windows\tcptsr
      c:\windows\tinyrfc
      c:\windows\nmtsr
      @echo off
      prompt $p$g
      path c:\windows;c:\dos
      set temp=c:\dos
</PRE><P>
   The following is an example of a PROTOCOL.INI file image:
<P>
   NOTE: The ms$elnkii keyname used in the following example specifies
   the use of the 3Com EtherLink II network adapter card driver. Use the
   name of the network adapter card driver that is present in your
   existing PROTOCOL.INI file.
<P>
<P><PRE>      [network.setup]
      version=0x3100
      netcard=ms$elnkii,1,ms$elnkii
      transport=ms$netbeui,ms$netbeui
      transport=ms$tcp,ms$tcp
      lana0=ms$elnkii,1,ms$netbeui
      lana1=ms$elnkii,1,ms$tcp
</PRE><P>
<P><PRE>      [protman]
      drivername=protman$
      priority=ms$netbeui
</PRE><P>
<P><PRE>      [ms$elnkii]
      drivername=elnkii$
      interrupt=5
      ioaddress=0x300
      maxtransmits=40
      transceiver=external
</PRE><P>
<P><PRE>      [ms$netbeui]
      drivername=netbeui$
      sessions=6
      ncbs=12
      bindings=ms$elnkii
      lanabase=0
</PRE><P>
<P><PRE>      [ms$tcp]
      drivername=tcpip$
      nbsessions=10
      bindings=ms$elnkii
      lanabase=1
      ipaddress0=11 1 7 99
      subnetmask0=255 255 00
      defaultgateway0=11 1 0 1
</PRE><P>
</OL><h3>Additional Information About TCP/IP Installation:</h3>
 
<P>
WORKGRP.SYS gives a diagnostic error at startup (No NETBEUI section
found in configuration information) if you do not have NetBEUI as an
additional protocol. This is expected and harmless.
<P>
<P><h2>REFERENCES</h2>
 
<P>
"Windows for Workgroups Resource Kit" for version 3.1.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 3.10<BR>
Keywords            : kbnetwork wfwg<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 8, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
