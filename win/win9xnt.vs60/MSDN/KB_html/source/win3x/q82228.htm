

<HTML>
<HEAD>
<TITLE>Use of TimerCriticalSection= in 386 Enhanced Mode Windows </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q82228 ">
<META NAME="KBModify" CONTENT="1994/11/21">
<META NAME="KBCreate" CONTENT="1992/03/29">
<META NAME="Keywords" CONTENT="kbnetwork kb3rdparty">
<META NAME="KBArea" CONTENT="Support; KB; win3x, crossnet">
<META NAME="Description" CONTENT="  In the [386Enh] section of the SYSTEM.INI file, the TimerCriticalSection= setting can be used in Microsoft Windows running in 386 enhanced mode to prevent system corruption for some networks and terminate-and-stay-resident (TSR) programs.  MORE INF...">
<META NAME="Product" CONTENT="Windows 3.1 and Windows for Workgroups">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAHC,QADN,QDL9,QBWO,QBWN,QATK,QAHB,QAUD,QDH9,QBVV,QACE,QBWQ,QDIO,QBXS,QA7R V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Use of TimerCriticalSection= in 386 Enhanced Mode Windows</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 21, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q82228 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows operating system versions 3.0, 3.0a, 3.1, 3.11
<LI>Microsoft Windows for Workgroups version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In the [386Enh] section of the SYSTEM.INI file, the TimerCriticalSection=
setting can be used in Microsoft Windows running in 386 enhanced mode to
prevent system corruption for some networks and terminate-and-stay-resident
(TSR) programs.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The TimerCriticalSection= setting must be entered as follows
<P>
<PRE>   [386Enh]
   TimerCriticalSection=nnnn

</PRE>where "nnnn" is the amount of time in milliseconds before the critical
section is timed out. For example, a value of 1000 would indicate a 1
second time-out for the timer critical section.
<P>
When this feature is enabled, the virtual machine (VM) assumes ownership of
the critical section before sending a timer interrupt. This prevents timer
interrupts from being serviced in one virtual machine while another virtual
machine is in the critical section (for example, making an MS-DOS call).
<P>
The time-out feature allows you to fine-tune the amount of time Windows
blocks a timer interrupt from being serviced in a virtual machine. When a
virtual machine returns from servicing a timer interrupt, the critical
section is released and the time-out is canceled to allow other virtual
machines to service timer interrupts. Typically the time-out will never
occur, so it is best to set the TimerCriticalSection= value to a large
value such as 5000. A virtual machine would then be allowed to "own" all
timer interrupts for up to 5 seconds before other virtual machines would be
allowed to run. Because timer interrupt service routines return very
quickly in almost all situations, this will not present a problem. However,
a pop-up program such as Borland's SideKick pops-up on a timer interrupt
and does not return until you pop it down. The time-out is provided to
handle this situation.
<P>
TimerCriticalSection=2000 has prevented system corruption on both Banyan
and Novell networks.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kb3rdparty<BR>
KBSubcategory: wfw wfwg win31 winmem<BR>
Additional reference words: 3.0 3.0a 3.1 3.00 3.00A 3.10 3.11<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 21, 1994</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
