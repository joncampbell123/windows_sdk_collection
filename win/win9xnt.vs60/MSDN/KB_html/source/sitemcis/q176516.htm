

<HTML>
<HEAD>
<TITLE>CRS: How to Troubleshoot CRS Issues </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176516">
<META NAME="KBModify" CONTENT="1998/02/09">
<META NAME="KBCreate" CONTENT="1997/11/10">
<META NAME="Keywords" CONTENT="kbtshoot CommMisc">
<META NAME="KBArea" CONTENT="Support; KB; sitemcis">
<META NAME="Description" CONTENT="  This article provides general Content Replication System (CRS) troubleshooting tips that you can use before calling Microsoft Technical Support.  MORE INFORMATION  For general troubleshooting purposes, it may be a good idea to enable the CRS log. T...">
<META NAME="Product" CONTENT="sitemcis">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABI,QABH,QAVZ,QBWS,QBSO,QAI5,QANE,QAB4,QAKP,QBWG,QBW7,QAX6,QBV8,QAB9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>CRS: How to Troubleshoot CRS Issues</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176516</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Commercial Internet System version 1.0
<LI>Microsoft Site Server version 2.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article provides general Content Replication System (CRS)
troubleshooting tips that you can use before calling Microsoft Technical
Support.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For general troubleshooting purposes, it may be a good idea to enable the
CRS log. To do this, use the following commands:

<UL><LI>CRS setglobal FullLogging=Yes
<LI>net stop crs
<LI>net start crs
<P>
</UL>The second and third commands restart the CRS service. Before you run these
commands, make sure you do not have CRS projects running.
<P>
For up-to-date CRS problem resolution articles, visit
<B><A href="http://www.microsoft.com/support/">http://www.microsoft.com/support/.</A></B>
<P>
<P><h3>Permission Problems</h3>
 

<UL><LI>If you are managing the CRS projects, check to make sure the user you
   log on as is part of CRS admin group.

<LI>Check to make sure the CRS service has an administrator privilege. To do
   this, perform the following steps:
<P>
   1. Open Control Panel and double-click the Services icon.
<P>
   2. Click to select Content Replication, and then click Startup.
<P>
   3. Make sure the account assigned to this service has an administrative
<P><PRE>      privilege.
</PRE>
<LI>If the problem is in CRS Webadmin, make sure you have proper access to
   Internet Information Server (IIS). You may want to enable Windows NT
   auditing for File Object Access, so that the security failure will be
   recorded in the security section of event viewer.

<LI>To make sure you have access to CRS service or CRS projects, go to the
   registry and check the following permissions. To do this, perform the
   following steps:
<P>
   1. Run Regedt32.
<P>
   2. Go to HKEY_LOCAL_MACHINE\Software\Microsoft\Crs
<P>
   3. On the Registry menu, click Security.
<P>
   4. Click Permission.
<P>
   5. Make sure the user you log on as is part of CRS and Projects registry
<P><PRE>      tree.
</PRE><P>
   Viewing the registry to check the permission becomes more crucial if you
   have used many removeuser and grantuser commands.

<LI>If you are replicating across domains (regardless of whether they are
   trusted domains) make sure the source and target servers have the same
   user account and password. That is the only way the session between
   the source and target can be authenticated in an untrusted domain
   situation.

<LI>Make sure the underlying TCP/IP network is working. You can do this by
   using the PING command and verifying whether the source and target have
   the correct IP address.

<LI>If you find a different behavior of ACLS replication across domains,
   check the IgnoreDomain setting. Consult the documentation for more
   information about this registry setting.
<P>
</UL><h3>Aborted Project Problems</h3>
 
<P>
Because aborted projects can be caused by different problems, you need to
narrow down the problem. To do this, you can do the following:

<UL><LI>Check the Online reference documentation to check the error message
   reported in the event viewer.

<LI>Check the CRS log to find out more detailed error messages.
<P>
</UL><h3>Opened Files or File Locking Problems</h3>
 
<P>
CRS will abort when encountering files that are being used during a
replication. This is a normal behavior because stopping the project will
prevent content inconsistency between the source and the target.

<UL><LI>Find out who is locking the file. Closing the service or application
   that is using the file will release the handle. You may be able to take
   advantage of BeforeSendScript to close the service or application before
   running a replication. For more information about the BeforeSendScript
   feature, consult the documentation.

<LI>Consider changing the way you implement the replication. For example,
   consider changing an automatic replication to a scheduled replication.
   This is especially beneficial if you know that the files will be opened
   at a certain period of time in a day. Depending on your topology, using
   stager machines may also help to reduce this issue.

<LI>There are some registry entries, such as MonitorCheckPointWait or
   MonitorFlushWait, that may help to reduce the frequency of checkpoint.
   For more information about these entries, consult the documentation.

<LI>Take advantage of the CRS log to find more information about what files
   are being locked.
<P>
</UL><h3>Network Problems</h3>
 

<UL><LI>CRS uses port 507; if you are replicating across firewall, you should
   make sure this port is opened. This is a default port, so you can change
   the port using the following commands:
<P>
<P><PRE>      crs setglobal port=&lt;new_port_number&gt;
      net stop crs
      net start crs
</PRE><P>
   The second and third commands restart the CRS service. Before you run
   these commands, make sure you do not have CRS projects running.

<LI>Use the PING command to make sure the source and the target can
   communicate properly. Also make sure that the underlying TCP/IP network
   is working properly.

<LI>A 100xx error message indicates an error on the winsock layer. For more
   information on winsock errors, see the following article in the
   Microsoft Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A href="../crossnet/q150537.htm">Q150537</A></B>
<PRE></PRE>      TITLE     : Windows Sockets Error Codes, Values, and Meanings

</PRE><LI>To make sure you have a good network connection, try to create a project
   on the target from the source computer. You can accomplish this easily
   by either using the "/server" switch to indicate that you are running
   the command remotely, or by using the CRS Webadmin. For more complete
   command line syntax, type "crs help" at a command prompt.

<LI>Use Network Monitor to trace the TCP/IP packets.
<P>
</UL><h3>CRS Webadmin Problems</h3>
 

<UL><LI>Use CRS at a command prompt to accomplish the same task in CRS Webadmin.
   Doing this helps to determine whether the problem lies in CRS or in the
   browser or IIS. If CRS works from a command prompt, the problem may be
   related to the browser or IIS.

<LI>Make sure you have the most up-to-date browser and IIS fixes. Visit
   <B><A href="http://www.microsoft.com/ie">http://www.microsoft.com/ie</A></B> or <B><A href="http://www.microsoft.com/iis">http://www.microsoft.com/iis</A></B> to see if
   you have the latest software available. There is no official test to
   make sure that Internet Explorer (IE) 4.0 and/or IIS 4.0 work with Site
   Server 2.0 or MCIS CRS. The official supported platform is IIS 3.0 and
   IE 3.02. For more complete information about the supported platform,
   consult the product documentation.

<LI>Make sure you are able to access the virtual root (for example,
   <B>http://&lt;crs_server&gt;).</B> If you cannot access the virtual root, make sure
   you have the correct permissions in IIS, and make sure the server
   running IIS and CRS is working properly.

<LI>If your browser only displays a partial listing of CRS projects and some
   functionalities are unavailable, your administrator has restricted your
   access and has not assigned administrative privileges to you.

<LI>Enable auditing on File Object Access to help diagnose permission or
   access problems between your browser and IIS.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: gray grey grayed greyed dim dimmed access control<BR>
list lists nmdcrs<BR>
Keywords          : kbtshoot CommMisc<BR>
Version           : WINDOWS:1.0 2.0<BR>
Platform          : WINDOWS<BR>
Issue type        : kbhowto<BR>
Solution Type     : Info_Provided<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 9, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
