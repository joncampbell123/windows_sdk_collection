

<HTML>
<HEAD>
<TITLE>INS: NNTPBLD Takes Too Long to Rebuild a Server </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170064">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/06/13">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; sitemcis">
<META NAME="Description" CONTENT="  When an MCIS Internet News Server (INS) fails due to an unexpected situation, such as loss of power, disk failure, and so forth, you must rebuild the server using the command:     nntpbld -c -G -e  When you use this command, it may take from 24 to ...">
<META NAME="Product" CONTENT="sitemcis">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAHE,QAKR,QBVV,QAKC,QBC6,QAR4,QANE,QBV8,QAB9,QAG8,QAVZ,QAU3,QAH7,QAH6,QAD7 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INS: NNTPBLD Takes Too Long to Rebuild a Server</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170064</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Commercial Internet System, version 1.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When an MCIS Internet News Server (INS) fails due to an unexpected
situation, such as loss of power, disk failure, and so forth, you must
rebuild the server using the command:
<P>
<PRE>   nntpbld -c -G -e

</PRE>When you use this command, it may take from 24 to 48 hours for the rebuild
to complete and allow the server to be put back online.
<P>
<P><h2>CAUSE</h2>
 
<P>
MCIS 1.0 Nntpbld.exe is not fully optimized for quick server recovery.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Nntpbld.exe was modified to include two new command line switches that can
greatly reduce the amount of time to rebuild a server.
<P>
The new command line switches are not be listed when you enter this command
at a command prompt:
<P>
<PRE>   nntpbld -?

</PRE><h3>New Switches</h3>
 
<P>
<PRE>-x      If this switch is specified, nntpbld will avoid rebuilding the XIX
        index files. Currently, nntpbld deletes all XIX files in its first
        pass through the news tree and then rebuilds them while scanning
        NWS articles. Because XIX files are almost as stable as NWS files,
        in most cases it makes sense to not delete and rebuild them. This
        saves the overhead of lots of WriteFile() calls.

        NOTE: This switch should be used when it is reasonably certain that
        Only the hash tables are corrupted. The safest course of action, if
        the extent of the corruption is not known, is to not use this
        switch.

-w n    Where n is the number of threads to use. The maximum number of
        threads is 64. Using 0 for the value of n results in the number of
        threads being 2 times the number of processors.

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft Commercial
Internet System, version 1.0.
A supported fix is now available, but is not fully regression-tested and
should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this
fix. Contact Microsoft Technical Support for more information.
 
<PRE>Version           : WinNT:1.0
Platform          : winnt
Hardware          : ALPHA x86
Issue type        : kbbug</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
