

<HTML>
<HEAD>
<TITLE>HOWTO: Debug NDIS WAN Miniports for MSDUN 1.2x </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q182539">
<META NAME="KBModify" CONTENT="1998/03/17">
<META NAME="KBCreate" CONTENT="1998/03/16">
<META NAME="Keywords" CONTENT="NTDDKDebug ntddkndis">
<META NAME="KBArea" CONTENT="Support; KB; win32ddk">
<META NAME="Description" CONTENT="  This article shows you how to set tracing options to debug Network Driver Interface Specification (NDIS) wide area network (WAN) miniports on Windows 95 with Microsoft Dial-Up Networking 1.2x. It also includes the address of the Web site you can vi...">
<META NAME="Product" CONTENT="Win32 DDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVZ,QBWE,QAVX,QBWQ,QBE7,QBE6,QDL9,QBWO,QBWN,QAU9,QBWP,QAA1,QBXS,QAC1,QBV8 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>HOWTO: Debug NDIS WAN Miniports for MSDUN 1.2x</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 17, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q182539</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Windows 95 Device Driver Kit (DDK), version 4.0, on the following
   platform:
<P>
   - Win95
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article shows you how to set tracing options to debug Network Driver
Interface Specification (NDIS) wide area network (WAN) miniports on Windows
95 with Microsoft Dial-Up Networking 1.2x. It also includes the address of
the Web site you can visit to download debug binaries.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
NDIS WAN miniports are binary compatible drivers for Windows NT 4.0 and
Windows 95. To use NDIS WAN miniports on Windows 95, you must install the
Microsoft Dial-Up Networking upgrade. You can get the latest Microsoft Dial-
Up Networking upgrade and debug binaries from the Device Driver Development
Support Web page, located at:
<P>
<PRE>   <B><A href="http://support.microsoft.com/support/ddk_hardware/">http://support.microsoft.com/support/ddk_hardware/</A></B>

</PRE>Click the Windows DDK link and then the Device Driver Tools link.
<P>
When you debug an NDIS WAN miniport on Windows 95, you can install several
debug binaries. Ndis.vxd, Wan.tsp, and Isdnui.dll all emit trace
information to a kernel debugger if the debug version of the respective
driver is installed.
<P>
To enable Ndis.vxd tracing, you must set the NdisTraceImpt symbol to TRUE
in the debugger. For example:
<P>
<PRE>   &gt;&gt;e NdisTraceImpt 1

</PRE>This line sets the global variable NdisTraceImpt to TRUE, and Ndis.vxd
begins emitting trace information once processing resumes. When tracing is
enabled, Ndis.vxd emits a text string each time an NDIS API function is
entered and exited. In addition, most Plug and Play and enumeration steps
are logged with the debugger. NDIS tracing helps debug any NDIS client
driver, including miniports, transport drivers, and NDIS network interface
card (NIC) drivers.
<P>
Wan.tsp and Isdnui.dll have more tracing options. You can set tracing
options for these DLLs with an initialization file located in the base
Windows directory. The debug versions of both DLLs refer to Bowman.ini
using GetPrivateProfileString. The following sample code presents the
format for Bowman.ini:
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>   [WanTSP]
   ; DumpFlags:
   ;    00000001   Linedev
   ;    00000002   Phonedev
   ;    00000004   Callback
   ;    00000008   Miniport

   DumpFlags=0x00000000

   ; TraceFlags:
   ;            00000001   Warnings
   ;            00000002   Errors
   ;            00000004   General
   ;            00000008   Function trace
   ;            00000100   Linedev
   ;            00000200   Phonedev
   ;            00000400   Miniport
   ;            00000800   Callback
   ;            00001000   Utility
   ;            00002000   Size variables (needed, used, size, and so on)
   ;            00008000   Misc

   TraceFlags=0x0000210F

   ; BreakFlags:
   ;    00000001   Break on validate
   ;    00000040   Break on process attach

   BreakFlags=0x00000001

   [ISDNUI]
   ; DumpFlags:
   ;    00000001   ISDNCONFIG
   ;    00000002   ISDNLINE
   ;    00000004   ISDNCHANNEL
   ;    00000008   ISDNDEVCAPS
   ;    00000010   ISDNLINECAPS
   ;    00000020   Vendor data

   DumpFlags=0x00000000

   ; TraceFlags:
   ;    00000001   Warnings
   ;    00000002   Errors
   ;    00000004   General
   ;    00000008   Function trace

   TraceFlags=0x00000003

   ; BreakFlags:
   ;    00000001   Break on validate
   ;    00000040   Break on process attach

   BreakFlags=0x00000001

</PRE>All trace output is emitted to the current kernel debugger.
<P>
<P><h2>REFERENCES</h2>
 
<P>
Windows NT DDK documentation
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: MSDUN NDIS Miniport<BR>
Keywords          : NTDDKDebug ntddkndis<BR>
Version           : Win95:4.0<BR>
Platform          : Win95<BR>
Issue type        : kbhowto<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 17, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
