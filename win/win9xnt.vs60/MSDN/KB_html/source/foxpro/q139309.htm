

<HTML>
<HEAD>
<TITLE>FIX: FoxPro UNIX Terminates Abnormally Returning a Signal 11 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q139309">
<META NAME="KBModify" CONTENT="1997/11/26">
<META NAME="KBCreate" CONTENT="1995/11/08">
<META NAME="Keywords" CONTENT="FxprgGeneral kbbuglist kbfixlist kbprg">
<META NAME="KBArea" CONTENT="Support; KB; foxpro, crossnet, odbc">
<META NAME="Description" CONTENT="  While in an edit region on a running screen, if the user of the screen presses the ENTER key after each line of text that is entered, eventually FoxPro will terminate abnormally to the UNIX system prompt. At the UNIX system prompt, immediately afte...">
<META NAME="Product" CONTENT="Visual FoxPro">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDNQ,QANE,QAH4,QAUD,QAR4,QAI4,QAGU,QACF,QAUR,QAGB,QAAP,QABO,QAKP,QBWS,QBE7 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: FoxPro UNIX Terminates Abnormally Returning a Signal 11</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 26, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q139309</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
2.60
UNIX
kbprg kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FoxPro for UNIX, version 2.6
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
While in an edit region on a running screen, if the user of the screen
presses the ENTER key after each line of text that is entered, eventually
FoxPro will terminate abnormally to the UNIX system prompt. At the UNIX
system prompt, immediately after FoxPro terminates, if the user types the
following command, the number 11 is returned, which is the UNIX signal code
for a "Segmentation Violation."
<P>
<PRE>   echo _$?

</PRE><h2>CAUSE</h2>
 
<P>
A Segmentation Violation error tells the user that the process that was
running tried to write to a memory segment that the process did not own.
<P>
This can occur when the user is in an edit region because of a problem with
FoxPro version 2.6 for UNIX. The portion of FoxPro that handles edit
regions on a screen does not account correctly for carriage returns and
line feeds. FoxPro attempts to write to memory past the end of the buffer
containing the text that the user is entering.
<P>
This error tends to be intermittent, and may be hard to duplicate.
Nevertheless, given the right circumstances, this error will occur when
leaving an edit region.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To correct this problem, the user may type in the following script and run
it to patch the FoxPro binary file. Follow these steps to apply the patch
script:

<OL><P><LI>Log on to the UNIX host in single-user mode, or log in as root and make
   sure no other users are using FoxPro.

<P><LI>Make a copy of the current FoxPro binary file to protect against
   accidents. To copy the FoxPro binary file, run the following commands at
   the UNIX system prompt:
<P>
   cd /usr/lib/foxpro
   cp foxpro.pr oldfoxpro.pr

<P><LI>If the error occurs while running FoxPro itself, type the following
   script code using a UNIX text editor such as vi.
<P>
<P><PRE>      ----- Beginning of code for FoxPro.
      ----- begin pfix -- save the contents into a file and make
      ----- executable with "chmod +x &lt;filename&gt;"
      echo "Fixes problem with the edit region ..."
      /etc/_fst foxpro.pr &lt;&lt; EOF
      0x17:0x1444aa?X\
      $q
      EOF
      echo "If 0x8ec83ec is displayed above press y to continue: \c"
      read foo
      if [ "$foo" != "y" ]
      then exit 0
      fi
      /etc/_fst -w foxpro.pr &lt;&lt; EOF
      0x17:0x1444aa?W 800068ec
      0x17:0x1444ae?W 458b0000
      0x17:0x1444b2?W 54408b08
      0x17:0x1444b6?W 5002e0c1
      0x17:0x1444ba?W 9844de8
      0x17:0x1444be?W 8b909000
      $q
      EOF
      ----- End of code.
</PRE><P>
   If the error occurs while running a FoxPro executable, use the following
   code:
<P>
<P><PRE>      ----- Beginning of code for FoxPro executable.
      ----- begin pfix -- save the contents into a file and make
      ----- executable with "chmod +x &lt;filename&gt;"
      echo “Fixes problem with the edit region ...”
      /etc/_fst foxr.pr &lt;&lt; EOF
      0x17:0xd2452?X\
      $q
      EOF
      echo “If the string:  0x8ec83ec is displayed above press y to
<PRE></PRE>        continue: \c”
      read foo
      if [ “$foo” != “y” ]
      then exit 0
      fi
      /etc/_fst -w foxr.pr &lt;&lt; EOF
      0x17:0xd2452?W 800068ec
      0x17:0xd2456?W 458b0000
      0x17:0xd245a?W 54408b08
      0x17:0xd245e?W 5002e0c1
      0x17:0xd2462?W 84a89e8
      0x17:0xd2466?W 8b909000
      $q
      EOF
      ----- End of code.

</PRE><P><LI>Save the script file, and name it pfix. Enter the following command to
   make the script file executable:
<P>
   chmod +x pfix

<P><LI>Carefully compare the contents of the script file with the script text
   shown in step 3. Then execute the script by typing the following command
   at the UNIX system prompt:
<P>
   ./pfix
<P>
</OL>Once this script has run successfully, the FoxPro binary will have been
patched.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the Microsoft products
listed at the beginning of this article. This problem is correctable by
applying the patch script described in the "Workaround" section of this
article.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 2.60 FoxUnix buglist2.60 patch error 11 edit<BR>
region<BR>
KBCategory: kbprg kbbuglist kbfixlist<BR>
KBSubcategory: FxprgGeneral<BR>
Keywords          : FxprgGeneral kbbuglist kbfixlist kbprg<BR>
Version           : 2.60<BR>
Platform          : UNIX<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 26, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
