

<HTML>
<HEAD>
<TITLE>PRB: How to Remove ^M (CHR(13)) from FoxPro UNIX Text File </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q142285">
<META NAME="KBModify" CONTENT="1996/01/15">
<META NAME="KBCreate" CONTENT="1996/01/08">
<META NAME="Keywords" CONTENT="kbinterop kbprb">
<META NAME="KBArea" CONTENT="Support; KB; foxpro, crossnet, odbc">
<META NAME="Description" CONTENT="  Foxpro for UNIX places a carriage return/line feed pair ( 0D 0A in hex ) at the end of lines in text files that were created by commands such as REPORT FORM xxxx TO FILE yyyy in addition to any printer codes that might be appropriate (if _PDSETUP c...">
<META NAME="Product" CONTENT="Visual FoxPro">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBRZ,QAUD,QBXT,QA5V,QAIB,QAEF,QAHH,QAH4,QACI,QAVX,QAVW,QAUJ,QACR,QBLO,QAI4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: How to Remove ^M (CHR(13)) from FoxPro UNIX Text File</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 15, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q142285</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft FoxPro for UNIX, version 2.6
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Foxpro for UNIX places a carriage return/line feed pair ( 0D 0A in hex ) at
the end of lines in text files that were created by commands such as REPORT
FORM xxxx TO FILE yyyy in addition to any printer codes that might be
appropriate (if _PDSETUP contains a valid printer driver name).
<P>
Not all UNIX programs are designed to accommodate the carriage return
character.
<P>
<P><h2>CAUSE</h2>
 
<P>
Foxpro expects the carriage return/line feed pair to be a proper line
termination indicator and thus places it at the end of lines in text files
it creates.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
A program, such as the example below, may be used to read the text file
after it is created by Foxpro and then output a new file, devoid of the ^M
(CHR(13)) terminator for use by other UNIX programs.
<P>
* begin strip13.prg
* Created to strip the ^M's (chr(13)) out of .TXT files that are
* routinely added by Foxpro at the end of each line.
PARAMETER out_fname
IF .NOT. FILE(out_fname)
<PRE>    WAIT WINDOW 'INPUT FILE ' + out_fname + ' does not exist'
</PRE>ELSE
<PRE>    in_fname='input.txt'        &amp;&amp; name to change original file to
    IF FILE(in_fname)            &amp;&amp; during the 'stripping' process
        DELETE FILE &amp;in_fname
    ENDIF

    RENAME &amp;out_fname TO &amp;in_fname
    in_fh = FOPEN(in_fname)        &amp;&amp; Input File Handle
    ifp_size=FSEEK(in_fh,0,2)
    ifp_top=FSEEK(in_fh,0)
    IF ifp_size &lt;= 0
        WAIT WINDOW 'Your INPUT File Is Empty!!'
    ELSE
        IF FILE(out_fname)
            DELETE FILE out_fname    &amp;&amp; just in case
        ENDIF
        out_fh=FCREATE(out_fname)    &amp;&amp; Output File Handle
        DO WHILE .NOT. FEOF(in_fh)
            in_text = FGETS(in_fh)
            IF LEN(in_text)&gt;0        &amp;&amp; If blank line, don't write
                =FWRITE(out_fh,in_text+CHR(10))
            ENDIF
        ENDDO
    ENDIF
    =FCLOSE(in_fh)
    =FCLOSE(out_fh)
</PRE>ENDIF
* End of Strip13.prg
<P>
<P><h2>STATUS</h2>
 
<P>
This behavior is by design. FoxPro expects the carriage return/line feed
pair to be a proper line termination indicator and thus places it at the
end of lines in text files it creates.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Steps to Reproduce Behavior</h3>
 

<OL><P><LI>Create a simple REPORT FORM using a simple data table.

<P><LI>Run the report using this syntax:
<P>
   _PDSETUP=""
   REPORT FORM &lt;name&gt; to file Test.txt

<P><LI>Examine the file Test.txt using the UNIX vi editor. You will notice what
   appears to be a control-m at the beginning of each line after the first
   line.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 2.60 FoxUnix<BR>
KBCategory: kbinterop kbprb<BR>
KBSubcategory: FxinteropGeneral<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 15, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
