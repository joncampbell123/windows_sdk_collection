

<HTML>
<HEAD>
<TITLE>BUG: Array Expression with Assumed Size Arrays </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q106727">
<META NAME="KBModify" CONTENT="1995/12/10">
<META NAME="KBCreate" CONTENT="1993/11/14">
<META NAME="Keywords" CONTENT="kbtool kbbuglist kberrmsg">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  The compiler does not generate an error message when assumed size arrays and scalars are used in an array expression. The array expression does not perform any action.  In FORTRAN PowerStation 32, version 1.0, compiling the sample code below genera...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QAAP,QAB9,QBVV,QATO,QBBI,QA4Q,QAKP,QBFY,QALZ,QAK1,QBDM,QAX6,QAU3,QAR4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Array Expression with Assumed Size Arrays</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 10, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q106727</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 5.0 and 5.1
<LI>Microsoft FORTRAN for OS/2, versions 5.0 and 5.1
<LI>Microsoft FORTRAN PowerStation for MS-DOS versions 1.0 and 1.0a
<LI>Microsoft FORTRAN PowerStation 32 version 1.0 and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The compiler does not generate an error message when assumed size arrays
and scalars are used in an array expression. The array expression does not
perform any action.
<P>
In FORTRAN PowerStation 32, version 1.0, compiling the sample code below
generates:
<P>
<PRE>   Command line error D2030 : INTERNAL COMPILER ERROR in
   'C:\LANG\FPSNT\BIN\f13232.exe'
      Please see the Microsoft Support Services section in the manual for
       more information

</PRE>For Fortran PowerStation 4.0 the error message given for referenced
assumed-size arrays is:
<P>
<PRE>   error FOR2305: invalid appearance of assumed-size array name S

</PRE><h2>RESOLUTION</h2>
 
<P>
Do not use assumed size arrays in an array expression.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the Microsoft products
listed at the beginning of this article. We are researching this problem
and will post new information here in the Microsoft Knowledge Base as it
becomes available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The Microsoft FORTRAN PowerStation "Language Guide" states that arrays
in an array expression must "conform", and that one of the
requirements for conforming is that the dimensions of the array be
known at compile time. The dimensions are not known at compile time
for assumed size arrays. Therefore, they are not conforming and must
not be used in array expressions.
<P>
NOTE: If the array is declared as adjustable, an appropriate error
message is generated:
<P>
<PRE>   error F2650: S : array expression : cannot be adjustable-size array

</PRE>NOTE: If the array expression contains both a fully specified array
and assumed size array, the correct error message is generated:
<P>
<PRE>   error F2651: S : array expression : argument does not conform

</PRE><h3>Sample Code</h3>
 
<P>
Compile options: none
<P>
<PRE>      INTEGER*4 FUNCTION SP(s,n)
      INTEGER*4 n, s(*)
</PRE>c      INTEGER*4 n, s(n) !Adjustable size declaration
<PRE>c      INTEGER*4 t(2)    !Fully specified array
      s = n
c      t = s             !Fully specified array and assumed size array
      SP = s(1)
      END

      integer sp, s(2)
      n = 2
      s = 1
      i = SP(s,n)
      print *, i, s
      end
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 4.00 5.00 5.10<BR>
KBCategory: kbtool kbbuglist kberrmsg<BR>
KBSubcategory: FLIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 10, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
