

<HTML>
<HEAD>
<TITLE>FIX: F1001: grammar.c, Line 101, Assumed-Size Array </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q86454 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/07/07">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  Compiling a program that uses the C attribute in an INTERFACE statement to a subprogram that accepts an assumed-size array as an argument may generate the following error with Microsoft FORTRAN version 5.0:     fatal error F1001: Internal Compiler ...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QBFY,QAAP,QAPN,QAB4,QBBS,QAR4,QAGI,QAKP,QA4Q,QAOT,QAD7,QBXT,QBVV,QA5V V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: F1001: grammar.c, Line 101, Assumed-Size Array</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q86454 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.10 5.00 | 4.10 5.00
<PRE>MS-DOS              | OS/2
</PRE>kbtool kbfixlist kbbuglist kberrmsg kbcode
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.01,.4.1, and 5.0
<LI>Microsoft FORTRAN for OS/2, versions 4.1 and 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Compiling a program that uses the C attribute in an INTERFACE statement to
a subprogram that accepts an assumed-size array as an argument may generate
the following error with Microsoft FORTRAN version 5.0:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
                      (compiler file '@(#)grammar.c:1.2',line 101)

</PRE>FORTRAN versions 4.0, 4.01, and 4.1 generate the following error:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
                      (compiler file '@(#)grammar.c:1.27',line 101)

</PRE><h2>CAUSE</h2>
 
<P>
There are two similar ways to cause this internal compiler error:

<UL><LI>Compile code that has a C attribute on a subprogram name in an
   INTERFACE statement when the subprogram has an assumed size
   array as a formal argument and the REFERENCE attribute is not
   specified on the array name.
<P>
   -or-

<LI>Compile code that has a C attribute on a subprogram name in an
   EXTERNAL statement when the subprogram is passed an array as an
   argument.
<P>
</UL><h2>RESOLUTION</h2>
 
<P>
Use one of the following workarounds:

<UL><LI>Put the REFERENCE attribute on array formal arguments in the
   INTERFACE statement to prevent the problem from occurring. This
   is the only way to pass arrays and is only making explicit what
   is implicit functionality with the C attribute.
<P>
   -or-

<LI>Do not use put the C attribute on names using the EXTERNAL
   statement. Use the INTERFACE statement instead.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0, 4.01,
4.1, and 5.0. This problem was corrected in FORTRAN version 5.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following code can be used to generate the error:
<P>
<P><h3>Sample Code 1</h3>
 
<P>
<PRE>      interface to subroutine sub1[c] (array)
      integer array(*)
      end

      integer array(10)
      call sub1(array)
      end

</PRE>The following code also generates the error:
<P>
<P><h3>Sample Code 2</h3>
 
<P>
<PRE>      external sub1[c]
      integer array(10)
      call sub1(array)
      end

</PRE>The following code corrects the problem and does not generate the
error:
<P>
<P><h3>Sample Code 3</h3>
 
<P>
<PRE>      interface to subroutine sub1[c] (array)
      integer array[reference](*)
      end

      integer array(10)
      call sub1(array)
      end
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.10 5.00 5.10 buglist4.00 buglist4.10<BR>
buglist5.00 fixlist5.10<BR>
KBCategory: kbtool kbfixlist kbbuglist kberrmsg<BR>
KBSubcategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
