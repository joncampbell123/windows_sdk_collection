

<HTML>
<HEAD>
<TITLE>FIX: QuickWin Floating-Point Error Output Sent to COM1 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q86065 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/06/28">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  When running a QuickWin application created by Microsoft FORTRAN version 5.1 in Microsoft Windows version 3.0 or 3.1 and a math exception is raised, Windows may generate the following error message:     System Error: Cannot write to device AUX.  Su...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QAAP,QAKP,QBFY,QAN2,QBQT,QDL9,QBWO,QBWN,QA5A,QAH4,QAR4,QAKN,QBC9,QBC8 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: QuickWin Floating-Point Error Output Sent to COM1</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q86065 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10   | 5.10
MS-DOS | OS/2
kbprg kbfixlist kbbuglist kberrmsg
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, version 5.1
<LI>Microsoft FORTRAN for OS/2, version 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When running a QuickWin application created by Microsoft FORTRAN version
5.1 in Microsoft Windows version 3.0 or 3.1 and a math exception is raised,
Windows may generate the following error message:
<P>
<PRE>   System Error: Cannot write to device AUX.

</PRE>Subsequently, under Windows 3.0 a dialog box reports
<P>
<PRE>   UNRECOVERABLE APPLICATION ERROR, floating point error: &lt;errortype&gt;

</PRE>where &lt;errortype&gt; is the type of error that occurred. The errors may be any
of the following:

<UL><LI>invalid
<LI>denormal
<LI>divide by 0
<LI>overflow
<LI>underflow
<LI>inexact
<LI>unemulated
<LI>square root
<LI>stack overflow
<LI>stack underflow
<P>
</UL>Under Windows 3.1, an unrecoverable application error (UAE) message is
generated with the error type, and then the application is closed.
<P>
<P><h2>CAUSE</h2>
 
<P>
The UAE is expected behavior, but the error output text is also being
redirected to COM1. If COM1 is not connected to a receiving-capable device,
the error (above) referring to AUX may result. The FORTRAN QuickWin run-
time library is using an error message output routine that includes some
internal debugging output directed to COM1.
<P>
The actual messages shown on a debug terminal are:
<P>
<PRE>   C RUNTIME ERROR M6101: MATH - floating-point error: invalid
   C RUNTIME ERROR M6102: MATH - floating-point error: denormal
   C RUNTIME ERROR M6103: MATH - floating-point error: divide by 0
   C RUNTIME ERROR M6104: MATH - floating-point error: overflow
   C RUNTIME ERROR M6105: MATH - floating-point error: underflow
   C RUNTIME ERROR M6106: MATH - floating-point error: inexact
   C RUNTIME ERROR M6107: MATH - floating-point error: unemulated
   C RUNTIME ERROR M6108: MATH - floating-point error: square root
   C RUNTIME ERROR M6110: MATH - floating-point error: stack overflow
   C RUNTIME ERROR M6111: MATH - floating-point error: stack underflow

</PRE><h2>RESOLUTION</h2>
 
<P>
Error checking prior to a numeric division may prevent this problem. Also,
installing a user-defined floating-point exception handling procedure with
the SIGNALQQ() function can be used to prevent the output of floating-point
errors.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft FORTRAN version
5.1 for MS-DOS and OS/2. This problem was corrected in FORTRAN
PowerStation.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Sample Code 1</h3>
 
<P>
The following code when compiled with the /MW option will reproduce
the problem:
<P>
<PRE>      PROGRAM Test_Math_Exception
      REAL*4 Divisor, Result /10.0/
      REAL*4 A  /1.0/, B /1.0/

</PRE>c This code will generate an M6103 - floating point error: divide by 0
<PRE>      Divisor = A - B
      Result = 10.0 / Divisor

      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.10<BR>
KBCategory: kbprg kbfixlist kbbuglist kberrmsg<BR>
KBSubcategory: FORTLngIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
