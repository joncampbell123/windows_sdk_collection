

<HTML>
<HEAD>
<TITLE>FIX: Incorrect Results, F4803 Error, Function ENTRY Statement </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q24628 ">
<META NAME="KBModify" CONTENT="1997/09/10">
<META NAME="KBCreate" CONTENT="1987/12/03">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  An application generates incorrect results. When FORTRAN for MS-DOS versions 4.0, 4.0a, or 4.01 compiles the program, the compiler generates the following message:     warning F4803  FUNCTION : return variable not set  CAUSE =====  The problem occu...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAUD,QAY5,QAUJ,QAYL,QAB9,QBV8,QAH4,QAJQ,QA4Q,QAAP,QALW,QBXS,QAR4,QAP2,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Incorrect Results, F4803 Error, Function ENTRY Statement</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q24628 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.00A 4.01 4.10 5.00 | 4.10 5.00
<PRE>MS-DOS                    | OS/2
</PRE>kbprg kbfixlist kbbuglist kbcode
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.0a, 4.01, 4.1, 5.0
<LI>Microsoft FORTRAN for OS/2, versions 4.1, 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An application generates incorrect results. When FORTRAN for MS-DOS
versions 4.0, 4.0a, or 4.01 compiles the program, the compiler generates
the following message:
<P>
<PRE>   warning F4803  FUNCTION : return variable not set

</PRE><h2>CAUSE</h2>
 
<P>
The problem occurs because the compiler requires the return value of an
entry to be set using the entry name. The ANSI FORTRAN-77 standard
states that the return value can be set using the entry name or the
original function name if they have the same type.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, set the return value of a entry that is
part of a function by using the entry name instead of the function name.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0,
4.0a, 4.01, 4.10, and 5.00 for MS-DOS and versions 4.1 and 5.0 for OS/2.
This problem was corrected in FORTRAN version 5.10 for MS-DOS and OS/2.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Pages 15-12 and 15-13 of the ANSI FORTRAN-77 standard include the following
statement.
<P>
<PRE>   15.7.3 Entry Association. Within a function subprogram, all variables
   whose names are also the names of entries are associated with each other
   and with the variable, if any, whose name is also the name of the
   function subprogram (17.1.3). Therefore, any such variable that becomes
   defined causes all associated variables of the same type to become
   defined and all associated variables of different type to become
   undefined.

</PRE>Therefore, it should be possible to set the return value of an entry that
belongs to a function through the function name or the entry name if both
have the same type.
<P>
The following code example demonstrates this problem.
<P>
<P><h3>Sample Code #1</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      PROGRAM TEST
      INTEGER FUN1, ENT1
      WRITE (*, *) FUN1(3), ENT1(3)
      END

      INTEGER FUNCTION FUN1(I)
      INTEGER ENT1

      FUN1 = I
      RETURN

      ENTRY ENT1(I)

      FUN1 = 2 * I
      RETURN
      END

</PRE>The following code example demonstrates one method to avoid this problem.
<P>
<P><h3>Sample Code #2</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      PROGRAM TEST
      INTEGER FUN1, ENT1
      WRITE (*, *) FUN1(3), ENT1(3)
      END

      INTEGER FUNCTION FUN1(I)
      INTEGER ENT1

      FUN1 = I
      RETURN

      ENTRY ENT1(I)

      ENT1 = 2 * I
      RETURN
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.00a 4.01 4.10 5.00 buglist4.00<BR>
buglist4.00a buglist4.01 buglist4.10 buglist5.00 fixlist5.10<BR>
KBCategory: kbtool kbfixlist kbbuglist kbcode<BR>
KBSubCategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 10, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
