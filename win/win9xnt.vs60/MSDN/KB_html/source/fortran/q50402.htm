

<HTML>
<HEAD>
<TITLE>BUG: F1001 Error or Run-time Hang with /NDdatasegment Option </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q50402 ">
<META NAME="KBModify" CONTENT="1995/07/11">
<META NAME="KBCreate" CONTENT="1989/10/30">
<META NAME="Keywords" CONTENT="kbtool kbbuglist kberrmsg">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  An application compiled with Microsoft FORTRAN version 5.0 or 5.1 hangs and stops responding.  An attempt to build the same application with Microsoft FORTRAN versions 4.0, 4.01, or 4.1 fails and the compiler generates one of the following messages...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAAP,QAB4,QAOT,QAKP,QAH4,QBV8,QBXT,QBFY,QA5V,QAIB,QAEF,QDJO,QBVV,QA7Y,QAJ9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: F1001 Error or Run-time Hang with /NDdatasegment Option</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 11, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q50402 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS versions 4.0, 4.01, 4.1, 5.0, 5.1
<LI>Microsoft FORTRAN for OS/2, versions 4.1, 5.0, 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An application compiled with Microsoft FORTRAN version 5.0 or 5.1
hangs and stops responding.
<P>
An attempt to build the same application with Microsoft FORTRAN
versions 4.0, 4.01, or 4.1 fails and the compiler generates one of
the following messages. For version 4.1:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
   (compiler file '@(#)MDmisc.c:1.78', line 883)

</PRE>For version 4.01:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
   (compiler file '@(#)MDmisc.c:1.77', line 876)

</PRE>For version 4.0:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
   (compiler file '@(#)MDmisc.c:1.70', line 828)

</PRE><h2>CAUSE</h2>
 
<P>
The application uses the /NDdatasegment option to name its data
segment, assigns a value to a two-byte integer, and writes the
value to the screen.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To avoid this problem, perform one of the following two steps:

<UL><LI>Modify the source code to remove the WRITE statement.
<P>
   -or-

<LI>Modify the compiler command line to remove the /NDdatasegment
   option.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0, 4.01,
4.1, 5.0, and 5.1 for MS-DOS and versions 4.1, 5.0, and 5.1 for OS/2.
<P>
This is not a problem in FORTRAN PowerStation, which does not support the
/ND option.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following code example demonstrates the errors listed above. When
a module does not perform any I/O operations, no errors occur and the
application runs correctly.
<P>
<P><h3>Sample Code</h3>
 
<P>
C Compile options needed: /NDdatasegment
<P>
<PRE>      INTEGER*2 N
      N = 1
      WRITE (*, *) N
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.01 4.10 5.00 5.10<BR>
KBCategory: kbtool kbbuglist kberrmsg<BR>
KBSubcategory: FLIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 11, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
