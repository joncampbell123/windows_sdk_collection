

<HTML>
<HEAD>
<TITLE>FIX: PAUSE Command with Input Redirection in FORTRAN </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q67098 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1990/11/20">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  Beginning with Microsoft FORTRAN version 4.0, the PAUSE command allows you to execute operating system commands while program execution is suspended. When program input is redirected from the keyboard to a file, the PAUSE statement does not work co...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QADN,QAB9,QAH4,QAPN,QBV8,QBFN,QA8T,QBVV,QAVX,QAVW V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: PAUSE Command with Input Redirection in FORTRAN</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q67098 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.10 5.00 | 4.10 5.00
<PRE>MS-DOS              | OS/2
</PRE>kbprg kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.01, 4.1, and 5.0
<LI>Microsoft FORTRAN for OS/2, versions 4.1 and 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Beginning with Microsoft FORTRAN version 4.0, the PAUSE command allows you
to execute operating system commands while program execution is suspended.
When program input is redirected from the keyboard to a file, the PAUSE
statement does not work correctly if the program READs from the redirection
file or if the program contains multiple PAUSE statements.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.x
and 5.0. This problem was corrected in FORTRAN version 5.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When input is redirected from a file and the only data read from the
file is one MS-DOS command for a PAUSE statement, the program works
correctly. The following short program gives an example:
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>      write(*,*) 'Before PAUSE'
      pause
      write (*,*) 'After PAUSE'
      end

</PRE>Data file, TEST.DAT:
<P>
<PRE>   Ver

</PRE>Command line:
<P>
<PRE>   C:\&gt; TEST &lt; TEST.DAT

</PRE>Output:
<P>
<PRE>   Before PAUSE
   Pause - Please enter a blank line (to continue) or a
     DOS command.

   MS-DOS Version x.xx

   After PAUSE

</PRE>If another PAUSE statement is added to the program, only the command
for the first PAUSE is executed. The program appears to read to the
end of the redirection file when it encounters the first PAUSE. If a
READ statement is added to the program after the PAUSE statement, as
in the next example, the program again reads to the end of the file.
In this case, ERROR 6501 is generated.
<P>
Code:
<P>
<PRE>      integer i
      write(*,*) 'Before PAUSE'
      pause
      write (*,*) 'After PAUSE'
      read(*,*) i
      write (*,*) i
      end

</PRE>Data:
<P>
<PRE>   Ver
   1

</PRE>Output:
<P>
<PRE>   Before PAUSE
   Pause - Please enter a blank line (to continue) or a
     DOS command.

   MS-DOS Version x.xx

   After PAUSE
   run-time error F6501: READ(CON)
   - end of file encountered

</PRE>When the READ statement is before the PAUSE statement, the DOS command
is not executed:
<P>
Code:
<P>
<PRE>      integer i
      read(*,*) i
      write (*,*) i
      write(*,*) 'Before PAUSE'
      pause
      write (*,*) 'After PAUSE'
      end

</PRE>Data:
<P>
<PRE>   1
   Ver

</PRE>Output:
<P>
<PRE>             1
   Before PAUSE
   Pause - Please enter a blank line (to continue) or a
     DOS command.

   After PAUSE

</PRE>These problems are caused by the PAUSE command not reading data from
the redirection file in the same way a READ statement would.
<P>
<P><h3>Workarounds</h3>
 
<P>
Do not use redirection on a program with more than one PAUSE
statement or a combination of PAUSE and READ statements.
<P>
Use the OPEN command to open a file to be used for input
for READ statements.
<P>
Use calls to the C functions SYSTEM or SPAWNLP instead of PAUSE
statements to execute DOS commands. For more information on these
functions, see page 86 of the "FORTRAN Advanced Topics" manual for
version 5.00 or the DEMOEXEC.FOR program included with versions 4.x
and 5.00 of FORTRAN.
<P>
This problem does not occur in earlier versions of FORTRAN because the
functionality of the PAUSE statement is different. In earlier
versions, you are not allowed to execute DOS commands after a PAUSE.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00<BR>
KBCategory: kbprg kbfixlist kbbuglist<BR>
KBSubcategory: FORTLngIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
