

<HTML>
<HEAD>
<TITLE>FIX: READ Does Not Pause or F6501 Error After CTRL+Z </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q81326 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/03/03">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  In an application compiled with Microsoft FORTRAN, when the user responds to a keyboard READ statement with a CTRL+Z character, subsequent READ statements do not pause for input or the run-time library generates the following message:     run-time ...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBFN,QAPN,QAYL,QADN,QAB9,QBXS,QA7Y,QAOX,QAJ9,QAH4,QBNT,QBVV,QAR4,QAAP,QA8T V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: READ Does Not Pause or F6501 Error After CTRL+Z</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q81326 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.10 5.00 5.10
MS-DOS
kbprg kbbuglist kbfixlist kberrmsg
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 4.0, 4.01, 4.1, 5.0, 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In an application compiled with Microsoft FORTRAN, when the user responds
to a keyboard READ statement with a CTRL+Z character, subsequent READ
statements do not pause for input or the run-time library generates the
following message:
<P>
<PRE>   run-time error F6501: READ(CON)
   - end of file encountered

</PRE><h2>CAUSE</h2>
 
<P>
When the user enters a CTRL+Z character to signify the end-of-file (EOF)
condition, the run-time library sets an internal variable to indicate that
the EOF has occurred. This variable remains set until the application
executes a PRINT or WRITE statement. When the READ statement includes the
END modifier and the internal EOF variable is set, execution branches
immediately to the statement specified in the END modifier. When the READ
statement does not include the END modifier and the internal EOF variable
is set, the F6501 error occurs.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To address this problem, use the PRINT or WRITE statement to send
information to the screen and to reset the internal EOF flag prior to each
READ that may receive the CTRL+Z. Using the graphics function OUTTEXT to
send output to the screen does not clear the internal EOF flag.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in FORTRAN versions 4.0, 4.01,
4.1, 5.0 and 5.1 for MS-DOS. This problem was corrected in FORTRAN
PowerStation, version 1.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following code sample demonstrates this problem. If the user
enters a CTRL+Z for the first READ statement, the application goes
into an infinite loop.
<P>
<P><h3>Sample Code #1</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      INCLUDE 'FGRAPH.FI'
      INCLUDE 'FGRAPH.FD'
      CHARACTER*1 CHR

</PRE>10    READ (*, '(A)', END = 20) CHR
20    CALL OUTTEXT('Fill the screen!')
<PRE>      READ (*, '(A)', END = 10) CHR
      PRINT *, CHR
      END

</PRE>The following code example uses the WRITE statement to clear the
internal EOF flag before the application encounters any EOF condition.
When the user enters CTRL+Z, the application immediately resets the
EOF flag and the each READ statement in the application pauses for
input as expected.
<P>
<P><h3>Sample Code #2</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      INCLUDE 'FGRAPH.FI'
      INCLUDE 'FGRAPH.FD'
      CHARACTER*1 CHR

      WRITE (*, *)
</PRE>10    READ (*, '(A)', END = 20) CHR
20    CALL OUTTEXT('WRITES ONE LINE!')
<PRE>      READ (*, '(A)', END = 10) CHR
      PRINT *, CHR
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.01 4.10 5.00 5.10 buglist5.00<BR>
buglist5.10 fixlist1.00<BR>
KBCategory: kbprg kbbuglist kbfixlist kberrmsg<BR>
KBSubcategory: FORTLngIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
