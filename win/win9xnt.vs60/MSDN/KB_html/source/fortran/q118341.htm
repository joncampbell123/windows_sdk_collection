

<HTML>
<HEAD>
<TITLE>FIX: MATHERRQQ: Access Violation on C8ARG1 and C16ARG1 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q118341">
<META NAME="KBModify" CONTENT="1997/09/18">
<META NAME="KBCreate" CONTENT="1994/07/14">
<META NAME="Keywords" CONTENT="FORTLngIss kbbuglist kberrmsg kbfixlist kbprg">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  In Windows NT, Dr. Watson reports an access violation when parts of MATHERRQQ's INFO record are passed to other routines. The problem occurs when passing MTH$E_INFO members: C8ARG1, C8ARG2, C16ARG1, or C16ARG2.  In MS-DOS (Windows, version 3.1), th...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAOX,QBWP,QAD7,QAH7,QAH6,QAYY,QAGX,QAB4,QA5V,QAR4,QA1S,QAAP,QA2Q,QAYL,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: MATHERRQQ: Access Violation on C8ARG1 and C16ARG1</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q118341</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00 1.00a  | 1.00
<PRE>MS-DOS      | WINDOWS NT
</PRE>kbprg kberrmsg kbcode kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN PowerStation for MS-DOS, versions 1.0 and 1.0a
<LI>Microsoft FORTRAN PowerStation 32 for Windows NT, version 1.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In Windows NT, Dr. Watson reports an access violation when parts of
MATHERRQQ's INFO record are passed to other routines. The problem occurs
when passing MTH$E_INFO members: C8ARG1, C8ARG2, C16ARG1, or C16ARG2.
<P>
In MS-DOS (Windows, version 3.1), the error message is:
<P>
<PRE>   DOSXMSF : fatal error DX1020: unhandled exception:
             General Protection Fault.

</PRE><h2>RESOLUTION</h2>
 
<P>
Do not pass C8ARG1, C8ARG2, C16ARG1, or C16ARG2 directly to another
routine. Assign the value to a temporary variable and pass the variable
instead.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the products listed at the
beginning of this article. This problem was corrected in Microsoft FORTRAN
PowerStation 32, version 4.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
To reproduce the problem, compile and run the sample code below.
<P>
To use the program without error, comment out the four lines that print
C8ARG1, C8ARG2, C16ARG1, and C16ARG2.
<P>
<P><h3>Sample Code</h3>
 
<P>
c compile options needed: none
<P>
<PRE>      include 'flib.fi'
      implicit none
      include 'flib.fd'
      complex a,b,c
      call LCWRQQ(#133F)
      a=(233.75875785857,145.8498498998989)
      b=(345.84984984900,298.849849849989)
      c=a**b
      write(*,*)'****** successful completion ******'
      end

      SUBROUTINE MATHERRQQ(name, length, info, retcode)
      INCLUDE 'FLIB.FD'
      INTEGER*2 length
      CHARACTER name(length)
      RECORD / MTH$E_INFO / info
      INTEGER*2 retcode
      PRINT *, 'Entered MATHERRQQ'
      PRINT *, 'Failing function: ', name, '      Length: ', length
      PRINT *, 'Error Type: ', info.errcode

      SELECT CASE (info.errcode)
      CASE (MTH$E_OVERFLOW)
         PRINT *, 'OVERFLOW'
      CASE DEFAULT
         PRINT *, 'UNKNOWN'
      END SELECT

      SELECT CASE (info.ftype)
      CASE (TY$CMPLX8)
         PRINT *, 'Type: COMPLEX*8'
         PRINT *, 'Argument1: ', info.c8arg1
         PRINT *, 'Argument2: ', info.c8arg2
         info.c8res = 0.0
         retcode = 1
      CASE (TY$CMPLX16)
         PRINT *, 'Type: COMPLEX*16'

         PRINT *, 'Argument1: ', info.c16arg1
         PRINT *, 'Argument2: ', info.c16arg2
         info.c16res = 0.0
         retcode = 1
      END SELECT
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 1.00a<BR>
KBCategory: kbprg kberrmsg kbfixlist kbbuglist<BR>
KBSubcategory: FORTLngIss<BR>
Keywords          : FORTLngIss kbbuglist kberrmsg kbfixlist kbprg<BR>
Version           : 1.00 1.00a  | 1.00<BR>
Platform          : MS-DOS NT WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
