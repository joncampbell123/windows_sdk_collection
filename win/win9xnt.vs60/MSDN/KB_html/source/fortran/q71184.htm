

<HTML>
<HEAD>
<TITLE>FIX: FLOODFILL Fails to Fill to the Boundary Color </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q71184 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1991/04/09">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  Programs compiled with Microsoft FORTRAN version 5.0 or 5.1 for MS-DOS that use the FLOODFILL graphics function may fail to fill an area to the boundary color.  The FLOODFILL function may stop filling an area when it encounters the fill color, inst...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBCF,QAG9,QAIB,QBCE,QAM3,QBT5,QAK4,QAPG,QBFN,QA28,QATJ,QANX,QAR4,QAKP,QAY5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: FLOODFILL Fails to Fill to the Boundary Color</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q71184 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.00 5.10
MS-DOS
kbprg kbfixlist kbbuglist kbcode
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS, versions 5.0 and 5.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Programs compiled with Microsoft FORTRAN version 5.0 or 5.1 for
MS-DOS that use the FLOODFILL graphics function may fail to fill an
area to the boundary color.
<P>
The FLOODFILL function may stop filling an area when it encounters the
fill color, instead of the boundary color.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To avoid this problem, remap the index of the fill color to a
different color index using the REMAPPALETTE function. This method
allows the FLOODFILL function to successfully fill over the existing
fill color, right to the edge of the boundary color.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft FORTRAN
versions 5.0 and 5.1 for MS-DOS. This problem was corrected in FORTRAN
PowerStation.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following example program illustrates the problem:
<P>
<P>
<PRE>      INCLUDE 'FGRAPH.FI'
      INCLUDE 'FGRAPH.FD'

      INTEGER*2 dummy

      dummy = setvideomode($MAXRESMODE)
      dummy = setcolor(7)             ! White for rectangle border
      dummy = rectangle($GBORDER, 100, 100, 200, 200)
      dummy = setcolor(2)             ! Green to fill rectangle
      read (*,*)
      dummy = floodfill(120, 120, 7)  ! Fill to White border
      read (*,*)
      dummy = setcolor(4)             ! Red for 2nd rectangle border
      dummy = rectangle($GBORDER, 125, 80, 175, 250)

      dummy = setcolor(2)             ! Green to fill 2nd rectangle

      read (*,*)
      dummy = floodfill(150, 90, 4)   ! Fill to Red border
      read (*,*)
      dummy = setvideomode($DEFAULTMODE)
      END

</PRE>Remapping a different color index to the fill color before calling
FLOODFILL the second time will prevent the problem from occurring. The
following program illustrates this solution:
<P>
<PRE>      INCLUDE 'FGRAPH.FI'
      INCLUDE 'FGRAPH.FD'

      INTEGER*2 dummy

      dummy = setvideomode($MAXRESMODE)
      dummy = setcolor(7)             ! White for rectangle border
      dummy = rectangle($GBORDER, 100, 100, 200, 200)
      dummy = setcolor(2)             ! Green to fill rectangle
      read (*,*)
      dummy = floodfill(120, 120, 7)  ! Fill to White border
      read (*,*)
      dummy = setcolor(4)             ! Red for 2nd rectangle border
      dummy = rectangle($GBORDER, 125, 80, 175, 250)

      dummy = remappalette(3,$green)  ! Remap color index 3 to green

      dummy = setcolor(3)             ! Green to fill 2nd rectangle

      read (*,*)
      dummy = floodfill(150, 90, 4)   ! Fill to Red border
      read (*,*)
      dummy = setvideomode($DEFAULTMODE)
      END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00 5.10<BR>
KBCategory: kbprg kbfixlist kbbuglist kbcode<BR>
KBSubcategory: FORTLngIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
