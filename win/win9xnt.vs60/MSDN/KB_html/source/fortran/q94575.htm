

<HTML>
<HEAD>
<TITLE>FIX: R6003 or Hang Debugging FORTRAN COMPLEX Array </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q94575 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1993/01/11">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  An attempt to debug with CodeView an application developed with Microsoft FORTRAN fails when CodeView terminates with an error or causes the machine to halt. This error occurs with applications developed only with FORTRAN and those developed using ...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QBFY,QDL9,QBWO,QBWN,QAKP,QABE,QAB4,QAR4,QBWQ,QAAP,QAJH,QDJO,QBVV,QAVX V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: R6003 or Hang Debugging FORTRAN COMPLEX Array</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q94575 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.05 | 4.00 4.01
<PRE>MS-DOS         | WINDOWS
</PRE>kbtool kbcode kberrmsg kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft CodeView for MS-DOS, versions 4.0, 4.01, and 4.05
<LI>Micorosft CodeView for Windows, versions 4.0 and 4.01
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An attempt to debug with CodeView an application developed with Microsoft
FORTRAN fails when CodeView terminates with an error or causes the machine
to halt. This error occurs with applications developed only with FORTRAN
and those developed using another language with FORTRAN code.
<P>
When debugging the FORTRAN code in MS-DOS, CodeView may generate the
following error message:
<P>
<PRE>   run-time error R6003
   - integer divide by 0

</PRE>When debugging the FORTRAN code in Windows, the computer may hang and stop
responding until the computer is rebooted.
<P>
<P><h2>CAUSE</h2>
 
<P>
The FORTRAN code declares and uses an array of COMPLEX numbers.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, step over calls to FORTRAN modules that
contains an array of COMPLEX numbers. In most cases, CodeView can debug the
remainder of the code in the application without any problems.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in CodeView versions 4.0,
4.01, and 4.05 for MS-DOS and versions 4.0 and 4.01 for Windows. This
problem was corrected in CodeView version 4.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
To reproduce this problem in an application developed for the MS-DOS
environment, compile and debug the following mixed-language project.
To reproduce this problem in an application developed for the
Microsoft Windows environment, link the FORTRAN object file into the
GENERIC sample application provided with Microsoft C/C++ versions 7.0
and 7.0a and with the Microsoft Windows Software Development Kit
(SDK).
<P>
Microsoft CodeView version 4.1 does not have this problem, however
since the C++ and C expression evaluators do not support complex data
types, they are not displayed correctly.
<P>
<P><h3>Sample Code #1: CMIX.C: C Main Program</h3>
 
<P>
<PRE>/*
 * Compile options needed: None
 */

void extern far FORTRAN sub1(void);

void main(void)
</PRE>{
<PRE>   sub1();
</PRE>}
<P>
<P>
<P><h3>Sample Code #2: FORTMIX.FOR: FORTRAN Subroutine</h3>
 
<P>
C Compile options needed: None
<P>
<PRE>      SUBROUTINE SUB1
      COMPLEX A(1)
      A(1)=(1.0,1.0)
      END


</PRE><h3>Sample Code #3: MAKEFILE</h3>
 
<P>
# Make options needed: None
<P>
all: cmix.exe
<P>
fortmix.obj: fortmix.for
<PRE>   fl /c /Zi /Od /Gs fortmix.for

</PRE>cmix.obj: cmix.c
<PRE>   cl /c /Zi /Od /Gs /AL cmix.c

</PRE>cmix.exe: cmix.obj fortmix.obj
<PRE>   link cmix fortmix,, nul, /co /noe /nod llibc7 llibf7rc oldnames;
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00<BR>
KBCategory: kbtool kbcode kberrmsg kbbuglist kbfixlist<BR>
KBSubcategory: CvwIss<BR>
Keywords          : kb16bitonly<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
