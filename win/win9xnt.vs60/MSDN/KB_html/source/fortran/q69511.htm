

<HTML>
<HEAD>
<TITLE>FIX: F1001: omf_ms.c:1.118; Equivalence with Structure Element </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q69511 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1991/02/20">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; fortran">
<META NAME="Description" CONTENT="  Using Microsoft FORTRAN 5.0 (under MS-DOS) to compile a program that uses an element of a structure in a READ or WRITE statement after that structure is used in an EQUIVALENCE statement, can result in the following error:     fatal error F1001: Int...">
<META NAME="Product" CONTENT="Fortran">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVW,QAVX,QAYL,QAAP,QAR4,QBFY,QA5V,QAIC,QAB4,QA8T,QAOT,QAH4,QBF0,QBE7,QBE6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: F1001: omf_ms.c:1.118; Equivalence with Structure Element</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q69511 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.00   | 5.00
MS-DOS | OS/2
kbtool kbfixlist kbbuglist kberrmsg kbappnote
<P>
 
The information in this article applies to:

<UL><LI>Microsoft FORTRAN for MS-DOS and OS/2, version 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Using Microsoft FORTRAN 5.0 (under MS-DOS) to compile a program
that uses an element of a structure in a READ or WRITE statement
after that structure is used in an EQUIVALENCE statement, can
result in the following error:
<P>
<PRE>   fatal error F1001: Internal Compiler Error
            (compiler file '@(#)omf_ms.c:1.118', line 1093)

</PRE>When compiling under OS/2, a protection violation is generated by the
third pass of the compiler.
<P>
<P><h2>CAUSE</h2>
 
<P>
The errors do not occur if the element of the structure is assigned
to a temporary variable, and then this temporary variable is used
in the READ or WRITE.
<P>
<P><h2>RESOLUTION/STATUS</h2>
 
<P>
An application note titled "FORTRAN 5.0 F1.EXE and F1L.EXE Structure
Patch" is available to correct these errors. To obtain this
application note, call Microsoft Product Support Services.
<P>
This file has been removed from the Software Library but can be
requested by calling Microsoft Product Support Services.
Microsoft has confirmed this to be a problem in FORTRAN version 5.0.
This problem was corrected in FORTRAN version 5.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Sample Code #1</h3>
 
c  The following program illustrates the problem:
<P>
<PRE>      structure /a/
      character*1 x
      end structure

      record /a/ test
      character*1 word
      equivalence (word,test)
      word = 'a'
      write(*,*) test.x
      end

</PRE><h3>Sample Code #2</h3>
 
c  Assigning the structure element to a temporary variable, as shown
c  below, and then using the temporary variable in the WRITE statement,
c  does not generate the errors.
<P>
<PRE>      structure /a/
      character*1 x
      end structure

      record /a/ test
      character*1 word, tmp
      equivalence (word,test)
      word = 'a'
      tmp = test.x
      write(*,*) tmp
      end

</PRE>If the /Zi compiler option is used to compile the program above, a
protection violation will result when compiling under OS/2. The
compiler will hang when run under MS-DOS. For more information, query
on the following:
<P>
<PRE>   /Zi and EQUIVALENCEing and RECORD and variables and hangs and machine
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.00 5.10 hf0225<BR>
KBCategory: kbtool kbfixlist kbbuglist kberrmsg kbappnote<BR>
KBSubcategory: FLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
