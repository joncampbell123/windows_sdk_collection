

<HTML>
<HEAD>
<TITLE>X400: Unable to Send or Receive Mail </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q124737">
<META NAME="KBModify" CONTENT="1998/03/09">
<META NAME="KBCreate" CONTENT="1995/01/10">
<META NAME="Keywords" CONTENT="MailGWX400 kb3rdparty kbbug3.00 kbbug3.20 kbfile kbfix">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  Version 3.2 of Microsoft Mail Gateway to X.400 may disconnect an existing session under heavy use conditions or it may be unable to establish outgoing or incoming connections, and it may display one or all of the following errors:     ERROR 3 (RTS)...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAI5,QBG2,QAAP,QAVZ,QAJ4,QBWS,QAB4,QBW6,QAO0,QAYC,QBVW,QA5E,QABA,QALG,QAHT V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>X400: Unable to Send or Receive Mail</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q124737</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.20
MS-DOS
kb3rdparty kbfile kbbug3.00 kbbug3.20 kbfix
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to X4.00, version 3.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Version 3.2 of Microsoft Mail Gateway to X.400 may disconnect an existing
session under heavy use conditions or it may be unable to establish
outgoing or incoming connections, and it may display one or all of the
following errors:
<P>
<PRE>   ERROR 3 (RTS): RTS open refused (Session limit exceeded)

   DEBUG (T4_recv): Connection xx: tp_wait() failed:15

   DEBUG (T4_send): Connection xx: tp_accept() failed:1

</PRE><h2>CAUSE</h2>
 
<P>
If the gateway is under heavy use, two errors may occur as it counts the
number of active connections:

<OL><P><LI>This count is incorrectly decremented with every occurrence of a
   connection request on the listening connection. This is incorrect; the
   listening connection is not an active connection. Eventually, the count
   will decrement to zero (0), and if a connection is active, it will be
   closed.

<P><LI>Every attempted connection used additional memory in RAM. The previous
   connection attempt was not being cleared from memory. The lack of memory
   results in the "tp-wait" errors. The "tp_accept" errors tell the sending
   MTA that the gateway cannot accept incoming connections at that time.
<P>
</OL>For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../pcmail/q119303.htm">Q119303</A></B>
   TITLE     : X400: Err Msg: ERROR 3 (RTS): RTS Open Refused...

</PRE></OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in versions 3.0 and 3.2 of
Microsoft Mail Gateway to X.400. This problem is corrected in X400GATE.EXE
version 3.2.12. If you do not have version 3.2.12 (or later), you can
download X400GA.EXE, a self-extracting file, on the following services:

<UL><LI>Microsoft's World Wide Web Site on the Internet
<P><PRE>      On the www.microsoft.com home page, click the Support icon.
      Click Knowledge Base, and select the product.
<PRE></PRE>      Enter kbfile <A href="http://support.microsoft.com/download/support/mslfiles/x400ga.exe">X400GA.EXE</A> <I>(size: 203636 bytes)</I> 
                             , and click GO!
      Open the article, and click the button to download the file.

</PRE><LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the Softlib/Mslfiles folder.
      Get <A href="http://support.microsoft.com/download/support/mslfiles/x400ga.exe">X400GA.EXE</A> <I>(size: 203636 bytes)</I> 
</PRE>
<LI>The Microsoft Network
<P><PRE>      On the Edit menu, click Go To, and then click Other Location.
      Type "mssupport" (without the quotation marks).
      Double-click the MS Software Library icon.
      Find the appropriate product area.
      Locate and Download X400GA.EXE.
</PRE>
<LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A href="http://support.microsoft.com/download/support/mslfiles/x400ga.exe">X400GA.EXE</A> <I>(size: 203636 bytes)</I> 
</PRE><P>
</UL>For additional information about downloading, please see the following
article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../zmiscellaneous/q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online
               Services

</PRE><h2>MORE INFORMATION</h2>
 
<P>
The updated X400GATE.EXE file includes the following modifications for the
causes listed above:

<OL><P><LI>The count is no longer decremented unless an active connection is
   released.

<P><LI>The TP4 stack is deactivated and reactivated with each connection
   attempt, freeing up memory.
<P>
</OL>There is also a workaround for the memory issue: the TP4 stack can be
allocated more memory by adjusting the [PLUTO] section of the PROTOCOL.INI
file, as follows:
<P>
<PRE>   [PLUTO]
     memory=8192

</PRE></OL>The default value is 512 bytes/connection. For more information about the
memory parameter, see Chapter 2 of the TP4/CLNP "Administrator's
Reference."
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words:<BR>
KBCategory: kb3rdparty kbfile kbbug3.00 kbbug3.20 kbfix<BR>
KBSubcategory: MailGWX400<BR>
Keywords          : MailGWX400 kb3rdparty kbbug3.00 kbbug3.20 kbfile kbfix<BR>
Version           : 3.20<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 9, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
