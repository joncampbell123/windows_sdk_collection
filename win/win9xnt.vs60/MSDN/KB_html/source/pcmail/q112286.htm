

<HTML>
<HEAD>
<TITLE>SMTP: Example of SMTP Gateway Log File </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q112286">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1995/06/30">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT=" The following is the log file that is generated by the Microsoft Mail Gateway to SMTP when you start it using the following command:     smtpgate -cd -lacsy  NOTE: Information in braces {} indicates comments or explanations of the log file contents....">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAYC,QBVW,QAY2,QAC2,QAR5,QAG7,QBWD,QAEV,QAD7,QAVV,QAAW,QBW4,QAUR,QAI5,QAIJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: Example of SMTP Gateway Log File</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q112286</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
The following is the log file that is generated by the Microsoft Mail
Gateway to SMTP when you start it using the following command:
<P>
<PRE>   smtpgate -cd -lacsy

</PRE>NOTE: Information in braces {} indicates comments or explanations of the
log file contents.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
08:50:03 - Tue Feb 23 08:50:03 1993 Microsoft Mail Gateway to SMTP V3.0
<PRE>   {Version number listed here}
</PRE>08:50:03 - Tue Feb 23 08:50:03 1993 Copyright 1991-1992 Microsoft
Corporation. All rights reserved.
08:50:03 - Running from X:\SMTPGATE.EXE
<PRE>   {Drive and path location of executable. Also where temporary files
   are built.}
</PRE>08:50:03 - Reading local configuration from m:smtp\local.cfg
<PRE>   {Local.cfg made &amp; modified from Admin program, in GATEWAY-SMTP-SETUP}
08:50:04 -   Local Domain = ".company.com"
08:50:04 -   SMTP Gateway Host Name = "marvgard"
08:50:04 -   SMTP Smart-Host IP = "11.1.16.15"
</PRE>08:50:04 - Reading local Microsoft Mail Post Offices from m:smtp\local.cfg
<PRE>   {LOCAL.CFG made and modified from Administrator program, in Gateway,
   SMTP, Post Offices}
08:50:04 -   Local Post-Office: "DEPT/MSPO1"
08:50:04 -   Local Post-Office: "DEPT/PO2"
08:50:04 -   Local Post-Office: "washington/seattle3"
</PRE>08:50:04 - Reading address map from m:smtp\addr_map.cfg
<PRE>   {ADDR_MAP.CFG made and modified from Administrator program, in Gateway,
    SMTP, Address-Map}
08:50:04 -   Mapping "DEPT/MSPO1" to "mspo1.dept"
08:50:04 -   Mapping "dept/mspo1" to "dept"
08:50:04 -   Mapping "dept/po2" to "po2.dept"
08:50:04 -   Mapping "washington/seattle3" to "admiral.com"
</PRE>08:50:04 - Gateway initialized
<PRE>   {Ready for Action!}
</PRE>08:58:04 - Idling:  48258 bytes, largest 47234
<PRE>   {Memory available for processing mail}
</PRE>08:58:04 - spawning SMTPGET
<PRE>   {Run SMTPGET.EXE, which checks the SMTP mailbag file in database for
    outgoing mail}

</PRE>08:58:04 - spawn(SMTPGET)=0
<PRE>   {Find the SMTP mailbag file name by typing "network.glb", and look for 8
    characters after SMTP}
</PRE>08:58:04 - SMTP_accept(socket=256, timeout=120)
<PRE>   {Checking socket 256 for incoming SMTP mail for 120 seconds. Timeout
    specified by -W option}
</PRE>08:58:22 - Connection accepted.
<PRE>   {A TCP/IP host has contacted the gateway computer}
</PRE>08:58:22 - Incoming SMTP connection from [11.1.16.15] detected
<PRE>   {Announcing who is connecting to the gateway computer}
</PRE>08:58:22 - Call coming in at socket 257
<PRE>   {Socket used for incoming SMTP mail}
  [tx] 220 All set, fire away
   {Gateway computer transmits saying "I'm ready"}
  [rx] HELO company.com
   {Gateway computer receives from TCP/IP host a greeting and introduction}
  [tx] 250 Hi there, pleased to meet you
   {Gateway computer transmits a greeting in return}
  [rx] MAIL From:&lt;root@company.com&gt;
   {Gateway computer receives RFC821 "From" address, and saves it in
   SMTP_IN.ENV file}
</PRE>08:58:22 - Translating remote address: "root@company.com"
<PRE>   {SMTPGATE.EXE tries to translate the address into Microsoft Mail
   address, using ADDR_MAP.CFG}
</PRE>08:58:22 - Comparing: mspo1.dept to company.com
<PRE>   {(Compares the domain name in "From" address to all entries in the
    ADDR_MAP.CFG file)}
</PRE>08:58:22 - Comparing: dept to company.com
08:58:22 - Comparing: po2.dept to company.com
08:58:22 - Comparing: admiral.com to company.com
08:58:22 - Comparing: .elvis.com to company.com
08:58:22 - Non-local address left unmapped
<PRE>   {No match is found, so the "From" address is passed on in SMTP format}
  [tx] 250 Sender OK
   {Gateway computer transmits that the "From" address is OK}
  [rx] RCPT To:&lt;admin@mspo1.dept&gt;
   {Gateway computer receives RFC821 "To" address, and saves it in
   SMTP_IN.ENV file}
</PRE>08:58:22 - Translating local address: "admin@mspo1.dept"
<PRE>   {SMTPGATE.EXE tries to translate the address into Microsoft Mail
   address, using ADDR_MAP.CFG}
</PRE>08:58:22 - Comparing: mspo1.dept to mspo1.dept
<PRE>   {(Compares the domain name in "To" address to all entries in the
   ADDR_MAP.CFG file.}
</PRE>08:58:22 - Comparing: dept to company.com
<PRE>   {If it finds no match, the message will not be accepted and a
    "550 - Unknown user" error is sent.}
</PRE>08:58:22 - Mapped mspo1.dept to DEPT/MSPO1
<PRE>   {A match is found.}
</PRE>08:58:22 - Mapped to "CSI:DEPT/MSPO1/admin"
<PRE>   {The "To" address translated to Microsoft Mail format.}
  [tx] 250 Recipient OK
   {Gateway computer transmits that the "To" address is OK}
  [rx] DATA
   {Gateway computer is told the RFC-822 message header and body is
    coming next}
  [tx] 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;
   {Gateway computer transmits to start, and to send a &lt;CR/LF&gt;.&lt;CR/LF&gt;
    to signal the end of the message}
  [rx] ...message body...
   {Gateway computer receives the message (RFC-822) and saves it in
   SMTP_IN.822 file}
</PRE>08:58:23 - Sending message to Microsoft Mail
<PRE>   {SMTPGATE.EXE starts to process the incoming SMTP message}
</PRE>08:58:23 - Header: Return-Path: &lt;root@company.com&gt;
08:58:23 - Header: Received: from company.com by marvgard
<PRE>08:58:23 - Header:      id &lt;2B8A57AE@marvgard&gt;; Tue, 23 Feb 93 08:58:22 PST
</PRE>08:58:23 - Header: Received: by company.com (4.1/SMI-4.1)
<PRE>08:58:23 - Header:      id AA01410; Tue, 23 Feb 93 08:55:16 PST
</PRE>08:58:23 - Header: Date: Tue, 23 Feb 93 08:55:16 PST
08:58:23 - Header: From: root@company.com (Operator)
<PRE>   {SMTPGATE.EXE compares this RFC-822 "From" to the earlier RFC-821
    "From". If they are the same, the RFC-822 "From" is saved in
    Microsoft Mail. Otherwise, the RFC-821 is saved.}

</PRE>08:58:23 - Header: Message-Id: &lt;9302231655.AA01410@company.com&gt;
08:58:23 - Header: Apparently-To: admin@mspo1.dept
08:58:23 - Header:
<PRE>   {Blank line indicating the end of the headers, and message text is
    next.}
</PRE>08:58:23 - Translating remote address: "root@company.com (Operator)"
<PRE>   {SMTPGATE.EXE  tries to translate the address into Microsoft Mail
    address, using ADDR_MAP.CFG}
</PRE>08:58:23 - Comparing: mspo1.dept to company.com (Operator)
<PRE>   {(Compares the domain name in "From" address to all entries in the
    ADDR_MAP.CFG file)}
</PRE>08:58:23 - Comparing: dept to company.com (Operator)
08:58:23 - Comparing: po2.dept to company.com (Operator)
08:58:23 - Comparing: admiral.com to company.com (Operator)
08:58:23 - Comparing: .elvis.com to company.com (Operator)
08:58:23 - Non-local address left unmapped
<PRE>   {No match is found, so the "From" address is passed on in SMTP format}
</PRE>08:58:23 - spawning SMTPPUT
<PRE>   {SMTPPUT.EXE puts the Microsoft Mail formatted message into the
    Microsoft Mail database}
</PRE>08:58:23 - spawn(SMTPPUT)=0
<PRE>  [tx] 250
   {Gateway computer transmits saying it now has the message}
  [rx] QUIT
   {Gateway computer receives instruction to quit the connection}
  [tx] 221 See you later
   {Gateway computer transmits an acknowledgement and says good bye}
</PRE>08:58:24 - Closing socket 257
08:58:24 - SMTP connection closed
08:58:49 - Idling:  48258 bytes, largest 47234
09:02:52 - spawning SMTPGET
<PRE>   {Run SMTPGET.EXE, which checks the SMTP mailbag file in database for
    outgoing mail}

</PRE>09:02:52 - spawn(SMTPGET)=0
09:02:52 - Outgoing message(s) from Microsoft Mail detected
<PRE>   {SMTPGET.EXE found outgoing mail waiting in the SMTP mailbag}
</PRE>09:02:52 - Connecting to smart SMTP host
<PRE>   {Gateway computer connects to the smart }
</PRE>09:02:52 - SMTP_open(socket=257)
<PRE>  [rx] 220 company.com Sendmail 4.1/SMI-4.1 ready at Tue, 23 Feb 93
</PRE>09:00:22 PST
<PRE>  [tx] HELO marvgard
  [rx] 250 company.com Hello marvgard ([11.1.16.16]), pleased to meet you
</PRE>09:02:53 - NC_addr_to_RFC822( "CSI:DEPT/MSPO1/Admin", local )
09:02:53 - Translating "DEPT/MSPO1/Admin"
09:02:53 - Mapped to "Admin@mspo1.dept"
09:02:53 - NC_addr_to_RFC822( "SMTP:root@company.company.com", remote )
09:02:53 - NC_addr_to_RFC822( "SMTP:root@company.company.com", local )
09:02:54 - Transmitting message to SMTP
<PRE>  [tx] MAIL FROM:&lt;Admin@mspo1.dept&gt;
  [rx] 250 &lt;Admin@mspo1.dept&gt;... Sender ok
  [tx] RCPT TO:&lt;root@company.company.com&gt;
  [rx] 250 &lt;root@company.company.com&gt;... Recipient ok
  [tx] DATA
  [rx] 354 Enter mail, end with "." on a line by itself
  [tx] ...message body...
  [tx] .
  [rx] 250 Mail accepted
  [tx] QUIT
  [rx] 221 company.com delivering mail
</PRE>09:03:33 - SMTP_close(socket=257)
09:03:33 - SMTP connection closed
09:03:33 - Idling:  48258 bytes, largest 47234
09:03:33 - spawning SMTPGET
09:03:33 - spawn(SMTPGET)=0
09:03:33 - SMTP_accept(socket=256, timeout=120)
09:04:34 - Idling:  48258 bytes, largest 47234
09:04:34 - OK to Exit?
09:04:34 - Press Y to exit, N to continue
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00 logfile<BR>
KBCategory: kb3rdparty<BR>
KBSubcategory: MailGWSMTP<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
