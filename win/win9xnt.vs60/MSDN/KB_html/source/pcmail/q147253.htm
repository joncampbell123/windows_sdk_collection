

<HTML>
<HEAD>
<TITLE>FFAPI: Corrupt Mailbag when Insert Messages into Full Mailbag </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q147253">
<META NAME="KBModify" CONTENT="1997/10/20">
<META NAME="KBCreate" CONTENT="1996/02/22">
<META NAME="Keywords" CONTENT="MailGWFFAPI kb3rdparty">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT="  The mailbag for incoming messages may become corrupt when the FFAPI component tries to insert a large number of messages into a full mailbag. The INQUEUE3.MBG file will exceed 475,136 bytes in size when it becomes corrupt, and the Mail External pro...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAYC,QAH6,QAEV,QAAP,QAB4,QACI,QAJG,QBVV,QA9N,QAY4,QAO4,QAIR,QAGU,QAKP,QDMH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FFAPI: Corrupt Mailbag when Insert Messages into Full Mailbag</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q147253</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Software Development Kit: FFAPI for Gateways and
   Applications, version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The mailbag for incoming messages may become corrupt when the FFAPI
component tries to insert a large number of messages into a full mailbag.
The INQUEUE3.MBG file will exceed 475,136 bytes in size when it becomes
corrupt, and the Mail External program (EXTERNAL.EXE) will generate non-
delivery reports in the system log when the delivery problems occur.
<P>
<P><h2>CAUSE</h2>
 
<P>
The FFAPI component version 3.04.0000 or older can cause the mailbag or
INQUEUE3.MBG and INQUEUE3.KEY files to become corrupt.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The issue is resolved in version 3.04.0010 or later of the FFAPI
components. The manufacturer of the gateway that uses these components
should contact Microsoft Product Support to get the necessary components.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The message transfer agent (MTA) will generate the following error in the
SYSTEM.LOG when it delivers messages to the postoffice mailbag that is full
without disclosing the recipient to whom the message was to be delivered:
<P>
<PRE>   [008] Failure delivering user mail due to mailbag contention. Mail
   item was not delivered to:

</PRE>The new FFAPI component will generate the following error in the SYSTEM.LOG
when it delivers messages to the postoffice mailbag that is full:
<P>
<PRE>   User mail failed mailing to mailbag (file contention):
   Network/Postoffi/Mailbag"

</PRE>The errors are generated and place in the FFAPI log if that option is being
used when the contention errors occur delivering to the Inqueue3 mailbag.
The errors may not be generated in the FFAPI log if the contention occurs
delivering the message to a user's mailbag. Message delivery to mailbags
can be prevented by implementing the mailer disable feature of the FFAPI
component (-md).
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 3.04 PRMD SMTP Baranof<BR>
KBCategory: kb3rdparty<BR>
KBSubcategory: MailGWFFAPI<BR>
Keywords          : MailGWFFAPI kb3rdparty<BR>
Version           : 3.00<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 20, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
