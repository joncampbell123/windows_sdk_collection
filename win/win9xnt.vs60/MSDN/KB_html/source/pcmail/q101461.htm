

<HTML>
<HEAD>
<TITLE>SMTP: Microsoft Mail SMTPGATE.EXE Version 3.0.9 Update </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q101461">
<META NAME="KBModify" CONTENT="1998/03/09">
<META NAME="KBCreate" CONTENT="1993/07/14">
<META NAME="Keywords" CONTENT="MailGWSMTP kb3rdparty kbbug3.00 kbfile kbtlc">
<META NAME="KBArea" CONTENT="Support; KB; pcmail">
<META NAME="Description" CONTENT=" Microsoft provides SMTPFTP.EXE, SMTPLMN.EXE, SMTPNVL.EXE, and SMTPWIN.EXE, which replace the SMTPGATE.EXE file that is included with version 3.0 of the Microsoft Mail Gateway to SMTP.  For complete information about obtaining and installing the SMTP...">
<META NAME="Product" CONTENT="PC Mail">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAXB,QAWP,QAC1,QBVW,QBD2,QAAQ,QANE,QAEV,QAYC,QABA,QAVZ,QAFI,QAY2,QBWD,QBXB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMTP: Microsoft Mail SMTPGATE.EXE Version 3.0.9 Update</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q101461</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
MS-DOS
kb3rdparty kbfile kbtlc kbbug3.00
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Mail Gateway to SMTP, version 3.0
</UL> 
<P>
Microsoft provides SMTPFTP.EXE, SMTPLMN.EXE, SMTPNVL.EXE, and SMTPWIN.EXE,
which replace the SMTPGATE.EXE file that is included with version 3.0 of
the Microsoft Mail Gateway to SMTP.
<P>
For complete information about obtaining and installing the SMTP program
files, see the following sections:

<UL><LI>To download the updated files
<LI>To update your SMTPGATE.EXE file
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
Version 3.0.9 of the Microsoft Mail Gateway to SMTP requires a dedicated
80286, 80386, or 80486 IBM-compatible computer as well as version 3.04.1 or
later of the SMTPPUT.EXE file, update included in PUTUPD.EXE on the MSL. To
determine your version of SMTPPUT, run it from the MS-DOS prompt
with the -VER option.
<P>
This update contains SMTPFTP.EXE, SMTPLMN.EXE, SMTPNVL.EXE, SMTPXLN.EXE,
and SMTPWIN.EXE, which replace the SMTPGATE.EXE file that is included with
version 3.0 of the Microsoft Mail Gateway to SMTP. These replacement files
correct the following problems:

<UL><LI>The gateway does not generate greetings (HELO) that include the
   gateway computer host name. This problem occurs when you
   communicate with an IBM VM host running IBM VM SMTP V2R2. (This
   problem was originally corrected in the SMTPGATE.EXE 3.0.2 update.)

<LI>The gateway closes the connection after an Extended HELO (EHLO)
   message is received from another SMTP host as explained in RFC
   1425, SMTP Service Extensions. There may still be a problem if the
   host sends an RSET after you refuse the EHLO message, which is
   recommended in RFC 1425, but is not consistent with RFC 821. (This
   problem was originally corrected in the SMTPGATE.EXE 3.0.2 update.)

<LI>The recipient field is constructed incorrectly whenever the
   friendly name information is included directly in the address of
   the recipient. As a result, the address is in the form:
<P>
<P><PRE>      &lt;&lt;username&gt;@&lt;domain&gt; (&lt;friendly name&gt;)&gt;
</PRE><P>
   However, per RFC 822, the comment should not be included within the
   angle brackets. (This problem was originally corrected in the
   SMTPGATE.EXE 3.0.5 update.)

<LI>When the gateway strips non-SMTP gateway addresses from the message
   header, a false end-of-header marker is created in the RFC 822
   portion of the message. This causes the date and subject fields, as
   well as the remaining recipients, to appear in the body of the
   message. (This problem was originally corrected in the SMTPGATE.EXE
   3.0.7 update.)
<P>
   NOTE: Only the updates for the PC/TCP Kernel from FTP Software, Inc.,
   and Microsoft LAN Manager for MS-DOS are included with this update.

<LI>The gateway does not allow the default character set translations
   to be overridden. If the two files SMTPIN.TBL and SMTPOUT.TBL
   exist, the gateway can do character translation for one of the
   following character sets instead of for the US-ASCII character set,
   which is used when these files do not exist: Swedish/Finnish,
   Norwegian/Danish, German, Latin Alphabet 1, and Code Page 850.
   (This problem was originally corrected in the SMTPGATE.EXE 3.0.6
   update.)

<LI>The gateway improperly processes comments as addresses if a comma
   appears in the comment.

<LI>The gateway improperly rejects an RFC 822 address it has previously
   accepted in the RFC 821 portion of a message.

<LI>The gateway saves the From field seen in the envelope part (RFC-821) of
   an incoming message to use in case the Microsoft Mail recipient wants to
   reply to the message. (This problem was originally corrected in the
   SMTPGATE.EXE 3.0.9 update.)
<P>
   For additional information, please see the following article in the
   Microsoft Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A href="../pcmail/q99713.htm">Q99713</A></B>
<PRE></PRE>      TITLE     : How Reply Chooses a From Address

</PRE><LI>The gateway does not include the host names in its greeting replies.
   (This problem was originally corrected in the SMTPGATE.EXE 3.0.1
   update.)
<P>
</UL><h3>To download the updated files</h3>
 
<P>
<PRE>You can find <A href="http://support.microsoft.com/download/support/mslfiles/smtpgw.exe">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
                       , a self-extracting file, on the following
</PRE>services:

<UL><LI>Microsoft's World Wide Web Site on the Internet
<P><PRE>      On the www.microsoft.com home page, click the Support icon.
      Click Knowledge Base, and select the product.
<PRE></PRE>      Enter kbfile <A href="http://support.microsoft.com/download/support/mslfiles/smtpgw.exe">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
                             , and click GO!
      Open the article, and click the button to download the file.

</PRE><LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the Softlib/Mslfiles folder.
      Get <A href="http://support.microsoft.com/download/support/mslfiles/smtpgw.exe">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
</PRE>
<LI>The Microsoft Network
<P><PRE>      On the Edit menu, click Go To, and then click Other Location.
      Type "mssupport" (without the quotation marks).
      Double-click the MS Software Library icon.
      Find the appropriate product area.
      Locate and Download SMTPGW.EXE.
</PRE>
<LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A href="http://support.microsoft.com/download/support/mslfiles/smtpgw.exe">SMTPGW.EXE</A> <I>(size: 231849 bytes)</I> 
</PRE><P>
</UL>For additional information about downloading, please see the following
article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../zmiscellaneous/q119591.htm">Q119591</A></B>
   TITLE     : How to Obtain Microsoft Support Files from Online
               Services

</PRE>Decide which SMTP executable file matches your configuration:
<P>
<PRE>Executable file    Vendor TCP/IP software
</PRE> 
<PRE>SMTPLMN.EXE        Microsoft LAN Manager for MS-DOS
SMTPFTP.EXE        PC/TCP Kernel from FTP Software, Inc.
SMTPNVL.EXE        Novell LAN Workplace for MS-DOS (version 4.0)
SMTPWIN.EXE        Any network adapter card supported by the WIN/TCP
                   for MS-DOS RunTime (version 4.1) from The Wollongong
                   Group, Inc. with the RunTime installed
SMTPXLN.EXE        Excelan Exos 205T Intelligent Ethernet Controller

</PRE>After you download SMTPGW.EXE to a clean directory, run it (by typing
"smtpgw" at the MS-DOS prompt) to extract the contents of the file.
You should receive the following files:
<P>
<PRE>     Filename       Size      Date       Time
   --------------------------------------------

    SMTPFTP.EXE    80,567    01-05-95    02:35p
    SMTPLMN.EXE    71,585    01-05-95    02:37p
    SMTPNVL.EXE    74,489    01-05-95    02:36p
    SMTPWIN.EXE    76,041    01-05-95    02:36p
    SMTPXLN.EXE    80,313    01-05-95    02:34p
     CP850O.TBL       264    12-15-93    09:45a
    GERMANI.TBL       264    12-15-93    09:45a
    GERMANO.TBL       264    12-15-93    09:45a
    LATIN1I.TBL       264    12-15-93    09:45a
    LATIN1O.TBL       264    12-15-93    09:45a
    NORWEGI.TBL       264    12-15-93    09:46a
    NORWEGO.TBL       264    12-15-93    09:46a
   SWEDISHI.TBL       264    12-15-93    09:46a
   SWEDISHO.TBL       264    12-15-93    09:46a
     README.TXT
   ADDENDUM.TXT

</PRE><h3>To update your SMTPGATE.EXE file</h3>
 
<P>
At the MS-DOS command prompt, type the following and press ENTER
<P>
<PRE>   copy &lt;path&gt;:\&lt;smtp???&gt;.exe &lt;destination&gt;\smtpgate.exe

</PRE>where &lt;path&gt; is the drive and directory where you ran the self-
extracting SMTPGW.EXE file, &lt;destination&gt; is the drive and
directory where your SMTPGATE.EXE file currently resides, and
&lt;smtp???&gt; is the corresponding executable file for your TCP/IP
software vendor.
<P>
For example, if you ran the self-extracting file from the TEST
directory on drive D, your SMTPGATE.EXE file is located in the
MAILEXE directory on drive C, and you are using Microsoft TCP/IP
for LAN Manager, type the following command and press ENTER:
<P>
<PRE>   copy d:\test\smtplmn.exe c:\mailexe\smtpgate.exe

</PRE>NOTE: The SMTPGATE.EXE file typically resides on the postoffice
server in the Mail executables directory as well as on the machine
where the gateway is running. Make sure that SMTPGATE.EXE,
SMTPGET.EXE, and SMTPPUT.EXE are all located in the same
subdirectory where the gateway is launched from and that all copies
are updated appropriately.
<P>
<P><h3>To Set Up Character Translation for Non-US-ASCII Character Set</h3>
 

<OL><P><LI>Decide which character set is desired. The following is a list of
   the character sets, associated filenames, and references that are
   located on the disk provided with this update:
<P>
<PRE>   Character set    | Inbound      | Outbound    | Reference
   -------------------------------------------------------------
   US-ASCII         | Built in     | Built in    | ANSI X3.4
   Swedish/Finnish  | SWEDISHI.TBL | SWEDISHO.TBL| SIS 63 61 27
   version 2        |              |             | (ISO-646-SE2)
   -------------------------------------------------------------
   Norwegian/Danish | NORWEGI.TBL  | NORWEGO.TBL | NS 455
   version 1        |              |             | (ISO-646-NO)
   -------------------------------------------------------------
   German           | GERMANI.TBL  | GERMANO.TBL | DIN 66003
                    |              |             | (ISO-646-DE)
   -------------------------------------------------------------
   Latin Alphabet 1 | LATIN1I.TBL  | LATIN1O.TBL | ISO 8859-1
   -------------------------------------------------------------
   Code Page 850    | Built-in     | CP850O.TBL  | IBM
                    | default      |             |

   NOTE: If SMTPGATE.EXE does not find the SMTPIN.TBL and SMTPOUT.TBL
   files, the built-in default tables are used.

</PRE><P><LI>At the MS-DOS command prompt, type the following and press ENTER
<P>
<P><PRE>      copy &lt;path&gt;:\&lt;??????i.tbl&gt; &lt;destination&gt;\smtp\smtpin.tbl
      copy &lt;path&gt;:\&lt;??????o.tbl&gt; &lt;destination&gt;\smtp\smtpout.tbl
</PRE><P>
   where &lt;path&gt; is the drive and directory where you ran the self-
   extracting SMTPGW.EXE file, &lt;destination&gt; is the drive and directory
   where your Microsoft Mail postoffice data files currently reside,
   and &lt;??????i.tbl&gt; and &lt;??????o.tbl&gt; are the corresponding inbound
   and outbound character table files.
<P>
   For example, if you ran the self-extracting file from the TEST
   directory on drive D, your Microsoft Mail postoffice is located on
   drive M, and you are using the German translation table, type the
   following commands and press ENTER after each command:
<P>
<P><PRE>      copy d:\test\germani.tbl m:\smtp\smtpin.tbl
      copy d:\test\germano.tbl m:\smtp\smtpout.tbl
</PRE><P>
   Make sure you have updated the SMTPGATE.EXE file to version 3.0.7
   or later; otherwise, the character translation won't take place.
<P>
</OL><h3>Translation Details</h3>
 
<P>
Inbound messages have the subject and text body translated based on
the SMTPIN.TBL file. Friendly names are not translated.
<P>
Outbound messages have the subject and text body translated based on
the SMTPOUT.TBL file. Friendly names are translated based on an
internal table that maps extended characters to a 7-bit equivalent.
<P>
NOTE:

<UL><LI>Only 7-bit characters are supported in a Microsoft Mail address, which
   consists of the network name, postoffice name, and mailbox ID.

<LI>The tables for national 7-bit character sets (Swedish/Finnish,
   Norwegian/Danish, and German) will convert characters with character
   codes above 127 according to Latin Alphabet 1 for inbound messages. That
   is, they will accept national characters (F, V, and so forth) according
   to both 7-bit and 8-bit standards.
<P>
</UL><h3>Gateway Operation</h3>
 
<P>
Informational messages are displayed on the screen and in the SMTP gateway
log file when you use the -CD (debugging), -LACSY (full logging to
SMTPGATE.LOG), and/or -GACSY (full logging to the SMTPGATE screen) options
when you start up the gateway.
<P>
If the SMTP translation files are not found, the following messages are
displayed:
<P>
18:02:40 - Open File &lt;f:smtp\smtpin.tbl&gt; failed,
<PRE>           No such file or directory
</PRE></OL>18:02:40 - f:smtp\smtpin.tbl table not loaded,
<PRE>           default translation invoked.
</PRE>18:02:40 - Open File &lt;f:smtp\smtpout.tbl&gt; failed,
<PRE>           No such file or directory
</PRE>18:02:40 - f:smtp\smtpout.tbl table not loaded,
<PRE>           default translation invoked.

</PRE>If the SMTP translation file(s) are found and can be loaded, the following
messages are displayed:
<P>
11:19:09 - f:smtp\smtpin.tbl table translation loaded.
11:19:09 - f:smtp\smtpout.tbl table translation loaded.
<P>
If problems with a translation file are detected, the default translation
message and one of the following messages are displayed:
<P>
18:02:40 - File &lt;f:smtp\smtpout.tbl&gt; header size invalid.
18:02:40 - File &lt;f:smtp\smtpout.tbl&gt; translation checksum invalid.
18:02:40 - File &lt;f:smtp\smtpout.tbl&gt; translation table size invalid.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00<BR>
KBCategory: kb3rdparty kbfile kbtlc kbbug3.00<BR>
KBSubcategory: MailGWSMTP<BR>
Keywords          : MailGWSMTP kb3rdparty kbbug3.00 kbfile kbtlc<BR>
Version           : 3.00<BR>
Platform          : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 9, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
