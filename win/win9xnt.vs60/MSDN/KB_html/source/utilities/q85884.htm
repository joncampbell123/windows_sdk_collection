

<HTML>
<HEAD>
<TITLE>FIX: /EXEPACK and MOVE Overlays Are Incompatible </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q85884 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1992/06/22">
<META NAME="Keywords" CONTENT="kb16bitonly MoveOverlay kbbuglist kbfixlist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  Using the /EXEPACK option with the Microsoft Segmented-Executable Linker (LINK) version 5.3 on a program that uses MOVE overlays causes problems. The program may act unexpectedly, hang, or generate invalid instruction errors when the first function...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QACI,QAEF,QAH4,QA9N,QANJ,QAR4,QAE2,QAW9,QASC,QBFY,QAVQ,QAM1,QAB4,QAB5,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: /EXEPACK and MOVE Overlays Are Incompatible</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q85884 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.30
MS-DOS
kbtool kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft LINK for MS-DOS, version 5.3
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Using the /EXEPACK option with the Microsoft Segmented-Executable Linker
(LINK) version 5.3 on a program that uses MOVE overlays causes problems.
The program may act unexpectedly, hang, or generate invalid instruction
errors when the first function in an overlay is called.
<P>
<P><h2>CAUSE</h2>
 
<P>
/EXEPACK and dynamic overlays (MOVE) are incompatible. When a program
linked with /EXEPACK is run, control is given to an expander/relocator, the
load module is unpacked, then control is transferred to the program (in
this case, the overlay manager). The code in the overlays is not unpacked.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve this problem, do one of the following:

<UL><LI>Use /OLDOVERLAY with /EXEPACK so that the static overlay manager
   is used instead of dynamic overlay manager.
<P>
 -or-

<LI>Use dynamic overlays without using /EXEPACK.
<P>
</UL>Link 5.31 containes a new warning, L4087, which warns that the DYNAMIC
option disables /EXEPACK. The 5.31 linker will ignore /EXEPACK for MOVE
aplications, preventing the problems mentioned above.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in LINK version 5.3. This
problem has been fixed in LINK version 5.31. This version of LINK is
contained in the C/C++ 7.0 patch disk, which can be obtained through
Microsoft Product Support Services.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The /EXEPACK option directs LINK to remove series of repeated bytes
(usually null characters) and to optimize the load-time relocation table
before creating the executable file. At run time, the expander/relocator
expands the bytes, performs the relocations, and transfers control.
Execution then precedes normally.
<P>
The tools for creating dynamically overlaid programs are LINK 5.3 and the
Microsoft Overlaid Virtual Environment (MOVE) in MOVE.LIB, which is a
component of the combined libraries for medium and large models provided
with Microsoft C/C++ version 7.0.
<P>
A dynamically overlaid program consists of one .EXE file that remains open
during execution. MOVE reads this file when it needs to load an overlay.
Overlays are loaded on call; initially, only the root of the program is
loaded into memory.
<P>
The linker option /OLDOVERLAY is used to specify that static overlays
should be used instead of MOVE.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.30 7.00 lock buglist5.30 fixlist5.31.009<BR>
KBCategory: kbtool kbbuglist kbfixlist<BR>
KBSubcategory: MoveOverlay<BR>
Keywords          : kb16bitonly MoveOverlay kbbuglist kbfixlist kbtool<BR>
Version           : 5.30<BR>
Platform          : MS-DOS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
