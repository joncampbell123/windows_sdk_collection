

<HTML>
<HEAD>
<TITLE>Assigning Code Segments to Overlays Using MOVE </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q87926 ">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1992/08/12">
<META NAME="Keywords" CONTENT="kb16bitonly MoveOverlay kbtool">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  Version 5.3 of the Microsoft Segmented Executable Linker (LINK) introduces the ability to build executable files that contain dynamic overlays and use the Microsoft Overlaid Virtual Environment (MOVE). MOVE uses a module-definition (.DEF) file to d...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QACI,QBFY,QAEF,QA9N,QANJ,QAE2,QAB9,QBW6,QAPN,QAPF,QAW9,QBV8,QAY2,QBXA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Assigning Code Segments to Overlays Using MOVE</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q87926 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.30 5.31 5.50 5.60
MS-DOS
kbtool
<P>
 
The information in this article applies to:

<UL><LI>Microsoft LINK for MS-DOS, versions 5.3, 5.31, 5.5, and 5.6
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Version 5.3 of the Microsoft Segmented Executable Linker (LINK)
introduces the ability to build executable files that contain dynamic
overlays and use the Microsoft Overlaid Virtual Environment (MOVE).
MOVE uses a module-definition (.DEF) file to define the organization
of the overlays. The text below describes the syntax of a module-
definition file for an application that uses MOVE.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
This information describes only the process of using the SEGMENTS
statement to allocate entire code segments to overlays; it does not
describe the process of using the FUNCTIONS statement to allocate
individual functions to specific overlays. For information on the
latter process, query in the Microsoft Knowledge Base on the following
words:
<P>
<PRE>   functions and statement and overlays and pwb and move and def

</PRE>The article is titled "Assigning Functions to Overlays Using
MOVE."
<P>
An overlaid program contains a root portion, code that remains resident
throughout program execution, and one or more overlays, that the overlay
manager can swap into and out of conventional memory as needed. MOVE allows
more than one overlay to be resident in conventional memory simultaneously
(if space permits) and it can swap an overlay to extended or expanded
memory (if available).
<P>
When compiling an overlaid program, use the medium or large memory model,
both of which support multiple code segments. Because the small and compact
memory models support only one code segment, they do not support overlays.
<P>
The compiler assigns names to code segments. In the medium and large memory
model, the default name of each segment has the form &lt;modulename&gt;_TEXT. The
compiler uses the default naming convention unless the code contains the
alloc_text pragma or the __based keyword or the compiler command line
includes the /NT option.
<P>
LINK version 5.3 uses the SEGMENTS statement in the .DEF file to assign
segments to overlays.
<P>
The following example demonstrates creating overlays. Consider an
application that contains four source files, which are compiled as follows:
<P>
<PRE>   cl /c /AM file1.c file2.c file3.c file4.c

</PRE>Linking the application with the following creates an overlaid
program:
<P>
<PRE>   SEGMENTS
      FILE2_TEXT OVL:1
      FILE3_TEXT OVL:2
      FILE4_TEXT OVL:2

</PRE>Note that LINK assigns data segments and code segments that are not listed
in the SEGMENTS statement to the resident portion of the program (overlay
0).
<P>
The LINK command line to build this application might resemble the
following:
<P>
<PRE>   LINK file1 file2 file3 file4, myapp.exe,,,myapp.def;

</PRE>In this example, LINK creates an example called MYAPP.EXE with a resident
portion (that contains code from FILE1.OBJ and from the C run- time
library), and two overlays. The first overlay contains code from FILE2.OBJ
and the second overlay contains code from FILE3.OBJ and from FILE4.OBJ.
<P>
LINK also supports another syntax to create overlays. On the LINK command
line, place parentheses around the names of object files to assign object
files to overlays. While the current versions of LINK support this
alternate syntax, it may not be supported in the future. Using the old
syntax, the LINK command line that corresponds to the example above is as
follows:
<P>
<PRE>   LINK file1 (file2) (file3 file4), myapp.exe;

</PRE>The main advantage of the .DEF file syntax to build an overlaid program is
its ease of use with Programmer's WorkBench (PWB). After listing the
segments, include the .DEF file in the project list to build the overlaid
program.
<P>
<P><h2>REFERENCE</h2>
 

<UL><LI>Microsoft C/C++ "Environment and Tools" manual for version 7.0
<LI>MOVEAPI.TXT file distributed with C/C++ 7.0
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf kbinf 5.30 5.31.009 5.50 moveoverlay<BR>
PwbIss visualc<BR>
KBCategory: kbtool<BR>
KBSubcategory: MoveOverlay<BR>
Keywords            : kb16bitonly MoveOverlay kbtool<BR>
Version             : 5.30 5.31 5.50 5.60<BR>
Platform            : MS-DOS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
