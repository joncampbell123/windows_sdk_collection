

<HTML>
<HEAD>
<TITLE>BUG: Problems Viewing Protected-Mode Application Memory </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102331">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1993/08/03">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; utilities">
<META NAME="Description" CONTENT="  In CodeView for Windows, an attempt to use the Memory window to view the Ring 0 or Ring 1 code segments of an application developed for protected-mode Microsoft Windows fails.  CAUSE =====  CodeView is a source level debugger. It displays only Ring...">
<META NAME="Product" CONTENT="Programming Utilities">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAK2,QA5E,QAH4,QAI4,QDL9,QBWO,QBWN,QAKD,QADK,QAC2,QBTM,QBW6,QBWQ,QAZB,QAKP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Problems Viewing Protected-Mode Application Memory</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102331</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.01 4.10
WINDOWS
kbtool kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft CodeView for Windows, version 4.0, 4.01, and 4.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
In CodeView for Windows, an attempt to use the Memory window to view
the Ring 0 or Ring 1 code segments of an application developed for
protected-mode Microsoft Windows fails.
<P>
<P><h2>CAUSE</h2>
 
<P>
CodeView is a source level debugger. It displays only Ring 3 code.
<P>
The Memory window title bar displays the address the user entered even
though CodeView displays the contents of another, corresponding,
selector. For example, the title bar displays 0x1111 even though
CodeView displays selector 0x1117.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in CodeView versions 4.0,
4.01, and 4.1 for Windows. We are researching this problem and will post
new information here in the Microsoft Knowledge Base as it becomes
available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
In protected-mode Windows, a segment address is a selector. When it
attempts to change a selector value (segment address) to a value in
the Ring 0 or Ring 1 range, CodeView creates the corresponding Ring 3
address above the specified value.
<P>
For example, an attempt to change the selector value in the memory
window to 0x1111 fails and CodeView displays selector value 0x1117.
Likewise, an attempt to display selector value 0x111A fails and
CodeView displays selector value 0x111F.
<P>
In CodeView versions 4.0 and 4.01 for Windows, it may appear possible
to view Ring 0 or Ring 1 addresses. CodeView displays the memory
window through selector value 0x1114:0. However, if you compare the
contents of this Memory Window 1 with Memory Window 2 that displays
0x1117:0, the displayed values are identical. An attempt to view
memory locations 0x1110 through 0x1113 or 0x1118 through 0x111B fails
and CodeView displays question marks (?).
<P>
The three low-order bits of a selector determine its privilege level:
the lowest two bits indicate the ring number and the third bit
contains a write permission flag used to separate code segments from
data segments. The privilege level does not affect the displayed base
address; it only determines if the requestor has permission to view
the memory.
<P>
CodeView sets the write permission flag for each selector to allow
modifying the source code through the memory window. CodeView can do
this because it runs in a higher ring level and forces all selectors
to be data selectors.
<P>
Therefore, selectors 0x1110 through 0x1117 are identical except for
the differences in their protection level: selector 0x1110 is a Ring 0
code selector while 0x1117 is a Ring 3 data selector.
<P>
When the user enters an address such as 0x1111:0, the CodeView
execution model changes the selector to 0x1117.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.10<BR>
KBCategory: kbtool kbbuglist<BR>
KBSubcategory: CvwIss<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
