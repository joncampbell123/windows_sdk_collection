

<HTML>
<HEAD>
<TITLE>Redirector Uses Core Mode on Large File Transfers </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q119870">
<META NAME="KBModify" CONTENT="1996/09/01">
<META NAME="KBCreate" CONTENT="1994/08/28">
<META NAME="Keywords" CONTENT="kbnetwork kbbug3.50">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you copy a large file to or from a Windows NT Workstation and Windows NT Server version 3.5 computer, the redirector may switch to core mode during the transfer. The use of core mode increases the time required to transfer the file. The switch...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QA5W,QBSO,QAH6,QASP,QAO4,QAN0,QALM,QAKR,QAIJ,QAHE,QDL9,QBWQ,QBWO,QBWN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Redirector Uses Core Mode on Large File Transfers</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 1, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q119870</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5
<LI>Microsoft Windows NT Server version 3.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you copy a large file to or from a Windows NT Workstation and Windows
NT Server version 3.5 computer, the redirector may switch to core mode
during the transfer. The use of core mode increases the time required to
transfer the file. The switch to core mode occurs after approximately 20
megabytes (MB) have been transferred and is more likely to occur when
transferring a file to a Windows NT server, but it can occur in either
direction. Core mode over FDDI requires more bandwidth than over Ethernet
or token ring, so the symptoms are more pronounced on fiber. Smaller files
transfer in raw mode.
<P>
<P><h2>CAUSE</h2>
 
<P>
Raw I/O requires exclusive access to the virtual circuit, meaning the
virtual circuit must be effectively "locked" for the duration of the raw
I/O. If other activity is occurring on the circuit at the time the
redirector tries to do raw I/O, the circuit cannot be "locked" so the
redirector uses core I/O instead.
<P>
One reason the virtual circuit cannot be "locked" is that as the file data
is being written, the file also needs to be extended which also requires
network activity.
<P>
The reason the problem surfaces at a large offset into the file has to do
with when the lazy writer and modified page writer start their work. When
the system starts running short of free pages, the modified page writer
wakes up. Unfortunately, the modified page writer likes to write one page
at a time. The redirector cannot turn a 4K write into a raw I/O.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.5. We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: prodnt 3.50<BR>
KBCategory: kbnetwork kbbug3.50<BR>
KBSubCategory: ntnetserv<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 1, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
