

<HTML>
<HEAD>
<TITLE>How To Install and Configure Microsoft DNS Server </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172953">
<META NAME="KBModify" CONTENT="1998/03/17">
<META NAME="KBCreate" CONTENT="1997/08/20">
<META NAME="Keywords" CONTENT="kbhowto kbinfo nthowto ntnetserv NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article is designed as an introduction to the Microsoft Domain Name Service (DNS) included with Microsoft Windows NT Server 4.0. This guide will take you through the steps needed to install and configure DNS on your Windows NT Server.  For add...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA5V,QBWD,QATQ,QBWS,QAGC,QALX,QAUJ,QAYC,QBQU,QALW,QDMH,QBWP,QA9A,QAFQ,QDJ3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How To Install and Configure Microsoft DNS Server</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 17, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172953</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article is designed as an introduction to the Microsoft Domain Name
Service (DNS) included with Microsoft Windows NT Server 4.0. This guide
will take you through the steps needed to install and configure DNS on
your Windows NT Server.
<P>
For additional information on Domain Name Service, please see the
following white paper available on the Microsoft anonymous ftp server:
<P>
<PRE>   File Name: Dnswp.exe
   Location : <B><A href="ftp://ftp.microsoft.com/bussys/winnt/winnt-docs/papers/">ftp://ftp.microsoft.com/bussys/winnt/winnt-docs/papers/</A></B>
   Title    : "DNS and Microsoft Windows NT 4.0"

</PRE><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Installing Microsoft DNS</h3>
 
<P>
Use the following steps to install DNS on your Windows NT 4.0 Server:

<OL><P><LI>Click the Start button, point to Settings, and then click Control
   Panel. Double-click the Network icon, and then click the Services tab.

<P><LI>Click Add, select Microsoft DNS Server from the Select Network Service
   dialog box, and then click OK.

<P><LI>Type the location of your Windows NT source files, click OK, and then
   click Close.
<P>
</OL>NOTE: If you have any service packs installed, you will need to re-apply
your service pack before restarting your computer.

<OL><P><LI>Restart your computer.
<P>
</OL><h3>Configuring Microsoft DNS</h3>
 
<P>
Gathering Information:
<P>
Before you actually begin configuring the DNS server, there is some basic
information you will need. Some of this information must be approved
by Internic for use on the Internet, but if you are configuring this
server for internal use only, you can then decide what names and IP
addresses to use. You will need:

<UL><LI>Your domain name (must be approved by Internic)

<LI>The IP address of each server for which you wish to provide name
   resolution

<LI>The host names of each of the servers in step above
<P>
</UL>NOTE: The servers in the step above may be your mail servers, any public
access servers, FTP servers, WWW servers, and so on.
<P>
For example, use the following information (substitute your actual
information where appropriate):
<P>
<PRE>   Domain Name: &lt;Domain.com&gt;
   Servers:   192.168.50.11   &lt;Mail1.domain.com&gt;
              192.168.50.12   &lt;Ftp1.domain.com&gt;
              192.168.50.12   &lt;WWW.domain.com&gt; (notice the same IP
                               address)
              192.168.50.15   &lt;DNS1.domain.com&gt;

</PRE></OL>Creating Your DNS Server:
<P>
Using the information above, configure your Microsoft DNS server by doing
the following:

<OL><P><LI>Click the Start button, point to Programs, point to Administrative
   Tools, and then click DNS Manager.

<P><LI>From the DNS menu, click New Server.

<P><LI>Type the IP address of your DNS server in the Add DNS Server dialog box
   (192.168.58.15 in the example information), and then click OK.
<P>
</OL>NOTE: It is not necessary to restart the DNS server for changes to your
zones to take effect. All that is required is for the server data files to
be updated using the following step:

<UL><LI>In DNS Manager, right-click your DNS server, and click Update Server
   Data Files.
<P>
</UL>Creating Your Reverse Lookup Zone:
<P>
Some applications use a reverse query to a DNS server to find the host
name of a host when it has the IP address of the computer. You must
configure a reverse lookup zone to provide this capability.
<P>
NOTE: Reverse lookup zones may not be necessary in your network, but it is
recommended that one be present. NSLOOKUP run on the DNS server will fail
if no reverse lookup zone is configured.
<P>
To create a reverse lookup zone, perform the following steps:

<OL><P><LI>In DNS Manager, right-click your DNS server, and then click New Zone.

<P><LI>Click Primary from the "Creating New Zone for" dialog box, and then
   click Next.

<P><LI>The Zone Name is derived from your IP network address. In the example
   information, the Zone Name is 58.168.192.in-addr.arpa. Type your
   reverse zone name (the least significant part of the IP address, and
   work toward the most significant part of the address). For example:
<P>
<PRE>   If your network ID is:         Then your reverse zone is:

   10.0.0.0                       10.in-addr.arpa
   130.20.0.0                     20.130.in-addr.arpa
   250.30.203.0                   203.30.250.in-addr.arpa

   NOTE: The syntax of the reverse lookup zone is imperative to its
   operation.

</PRE><P><LI>After you type the reverse lookup zone name, press Tab and the reverse
   lookup zone file name will automatically fill in using the zone name in
   step 3 appended by ".dns" (without the quotes).

<P><LI>Click Next, and then click Finish.
<P>
</OL>Creating Your Forward Lookup Zone:

<OL><P><LI>In DNS Manager, right-click your server, and then click New Zone.

<P><LI>Click Primary Zone, and then click Next.

<P><LI>Type the Zone Name for your DNS domain. This is the domain name that
   is registered with Internic (&lt;Domain.com&gt; in the example).

<P><LI>Press Tab, click Next, and then click Finish.
<P>
</OL>When you have created the forward lookup zone, you should see three
records automatically created in that zone: the NS record, the SOA record,
and an A record. If you do not have all three of these, you may want to
verify that your DNS settings in your TCP/IP properties are configured
correctly (click the Start button, point to Settings, click Control Panel,
and then double-click the Network icon).
<P>
NOTE: The A record will only be created if the zone name matches the domain
name.
<P>
Adding Host Records to Your Forward Lookup Zone:
<P>
The A record for your DNS server should have been automatically created.
However, DNS Manager does not automatically create the PTR record in the
reverse zone for the DNS server. The simplest way to correct this is to
use the following steps:

<OL><P><LI>Right-click the A record for your DNS server, and then click Delete
   Record.

<P><LI>Click Yes in the confirmation dialog box.

<P><LI>Right-click your forward zone, &lt;Domain.com&gt;, and then click New Host.

<P><LI>Type the host name of your DNS server and the IP address.

<P><LI>Click Create Associated PTR Record to enable it and click Add Host.

<P><LI>Click Done.
<P>
</OL>NOTE: Repeat steps 3-5 above for all of the servers that you want to add
to your DNS domain.
<P>
To verify the PTR records are created successfully, right-click the
reverse lookup zone 58.168.192.in-addr.arpa, and then click Refresh.
<P>
<P><h3>Configuring Other Record Types</h3>
 
<P>
A DNS server can be responsible for several different record types. Some
of them include, but are not limited to the following: A, CNAME, HINFO,
MX, NS, and SOA. For details on these and other record types, please refer
to the DNS white paper mentioned earlier in this article.
<P>
Creating A CNAME Record:
<P>
A CNAME record allows you to use multiple names for the same IP address.
This way, you can have users access the same server for separate
functions, such as FTP1.domain.com and WWW.domain.com. Before you can
create the CNAME record, you must first have an A record, as described
earlier.
<P>
To create a CNAME record, perform the following steps:

<OL><P><LI>Right-click your forward zone, &lt;Domain.com&gt;, and click New Record.

<P><LI>Select CNAME Record from the Record Type list box in the New Resource
   Record dialog box.

<P><LI>Type an alternate name for access to this computer. For example, in the
   sample information earlier in this article, WWW is an alternate name
   for FTP1.domain.com.

<P><LI>Type the original host name in "For Host DNS Name." For example,
   &lt;FTP1.domain.com&gt;.
<P>
   NOTE: It is important to use the fully-qualified domain name (FQDN)
   for the originating host DNS name.

<P><LI>Click OK.
<P>
</OL>Now when your users make a query for either of these host names, your DNS
server will return the same IP address.
<P>
Creating an MX Record:
<P>
An MX Record is a Mail Exchange record that points mail programs to your
mail servers. To create an MX record, perform the following steps:

<OL><P><LI>Right-click your forward lookup zone, &lt;Domain.com&gt; and then click
   New Record.

<P><LI>Select MX Record from the Record Type list box in the New Resource
   Record dialog box.

<P><LI>The Host Name (Optional) field is used for the host name of the mail
   server. However, if you want users to be able to send mail to your
   domain using the format USER@Domain.com, then leave the Host Name field
   blank.

<P><LI>Enter the FQDN of the mail server in the Mail Exchange Server DNS Name,
   for example, Mail1.domain.com..
<P>
   NOTE: There is a trailing dot, ".", after the Mail Exchange Server DNS
   Name. The FQDN that is used for the Mail Exchange Server must have a
   corresponding A record for that domain. If the Mail Exchange Server is a
   different computer than the DNS Server, the DNS Server must know where
   to redirect the mail traffic.

<P><LI>The Preference Number is any number from 0 to 65535. In the case of
   multiple mail servers, this number identifies which mail server is to
   be used first. The lower the preference number, the higher the
   priority.

<P><LI>Click OK.
</OL> 
<PRE>Keywords          : kbhowto kbinfo nthowto ntnetserv NTSrv nttcp kbnetwork
Version           : WinNT:4.0
Platform          : winnt
Issue type        : kbhowto kbinfo
Solution Type     : Info_Provided</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 17, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
