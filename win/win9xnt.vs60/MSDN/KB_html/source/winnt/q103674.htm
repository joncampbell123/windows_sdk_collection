

<HTML>
<HEAD>
<TITLE>Invalid Accounts Not Authenticated with Guest Account Enabled </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q103674">
<META NAME="KBModify" CONTENT="1997/05/09">
<META NAME="KBCreate" CONTENT="1993/08/29">
<META NAME="Keywords" CONTENT="kbnetwork ntras NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" Windows NT Remote Access Service (RAS) does not permit unknown user accounts to access a RAS server remotely. On many local area networks (LANs), an anonymous guest account is established to enable some access to the LAN even if you are not an offic...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAI5,QBG2,QBWP,QAGU,QBW7,QAK7,QBWE,QBVV,QBWG,QAVZ,QDMH,QA3S,QARL,QAM4,QAL2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Invalid Accounts Not Authenticated with Guest Account Enabled</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q103674</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
</UL> 
<P>
Windows NT Remote Access Service (RAS) does not permit unknown user
accounts to access a RAS server remotely. On many local area networks
(LANs), an anonymous guest account is established to enable some
access to the LAN even if you are not an offical member. However, you
will be unsuccessful if you try to connect to a LAN via Windows NT RAS
from a non-recognized account, even if a default guest account has
been established. However, if you use the guest account directly by
actually specifying "guest" as your logon name, you will be able to
connect to the LAN.
<P>
To restrict guest or unknown user access to your network from RAS, you
need to disable the guest account, restrict the guest account's
dial-in permissions, or assign a password to the guest account.
<P>
<P><h3>Example</h3>
 
<P>
NOTE: This example assumes there are no trust relationships between
the RAS server and other domains, a guest account is enabled, and RAS
Administrator has given dial-in permissions to the guest account.

<UL><LI>A Windows NT RAS client dials into a Windows NT Advanced Server RAS
   server.

<LI>The client supplies "Joe" for the account and "MS" for the password.

<LI>RAS Server does not have an account for "Joe."

<LI>The client fails authentication and is prompted for a new account and
   password.
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
RAS user authentication is similar to network access authentication.
The server logs the user on via LsaLogonUser and then logs him off
with NtClose. RAS logs the user on to find out if guest credentials
were used or not. RAS then logs the user off; RAS only uses this logon
session for checking credentials and does not enable the user any
acces to the nextwork. The logon session of interest to the user is
the one created when logged onto the system interactively. If the user
has guest credentials then RAS rejects his authentication.
<P>
A result of this is an interesting security audit trail. In User
Manager, choose Auditing from the Policies menu. Choose Audit Logon and
Logoff. When a remote client dials in, as in the example above, you
will see "Joe" successfully logged in as Guest and then logged off.
It looks like a successful guest access. However, RAS detects the guest
permissions and rejects the authentication.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbnetwork ntras NTSrvWkst<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 9, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
