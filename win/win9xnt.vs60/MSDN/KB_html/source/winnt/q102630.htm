

<HTML>
<HEAD>
<TITLE>LAN Manager Heuristics and Windows NT Registry Entries </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102630">
<META NAME="KBModify" CONTENT="1997/03/25">
<META NAME="KBCreate" CONTENT="1993/08/05">
<META NAME="Keywords" CONTENT="kbenv ntconfig">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Several of the wrkheuristic and srvheuristic values in the Microsoft LAN Manager LANMAN.INI file directly correspond to Registry entry values on a Microsoft Windows NT or Microsoft Windows NT Advanced Server machine. Some of those values are descri...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWE,QABA,QAGU,QAGI,QAVZ,QAH5,QBBI,QAHE,QAY5,QBXS,QA4P,QAU3,QAMR,QDMR V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>LAN Manager Heuristics and Windows NT Registry Entries</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102630</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
<P>
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Windows NT Workstation version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Several of the wrkheuristic and srvheuristic values in the Microsoft LAN
Manager LANMAN.INI file directly correspond to Registry entry values on a
Microsoft Windows NT or Microsoft Windows NT Advanced Server machine. Some
of those values are described below.
<P>
<P><h2>WORKSTATION HEURISTICS</h2>
 
<P>
The following LAN Manager workstation heuristics map to Windows NT
workstation parameters in the Registry at HKEY_LOCAL_MACHINE\System\
CurrentControlSet\Services\LanmanWorkstation\Parameters:
<P>
WRKHEURISTIC: 0
UseOpportunisticLocking
<P>
Indicates whether the redirector should use opportunistic-locking
performance enhancement. This parameter should be disabled only to
isolate problems.
<P>
<PRE>   Default: 1 (True)

</PRE>WRKHEURISTIC: 2
UseUnlockBehind
<P>
Indicates whether the redirector will complete an unlock operation
before it has received confirmation from the server that the unlock
operation has completed. Disable this parameter only to isolate
problems or to guarantee that all unlock operations complete on the
server before completing the application's unlock request.
<P>
<PRE>   Default: 1 (true)

</PRE>WRKHEURISTIC: 4
BufNamedPipes
<P>
Indicates whether the redirector should buffer character-mode named
pipes. Disable this parameter to guarantee that all pipe write
operations are flushed to the server immediately and to disable read
ahead on character-mode named pipes.
<P>
<PRE>   Default: 1 (True)

</PRE>WRKHEURISTIC: 5
UseLockReadUnlock
<P>
Indicates whether the redirector will use the lock-and-read and
write-and-unlock performance enhancements.
<P>
When this value is enabled, it generally provides a significant
performance benefit. However, database applications that lock a range
and don't allow data within that range to be read will suffer
performance degradation unless this parameter is disabled.
<P>
<PRE>   Default: 1 (True)

</PRE>WRKHEURISTIC: 11
UseRawRead and UseRawWrite
<P>
Enables the raw-read and write optimization. This provides a
significant performance enhancement on a local area network.
<P>
<PRE>   Default: 1 (True)

</PRE>WRKHEURISTIC: 19
Use512ByteMaxTransfer
<P>
Specifies whether the redirector should only send a maximum of 512
bytes in a request to an MS-Net server regardless of the servers-
negotiated buffer size. If this parameter is disabled, request
transfers from the Windows NT redirector could cause the MS-Net server
to crash.
<P>
<PRE>   Default: 0 (False)

</PRE>WRKHEURISTIC: 23
BufFilesDenyWrite
<P>
Specifies whether the redirector should cache files that are opened
with only FILE_SHARE_READ sharing access. Usually, if a file is opened
with FILE_SHARE_READ specified, the file cannot be buffered because
other processes may also be reading that file. This optimization
allows the redirector to buffer such files. This optimization is safe
because no process can write to the file. Disable this parameter if it
is necessary to preserve the strict semantics of the sharing modes
specified.
<P>
<PRE>   Default: 1 (true)

</PRE>WRKHEURISTIC: 24
BufReadOnlyFiles
<P>
Specifies whether the redirector should cache files that are read-
only. Usually, if a read-only file is opened, the file cannot be
buffered because other processes may also be reading that file. This
optimization allows the redirector to buffer such files. This
optimization is safe because no process can write to the file.
However, another user can modify the file to enable writing to the
file, causing loss of data. Disable this parameter if it is necessary
to preserve the strict semantics of the sharing modes specified.
<P>
<PRE>   Default: 1 (true)

</PRE><h2>SERVER HEURISTICS</h2>
 
<P>
The following LAN Manager server heuristics map to Windows NT Registry
entries at HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\
LanmanServer\Parameters:
<P>
SRVHEURISTIC: 5
EnableFCOpens
<P>
Specifies whether MS-DOS file control blocks (FCBs) are folded
together so that multiple remote opens are performed as a single open
on the server. This saves resources on the server.
<P>
<PRE>   Range: Boolean
   Default: 1 (True)

</PRE>SRVHEURISTIC: 6
ThreadPriority
<P>
Specifies the priority of all server threads in relation to the base
priority of the process. Higher priority can give better server
performance at the cost of local responsiveness. Lower priority
balances server needs with the needs of other processes on the system.
<P>
<PRE>   Range: 5-50 secs (LAN Manager); 0-15 secs (Windows NT)
   Default: 5 secs (LAN Manager); 5 secs (Windows NT)

</PRE>SRVHEURISTIC: 10
ScavTimeout
<P>
Specifies the time that the scavenger remains idle before waking up to
service requests. A smaller value for this parameter improves the
response of the server to various events, but costs CPU cycles.
<P>
<PRE>   Range: 5-50 secs (LAN Manager); 1-300 secs (Windows NT)
   Default: 5 secs (LAN Manager); 30 secs (Windows NT)

</PRE>SRVHEURISTIC: 11
EnableSoftCompat
<P>
Specifies whether the server maps it to a normal open request with
shared-read access when the server receives a compatibility open
request with read access. Mapping such requests allows several MS-DOS
computers to open a single file for read access.
<P>
<PRE>   Range: 0, 1, 2, 3(LAN Manager); 0 (False), 1 (True) (Windows NT)
   Default: 2 (LAN Manager); 1 (Windows NT)

</PRE>SRVHEURISTIC: 15
OplockBreakWait
<P>
Specifies the time that the server waits for a client to respond to an
oplock break request. Smaller values can allow detection of crashed
clients more quickly, but can potentially cause loss of cached data.
<P>
<PRE>   Range: 35-640 secs (LAN Manager); 10-180 secs (Windows NT)
   Default: 35 secs (LAN Manager); 35 secs (Windows NT)

</PRE><h2>REFERENCES</h2>
 
<P>
Documentation from MS LAN Manager Upgrade to Windows NT Advanced
Server LAN Manager documentation
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt wrkheuristic srvheuristic<BR>
Keywords            : kbenv ntconfig<BR>
Version             : 3.1 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
