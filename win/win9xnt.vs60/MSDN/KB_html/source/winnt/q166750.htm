

<HTML>
<HEAD>
<TITLE>ARP Cache Entries May Not Time Out for 10 Minutes </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166750">
<META NAME="KBModify" CONTENT="1998/03/04">
<META NAME="KBCreate" CONTENT="1997/04/10">
<META NAME="Keywords" CONTENT="kbbug4.00 ntgeneral ntmac nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  If the media access control address changes for an IP address that a Windows NT computer is communicating with, the Windows NT computer may not be able to communicate to or through the device for up to 10 minutes.  CAUSE =====  Windows NT 4.0 offer...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAB5,QBVV,QACE,QAHE,QAU3,QAMR,QDO3,QBWD,QAFH,QA7O,QAOE,QAMN,QAEF,QAR4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>ARP Cache Entries May Not Time Out for 10 Minutes</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 4, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166750</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If the media access control address changes for an IP address that a
Windows NT computer is communicating with, the Windows NT computer may not
be able to communicate to or through the device for up to 10 minutes.
<P>
<P><h2>CAUSE</h2>
 
<P>
Windows NT 4.0 offers a configurable ArpCacheLife registry parameter. This
parameter controls the arpcache life for entries that are not being
referenced in the arpcache. Windows NT computers reference an arpcache
entry each time an outbound IP packet is sent to the address described by
the entry.
<P>
Entries being referenced time out after 10 minutes, and this time out
value is not adjustable. If you are communicating with a device that has
some form of hardware fail-over capability that does not update the
arpcache on the other devices on the network, its media access control
address may change, and if there is a steady stream of traffic being
directed at it by applications on a Windows NT computer, the arpcache
entry may not time out for this 10 minute period.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve this problem, either obtain the hotfix mentioned in the STATUS
section of this article, or wait for the next Windows NT service pack.
<P>
NOTE: Service Pack 3 must be applied to Windows NT 4.0 before applying
the hotfix.
<P>
The hotfix should have the following timestamp:
<P>
<PRE>   (i386)  12/01/97  04:24p    143,632 Tcpip.sys
   (alpha) 12/01/97  04:21p    263,472 Tcpip.sys

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0.
A supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Technical Support for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
With the hotfix, a new version of Tcpip.sys is available, that allows
greater control over arpcache life, as described below:
<P>
<PRE>   Value: ArpCacheMinReferencedLife
   Key: Hkey_Local_Machine\System\CurrentControlSet\Services\
        \Tcpip\Parameters
   Value Type: REG_DWORD
   Valid Range: 0-0xffffffff
   Default: 600 seconds (10 minutes)
   Description: ArpCacheMinReferencedLife controls the minimum time that a
    referenced arpcache entry will expire in. This parameter can be used
    in combination with the ArpCacheLife parameter, as follows:

       If ArpCacheLife &gt;= ArpCacheMinReferencedLife, referenced and
       unreferenced arpcache entries will expire in "ArpCacheLife"
       seconds.

       If ArpCacheLife &lt; ArpMininumValidCacheLife, unreferenced entries
       will expire in "ArpCacheLife" seconds, and referenced entries
       will expire in "ArpCacheMinReferencedLife" seconds.

</PRE>For more information on the ArpCacheLife registry parameter, see the
following article in the Microsoft Knowledge Base;
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q139415.htm">Q139415</A></B>
   TITLE     : New TCP/IP ArpCacheLife Parameter in Windows NT 3.51 SP4
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: arp cache proxy MAC resolution protocol<BR>
Keywords          : kbbug4.00 ntgeneral ntmac nttcp kbnetwork<BR>
Version           : WINNT:4.0<BR>
Platform          : winnt<BR>
Hardware          : ALPHA x86<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 4, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
