

<HTML>
<HEAD>
<TITLE>Explanation of Gateway Services for NetWare </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q121394">
<META NAME="KBModify" CONTENT="1997/11/21">
<META NAME="KBCreate" CONTENT="1994/10/04">
<META NAME="Keywords" CONTENT="NTINTEROP ntnetserv NTPROTOCOL kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The objective of Gateway Services for NetWare (GSNW) is to allow Microsoft networking clients to access files that reside on NetWare servers without having to load NetWare client software. Following is a brief description of how GSNW works.  MORE I...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QBWP,QBWO,QAJ4,QBVW,QDL9,QBWQ,QBWN,QAUJ,QARL,QAPN,QAH6,QACK,QAFI,QAW6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Explanation of Gateway Services for NetWare</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q121394</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
<LI>Microsoft Gateway Services for NetWare
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The objective of Gateway Services for NetWare (GSNW) is to allow Microsoft
networking clients to access files that reside on NetWare servers without
having to load NetWare client software. Following is a brief description
of how GSNW works.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>GSNW Details</h3>
 
<P>
A Server Message Block (SMB) request can come from a variety of Microsoft
Networking clients over a variety of network transport protocols. For
example, the Microsoft client could be a Windows NT client using Remote
Assess Service (RAS) to dial into the network or a Windows for Workgroups
client attached directly on the network, either using IPX/SPX, TCP/IP, or
NetBEUI.
<P>
When an SMB request reaches the Windows NTAS file gateway machine, it is
initially picked up by the Windows NT Server Service (SRV.SYS)  [1].
<P>
<PRE>         --------------------------------------------
         |      Windows NTAS GSNW Gateway           |
         --------------------------------------------
                            |
                            |
</PRE> 
<PRE>      ---------------------------
[1]   |  SMB file I/O request:  |        -----------------------
      |  open ,create, delete   |-----&gt;  | outgoing NCP packet | ----&gt;
      |                         |        -----------------------
      |    Properties:          |
      | share name= \\KOACH     |
      | file path= \SYS\DATA    |
      | file name = MYDATA.DAT  |
      ---------------------------
      |                         |
      |       Transport         |
      |                         |
      ---------------------------

</PRE>The MS Networking client sends out the SMB request. If the request is a
file manipulation request (a request that requires a file handle to be
returned), SRV.SYS uses the above share name, file path, and file name to
open the file object [2].
It
<P>
<PRE>            |------------------------------------------|
            |      Windows NTAS GSNW Gateway           |
            --------------------------------------------
                               |
                               |
     ---------------------------------------------------------
     |        [2]                                 [3]        |
     |   -----------------             -------------------   |
     |   |    SRV.SYS    |             |    NWRDR.SYS    |   |
     |   -----------------             -------------------   |
     ---------------------------------------------------------
                               |
                               |
</PRE> 
<PRE>incoming SMB packet -----&gt;        outgoing NCP packet -----------&gt;


</PRE>In the example above, the object name is
\device\nwrdr\koach\sys\data\mydata.dat. SRV.SYS calls the Windows NT API
NTCreateFile, passing the object name. The Windows NT I/O manager uses the
file object name to call into NWRDR.SYS [3], passing NWRDR.SYS information
on the security token of the object that sent the SMB. Based on the
security token, NWRDR.SYS determines if the request was from a local
account or a remote request. If the request was a remote request,
NWRDR.SYS uses the gateway credentials when sending the file manipulation
NCP to the NetWare file server [4].
<P>
<PRE>            |------------------------------------------|
            |      Windows NTAS GSNW Gateway           |
            --------------------------------------------
                               |
                               |
</PRE> 
<P>
<PRE>-----------------------               ----------------------------
| Incoming SMB Packet | ----&gt;         |  NCP file I/O request:   |
|                     |               |  open, create, delete    |[4]
-----------------------               |                          |
                                      |    Properties:           | --&gt;
                                      |  share name= \\KOACH     |
                                      |  file path = \SYS\DAT    |
                                      |  file name = \MYDATA.DAT |
                                      |                          |
                                      ----------------------------
                                      |           IPX            |
                                      ----------------------------

</PRE>NWRDR.SYS returns the file handle to the Windows NT I/O manager, which
then returns the file handle to SRV.SYS. Further SMB traffic related to
this file manipulation request (for example, if the file manipulation
request was to open a file for reading) will be sent directly to NWRDR.SYS
by SRV.SYS using the file handle.
<P>
NetWare is manufactured by Novell, Inc., a vendor independent of
Microsoft; we make no warranty, implied or otherwise, regarding this
product's performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: wfw wfwg prodnt 3.1 3.5 hook gsnw<BR>
KBCategory: kbnetwork<BR>
KBSubcategory: ntnetserv ntprotocol ntinterop<BR>
Keywords          : NTINTEROP ntnetserv NTPROTOCOL kbnetwork<BR>
Version           : 3.10 3.50<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 21, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
