

<HTML>
<HEAD>
<TITLE>Adding TCP/IP Support to RemoteBoot Workstations </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q165001">
<META NAME="KBModify" CONTENT="1997/12/18">
<META NAME="KBCreate" CONTENT="1997/03/11">
<META NAME="Keywords" CONTENT="nthowto NTPROTOCOL NTSrv nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  By default, a RemoteBoot workstation runs the NetBEUI protocol. This article describes how to install support for TCP/IP and how to modify the configuration so that the workstation can take advantage of Domain Name Service (DNS) name resolution.  M...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDJ2,QBWD,QDNT,QA9N,QAA1,QBWP,QA0B,QAUJ,QBXT,QA5V,QAIB,QAEF,QBW4,QASB,QBSO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Adding TCP/IP Support to RemoteBoot Workstations</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q165001</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
By default, a RemoteBoot workstation runs the NetBEUI protocol. This
article describes how to install support for TCP/IP and how to modify the
configuration so that the workstation can take advantage of Domain Name
Service (DNS) name resolution.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following information assumes workstations can successfully boot from
the Windows NT RemoteBoot server using NetBEUI. For more information on
configuring RemoteBoot workstations, see Chapter 15 of the "Windows NT 4.0
Resource Kit."
<P>
<P><h3>Installing TCP/IP Support</h3>
 
<P>
Before you set up clients to use TCP/IP, you must either enable DHCP on a
DHCP Server (to assign addresses automatically), or you must assign IP
addresses and subnet masks for each workstation that will use TCP/IP.
<P>
<P><h3>To Enable TCP/IP Support</h3>
 

<OL><P><LI>Edit the &lt;SystemRoot&gt;\Rpl\Bblock\NetBEUI\Adapter\Dosbb.cnf file,
   where adapter is the name of the network adapter. Remove the semicolon
   (;) in column one of the following line:
<P>
<PRE>     ;DRV    BBLOCK\TCPDRV.DOS /I:C:\LANMAN.DOS ~ ~

</PRE><P><LI>For each profile (or personal copy of a profile) that will support
   TCP/IP, edit the following files as described:
<P>
   In &lt;SystemRoot&gt;\Rpl\RplFiles\Profiles\&lt;Profile&gt;\Autoexec.bat, where
   Profile is the name of the profile, enable the following entries by
   removing the REM designations at the beginnings of those lines.
<P>
<P><PRE>      UMB.COM
      NMSTR
      LOAD TCPIP
</PRE><P>
   In &lt;SystemRoot&gt;\Rpl\RplFiles\Profiles\&lt;Profile&gt;\Config.sys, where
   Profile is the name of the profile, enable Nemm.dos by removing the REM
   designation at the beginning of that line.

<P><LI>Start a client using one of the profiles altered in the last step.
<P>
</OL>The client will now load TCP/IP when started from the RPL Server.
<P>
<P><h3>Enable the Client to Use DNS for Name Resolution</h3>
 
<P>
The workstation will, by default, not use DNS for name resolution. The
following discusses what you need to do to enable DNS.
<P>
<P><h3>Installing SOCKETS and DNR Support</h3>
 

<OL><P><LI>In Autoexec.bat add the two following lines:
<P>
<P><PRE>      SOCKETS
      DNR
</PRE>
<P><LI>Modifying Tcputils.ini: Every workstation requires a private copy of the
   file Tcputils.ini. It is necessary to modify the [tcpglobal] and to add
   the [DNR] section. The hostname and username entries have to be unique
   to every workstation.
<P>
   Example Tcputils.ini:
<P>
   [tcpglobal]
   drivername=GLOBAL$
   ;netfiles=C:\LANMAN.DOS\ETC
   hostname=perlars3
   username=perlars
<P>
   [sockets]
   drivername=SOCKETS$
   bindings=TCPIP_XIF
   numsockets=4
   numthreads=32
   poolsize=3200
   maxsendsize=1024
<P>
   [telnet]
   drivername=TELNET$
   bindings=TCPIP_XIF
   nsessions=0
   max_out_sends=0
<P>
   [DNR]
   drivername=DNR$
   bindings=TCPIP_XIF
   nameserver0=157 55 128 180
   nameserver1=
   domain=microsoft.com
<P>
</OL>You can have a template Tcputils.ini in a profile. If you wish to do this,
copy Tcputils.ini to:
<P>
<PRE>   RplFiles\Profiles\Dos622\Wksta.pro\Tcputils.ini

   (in the above example, DOS622 is an example profile name)

</PRE></OL>Every time you create a new workstation, this file will be copied to the
correct location.
<P>
If you have already created workstations, then you need to copy
Tcputils.ini to every workstation subdirectory.
<P>
<PRE>   RplFiles\Machines\Perlars3\Dos622\Wksta\Tcputils.ini

   (in the above example, PERLARS3 is a workstation (machine) name; DOS622
   is a profile associated with the workstation PERLARS3)

</PRE><h3>Modifying the *.fit File for the Configuration You are Using</h3>
 
<P>
When you use Dos622.fit, you need to add one line:
<P>
<PRE>  ;machine writeable files
  C:\LANMAN.DOS\TCPUTILS.INI  MACHINES\(CNAME)\(PROFILE)\WKSTA\TCPUTILS.INI

</PRE>When you use Dos622p.fit, you need to delete one line and add another:
<P>
Delete the following line:
<P>
<PRE>   ;shared DOS LANMAN files
   C:\LANMAN.DOS\TCPUTILS.INI  (BINFILES)\LANMAN.DOS\TCPUTILS.INI

</PRE>Add this line:
<P>
<PRE>  ;machine writeable files
  C:\LANMAN.DOS\TCPUTILS.INI  MACHINES\(CNAME)\(PROFILE)\WKSTA\TCPUTILS.INI

</PRE><h3>Copying TCP/IP Support Files</h3>
 
<P>
Copy the following files to RplFiles\BinFiles\Lanman.dos\Netprog
<P>
<PRE>03/05/94  22:54                  9,524 vbapi.386
03/05/94  22:54                  9,535 vsockets.386
17/06/94  01:48                  5,632 rpc16c3.dll
03/05/94  22:54                 30,912 win_sock.dll
22/08/94  22:08                 48,224 winsock.dll
03/05/94  22:54                 33,280 wsockets.dll
03/05/94  22:53                 19,569 addname.exe
22/08/94  22:08                 31,232 dnr.exe
03/05/94  22:53                  4,294 emsbfr.exe
22/08/94  22:08                 11,205 ipconfig.exe
03/05/94  22:54                 22,826 nmtsr.exe
03/05/94  22:54                 66,460 ping.exe
22/08/94  22:08                 50,096 sockets.exe
22/08/94  22:08                 71,040 tcptsr.exe
22/08/94  22:08                 36,992 tinyrfc.exe
17/06/94  01:51                 13,799 unloadt.exe
03/05/94  22:54                  5,152 wsahdapp.exe

</PRE>For more information, see Chapter 15 Remoteboot in the Microsoft Windows NT
4.0 Server Networking Guide.
Microsoft Press Part No: 097-0001650
 
<PRE>Keywords          : nthowto NTPROTOCOL NTSrv nttcp kbnetwork
Version           : WinNT:3.5,3.51,4.0
Platform          : winnt
Issue type        : kbinfo</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
