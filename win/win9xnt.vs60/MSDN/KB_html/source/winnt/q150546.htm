

<HTML>
<HEAD>
<TITLE>NWLink IPX/SPX: Network Number vs. Internal Network Number </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150546">
<META NAME="KBModify" CONTENT="1998/03/19">
<META NAME="KBCreate" CONTENT="1996/05/02">
<META NAME="Keywords" CONTENT="NTINTEROP NTPROTOCOL NTSrvWkst kbinterop">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" IMPORTANT: This article contains information about editing the registry. Before you edit the registry, make sure you understand how to restore it if a problem occurs. For information on how to do this, view the  Restoring the Registry  online Help t...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAVZ,QAKC,QBC6,QBWP,QAG8,QAWN,QBWS,QAKD,QBXS,QAQW,QAJ9,QBWD,QA7Y,QAIB,QAIA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>NWLink IPX/SPX: Network Number vs. Internal Network Number</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 19, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150546</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
IMPORTANT: This article contains information about editing the registry.
Before you edit the registry, make sure you understand how to restore it if
a problem occurs. For information on how to do this, view the "Restoring
the Registry" online Help topic in Regedit.exe or the "Restoring a Registry
Key" online Help topic in Regedt32.exe.
<P>
<P><h2>SUMMARY</h2>
 
<P>
The NWLink IPX/SPX-compatible transport in Windows NT uses two distinctly
different types of network numbers. Windows NT uses an IPX network number
for routing purposes. This number is assigned to each configured frame type
and adapter combination on your computer. This number is sometimes referred
to as the "external network number," and it must be unique for each network
segment. Windows NT also uses an internal network number for internal
routing purposes. The internal network number is also known as a "virtual
network number." The internal network number uniquely identifies the
computer on the internetwork. These two network numbers serve two
distinctly different functions.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Network Number</h3>
 
<P>
You must assign an IPX network number for each frame type configured on
each adapter in your computer running Windows NT. This network number must
be unique for each network segment. Thus, all computers on the same segment
using a given frame type must use the same network number to communicate
with each other. If you do not set such a value for the IPX network number
in the registry, the NetworkNumber parameter displays a value of "0", but
the number itself will be assigned by Windows NT through autodiscovery.
<P>
Here are some possible ways of discovering the correct network
number to use for a given frame type:

<UL><LI>From a command prompt on a computer running windows NT Workstation or
   Server, carry out the IPXROUTE CONFIG command.

<LI>At a NetWare server that you want to communicate with, carry out the
   CONFIG command or inspect the Autoexec.ncf file.
<P>
</UL>You cannot set the IPX network number, or "external" network number,
through the graphical user interface on Windows NT 3.51, unless you have
File and Print Services for NetWare (FPNW) installed. You can set the IPX
network number in the registry. But if you manually configure the external
network number, you must be careful if there are any changes to your
network segment. If the network number on this segment changes or you move
the computer, you may not be able to communicate over IPX.
<P>
The NetworkNumber key (NetworkNumber: REG_MULTI_SZ) specifies the network
number to be used for this adapter. If it is 0, NWLink gets the network
number from the network as it is running. A nonzero value will force the
use of that number as the external network number for the specific frame
type. IPX network numbers are 4 bytes (8 hex characters) long. It is
possible to be running multiple IPX networks over the same physical network
segment provided they are different frame types.
<P>
The frame type is set by registry key (PktType: REG_DWORD). NWLink supports
Ethernet, Token Ring, FDDI, and Arcnet topologies. The PktType parameter
specifies the packet form to use. The valid values are:
<P>
<PRE>   0 (Ethernet II)
   1 (Ethernet 802.3)
   2 (802.2)
   3 (SNAP)
   4 (Arcnet)

</PRE>If your adapter is an Ethernet adapter, select between 0 and 3. If the
adapter is Token Ring or FDDI, select option 2 or 3. If you are using an
Arcnet adapter, select option 4. If the adapter is a Token Ring or FDDI
adapter, values 0 and 1 will work the same as value 2. (Related parameter:
BindSap.)
<P>
To set the IPX network number:
<P>
WARNING: Using Registry Editor incorrectly can cause serious problems that
may require you to reinstall your operating system. Microsoft cannot
guarantee that problems resulting from the incorrect use of Registry Editor
can be solved. Use Registry Editor at your own risk.
<P>
For information about how to edit the registry, view the "Changing Keys And
Values" online Help topic in Registry Editor (Regedit.exe) or the "Add and
Delete Information in the Registry" and "Edit Registry Data" online Help
topics in Regedt32.exe. Note that you should back up the registry before
you edit it.
<P>
Setting a network number in the registry for a given frame type involves
setting two corresponding values, one for NetworkNumber and the other for
PktType. The value for PktType must be set to a value other than the
default value of FF in order for the value NetworkNumber to be used.
<P>
To set the network number for a frame type:

<OL><P><LI>Open Registry Editor (Regedt32.exe).

<P><LI>Go to this location in the registry:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services
      \NWLnkIPX\NetConfig\&lt;adapter name&gt;
</PRE><P>
   NOTE: The above registry key is one path; it has been wrapped for
   readability.

<P><LI>Edit the NetworkNumber and PktType parameters either by clicking the
   parameter or by selecting "Multi String" on the Edit menu.

<P><LI>Enter an eight-digit hexadecimal number as a NetworkNumber value for
   each corresponding PktType.
<P>
</OL>Please check the "Services for NetWare Networks" booklet referenced below
for more information on these settings.
<P>
<P><h3>Internal Network Number</h3>
 
<P>
The internal network number identifies a virtual network segment inside of
your computer. That is, the internal network number identifies another
(virtual) segment on the internetwork. So, if you configure an internal
network number for a computer running Windows NT, a NetWare server or a
router will add an extra hop in its route to that computer.
<P>
The function of the internal network number parallels the function of the
internal IPX network number on a NetWare server. The internal IPX network
number on a NetWare file server assigns a "logical" network for the server
that helps to uniquely identify the server in a multiple network
environment.
<P>
Windows NT does not autodetect the internal network number. In certain
cases, you may need to manually set a unique nonzero, internal network
number. You may need to do this for one or more of the following reasons:

<UL><LI>You choose to use multiple frame types on a single adapter.

<LI>You have bound NWLink to multiple adapters on your computer running
   Windows NT.

<LI>Your computer is acting as a server running Windows NT for an
   application that uses the NetWare Service Advertising Protocol (SAP),
   such as SQL Server or Systems Network Architecture (SNA) Server.
<P>
</UL>By default this number is always zero (0) unless you have FPNW installed
and choose multiple frame types or have NWlink bound to multiple adapters
in your computer. If you try to leave the internal network number set to
zero with FPNW configured for multiple frame types, you will get the
following error:
<P>
<PRE>   In the current configuration the Internal Network Number cannot be 0. A
   random Internal Network Number has been chosen for you. Please make sure
   this does not conflict with any other Network Number or select another
   unique number.

</PRE></OL>So, in most cases, the Windows NT internal network number will not be
present as a packet on the LAN segment. The default value of zero (0) for
the internal network number does not show up when you carry out the
IPXROUTE CONFIG command at a command prompt. However, if you have
configured such an internal network number, or FPNW has assigned one to
your computer, then you may see this internal network number in a trace of
a RIP or a SAP broadcast from your computer. The internal network number is
not automatically announced to the internetwork.
<P>
The internal network number is an eight-digit hexadecimal number with
allowed values in the range of 1 to FFFFFFFE, and this number has to be
unique across the internetwork. The parameter used to set this number is
the VirtualNetworkNumber parameter. To change the value for this parameter
follow these steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious problems that
may require you to reinstall your operating system. Microsoft cannot
guarantee that problems resulting from the incorrect use of Registry Editor
can be solved. Use Registry Editor at your own risk.
<P>
For information about how to edit the registry, view the "Changing Keys And
Values" online Help topic in Registry Editor (Regedit.exe) or the "Add and
Delete Information in the Registry" and "Edit Registry Data" online Help
topics in Regedt32.exe. Note that you should back up the registry before
you edit it.

<OL><P><LI>Open Registry Editor (Regedt32.exe).

<P><LI>Go to the following Registry location:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentcontrolSet\Services
      \NWLnkIPX\Parameters
</PRE><P>
   NOTE: The above registry key is one path; it has been wrapped for
   readability.

<P><LI>Edit the VirtualNetworkNumber parameter by double-clicking the value or
   selecting DWORD under the Edit menu.

<P><LI>Enter a unique, nonzero, eight digit hexadecimal number for a value.
<P>
</OL>Notice that, although the internal network number is associated with
internal routing on your computer running Windows NT, the internal network
number does not facilitate IPX routing between separate segments configured
on a single Windows NT workstation or server. Windows NT does not natively
act as an IPX router. For that added functionality, you will need to
install the Microsoft Multi-Protocol Router (MPR) product.
<P>
<P><h3>Windows NT version 4.0</h3>
 
<P>
In Windows NT version 4.0, you can change both the (external) network
number and internal network number through the Graphic User Interface (GUI)
in Control Panel. Use the following steps:
<P>
To set or change the external network number:

<OL><P><LI>Click Start, point to Settings, and click Control Panel.

<P><LI>Double-click Network, click Protocols, and double-click NWLink IPX/SPX
   Compatible Transport.

<P><LI>Select the appropriate adapter in the Adapter list and click the Manual
   Frame Type Detection radio button.

<P><LI>Click Add, select the correct frame type, and type your unique
   (external) network number as specified above for Windows NT 3.51.
<P>
</OL>To set or change internal network number:

<OL><P><LI>Click Start, point to Settings, and click Control Panel.

<P><LI>Double-click Network, click Protocols, and double-click NWLink IPX/SPX
   Compatible Transport.

<P><LI>Type a unique (internal/virtual) network number in the Internal Network
   Number.
<P>
</OL>For additional information on setting the internal network number in
Windows NT, please see the following article in the Microsoft Knowledge
Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q99745.htm">Q99745</A></B>
   TITLE     : Tuning NWLINK Registry Parameters

</PRE></OL><h2>REFERENCES</h2>
 
<P>
"File and Print Services for NetWare, Participant's Workbook," PSS-WWT,
6/14/94 revision, Module 2: pg. 2-7.
<P>
FPNW.HLP, File and Print Services for NetWare, version 3.51,
%SYSTEMROOT%\SYSTEM32\FPNW.HLP.
<P>
"Services for NetWare Networks: Microsoft Windows NT Server," version 3.5,
pgs. 114-115.
<P>
"Windows NT 3.5 Upgrade Course, Participant's Workbook," PSS-WWT, 8/2/94
revision, pgs. 127-131.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: novel net ware<BR>
Keywords          : NTINTEROP NTPROTOCOL NTSrvWkst kbinterop<BR>
Version           : WinNT:3.5,3.51,4.0<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 19, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
