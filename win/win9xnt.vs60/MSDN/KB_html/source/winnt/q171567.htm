

<HTML>
<HEAD>
<TITLE>Windows NT 4.0 ServiceProvider Priority Values Not Applied </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q171567">
<META NAME="KBModify" CONTENT="1998/02/10">
<META NAME="KBCreate" CONTENT="1997/07/16">
<META NAME="Keywords" CONTENT="kbbug4.00 kbfix4.00 ntregistry NTSrvWkst nttcp kbnetwork kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  You may notice that changing the ServiceProvider priority values, as specified in Knowledge Base article Q139270,  How to Change Name Resolution Order on Windows 95 and Windows NT,  does not change the hostname resolution order as expected.  CAUSE ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWD,QAKD,QAR4,QAKJ,QAUJ,QBVV,QAC2,QDL9,QBWQ,QBWO,QBWN,QA5E,QAUD,QAJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Windows NT 4.0 ServiceProvider Priority Values Not Applied</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 10, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q171567</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
You may notice that changing the ServiceProvider priority values, as
specified in Knowledge Base article <B><A href="../crossnet/q139270.htm">Q139270</A></B>, "How to Change Name
Resolution Order on Windows 95 and Windows NT," does not change the
hostname resolution order as expected.
<P>
<P><h2>CAUSE</h2>
 
<P>
Unlike Windows NT 3.x, Windows NT 4.0 does not implement the
ServiceProvider priority values.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Contact Microsoft Technical Support to obtain the updated files mentioned
below.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0. A
supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Technical Support for more information.
<P>
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
In the fix mentioned above, Microsoft has added a new registry value to
the TCP/IP service that allows an administrator the option of changing the
hostname resolution order. By default, hostname resolution is performed by
Domain Name Service (DNS) first, followed by NetBIOS over TCP/IP (NetBT),
if DNS fails. With the use of this registry value, the order of hostname
resolution can be reversed.
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<P>
To change the hostname resolution order (between DNS and NetBT name
resolution mechanisms), perform the following steps:

<OL><P><LI>Run Registry Editor (Regedt32.exe).

<P><LI>Go to the following key in the registry:
<P>
   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters

<P><LI>On the Edit menu, click Add Value and enter the following value
   information:
<P>
<P><PRE>      Value Name: DnsNbtLookupOrder
      Data Type:  REG_DWORD
<PRE></PRE>      Value:      1 or 0 (default=0, value of 1 causes NetBT name
                  resolution to be attempted before DNS)

</PRE><P><LI>Exit the Registry Editor and restart the computer for the change to
   take effect.
<P>
</OL>Using NetBT for name resolution can provide an additional benefit in
multi-homed environments. When there is more than one IP address available
for a network device, normally a DNS Server will return the list of
addresses in a "round robin" fashion, rotating the list with each response
to provide load balancing. Windows Sockets applications receive the list
of IP addresses ordered as they were provided by the DNS server, and
normally attempt to connect to the first address in the list. If these
addresses are on different subnetworks, then the application may attempt
to connect to the server using an address that is not on the local subnet
even though one is available.
<P>
WINS returns the list in the same order every time. NetBT uses the local
route table to sort the IP addresses in the list into the "best" order. In
the case where the calling system shares a common subnet with the called
system, the "best" IP address would be the one on the same subnet, and
this would be used every time. Because of this sorting, using NetBT name
resolution can result in performance and efficiency improvements.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.00 multihomed<BR>
Keywords          : kbbug4.00 kbfix4.00 ntregistry NTSrvWkst nttcp kbnetwork kbnetwork<BR>
Version           : 4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 10, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
