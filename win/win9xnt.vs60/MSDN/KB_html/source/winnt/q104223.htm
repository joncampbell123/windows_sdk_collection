

<HTML>
<HEAD>
<TITLE>Description of Microsoft Tape Format (MTF) </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q104223">
<META NAME="KBModify" CONTENT="1997/05/09">
<META NAME="KBCreate" CONTENT="1993/09/13">
<META NAME="Keywords" CONTENT="kbtool ntutil">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The Windows NT Backup program uses Microsoft Tape Format (MTF) as its native format. In MTF, a collection of files backed up from a hard drive are stored on tape as a Data Set, and there may be multiple Data Sets per Tape. Data Sets may span one or...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBXS,QAHC,QAYY,QAA8,QBXB,QAZV,QATJ,QAFI,QAB5,QAH6,QADX,QAWI,QAV1,QAV0,QA7O V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Description of Microsoft Tape Format (MTF)</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 9, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q104223</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The Windows NT Backup program uses Microsoft Tape Format (MTF) as its
native format. In MTF, a collection of files backed up from a hard
drive are stored on tape as a Data Set, and there may be multiple Data
Sets per Tape. Data Sets may span one or more tapes. The term Tape
Family refers to a collection of one or more Data Sets appended
together and spanning one or more tapes. In Microsoft Tape Format
(MTF) there are three major components:

<UL><LI>A Tape Data Block (Tape DBLK), otherwise known as the tape header
<LI>One or more Data Sets
<LI>On Tape Catalog Information (On Tape Catalog Inf)
<P>
<PRE>|--------------------------------TAPE--------------------------------|
       |-----------------------DATA SET--------|

|Tape  | SSET  | VOLB  | DIRB  | File  | E Set | On Tape    |  E Set |
|DBLK  | DBLK  | DBLK  | DBLK  | DBLK  | DBLK  | Catalog Inf|  DBLK2 |

</PRE></UL><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Tape Data Block</h3>
 
<P>
Every MTF tape contains one, and only one, Tape Descriptor Block. The
Tape Descriptor Block must be the first object on the tape. The Tape
Descriptor Block's primary purpose is to identify the tape. In order
to accomplish this it contains the following:

<UL><LI>Unique tape Family ID
<LI>Tape sequence number to tell which tape it is in a family
<LI>Date added to family
<LI>Tape name and description
<P>
</UL><h3>Data Set</h3>
 
<P>
A Data Set includes Volume Descriptor Blocks that describe the logical
source device where the files are located. The term volume refers to
the logical device being backed up (such as the C: drive or
server/volume on a network drive). The volume descriptor block is
followed by one or more Directory Descriptor Blocks, which describes
the directories being backed up from the logical device. File and
accompanying Data Descriptor Blocks follow.
<P>
Each backup session is written to tape as a distinct data set. Tapes
can contain multiple data sets, and a single data set can extend
across multiple tapes. The MTF specification breaks down the data set
into specific Data Blocks:
<P>
S Set Descriptor Block
<P>
<PRE>   The Start of Data Set Descriptor block is a control structure that
   provides information about the current Data Set. This includes:

    - A Data sequence number
    - Data set password
    - Encryption and compression algorithms used
    - Date the backup was performed

</PRE>Volb Descriptor Block
<P>
<PRE>   The Volume Descriptor block is a control structure that provides
   information about the physical computer(s) on which the directories
   and files reside. This includes:

    - Device Name (such as C:, D:, and so on)
    - Volume Name (such as ENGSYS)
    - Machine Name (for example, Clonex 386)
    - Date the backup was performed

</PRE>Dirb Descriptor Block
<P>
<PRE>   The Directory Descriptor block is a control structure that provides
   information about the location of the files on the host computer. This
   includes:

    - Directory attributes (such as ReadOnly)
    - Directory name (for example, \test)
    - Dates of modification, creation, backup and access
    - Other tape related items

   This is a required Descriptor block and there must be at least one
   DIRB Data Block in a data set. The DIRB Descriptor Block may have data
   associated with it to specify items such as extended attributes and
   Access Control List information.

</PRE>File Descriptor Block
<P>
<PRE>   Contains items that relate to the file, which include:

    - Basic file attributes (such as read-only)
    - File name
    - Dates created, modified, backed up, and accessed
    - File size

   This is a required Descriptor Block and there must be one File
   Descriptor Block per file.

   There may be additional data associated with the File Descriptor Block
   that specifies items such as extended attributes and Access Control
   List information. Any file data for the specified file will follow
   this Descriptor Block.

</PRE>E Set (End of Data Set) Descriptor Block
<P>
<PRE>   The End of Data Set #1 Descriptor Block is a control structure that
   provides an indication that the end  of the Data Set has been reached.

   In the event that there is On Tape Catalog Information in the same
   partition as the file data there will be a second End of Data Set
   following the On Tape Catalog Information. Otherwise, there will only
   be one End of Data Set Descriptor Block. This includes:

    - Location of On Tape Catalog Information, if any
    - Data Set sequence number
    - Number of corrupt files found during backup, if any

   This is a required Descriptor Block and must be located at the end of
   the set. In the implementation of the MTF on tape catalogs, a second E
   SET Descriptor Block will follow the on tape catalog information

</PRE>E Set (End of Data Set) Descriptor Block #2
<P>
<PRE>   The End of Data Set #2 is a control structure that provides an
   indication that the end of the current Data Set has been reached. This
   is only present if On Tape Catalog information is located in the same
   partition as the Data Set Information. The purpose of the send End of
   Set Data Block is to provide fast access to the On Tape Catalog
   Information. This includes the same information contained in the first
   E SET Descriptor Block.

</PRE><h3>On Tape Catalog Information</h3>
 
<P>
The On Tape Catalog Information provides a quick method of locating
Data Sets and specific Files and Directories on the tape. This
includes:

<UL><LI>File/Directory Detail information.
<P>
   This provides specific location information about the Directories and
   Files in the preceding Data Set. If File/Directory detail is present,
   then a Set Map must also be provided.

<LI>Set Map information.
<P>
   This provides information about all the Data Sets on the Media. It
   includes the location of the File/Directory Detail for each Data Set.
   The Set Map may exist without File/Directory Detail being present.
<P>
</UL>File/Directory Detail and Set Map objects may be located in different
areas of the tape. If the device supports multiple partitions, some or
all of the On Tape Catalog objects may be located on this optional
partition.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbtool ntutil<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 9, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
