

<HTML>
<HEAD>
<TITLE>RAS Clients Fail to Connect with IP Assigned via DHCP </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172956">
<META NAME="KBModify" CONTENT="1998/02/10">
<META NAME="KBCreate" CONTENT="1997/08/20">
<META NAME="Keywords" CONTENT="kbbug4.00 ntnetserv NTRAS ntrouter NTSrv kberrmsg kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Your Remote Access Service (RAS) clients may experience problems attempting to connect to your computer running Windows NT Server and running either RAS or Routing and Remote Access Service (RRAS). The RAS clients may receive one or more of the fol...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QBWS,QA1S,QBWP,QBQU,QDN9,QACK,QDJG,QAIJ,QAB4,QDIZ,QAVZ,QARL,QANN,QBTX V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>RAS Clients Fail to Connect with IP Assigned via DHCP</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 10, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172956</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
<LI>Microsoft Routing and Remote Access Service Update for Windows NT
   Server 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Your Remote Access Service (RAS) clients may experience problems attempting
to connect to your computer running Windows NT Server and running either
RAS or Routing and Remote Access Service (RRAS). The RAS clients may
receive one or more of the following error messages when they fail to
connect:

<UL><LI>Dial-Up Networking could not negotiate a compatible set of network
   protocols you specified in the Server Type settings. Check your
   network configuration in the Control Panel then try the connection
   again.
<P>
   -or-

<LI>TCP/IP CP reported error 733: the PPP control protocol for this
   network protocol is not available on the server.
<P>
</UL>NOTE: This issue has only been reported with RAS or RRAS servers that are
configured to assign IP addresses through Dynamic Host Configuration
Protocol (DHCP).
<P>
<P><h2>CAUSE</h2>
 
<P>
This issue may be caused by the RAS or RRAS server failing to successfully
obtain a complete set of IP address leases from the DHCP server.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<P>
To resolve this issue, use one of the following methods:

<UL><LI>Change the configuration of the RAS or RRAS Server to use a static pool
   of IP addresses for its dial-up clients, using the following steps:
<P>
   1. Click Start, point to Settings, click Control Panel, and then
<P><PRE>      double-click the Network icon.
</PRE><P>
   2. Click the Services tab, click Remote Access Service, and then click
<P><PRE>      Properties.
</PRE><P>
<P><PRE>      NOTE: For an RRAS server, click Routing and Remote Access Service
      instead of Remote Access Service.
</PRE><P>
   3. Click Network in the Remote Access Setup dialog box and click
<P><PRE>      Configure for the TCP/IP Protocol in the Server Settings section
      in the Network Configuration dialog box.
</PRE><P>
   4. Click the Use Static Address Pool radio button and type a beginning
<P><PRE>      and ending range of IP addresses to use for your RAS clients.
</PRE><P>
   5. Click OK twice, click Continue, click Close, and then restart your
<P><PRE>      computer when prompted.
</PRE><P>
   -or-

<LI>Obtain a new set of IP Addresses for your RAS pool by performing the
   following steps:
<P>
   1. Delete all active leases in DHCP manager for the RAS or RRAS
<P><PRE>      Service by performing the following steps:
</PRE><P>
<P><PRE>      a. Click Start, point to Programs, point to Administrative Tools,
<PRE></PRE>         and then click DHCP Manager.

      b. Double-click the DHCP Scope.

      c. Select the active leases and click Delete.

   2. Delete the DHCPAddresses key from the registry by performing the
      following steps:

      a. Click Start, click Run, type "regedt32.exe" (without the
         quotes), and then click OK.

      b. Go to the following subkey:

         HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services
         \RemoteAccess\Parameters\IP\DHCPAddresses

      c. Click Delete on the Edit menu and click Yes in the Warning dialog
         box.

      d. Close Registry Editor and restart your computer.

   -or-

</PRE><LI>Verify that your DHCP Server is operating correctly by trying to Renew
   the address of one of your Local Area Network (LAN) clients.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0. We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
 
<PRE>Keywords          : kbbug4.00 ntnetserv NTRAS ntrouter NTSrv kberrmsg kbnetwork
Version           : WinNT:4.0
Platform          : winnt
Issue type        : kbbug
Solution Type     : kbworkaround</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 10, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
