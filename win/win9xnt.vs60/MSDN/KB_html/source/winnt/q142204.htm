

<HTML>
<HEAD>
<TITLE>CSNW Drive Mappings Incorrect </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q142204">
<META NAME="KBModify" CONTENT="1996/08/26">
<META NAME="KBCreate" CONTENT="1996/01/07">
<META NAME="Keywords" CONTENT="kbnetwork kbinterop kbbug3.51">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Customers running Client Services for NetWare to access a Novell 3.11 server may intermittently receive incorrect volume information for permanent drive mappings. Visible symptoms of this are File Manager showing the directory information for the w...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBXB,QATJ,QAFI,QARL,QAGI,QA7T,QAHB,QA8Y,QAAP,QDO3,QAI5,QBG2,QAJQ,QAH5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>CSNW Drive Mappings Incorrect</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 26, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q142204</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 3.51
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Customers running Client Services for NetWare to access a Novell 3.11
server may intermittently receive incorrect volume information for
permanent drive mappings. Visible symptoms of this are File Manager showing
the directory information for the wrong volume while the Title Bar in File
Manager actually shows the correct volume path (for example, File Manager -
VOL1\Home may actually show the SYS\Apps directory).
<P>
<P><h2>CAUSE</h2>
 
<P>
NetWare clients request directory search handles from a Novell Server for
Volumes it would like to reference or map. Novell contains support for
Temporary and Permanent directory search handles for volume mapping.
Permanent handles are maintained entirely by the client and should only be
terminated by the server when a new volume mapping is requested for the
same drive letter, or the client connection is terminated. The client
maintains the drive mapping by initially requesting a directory search
handle, maintaining a reference to it, and requesting that the handle be
deallocated when it is done.
<P>
Windows NT Client Services for NetWare (CSNW) maintains permanent directory
handles in a list of Volume Control Blocks (VCB's) per Server Connection
Block (SCB). CSNW frees a permanent directory handle when a VCB (mapping)
is freed, or when the owner SCB is marked as down. In the case that the SCB
is marked as down, CSNW actually changes the handle to 0xff indicating a
new directory search handle needs to be requested for this VCB when the SCB
is active again (the connection is re-established) -- like a ghosted
connection.
<P>
In this case, the Novell server loses track of permanent directory search
handles allocated by the Windows NT client. Traces of this problem have
shown no deallocation request for a particular permanent directory search
handle coming from the Windows NT client, and a debug dump of the VCB list
shows a duplicate handle ID is assigned to a new mapping from the Novell
server.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
This problem has been corrected in the latest Service Pack for Windows NT
3.51.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the interoperation of
NetWare and Windows NT version 3.51. A workaround to this problem included
in the latest Windows NT 3.51 U.S. Service Pack. For information on
obtaining the Service Pack, query on the following word in the Microsoft
Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE>NetWare is manufactured by Novell, Inc., a vendor independent of Microsoft;
we make no warranty, implied or otherwise, regarding this product's
performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.50 prodnt novell<BR>
KBCategory: kbnetwork kbinterop kbbug3.50 kbfix3.51.sp4<BR>
KBSubcategory: ntnetserv<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 26, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
