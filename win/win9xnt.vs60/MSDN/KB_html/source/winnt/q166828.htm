

<HTML>
<HEAD>
<TITLE>Upgrade Installion of Windows NT 4.0 Results In STOP Errors </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166828">
<META NAME="KBModify" CONTENT="1998/01/30">
<META NAME="KBCreate" CONTENT="1997/04/11">
<META NAME="Keywords" CONTENT="ntsetup NTSrvWkst ntstop kberrmsg kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  After you install Windows NT 4.0 as an upgrade over an existing installation of Windows NT 4.0 that had a service pack installed, one or more of the following errors may occur:   - STOP: 0x0000001E  (0xC0000005, 0xFF1BBD79, 0x00000000, 0x00000038) ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAA1,QDO3,QDI2,QAC1,QBXB,QATJ,QAA5,QBE7,QBE6,QAFI,QAGB,QDL9,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Upgrade Installion of Windows NT 4.0 Results In STOP Errors</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 30, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166828</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
After you install Windows NT 4.0 as an upgrade over an existing
installation of Windows NT 4.0 that had a service pack installed, one or
more of the following errors may occur:

<UL><LI>STOP: 0x0000001E  (0xC0000005, 0xFF1BBD79, 0x00000000, 0x00000038)
   KMODE_EXCEPTION_NOT_HANDLED Address ff1bbd79 has base at ff1ae000 -
   tcpip.sys.
<P>
   -or-

<LI>STOP 0x00000050 (0xFF10c004, 0x00000000, 0x00000000, 0x00000000)
   PAGE_FAULT_IN_NONPAGED_AREA
<P>
</UL>NOTE: The first argument may change but the STOP code (0x00000050) is the
same. This may occur either as an in-place upgrade of Windows NT or as an
upgrade of Windows NT Workstation to Windows NT Server.
<P>
<P><h2>CAUSE</h2>
 
<P>
Windows NT 4.0 was reinstalled as an upgrade over an installation of
Windows NT 4.0 that had Service Pack 2 or greater installed and Remote
Access Service (RAS) was installed.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
For more information on these specific errors and their resolutions, please
reference the following Microsoft Knowledge Base articles:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q162205.htm">Q162205</A></B>
   TITLE     : "Stop 0x1E" Message Reinstalling Windows NT with SP3 and
               RAS

   ARTICLE-ID: <B><A href="../winnt/q162837.htm">Q162837</A></B>
   TITLE     : Replacing TCP/IP After SP2 Causes STOP 0x00000050

</PRE>If you are trying to restore the system to a bootable condition and remove
Service Pack 2, use the following steps:

<OL><P><LI>If the partition is formatted as NTFS, install Windows NT to a different
   directory so the files on the partition are accessable.

<P><LI>If the partition is formatted as FAT, boot to MS-DOS.

<P><LI>Change directories to the Service Pack 2 uninstall directory:
<P>
   (%WinRoot%\$NtServicePackUninstall$)
<P>
   -or-
<P>
   ($NTSER~1 or similar name if under DOS)

<P><LI>Copy all the *.sys files in the uninstall directory to the
   %WinRoot%\System32\Drivers of the original Windows NT directory.

<P><LI>Copy Win32k.sys from the uninstall directory to%WinRoot%\System32.

<P><LI>Copy all other files to %WinRoot%\System32.

<P><LI>The system should now be starting correctly. Other errors may be
   encountered at this point, but the system should start.

<P><LI>Start the Service Pack 2 update program but select to uninstall the
   service pack. This should bring your system back to a PRE-SP2
   configuration.

<P><LI>If the service pack was not the source of your original problem,
   Microsoft suggests you re-apply the service pack, but choose NOT
   to make an uninstall directory in order to preserve your original
   Windows NT system files already contained in the previous uninstall
   directory.
<P>
</OL><h2>STATUS</h2>
 
<P>
Installing Windows NT 4.0 as an upgrade over an installation of the same
version is not recommended or supported. If files need to be replaced, boot
to MS-DOS if using a partition formatted as FAT and replace the damaged
files, or perform a new installation of Windows NT to a different directory
so a partition formatted as NTFS can be accessed and then replace the
affected files.
<P>
An upgrade will attempt to replace files and modify the registry. This may
result in mismatched files and/or corruption to the registry that may leave
the system unbootable. The in-place upgrade does not replace all service
pack files, thus creating an incompatible mix of service pack and non-
service pack system files.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
This process will NOT work if Service Pack 2 was installed more than once
and the uninstall option was selected without first uninstalling the
service pack, thus overwriting the uninstall directory. Nor will this work
if the uninstall option was not selected during install of the Service
Pack. In this case, a parallel install of Windows NT will be needed so a
tape backup of the original install can be restored.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: sp2 SP 0x1E 0x50<BR>
Keywords          : ntsetup NTSrvWkst ntstop kberrmsg kbsetup<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>
Solution Type     : kbworkaround<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 30, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
