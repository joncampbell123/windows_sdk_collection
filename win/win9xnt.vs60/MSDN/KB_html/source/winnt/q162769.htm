

<HTML>
<HEAD>
<TITLE>Wrong CNAME RR Causes DNS Startup and Zone Transfer Failure </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162769">
<META NAME="KBModify" CONTENT="1997/11/24">
<META NAME="KBCreate" CONTENT="1997/01/28">
<META NAME="Keywords" CONTENT="kbbug4.00 nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  If a Windows NT 4.0 DNS server contains an invalid CNAME RR record (see RFC 1034), the following two problems may occur:   - On a computer running Windows NT 4.0, you receive the following error    when you attempt to use a  net start DNS  command:...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QA5V,QAH6,QATQ,QASP,QAV1,QAV0,QBE7,QBE6,QAUJ,QAAP,QAKP,QBVV,QARM,QAO4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Wrong CNAME RR Causes DNS Startup and Zone Transfer Failure</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 24, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162769</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.00
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If a Windows NT 4.0 DNS server contains an invalid CNAME RR record (see RFC
1034), the following two problems may occur:

<UL><LI>On a computer running Windows NT 4.0, you receive the following error
   when you attempt to use a "net start DNS" command:
<P>
<P><PRE>      System error 13 has occurred. The data is invalid.
</PRE>
<LI>BIND to a Windows NT zone transfer does not complete. The event log only
   shows the following message:
<P>
<P><PRE>      Zone transfer is in progress.
</PRE><P>
</UL><h2>CAUSE</h2>
 
<P>
This problem is caused by the following invalid Resource Record that is
originally coming from a Digital UNIX server running BIND DNS 4.9.4-P1:
<P>
<PRE>   name     IN A  x.x.x.x
            IN CNAME name-xxx.xxx.xx.xxx.xxxxxx.xxx

</PRE><h2>RESOLUTION</h2>
 
<P>
Remove the invalid CNAME RR.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0. We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
While Windows NT shows the invalid entry by line number (DNS event ID 203:
DNS server could not parse database file x line number y), BIND to Windows
NT zone transfer does not generate an error, but does not complete either.
In a network trace, you see Windows NT TCP resetting the connection during
zone transfer.
<P>
BIND to BIND zone transfer reports this CNAME record as invalid, but still
completes the zone transfer.
<P>
See RFC 1034 for more information about CNAME Resource Records. The
following is an excerpt from RFC 1034:
<P>
<PRE>   The domain system provides such a feature using the canonical name
   (CNAME) RR. A CNAME RR identifies its owner name as an alias, and
   specifies the corresponding canonical name in the RDATA section of the
   RR. If a CNAME RR is present at a node, no other data should be present;
   this ensures that the data for a canonical name and its aliases cannot
   be different. This rule also insures that a cached CNAME can be used
   without checking with an authoritative server for other RR types.
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: domain name system request comments comment<BR>
Keywords          : kbbug4.00 nttcp kbnetwork<BR>
Version           : WINNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbpending<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 24, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
