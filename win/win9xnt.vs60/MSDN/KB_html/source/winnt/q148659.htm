

<HTML>
<HEAD>
<TITLE>How to Set Up Windows NT Debug Symbols </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q148659">
<META NAME="KBModify" CONTENT="1996/05/28">
<META NAME="KBCreate" CONTENT="1996/03/18">
<META NAME="Keywords" CONTENT="kbtshoot">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT Debug Symbols must be set up if a computer needs to be remotely or locally debugged. This article provides instructions on how to set up Windows NT Debug Symbols.  MORE INFORMATION  Article Contents   - What Are Symbols  - Setting Up a C...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAA1,QBWP,QDI2,QAFI,QDNN,QAWN,QADF,QDIO,QA9N,QAUJ,QASB,QAHH,QDO3,QAS1,QABA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Set Up Windows NT Debug Symbols</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 28, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q148659</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5 and 3.51
<LI>Microsoft Windows NT Server versions 3.5 and 3.51
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT Debug Symbols must be set up if a computer needs to be remotely
or locally debugged. This article provides instructions on how to
set up Windows NT Debug Symbols.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Article Contents</h3>
 

<UL><LI>What Are Symbols
<LI>Setting Up a Custom Symbol Tree
<LI>Single Processor vs. Multiprocessor
<LI>Custom HAL.DLL
<LI>After the Symbol Tree Is Created
<P>
</UL><h3>What Are Symbols</h3>
 
<P>
Debug Symbol files (symbols) are required to do both kernel and user-mode
debugging in Windows NT. Symbols provide a way to resolve global variables
and function names in the loaded executable file.
<P>
Symbols are produced by the linker when a program is built. They are
stripped out of the retail product and saved in a separate (.DBG) file.
This considerably reduces file size which decreases file load time and thus
increases system performance. Symbols represent Function\API names and
global variables.
<P>
The .DBG file contains symbolic information for each file. They can be
found on the SUPPORT\DEBUG\&lt;platform&gt;\SYMBOLS directory of the Windows NT
installation compact disc.
<P>
Patched builds such as Service Packs require a special set of symbols, that
is a combination of the base build and the patched symbols.
<P>
The SYMBOLS directory is divided up into seven subdirectories, called
Extension Subdirectories (note that many of the symbol files in these
directories match USER MODE components of Windows NT):
<P>
<PRE>   COM - symbols for all files ending in .COM go here
   CPL - symbols for all files ending in .CPL go here.
   DLL - symbols for all files ending in .DLL go here
   DRV - symbols for all files ending in .DRV go here
   EXE - symbols for all files ending in .EXE go here
   SCR - symbols for all files ending in .SCR go here
   SYS - symbols for all files ending in .SYS go here.

</PRE>The symbols must match their respective files. Symbols from a different
build give erroneous information.  All of the symbol file link dates must
match those on the computer being debugged.
<P>
Setting Up a Custom Symbol Trees
 
<P>
The Symbol Tree is the subdirectory tree on the host computer which
contains the symbol files which match the remote computer being debugged.

<OL><P><LI>Create a Subdirectory on the host computer. For example:
<P>
<P><PRE>     MKDIR C:\SYMBOLS
</PRE>
<P><LI>Always start with the base Windows NT version number. Copy the following
   files from the installation compact disc for the appropriate version:
<P>
<P><PRE>     XCOPY [CD Drive]:\SUPPORT\DEBUG\I386 C:\SYMBOLS /S.
</PRE>
<P><LI>Copy the symbols for the appropriate Service Pack into the custom tree.
   Service Pack symbols can be found on FTP.MICROSOFT.COM.
<P>
   For example, the symbols for Windows NT 3.51 Service Pack 4 can be
   downloaded from the following location:
<P>
<P><PRE>       \bussys\winnt\winnt-public\fixes\usa\NT351\ussp4\symbols
</PRE><P>
   Download the file called SYM_351&lt;X&gt;.EXE where X represents the platform
   (I for x86, A for Alpha, P for PPC).
<P>
   Decompress the files into the symbol tree. For example:
<P>
<P><PRE>     SYM_351&lt;X&gt;.EXE -d C:\SYMBOLS
</PRE>
<P><LI>Copy any third-party patches, such as the Compaq SSD symbols, to the
   custom symbol tree. These symbols must be obtained from the third-party
   vendor.

<P><LI>If Microsoft has supplied unique fixes for your installation, copy the
   DBG file supplied with the fix into the appropriate subdirectory (for
   example: SYS, EXE, DLL).

<P><LI>If the computer is a single processor Intel system, the symbol tree is
   complete. Please see the "After the Symbol Tree is Created" section
   below.
<P>
</OL>Single Processor vs. Multiprocessor
 
<P>
Windows NT uses a special kernel for SMP systems. During installation this
kernel is renamed. It is important that the DBF file is renamed for
debugging.
<P>
<PRE>   NTOSKRNL.EXE  NTOSKRNL.DBG  = Single processor
   NTKRNLMP.EXE  NTKRNLMP.DBG  = Multiple processors

</PRE></OL>If the system is a Multi-Processor, do the following:

<OL><P><LI>Change the directory to the DLL component directory. For example:
<P>
<P><PRE>      CHDIR C:\SYMBOLS\DLL
</PRE>
<P><LI>Rename the uniprocessor kernel to another filename. For example:
<P>
<P><PRE>      RENAME NTOSKRNL.DBG NTOSKRNL.UNI
</PRE>
<P><LI>Copy the multiprocessor kernel over the uniprocessor kernel. For
   example:
<P>
<P><PRE>      COPY NTKRNLMP.DBG NTOSKRNL.DBG
</PRE><P>
</OL><h3>Custom HAL.DLL</h3>
 
<P>
Some hardware platforms require a special Hardware Abstraction Layer (HAL)
Driver. Like the Kernel file, the custom HAL is renamed during the
installation process. Here is a list of common HALs:
<P>
HAL files for I386 Computers:
<P>
<PRE>Filename                   Description
</PRE></OL> 
<PRE>HAL.DLL                    Standard HAL for Intel systems
HAL486C.DLL                HAL for 486 c step processor
HALAPIC.DLL                Uniprocessor version of HALMPS.DLL
HALAST.DLL                 HAL for AST SMP systems
HALCBUS.DLL                HAL for Cbus systems
HALMCA.DLL                 HAL for MCA-based systems (PS\2 and others)
HALMPS.DLL                 HAL for most Intel multiprocessor systems
HALNCR.DLL                 HAL for NCR SMP computers
HALOLI.DLL                 HAL for Olivetti SMP computers
HALSP.DLL                  HAL for Compaq Systempro
HALWYSE7.DLL               HAL for Wyse7 systems

</PRE>HAL files for DEC Alpha Computers:
<P>
<PRE>Filename                   Description
</PRE> 
<PRE>HAL0JENS.DLL               Digital DECpc AXP 150 HAL
HALALCOR.DLL               Digital AlphaStation 600 Family
HALAVANT.DLL               Digital AlphaStation 200\400 Family HAL
HALEB64P.DLL               Digital AlphaPC64 HAL
HALGAMMP.DLL               Digital AlphaServer 2x00 5\xxx Family HAL
HALMIKAS.DLL               Digital AlphaServer 1000 Family Uniprocessor HAL
HALNONME.DLL               Digital AXPpci 33 HAL
HALQS.DLL                  Digital Multia MultiClient Desktop HAL
HALSABMP.DLL               Digital AlphaServer 2x00 4\xxx Family HAL

</PRE>HAL files for MIPS Computers:
<P>
<PRE>Filename                   Description
</PRE> 
<PRE>HALACR.DLL                 ACER HAL
HALDTI.DLL                 DESKStation Evolution
HALDUOMP.DLL               Microsoft-designed dual MP HAL
HALFXS.DLL                 MTI with a r4000 or r4400
HALFXSPC.DLL               MTI with a r4600
HALNECMP.DLL               NEC dual MP
HALNTP.DLL                 NeTpower FASTseries
HALR98MP.DLL               NEC 4 processor MP
HALSNI4X.DLL               Siemens Nixdorf UP and MP
HALTYNE.DLL                DESKstation Tyne

</PRE>HAL files for PPC Computers:
<P>
<PRE>Filename                   Description
</PRE> 
<PRE>HALCARO.DLL                HAL for IBM-6070
HALEAGLE.DLL               HAL for Motorola PowerStack and Big Bend
HALFIRE.DLL                Hal for Powerized_ES,
                                   Powerized_MX, and
                                   Powerized_MX MP
HALPOLO.DLL                HAL for IBM-6030
HALPPC.DLL                 HAL for IBM-6015
HALWOOD.DLL                HAL for IBM-6020

</PRE>How to Determine Which HAL to Use:
<P>
During installation, a text log file is created. This file has a line which
shows which HAL is installed during setup. If the HAL has changed after
the original Setup, the SETUP.LOG does not reflect the change. To verify,
do the following:

<OL><P><LI>Go to %SystemRoot%\REPAIR subdirectory.

<P><LI>Run ATTRIB -R -H -S SETUP.LOG to make the file visible.

<P><LI>Use Notepad to view SETUP.LOG and search for "Hal"
<P>
</OL>NOTE: This same technique can be useful to verify if a special kernel is
also used.
<P>
Copy the HAL into the Symbol Tree:

<OL><P><LI> Change directory to \SYMBOLS\DLL.

<P><LI> Rename HAL.DBG to HAL.X86.

<P><LI> Copy the "Custom HLL.DBG" to HAL.DBG.
<P>
</OL><h3>After the Symbol Tree Is Created</h3>
 
<P>
The symbol tree is now complete. For more information, query on the
following word here in the Microsoft Knowledge Base:
<P>
<PRE>   debugref
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbtshoot<BR>
KBSubcategory: ntstop<BR>
Additional reference words: 3.50 3.51 prodnt debugref<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 28, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
