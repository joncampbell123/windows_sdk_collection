

<HTML>
<HEAD>
<TITLE>Problems Copying Files To Novell NetWare 3.11 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q163877">
<META NAME="KBModify" CONTENT="1998/02/05">
<META NAME="KBCreate" CONTENT="1997/02/19">
<META NAME="Keywords" CONTENT="kbbug3.51 kbbug4.00 NTINTEROP NTPROTOCOL NTSrvWkst kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  You may experience problems copying files on a Token Ring network from a computer running Windows NT to a Novell server running NetWare 3.11 (or earlier).  Attempts to copy files (using File Manager, for example) over a certain size may fail with t...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAKP,QAGI,QBWS,QALG,QBBI,QAKC,QDIR,QAL0,QBVV,QBDM,QBC6,QA9N,QASB,QAK2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Problems Copying Files To Novell NetWare 3.11</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 5, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q163877</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.51 and 4.0
<LI>Microsoft Windows NT Server version 3.51 and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
You may experience problems copying files on a Token Ring network from a
computer running Windows NT to a Novell server running NetWare 3.11 (or
earlier).
<P>
Attempts to copy files (using File Manager, for example) over a certain
size may fail with the following error :
<P>
<PRE>   The Remote Computer is Not Available

</PRE><h2>CAUSE</h2>
 
<P>
Windows NT's Nwrdr.sys calculates an incorrect maximum packet size under
these specific circumstances.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
WARNING: Using Registry Editor incorrectly can cause serious problems that
may require you to reinstall your operating system. Microsoft cannot
guarantee that problems resulting from the incorrect use of Registry Editor
can be solved. Use Registry Editor at your own risk.
<P>
For information about how to edit the registry, view the "Changing Keys And
Values" Help topic in Registry Editor (Regedit.exe) or the "Add and Delete
Information in the Registry" and "Edit Registry Data" Help topics in
Regedt32.exe. Note that you should back up the registry before you edit it.
<P>
To work around this problem, perform the following steps:

<OL><P><LI>Start Registry Editor (Regedt32.exe) and go to the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NWRDR
      \Parameters\DefaultMaxPacketSize
</PRE><P>
<P><PRE>      NOTE: The above registry key is one path; it has been wrapped for
      readability.
</PRE>
<P><LI>Select the DefaultMaxPacketSize parameter and set number to a MaxPktSize
   number minus 85.
<P>
   For example, if you have specified a MaxPktSize of 1500, you should set
   DefaultMaxPacketSize to 1415. That is, 1500 minus 85 = 1415.
<P>
</OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.51 And
Windows NT version 4.0. We are researching this problem and will post new
information here in the Microsoft Knowledge Base as it becomes available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For this problem to occur, the following conditions must apply:

<OL><P><LI>PBURST is enabled on the computer running Windows NT.

<P><LI>The NetWare server refuses the computer running Windows NT PBURST
   request.

<P><LI>You have specified a value for the following registry parameter:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\NWLinkIPX
      \NetConfig\&lt;drivername&gt;\MaxPktSize
</PRE><P>
<P><PRE>      NOTE: The above registry key is one path; it has been wrapped for
      readability.
</PRE><P>
   that is smaller than the buffer size the computers would normally
   negotiate by default if this value was absent from the registry.
<P>
</OL>MaxPktSize (a REG_DWORD) is usually used to limit the size of transmitted
frames, to permit communications through routers whose largest maximum
transfer unit (MTU) is smaller than that of the Token Ring medium in use.
<P>
If MaxPktSize is specified, problems may be encountered when attempting to
transfer files larger in size than MaxPktSize number minus 85.
<P>
Note that for the NetWare server to refuse a PBURST request it must be
running a version of NetWare earlier than 3.11 (for which PBURST is not
available) or it must be running NetWare 3.11 and not have PBURST.NLM
loaded. In NetWare 3.12 and later, PBURST support is built into the
operating system and it cannot be disabled. If the NetWare server is
running 3.11 with PBURST.NLM loaded, or is running 3.12 or later, you
should not see this problem.
<P>
<PRE> The Magic Number of 85 is an allowance for the following:

   Token Ring Header................ 14 bytes
   Token Ring Source Routing Info... 18 bytes max
   LLC Header.......................  3 bytes
   NCP Packet Header................ 30 bytes
   NCP Write Request................  7 bytes
   File Write Request............... 13 bytes

   Total............................ 85 bytes max
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: CSNW GSNW<BR>
Keywords          : kbbug3.51 kbbug4.00 NTINTEROP NTPROTOCOL NTSrvWkst kbnetwork<BR>
Version           : WinNT:3.51,4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 5, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
