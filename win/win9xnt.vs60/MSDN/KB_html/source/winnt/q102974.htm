

<HTML>
<HEAD>
<TITLE>REG: TCP/IP Transport Entries, PART 2 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102974">
<META NAME="KBModify" CONTENT="1997/05/08">
<META NAME="KBCreate" CONTENT="1993/08/12">
<META NAME="Keywords" CONTENT="kbother ntregistry">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" This is the second of two articles on these entries; for the other entries, see  TCP/IP Transport Entries, Part 1.   TCP/IP TRANSPORT ENTRIES  The various TCP/IP keys do not appear in the Registry unless TCP/IP is installed using the Network icon in...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW9,QABA,QAKD,QAHE,QDNT,QAH6,QBWD,QBBI,QAKC,QASC,QACK,QARL,QAI5,QBTX,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>REG: TCP/IP Transport Entries, PART 2</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 8, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102974</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Windows NT operating system version 3.1
<LI>Windows NT Advanced Server version 3.1
<P>
</UL>The article contains REGISTRY entries for the TCP/IP Transport, Part 2.
These subgroups are included:

<UL><LI>FTP Server Service Entries for TCP/IP
<LI>NBT Parameters for TCP/IP
<LI>Streams Parameters for TCP/IP
<LI>Windows Sockets Entries for TCP/IP
</UL> 
<P>
This is the second of two articles on these entries; for the other
entries, see "TCP/IP Transport Entries, Part 1."
<P>
<P><h2>TCP/IP TRANSPORT ENTRIES</h2>
 
<P>
The various TCP/IP keys do not appear in the Registry unless TCP/IP is
installed using the Network icon in Control Panel. With Registry Editor,
you can modify the following parameters for the TCP/IP transport. This
section does not include all the TCP/IP parameters that can be set using
the Networks application in Control Panel.
<P>
The startup parameters defined in this section are found in these subkeys
of HKEY_LOCAL_MACHINE\SYSTEM\System\CurrentControlSet\Services:
<P>
<PRE>   TCPIP\Parameters
   Adapter_name#\Parameters\TCPIP, (where adapter_name# indicates a
                           Services subkey for a network adapter
                           card)
   Ftpsvc\Parameters
   NBT\Parameters
   Streams\Parameters

</PRE>Parameters for network bindings for this service are described in the
article "NetRules Subkey Entries." See also IsDomainMasterBrowser in the
article "Browser Service Entries."
<P>
<P><h2>FTP SERVER SERVICE ENTRIES FOR TCP/IP</h2>
 
<P>
The following Registry path contains parameters that affect the behavior of
the FTP server service component:
<P>
<PRE>   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Ftpsvc\Parameters

</PRE>The Ftpsvc subkey does not appear until you install the FTP service using
the Network icon in Control Panel. Also, you must restart the FTP server
service (Ftpsvc) using the Services icon in Control Panel for any changes
to these values to take effect.
<P>
There can also be an AccessCheck subkey under Ftpsvc, which allows access
to FTP for new users. If the AccessCheck subkey exists, but cannot be
opened, the user is refused FTP services. If the subkey exists but can only
be opened for read access, the user is granted read-only FTP access. If the
subkey does not exist, it is not used to influence FTP access. By default,
this subkey does not exist and therefore has no impact on FTP operations.
An administrator can create this Registry subkey and attach specific access
controls. which will serve to control user access to the FTP service.
<P>
<PRE>AllowAnonymous   REG_DWORD   0 or 1
</PRE> 
Default: 1 (true - anonymous logins are allowed)
<P>
Controls anonymous logins. Anonymous logins are only allowed if this value
is non-zero (true).
<P>
<PRE>AnnotateDirectories   REG_DWORD   0 or 1
</PRE> 
Default: 0 (false -do not send directory annotations)
<P>
When this value is 1, every time a user changes directories (that is, sends
the server a CWD command), an attempt is made to open a file named
~FTPSVC~.CKM in the new directory. If this file is found, its contents are
sent to the user as part of the successful reply to the CWD command. This
may be used to attach annotations to specific directories. This value is
used as a default for new users. Users can toggle their own personal
annotate directories flag with the site-specific CKM command (SITE CKM).
<P>
<PRE>AnonymousOnly   REG_DWORD   0 or 1
</PRE> 
Default: 0 (false -non-anonymous logins are allowed)
<P>
When this value is 1, only anonymous logins are allowed. Otherwise, non-
anonymous logins are allowed as well.
<P>
<PRE>AnonymousUserName   REG_SZ   UserName
</PRE> 
Default: "Guest"
<P>
Contains the anonymous login alias. When a user attempts an anonymous
login, the username specified ("anonymous") is mapped to this Registry
value for authentication and impersonation. The password for this account
is stored in an LSA secret object named FTPD_ANONYMOUS_DATA.
<P>
<PRE>ConnectionTimeout   REG_DWORD   Seconds
</PRE> 
Default: 600 (10 minutes)
<P>
Specifies the time to allow clients to remain idle before forcibly
disconnecting them. This prevents idle clients from consuming server
resources indefinitely. This value may be set to 0 if time-outs are not to
be enforced. If set to 0, idle clients may remain connected indefinitely.
<P>
<PRE>DebugFlags   REG_DWORD   BitFields
</PRE> 
Default: 0 (no debug output)
<P>
Used only by the debugging (checked) builds of the FTP Server to control
the output of various debugging information. This value is unused (and
ignored) by retail builds.
<P>
<PRE>ExitMessage   REG_SZ   Message
</PRE> 
Default: "Goodbye."
<P>
Specifies a signoff message sent to an FTP client upon receipt of a QUIT
command.
<P>
<PRE>GreetingMessage   REG_MULTI_SZ   Strings
</PRE> 
Default: None (no special greeting message)
<P>
Specifies the message (if this value exists in the Registry) to be sent to
new clients after their account has been validated. In accordance with de
facto Internet behaviour, if a client logs on as anonymous and specifies an
identity starting with a '-' (minus), then this greeting message is not
sent.
<P>
<PRE>HomeDirectory   REG_EXPAND_SZ   Path
</PRE> 
Default: C:\
<P>
Specifies the initial home directory for new clients. After a new client is
validated, an attempt is made to change to this directory with the Chdir
command. If this directory is inaccessible, the client is refused FTP
services. If Chdir is successful, then an attempt is made to change to a
directory with the same name as the client’s username. If this fails, an
attempt is made to change to a directory called DEFAULT. If this fails, the
current directory is left at home. If a new client connects and finds the
home directory is inaccessible, an event is written to the event log.
<P>
<PRE>LogAnonymous   REG_DWORD   0 or 1
</PRE> 
Default: 0 (false -do not log successful anonymous logins)
<P>
When this value is 1, all successful anonymous logins are logged to the
system event log.
<P>
<PRE>LogNonAnonymous   REG_DWORD   0 or 1
</PRE> 
Default: 0 (false, that is, do not log successful non-anonymous logins)
<P>
When this value is 1, all successful non-anonymous logins are logged to the
system event log.
<P>
<PRE>MaxClientsMessage   REG_SZ   Message
</PRE> 
Default: "Maximum clients reached, service unavailable."
<P>
Specifies the message (if this value exists in the Registry) to be sent to
a client if the maximum number of clients has been reached or exceeded.
This indicates that the server is currently servicing the maximum number of
simultaneous clients and is refusing additional clients. See
MaxConnections.
<P>
<PRE>MaxConnections   REG_DWORD   0 or 1
</PRE> 
Default: 20
<P>
Specifies the maximum number of simultaneous clients the server will
service. This value may be set to 0 if there is to be no limit on
simultaneous clients.
<P>
<PRE>MsdosDirOutput   REG_DWORD   0 or 1
</PRE> 
Default: 1 (true-directory listings will look like MS-DOS)
<P>
When this value is 1, the output of the LIST command (usually sent as a
result of a DIR command from the client) will look like the output of the
MS-DOS dir command. If this value is 0, the output of the LIST command
looks like the output of the Unix ls command.
<P>
This value also controls slash flipping in the path sent by the PWD
command. When this value is 1 (true), the path contains backward slashes
(\). If this value is 0 (false), the path contains forward slashes (/).
This value is used as a default for new users. Users can toggle their own
personal MS-DOS directory output flag with the site-specific DIRSTYLE
command (SITE DIRSTYLE).
<P>
<PRE>ReadAccessMask   REG_DWORD   BitFields
</PRE> 
Default: 0 (all read access denied)
<P>
This value is a bitmask and controls the read ability of the various disk
volumes in the system. Drive A corresponds to bit 0, drive B corresponds to
bit 1, drive C corresponds to bit 2, and so on. A user may only read from a
specific volume if the corresponding bit is set.
<P>
<PRE>WriteAccessMask   REG_DWORD   BitFields
</PRE> 
Default: 0 (all write access denied)
<P>
This value is a bitmask and controls the write ability of the various disk
volumes in the system. Drive A corresponds to bit 0, drive B corresponds to
bit 1, drive C corresponds to bit 2, and so on. A user may only write to a
specific volume if the corresponding bit is set.
<P>
<P><h2>NBT PARAMETERS FOR TCP/IP</h2>
 
<P>
NBT is the NetBIOS over TCP/IP service. Parameters for TCP/IP are also
configured under NBT in the following Registry path:
<P>
<PRE>   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NBT\Parameters

MaxPreload   REG_DWORD   Number
</PRE> 
Default: 100
<P>
Specifies the maximum NBT number of entries for LMHOSTS that are preloaded
into the NBT NetBIOS name cache. LMHOSTS is a file located in the directory
specified by DatabasePath.
<P>
<PRE>NbProvider   REG_SZ   DLL name
</PRE> 
Default: _tcp
<P>
This value is only present for network services that provide a NetBIOS
interface.  Its presence causes LanMan information to be maintained for the
transport. The value data represents the RPC provider string used to select
the proper DLL for interfacing RPC to the transport.
<P>
<PRE>NbtKeepAlive   REG_DWORD   Number in seconds
</PRE> 
Default:  0 (Do not generate NBT keep-alive traffic.)
<P>
Specifies how often NBT will generate keep-alive traffic. When NBT
determines that no activity has occurred on a connection for the specified
time interval, it will generate keep-alive traffic to probe the connection.
If TCP/IP is unable to deliver this traffic, it marks the connection as
down and notifies NBT.
<P>
<PRE>PermanentName   REG_SZ   Unique name
</PRE> 
Default: The value of IPAddress in dotted decimal
<P>
Specifies the permanent name of the NetBIOS node for NBT. In many NetBIOS
implementations, this is the MAC address. This name must be unique.
<P>
<P><h2>STREAMS PARAMETERS FOR TCP/IP</h2>
 
<P>
The TCP/IP parameter for Streams are found under the following Registry
path:
<P>
<PRE>   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Streams\Parameters

MaxMemoryUsage   REG_DWORD   Number of bytes
</PRE> 
Default: No limit
<P>
Specifies the maximum amount of memory that can be allocated to the Streams
environment. Once this limit is reached, Streams will fail allocation
requests made by Streams-based drivers.
<P>
<P><h2>WINDOWS SOCKETS ENTRIES FOR TCP/IP</h2>
 
<P>
All Windows Sockets parameters can be set by choosing the Network icon in
Control Panel. These parameters are found in two locations, as shown here.
<P>
HKEY_LOCAL_MACHINE\SYSTEM\
<P><h3>CurrentControlSet\Services\Winsock\Parameters</h3>
 
<P>
<PRE>Transports   REG_Multi_SZ   Strings
</PRE> 
Default: Depends on installation
<P>
Contains the Regisry key names of installed transports that support Windows
Sockets. If TCP/IP is the only installed transport that supports Windows
Sockets, then this value is Tcpip. The Windows Sockets DLL uses the strings
in Transports to find information about each transport.
<P>
HKEY_LOCAL_MACHINE\SYSTEM\
<P><h3>CurrentControlSet\Services\TCPIP\Parameters\Winsock</h3>
 
<P>
<PRE>HelperDllName   REG_EXPAND_SZ   Path and filename
</PRE> 
Default: Depends on the transport; %SystemRoot%\system32\wshtcpip.dll
for TCP/IP.
<P>
Specifies the name of the Windows Sockets helper DLL for the TCP/IP
transport. This value is set by the Windows Sockets DLL and is not a user
settable parameter.
<P>
<PRE>IRPStackSize   REG_DWORD   Number
</PRE> 
Default: 4
<P>
Specifies the number of IRP stack locations needed by AFD, the driver used
for Windows Sockets. The default is sufficient for all existing transports,
but new transports may be developed that need more IRP stack locations.
<P>
<PRE>Mapping   REG_BINARY
</PRE> 
Default:  Depends on transport
<P>
Identifies the address families, socket types, and protocols supported by
the transport. This value is set by the Windows Sockets DLL and is not a
user settable parameter.
<P>
<PRE>MaxSockAddrLen   REG_DWORD   Octets
</PRE> 
<P>
Specifies the maximum length of socket addresses for the INET sockets
family. This value is set by the Windows Sockets DLL and is not a user
settable parameter.
<P>
<PRE>MinSockAddrLen   REG_DWORD   Octets
</PRE> 
<P>
Specifies the minimum length of socket addresses for the INET sockets
family. This value is set by the Windows Sockets DLL and is not a user
settable parameter.
<P>
Reference: "The Windows NT Resource Kit for Operating System Version 3.1."
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbother ntregistry<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 8, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
