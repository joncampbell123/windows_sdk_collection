

<HTML>
<HEAD>
<TITLE>Custom DHCP Client Identifiers for Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172408">
<META NAME="KBModify" CONTENT="1997/11/07">
<META NAME="KBCreate" CONTENT="1997/08/05">
<META NAME="Keywords" CONTENT="nthowto ntnetserv NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  A Dynamic Host Configuration Protocol (DHCP) client will normally use the media access control address of its network interface card (NIC) to identify itself to a DHCP server. Windows NT DHCP clients can also have client identifiers manually config...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDJG,QARL,QBWD,QAC2,QAVZ,QA4S,QA4R,QAY2,QAGI,QAB5,QAJQ,QBW7,QAI5,QAR5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Custom DHCP Client Identifiers for Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 7, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172408</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
A Dynamic Host Configuration Protocol (DHCP) client will normally use the
media access control address of its network interface card (NIC) to
identify itself to a DHCP server. Windows NT DHCP clients can also have
client identifiers manually configured.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When DHCP clients request and renew IP addresses, they normally send their
hardware type and media access control address to a DHCP Server as a unique
identifier. This allows the DHCP server to track the allocation of
addresses and allows administrators to reserve addresses for specific
interfaces. This client identifier is sent as option 61 in the client's
DHCP Discover and Request packets as described in RFC2132, "DHCP Options
and BOOTP Vendor Extensions." In general, this identifier will be the media
access control address of the network interface card requesting the
address, but this is not required.
<P>
Most implementations of DHCP are simplified by allowing the Windows NT
client to automatically specify their media access control address, but it
is possible in Windows NT 4.0 to manually enter a client identifier. This
allows an administrator to reserve an IP address for a DHCP client so the
client will receive the same IP address even if its network card is
replaced.
<P>
Implementing a user-defined DHCP client identifier requires Windows NT 4.0
SP2 or later. To manually configure a DHCP client identifier, perform the
following steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor (Regedt32.exe) and select the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\
      &lt;Adapter Name&gt;'X'\Parameters\Tcpip.
</PRE><P>
   where &lt;Adapter Name&gt; is the network adapter driver name and 'X' is the
   number of the adapter. For example, for an Intel Etherexpress Pro
   network adapter the &lt;Adapter Name&gt; is Epro so you might have an entry
   similar to Epro1.

<P><LI>Click Add value from the Edit menu, and type the following information:
<P>
<P><PRE>      Value Name: DhcpClientIdentifier
      Value Type: REG_DWORD
      Value Range: 0x0 - 0xFFFFFFFF
      Value Default: 0x0
</PRE>
<P><LI>Click OK, exit Registry Editor, and restart the system for the changes
   to take effect.
<P>
</OL><h3>Creating a DHCP Server Reservation</h3>
 
<P>
A DHCP server can use a custom DHCP client identifier to reserve an IP
address for a specific network interface card. If the NIC is replaced, the
new NIC will receive the same IP address from the DHCP server. When a
Windows NT DHCP client sends a client identifier to a DHCP server, it sends
the identifier as 4 bytes, or 8 hexadecimal characters. The identifier is
sent in groups of two hexadecimal characters, with these groups of two sent
in reverse order. If the identifier is less than 8 hexadecimal characters,
then zeros are padded at the end of the identifier. For example:
<P>
<PRE>Custom Client Identifier      Client Reservation on DHCP Server

12345678                      78563412
123456                        56341200
1234                          34120000
1234567                       67452301
12345                         45230100
123                           23010000
A18F42                        428FA100
CF432                         32F40C00
C32D1BE                       BED1320C

</PRE></OL>Refer to the online Help in DHCP Manager under the section "Managing Client
Reservations" and pages 206-207 of the Windows NT 4.0 Server Networking
Guide.
<P>
<P><h3>Reference(s)</h3>
 
<P>
For more information on DHCP reservations, see RFC1700 and RFC2131.
<P>
RFCs may be obtained through the Internet as follows:
<P>
Paper copies of all RFCs are available from the NIC, either individually or
on a subscription basis (for more information contact NIC@NIC.DDN.MIL).
Online copies are available via FTP or Kermit from NIC.DDN.MIL as
rfc/rfc####.txt or rfc/rfc####.PS (#### is the RFC number without leading
zeroes).
<P>
Additionally, RFCs may be requested through electronic mail from the
automated NIC mail server by sending a message to SERVICE@NIC.DDN.MIL with
a subject line of "rfc ####" for text versions or a subject line of "rfc
####.PS" for PostScript versions. To obtain the RFC index, the subject line
of your message should read "rfc index".
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: CID<BR>
Keywords          : nthowto ntnetserv NTSrvWkst nttcp kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 7, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
