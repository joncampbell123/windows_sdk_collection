

<HTML>
<HEAD>
<TITLE>Poor Performance May Occur During FTP File Transfers </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q149525">
<META NAME="KBModify" CONTENT="1997/03/24">
<META NAME="KBCreate" CONTENT="1996/04/04">
<META NAME="Keywords" CONTENT="kbbug3.51 kbnetwork NTSrvWkst nttcp">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you use the Microsoft FTP client you may notice delays of up to 5 seconds between 4096-byte data transmissions to an FTP server.  CAUSE =====  The retail Windows NT FTP client has a hard-coded send size of 4096 bytes. Because 4096 may not be e...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW9,QBWP,QAH6,QAR4,QANY,QAML,QAKR,QAHE,QBVV,QAVZ,QAO4,QAQW,QDL9,QBWQ,QBWO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Poor Performance May Occur During FTP File Transfers</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 24, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q149525</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.51
<LI>Microsoft Windows NT Server version 3.51
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you use the Microsoft FTP client you may notice delays of up
to 5 seconds between 4096-byte data transmissions to an FTP server.
<P>
<P><h2>CAUSE</h2>
 
<P>
The retail Windows NT FTP client has a hard-coded send size of 4096
bytes. Because 4096 may not be evenly divisible by the maximum segment
size (MSS) for that network interface, the last transmit in every FTP send
will not fill the space available in the TCP packet. For example, if the
TCP/IP MSS is 536 bytes, FTP sends are not evenly divisible by the MSS,
ensuring that the last segment sent will always be less than one MSS.
<P>
If a send request occurs that is less than one segment, Silly Window
Syndrome (SWS) can occur. To avoid SWS, the TCP/IP stack will hold the send
for 5 seconds, or until there is enough data queued to send a full segment.
<P>
Note: For more information on SWS, please refer to Internet RFC 813.  For
more information on MSS, please refer to Internet RFC 879.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To resolve this problem, install the fix mentioned below.
<P>
To correct this problem, apply the fix mentioned below. The following new
switch can now be used with the fix:
<P>
<PRE>   -w:buffersize

</PRE>This switch overrides the default transfer buffer size of 4096. The switch
has been added to FTP to allow the send size to be configurable. This will
allow FTP users to ensure that the send size is always evenly divisible by
the MSS on the network interface being used, thus preventing SWS.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT Workstation
version 3.51 and Windows NT Server version 3.51. This problem was corrected
in the latest U.S. Service Pack for Windows NT Workstation or Server
version 3.51. For information on obtaining this update, query on the
following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbbug3.51 kbnetwork NTSrvWkst nttcp<BR>
Version             : 3.51<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 24, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
