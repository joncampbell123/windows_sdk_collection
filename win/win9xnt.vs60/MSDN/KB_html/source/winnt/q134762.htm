

<HTML>
<HEAD>
<TITLE>STOP Msg: 0x0000007B Upgrading Compaq w/ Integrated SCSI-2 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q134762">
<META NAME="KBModify" CONTENT="1997/03/21">
<META NAME="KBCreate" CONTENT="1995/08/10">
<META NAME="Keywords" CONTENT="kbbug3.51 kbsetup ntdriver ntsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you upgrade any Compaq computer that contains an integrated SCSI-2 controller from Windows NT version 3.5 to 3.51, using the  WINNT32 /B  command or the floppy disk set, this STOP Message appears when you reboot:     STOP 0x0000007B 'Inaccessi...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWS,QAA1,QAG2,QA2Q,QAUR,QAC1,QAY2,QAF0,QAA5,QDNL,QDI2,QAGB,QANS,QAU7 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>STOP Msg: 0x0000007B Upgrading Compaq w/ Integrated SCSI-2</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q134762</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.51
<LI>Microsoft Windows NT Server version 3.51
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you upgrade any Compaq computer that contains an integrated SCSI-2
controller from Windows NT version 3.5 to 3.51, using the "WINNT32 /B"
command or the floppy disk set, this STOP Message appears when you reboot:
<P>
<PRE>   STOP 0x0000007B 'Inaccessible Boot Device'

</PRE>Compaq computers containing this controller include:
<P>
Compaq Proliant 1000 ,1500, 2000, 4000, and 4500R
Compaq Prosignia VS, 300, and 500
<P>
<P><h2>CAUSE</h2>
 
<P>
This occur because the upgrade process disables the SCSI-2 Controller
Miniport Driver (CPQ32FS2.SYS).
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To restore the deleted key and to continue with the original Windows NT
3.51 upgrade:

<OL><P><LI>Re-install Windows NT 3.51 with a "new installation" versus an "upgrade
   installation." Into a separate directory (for example, NTV351)

<P><LI>Use Regedt32 to modify the failed NT upgrade registry as follows:
<P>
   WARNING: Using the Registry Editor incorrectly can cause serious,
   system-wide problems that may require you to reinstall Windows NT to
   correct them. Microsoft cannot guarantee that any problems resulting
   from the use of the Registry Editor can be solved. Use this tool at your
   own risk.
<P>
<P><PRE>       A) Run Regedt32 from the new NT V3.51 installation.
</PRE><P>
<P><PRE>       B) Open the HKEY_LOCAL_MACHINE window
</PRE><P>
<P><PRE>       C) Highlight the HKEY_LOCAL_MACHINE Key
</PRE><P>
<P><PRE>       D) Select Registry  - load hive - from the menu.
</PRE><P>
<P><PRE>       E) In the load hive dialog box, find your original NT installation
<PRE></PRE>          directory %systemroot%\system32\config and select the SYSTEM
          file.

       F) Enter WORK for the key name. This will load the SYSTEM hive as
          WORK

       G) Double click the existing SYSTEM\CurrentControlSet\Services keys
          and locate the CPQ32FS2 key

       H) Highlight this key then select "registry - save key" from the
          menu bar and call it CPQ32FS2.KEY

       I) Double click the WORK - select - key and read the entry for
          current:REG_DWORD:0x1

       J) Use the value in this key to determine which controlset#  to
          modify.

       K) Double click that controlset# - services - and select EDIT - ADD
          KEY  from the menu bar.

       L) Enter cpq32fs2 for the key name, leave the class blank and select
          OK to save.

       M) Highlight this newly created cpq32fs2 key and select REGISTRY -
          RESTORE from the menu bar and select the CPQ32FS2.KEY saved
          earlier. Say yes to restore on top of selected key.

       N) Double click the WORK key to collapse the key. Then choose
          registry - unload hive to save.

       O) exit regedt32 and reboot the machine

       P) select the proper boot menu entry to continue with the original
          NT V3.51 upgrade.

</PRE></OL>To prevent disabling of the CPQ32FS2.SYS driver for future upgrades:

<OL><P><LI>Make a backup copy of the first Windows NT 3.51 installation disk.

<P><LI>Remove the read-only attribute from the TXTSETUP.SIF file on this disk.

<P><LI>Open TXTSETUP.SIF with a text editor. Removing the following line under
   the [KeysToDelete] section:
<P>
<P><PRE>      ControlSet, "Services\CPQ32FS2"
</PRE>
<P><LI>Save the edited TXTSETUP.SIF file.

<P><LI>Use the modified disk to upgrade Windows NT 3.5 to 3.51.
<P>
</OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.51. We
are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbbug3.51 kbsetup ntdriver ntsetup<BR>
Version             : 3.51<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 21, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
