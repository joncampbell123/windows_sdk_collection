

<HTML>
<HEAD>
<TITLE>Description of DNS Reverse Lookups </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q164213">
<META NAME="KBModify" CONTENT="1997/12/29">
<META NAME="KBCreate" CONTENT="1997/02/25">
<META NAME="Keywords" CONTENT="NTSrv">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  In a Domain Name System (DNS) environment, it is common for a user or an application to request a Reverse Lookup of a host name, given the IP address. This article explains this process.  MORE INFORMATION  The following is quoted from RFC 1035:    ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QAGC,QALX,QAC2,QAVZ,QAUJ,QA9A,QALW,QABO,QAMB,QAP2,QAIM,QARM,QBW3,QAR5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Description of DNS Reverse Lookups</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 29, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q164213</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In a Domain Name System (DNS) environment, it is common for a user or an
application to request a Reverse Lookup of a host name, given the IP
address. This article explains this process.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following is quoted from RFC 1035:
<P>
<PRE>   "The Internet uses a special domain to support gateway location and
   Internet address to host mapping. Other classes may employ a similar
   strategy in other domains. The intent of this domain is to provide a
   guaranteed method to perform host address to host name mapping, and to
   facilitate queries to locate all gateways on a particular network on the
   Internet.

   The domain begins at IN-ADDR.ARPA and has a substructure which follows
   the Internet addressing structure.

   Domain names in the IN-ADDR.ARPA domain are defined to have up to four
   labels in addition to the IN-ADDR.ARPA suffix. Each label represents
   one octet of an Internet address, and is expressed as a character string
   for a decimal value in the range 0-255 (with leading zeros omitted
   except in the case of a zero octet which is represented by a single
   zero).

   Host addresses are represented by domain names that have all four labels
   specified."

</PRE>Reverse Lookup files use the structure specified in RFC 1035. For example,
if you have a network which is 150.10.0.0, then the Reverse Lookup file for
this network would be 10.150.IN-ADDR.ARPA. Any hosts with IP addresses in
the 150.10.0.0 network will have a PTR (or 'Pointer') entry in 10.150.IN-
<PRE>ADDR.ARPA referencing the host name for that IP address. A single        IN-
</PRE>ADDR.ARPA file may contain entries for hosts in many domains.
<P>
Consider the following scenario. There is a Reverse Lookup file
10.150.IN-ADDR.ARPA with the following contents:
<P>
<PRE>   1.20          IN     PTR     WS1.ACME.COM.
   2.20          IN     PTR     WS2.ACME.COM.
   3.20          IN     PTR     WS3.ACME.COM.
   50.100        IN     PTR     FREE.MONEY.COM.
   190.50        IN     PTR     J232.MSN.COM.

</PRE>If a DNS resolver wanted to find the host name corresponding to IP address
150.10.20.1, it would send a query of the form QTYPE=PTR, QCLASS=IN,
QNAME=1.20.10.150.IN-ADDR.ARPA, and would receive:
<P>
<PRE>   1.20.10.150.IN-ADDR.ARPA.   WS1.ACME.COM.

</PRE>The following is a Network Monitor capture of this process:
<P>
Frame 1: This frame shows the query for host name resolution of the IP
address 150.10.20.1. Note that this is consistent with RFC 1035.
QTYPE=Question Type, QCLASS=Question Class and QNAME=Question Name.
<P>
0x1:Std Qry for 1.20.10.150.in-addr.arpa. of type Dom. name ptr on class
INET addr.
<P>
<PRE>   DNS: Question Section: 1.20.10.150.in-addr.arpa. of type Dom. name ptr
        on class INET addr.
      DNS: Question Name: 1.20.10.150.in-addr.arpa.
      DNS: Question Type = Domain name pointer
      DNS: Question Class = Internet address class

</PRE>Frame 2: Here you see the answer section of the response sent back to the
requesting client has the host name of the IP address 150.10.20.1, which is
WS1.ACME.COM.
<P>
0x1:Std Qry Resp. for 1.20.10.150.in-addr.arpa. of type Dom. name ptr on
class INET addr.
<P>
<PRE>   DNS: Answer section: 1.20.10.150.in-addr.arpa. of type Dom. name ptr on
         class INET addr.(3 records present)
      DNS: Resource Record: 1.20.10.150.in-addr.arpa. of type Dom. name
           ptr on class INET addr.
         DNS: Resource Name: 1.20.10.150.in-addr.arpa.
         DNS: Resource Type = Domain name pointer
         DNS: Resource Class = Internet address class
         DNS: Time To Live = 3600 (0xE10)
         DNS: Resource Data Length = 21 (0x15)
         DNS: Pointer: WS1.ACME.COM.

</PRE>Microsoft Windows NT 4.0 DNS Server is compliant with RFC 1035's
description of DNS Reverse Lookups.
 
<PRE>Keywords          : NTSrv
Version           : WinNT:4.0
Platform          : winnt</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 29, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
