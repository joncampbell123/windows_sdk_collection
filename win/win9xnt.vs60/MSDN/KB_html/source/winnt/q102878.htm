

<HTML>
<HEAD>
<TITLE>Information on Browser Operation </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102878">
<META NAME="KBModify" CONTENT="1997/03/25">
<META NAME="KBCreate" CONTENT="1993/08/11">
<META NAME="Keywords" CONTENT="kbnetwork ntnetserv NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The Computer Browser service lets you track servers that are active on the network with a minimum of network overhead. It consists of two components on a Windows NT or Windows NT Advanced Server computer.  The User Mode component is the Browser, wh...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA9A,QBWP,QAMA,QAOE,QBW3,QBD0,QAVZ,QAUJ,QBWO,QBWE,QAE1,QAPF,QAM4,QDIU,QA3W V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Information on Browser Operation</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102878</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The Computer Browser service lets you track servers that are active on
the network with a minimum of network overhead. It consists of two
components on a Windows NT or Windows NT Advanced Server computer.
<P>
The User Mode component is the Browser, which is part of the LAN
Manager Server service. This portion is responsible for maintaining
the browse list, remoting the NetServerEnum API, and managing the
computer's role as a Browser (or non-Browser).
<P>
The Kernel Mode component is the Datagram Receiver and is in charge of
receiving and managing datagrams.
<P>
<P><h3>Browser Roles</h3>
 
<P>
A network can contain the following types of servers related to
browsing:
<P>
Non-Browser Servers - Do not maintain browse lists, but announce
themselves periodically to the Master Browser.
<P>
Potential Browser - Can become a Browser server if needed.
<P>
Backup Browser - Maintains a browse list of servers and domains that
it retrieves from the Master Browser.
<P>
Master Browser - Receives server and Domain announcements, sends
browse lists to Backup Browsers, responds to clients requesting browse
server lists, promotes Potential Browsers to Backup when needed, and
announces the domain to inform the Master Browsers of other domains of
the domain name and Master Browser for that domain.
<P>
Preferred Master Browser - Same as Backup Browser except that it is
biased in elections through setting the IsDomainMasterBrowser to TRUE
is the registry's browser parameters.
<P>
Domain Master Browser - The primary domain controller of a domain is
given a special bias in browser elections so that it will become the
Domain Master Browser. This allows browsing to be effective when a
domain spans multiple subnets. A directed datagram is used by Master
Browsers on each subnet to announce itself to the Domain Master
Browser. This is made possible through an entry in the LMHOSTS file on
the Master Browsers for the Domain Controller. This makes it necessary
to have a Windows NT Advanced Server computer to browse across wide
area network (WAN) connections.
<P>
There will be at least one Master Browser on a workgroup/domain and
one Backup Browser for every 32 systems in that workgroup/domain. This
means that in a domain/workgroup with fewer than 32 systems, there
will be one Master and one Backup Browser. One more Backup Browser
will be added for every 32 systems. This is accomplished by the Master
Browser telling a Potential Browser to become a Backup Browser.
<P>
<P><h3>Browser NetBIOS Names</h3>
 
<P>
Several special NetBIOS names and Mailslots are used to maintain and
retrieve browse lists. Names listed here as "DOMAIN(xx)" indicate the
domain name followed by the hex value (xx) and padded with spaces to
the 16th byte.
<P>
&lt;01&gt;&lt;02&gt;__MSBROWSE__&lt;02&gt;&lt;01&gt;
<P>
This name is registered by the Master Browser and is used to broadcast
and receive domain announcements on the local subnet. It is through
this name that Master Browsers for different domains learn the names
of different domains and the names of the Master Browsers on those
domains.
<P>
DOMAIN(00)
<P>
This is the name to which server announcements are broadcast in
Microsoft LAN Manager so that other Microsoft LAN Manager computers
can track the servers on the network. Windows NT computers do not make
these broadcasts unless the LMAnnounce option has been enabled by
configuring the Server service with the Control Panel/Networks
application. This means that LAN Manager systems will not see these
computers unless this option is enabled.
<P>
A LAN Manager server within the Windows NT domain will be seen by the
Browser and therefore other systems on the network. A LAN Manager
domain that doesn't contain any Windows NT computers will not appear
on the browse lists unless it is specified as an Other Domain through
the Control Panel/Networks application in the Computer Browser
configuration.
<P>
DOMAIN(1D)
<P>
This name is registered by Master Browsers. It is used by clients to
find a Master Browser server. A client will broadcast to this name to
get a list of browser servers from the Master Browser. The Master
Browser will send a list of browser servers to the client from which
the client will cache three of these server names. The client will
then randomly pick one of these servers to request a list of servers
and domains from.
<P>
DOMAIN(1B)
<P>
This name is registered by the primary domain controller in a domain
only and allows unique identification of that computer.
<P>
DOMAIN(1E)
<P>
This name is registered by all Browser servers and Potential Browser
servers in a domain or workgroup. It is used for announcement requests
which are sent by Master Browsers to fill up its browse lists, and for
election request packets to force an election. Elections are performed
by sending a packet out to this name that contains your election
criteria.
<P>
The election criteria for a Browser is based on the Browser's current
role in the domain and its current state, using the following
hierarchy:
<P>
<PRE>   Operating System Type:        0xFF000000
   Windows for Workgroups:       0x00000000
   Windows NT:                   0x01000000
   Windows NT Advanced Server:   0x02000000
   Election Version:             0x00FFFF00
   Per version criteria:         0x000000FF
   PDC:                          0x00000080
   Preferred Master:             0x00000008
   Running Master:               0x00000004
   MaintainServerList = Yes:     0x00000002
   Running Backup Browser:       0x00000001

</PRE>The Browser will OR all of the appropriate election criteria and use
this to determine the system's election criteria.
<P>
The criteria for determining if a Browser has won an election is the
following:

<UL><LI>If your election version is greater than the sender's election
   version, you win.

<LI>Else if your election criteria is greater than the sender's
   criteria, you win.

<LI>Else if you have been up longer than the sender, you win.

<LI>If the above comparisons fail to determine a Master Browser, the
   computer with the lexically lowest name will win the election.
<P>
</UL>If a Browser receives an election request, it compares the criteria to
its own and if it wins it will send out up to four election packets.
If after this time it does not receive an election packet with a
better criteria, it will become the Master Browser. Elections can be
caused by any computer that cannot locate a Master Browser, or by a
Potential Browser during initialization. An election is also
instigated by a Master Browser when it shuts down gracefully.
<P>
<P><h3>Mail Slots</h3>
 
<P>
Server and Domain Names in the browse list are aged and are removed
from the browse list if they have not been heard from in three
Announce periods.
<P>
The Browser uses Mailslot Transactions to pass these messages between
systems. Two Mailslots are used.
<P>
For messages intended for all systems including LAN Manager and
Windows for Workgroups, MAILSLOT\LANMAN is used.
<P>
MAILSLOT\BROWSE is used for messages intended for Windows NT and
Windows NT Advanced Server systems.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: wfw wfwg prodnt browsemaster<BR>
Keywords            : kbnetwork ntnetserv NTSrvWkst<BR>
Version             : 3.1 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
