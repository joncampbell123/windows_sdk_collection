

<HTML>
<HEAD>
<TITLE>How to Modify Boot.ini Using Sysdiff </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q163914">
<META NAME="KBModify" CONTENT="1997/05/22">
<META NAME="KBCreate" CONTENT="1997/02/19">
<META NAME="Keywords" CONTENT="kbsetup ntsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDIV,QABI,QBWP,QA0B,QAPN,QAFI,QBVV,QDJS,QBV8,QBFY,QA5W,QASR,QAB9,QDL9,QDIK V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Modify Boot.ini Using Sysdiff</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 22, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q163914</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
 -------------------------------------------------------------------------
<P>
</UL><h2>SYMPTOMS</h2>
 
<P>
When you use Sydiff.exe in your deployment of Windows NT Server and Windows
NT Workstation, you may notice that it does not propagate the changes to
the Boot.ini file, even though it does note the modifications to the file
between the /snap command and the /diff command.
<P>
<P><h2>CAUSE</h2>
 
<P>
This happens because the Boot.ini file has the file properties hidden,
system, and read-only.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To allow Sysdiff to modify the Boot.ini file, you will need to change the
properties of the Boot.ini file. Use Attrib.exe to change the properties;
Attrib.exe can be found in your %Systemroot%\System32 subdirectory. To use
Attrib.exe to change the properties of the Boot.ini file:

<OL><P><LI>Below your /i386 share of the source files, create a $OEM$ subdirectory,
   if it does not already exist.

<P><LI>Place a copy of Attrib.exe in the $oem$ subdirectory.

<P><LI>Perform step a or step b below, depending on whether you are using
   Sysdiff in the /inf mode or not.
<P>
   a. If you are using Sysdiff in the /inf mode, the $oem$ directory
<P><PRE>      structure and the Cmdlines.txt file will already exist. Your
      Cmdlines.txt file should look like the following:
</PRE><P>
<PRE>         [Commands]
         ".\attrib c:\boot.ini -s -r -h"
         ".\Rundll32 setupapi,InstalllHinfSection DefaultInstall 128
             .\diff.inf
         ".\attrib c:\boot.ini +r +s +h"

      NOTE: Make sure the attrib line appears first because commands are
      executed in order; the file will then have the correct properties
      applied when the package runs.

   b. If you are not using Sysdiff in the /inf mode, you will have to
      create the Cmdlines.txt file using any text editor. The file should
      be similar to the following example:

         [Commands]
         ".\Attrib c:\boot.ini -s -r -h"
         ".\sysdiff /apply /m .\%diff_file%"

   This step will clear the hidden, system, and read-only attributes from
   the file and allow sysdiff /apply to propagate the changes to the file.

</PRE><P><LI>Check your answer file and in the [Unattended] section, and make sure
   the following entry is set:
<P>
<P><PRE>      OemPreinstall = Yes
<P></BLOCKQUOTE>
</OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: unattend automated<BR>
Keywords            : kbsetup ntsetup<BR>
Version             : 4.0<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 22, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
