

<HTML>
<HEAD>
<TITLE>Connecting to NetBIOS Resources Using DNS Names or IP Addresses </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161431">
<META NAME="KBModify" CONTENT="1997/10/28">
<META NAME="KBCreate" CONTENT="1996/12/21">
<META NAME="Keywords" CONTENT="NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT 4.0 lets you use a Domain Name System (DNS) to resolve a computername to an IP address for Windows networking functions, or to connect directly to an IP address without knowing the NetBIOS name. Some examples are:     net use * \\ftp.mic...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QAUJ,QAGI,QAA1,QDI2,QARM,QBWP,QAI5,QDIZ,QAVZ,QBG2,QA5E,QA3Q,QAKH,QAC2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Connecting to NetBIOS Resources Using DNS Names or IP Addresses</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 28, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161431</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT 4.0 lets you use a Domain Name System (DNS) to resolve a
computername to an IP address for Windows networking functions, or to
connect directly to an IP address without knowing the NetBIOS name. Some
examples are:
<P>
<PRE>   net use * \\ftp.microsoft.com\data
   net view \\10.57.8.191

</PRE>When using this new functionality, it is still necessary for the calling
computer to know one of the NetBIOS names that is registered on the remote
computer. There are currently three ways of finding a valid NetBIOS name to
connect to on the target computer:

<UL><LI>If a Fully Qualified Domain Name (FQDN) was entered, try a NetBIOS
   session setup to the hostname portion. For example, if "net use
   \\host1.domain1.com\share" was entered, a NetBIOS session setup to the
   name "host1" can be tried.

<LI>Try a NetBIOS session setup to the new "*SMBSERVER" name that recent
   implementations support.

<LI>Issue a NetBIOS adapter status request to the destination IP address,
   and then parse the returned name table for the name registered by the
   server service (&lt;computername&gt;[0x20]).
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
NetBIOS sessions are established between two NetBIOS names. A session setup
involves the following phases:
<P>
<P>
1) NetBIOS name resolution (via a name server, broadcast, or static file)
<P>
<PRE>   NetBIOS name query request --&gt;
                              &lt;--  NetBIOS name query response


</PRE>2) A TCP connection is established:
<P>
<PRE>   SYN  --&gt;
        &lt;--  SYN-ACK
   ACK  --&gt;


</PRE>3) A NetBIOS session is set up over that connection:
<P>
<PRE>   NetBIOS session setup request --&gt;
                                 &lt;--  NetBIOS session setup response


</PRE>When using a DNS to resolve names, or when connecting directly to an IP
address, there is no assurance that the NetBIOS name for the called system
is known.
<P>
The DNS (host) name is not necessarily the same as the NetBIOS name (and in
many cases the DNS name is actually an alias for any number of different
computers).  This means that the NetBIOS name must be verified before a
session can be set up.
<P>
Windows NT 4.0 computers use the following methods:

<UL><LI>Attempt to setup a session to the newly supported "*SMBSERVER   "
   NetBIOS name
<P>
   -or, if that fails-

<LI>Send a NetBIOS adapter status request to the called IP address, and
   obtain the list of NetBIOS names registered for that adapter.
<P>
</UL>If a Fully Qualified Domain Name was specified, such as
"net use \\host1.domain1.com\share": (see <B><A href="../winnt/q137565.htm">Q137565</A></B> for more details)

<UL><LI>Attempt to setup a NetBIOS session to the hostname (host1)
<P>
   -or, if that fails-

<LI>Send a NetBIOS adapter status request to the called IP address, and
   obtain the list of NetBIOS names registered for that adapter.
<P>
</UL>For more information on this, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q137565.htm">Q137565</A></B>
   TITLE     : System Error 53 When Connecting to a FQDN

</PRE>The NetBIOS adapter status response contains the name table for the
computer queried. It is parsed for the name registered by the server
service (shown below), and then a TCP connection and NetBIOS session can be
established.
<P>
RFC1002 states:
<P>
<PRE>   NBNS can (optionally) ensure that the node is actually down by sending a
   NODE STATUS REQUEST. If such a request is sent, and no response is
   received, it can be assumed that the node is down.

</PRE>In order to establish a connection from a Windows NT 4.0 computer to
another computer using DNS name resolution, the remote computer must either
support NetBIOS sessions to the special case *SMBSERVER name, or respond
properly to an adapter status request. You can use the Windows NT "nbtstat
-A &lt;ipaddr&gt;" command to test this. A sample is shown here:
<P>
D:\&gt;nbtstat -A 10.57.9.147
<P>
<PRE>       NetBIOS Remote Machine Name Table

   Name               Type         Status
</PRE> 
<PRE>&lt;ServerName&gt;   &lt;1F&gt;  UNIQUE      Registered
&lt;ServerName&gt;   &lt;00&gt;  UNIQUE      Registered
&lt;ServerName&gt;   &lt;00&gt;  GROUP       Registered
&lt;ServerName&gt;   &lt;03&gt;  UNIQUE      Registered
&lt;ServerName&gt;   &lt;20&gt;  UNIQUE      Registered   &lt;--- The server service name
&lt;ServerName&gt;   &lt;1E&gt;  GROUP       Registered

</PRE>MAC Address = 00-80-5F-50-E3-CC
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.00<BR>
Keywords          : NTSrvWkst nttcp kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 28, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
