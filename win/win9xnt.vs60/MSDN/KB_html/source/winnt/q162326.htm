

<HTML>
<HEAD>
<TITLE>Using TRACERT to Troubleshoot TCP/IP Problems in Windows NT </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162326">
<META NAME="KBModify" CONTENT="1998/01/29">
<META NAME="KBCreate" CONTENT="1997/01/17">
<META NAME="Keywords" CONTENT="netutils kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The TRACERT (Trace Route) command is a route-tracing utility used to determine the path that an IP packet has taken to reach a destination.  This article discusses the following topics:   - How the TRACERT command works  - Troubleshooting with TRAC...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QAM5,QBWP,QAVZ,QADK,QBVV,QBBI,QAHE,QAKR,QAH6,QAEV,QDNT,QAKP,QAJQ,QAFI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Using TRACERT to Troubleshoot TCP/IP Problems in Windows NT</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 29, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162326</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server versions 3.5, 3.51, 4.0
<LI>Microsoft Windows NT Workstation versions 3.5, 3.51, 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The TRACERT (Trace Route) command is a route-tracing utility used to
determine the path that an IP packet has taken to reach a destination.
<P>
This article discusses the following topics:

<UL><LI>How the TRACERT command works
<LI>Troubleshooting with TRACERT
<LI>TRACERT syntax
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>How the TRACERT Command Works</h3>
 
<P>
The TRACERT diagnostic utility determines the route taken to a destination
by sending Internet Control Message Protocol (ICMP) echo packets with
varying IP Time-To-Live (TTL) values to the destination. Each router along
the path is required to decrement the TTL on a packet by at least 1 before
forwarding it, so the TTL is effectively a hop count. When the TTL on a
packet reaches 0, the router should send an ICMP Time Exceeded message
back
to the source computer.
<P>
TRACERT determines the route by sending the first echo packet with a TTL
of
1 and incrementing the TTL by 1 on each subsequent transmission until the
target responds or the maximum TTL is reached. The route is determined by
examining the ICMP Time Exceeded messages sent back by intermediate
routers. Note that some routers silently drop packets with expired TTLs
and
are invisible to TRACERT.
<P>
TRACERT prints out an ordered list of the routers in the path that
returned
the ICMP Time Exceeded message. If the -d switch is used (telling TRACERT
not to perform a DNS lookup on each IP address), the IP address of the
near-
side interface of the routers is reported.
<P>
In the following example, the packet must travel through two routers
(157.54.48.1 and 11.1.0.67) to get to host 11.1.0.1. In this example, the
default gateway is 157.54.48.1 and the IP address of the router on the
11.1.0.0 network is at 11.1.0.67.
<P>
<PRE>   C:\&gt;tracert 11.1.0.1

   Tracing route to 11.1.0.1 over a maximum of 30 hops

   1     2 ms     3 ms     2 ms  157.54.48.1
   2    75 ms    83 ms    88 ms  11.1.0.67
   3    73 ms    79 ms    93 ms  11.1.0.1

   Trace complete.

</PRE><h3>Troubleshooting with TRACERT</h3>
 
<P>
The TRACERT command can be used to determine where a packet stopped on the
network. In the following example, the default gateway has determined that
there is not a valid path for the host on 22.110.0.1. There is probably a
router configuration problem or the 22.110.0.0 network does not exist (a
bad IP address).
<P>
<PRE>   C:\&gt;tracert 22.110.0.1

   Tracing route to 22.110.0.1 over a maximum of 30 hops

   1  157.54.48.1  reports: Destination net unreachable.

   Trace complete.

</PRE>TRACERT is useful for troubleshooting large networks where several paths
can be taken to arrive at the same point, or where many intermediate
systems (routers or bridges) are involved.
<P>
<P><h3>TRACERT syntax</h3>
 
<P>
There are several command-line switches that can be used with TRACERT, but
they are usually not needed for standard troubleshooting.
<P>
TRACERT syntax:
<P>
<PRE>   tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout] target_name

</PRE>Parameters:
<P>
<PRE>   -d
      Specifies to not resolve addresses to host names.

   -h maximum_hops
      Specifies the maximum number of hops to search for target.

   -j host-list
      Specifies loose source route along the host-list.

   -w timeout
      Waits the number of milliseconds specified by timeout for each
      reply.

   target_name
      Name or IP address of the target host.
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: tcp/ip<BR>
Keywords          : netutils kbnetwork<BR>
Version           : 3.5 3.51 4.0<BR>
Platform          : winnt<BR>
Issue type        : kbtshoot<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 29, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
