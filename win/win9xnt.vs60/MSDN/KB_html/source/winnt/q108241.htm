

<HTML>
<HEAD>
<TITLE>Incorrect Date Generates an Exception Error in NTBACKUP </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q108241">
<META NAME="KBModify" CONTENT="1997/05/13">
<META NAME="KBCreate" CONTENT="1993/12/07">
<META NAME="Keywords" CONTENT="kbbug3.10 kbother ntstop">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  The Windows NT Backup utility (NTBACKUP.EXE) generates the following error message when the system date is greater than the year 2070:     An application error has occurred and an application error log is being    generated.                        ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QBWP,QAI4,QAYA,QAAP,QACE,QAY5,QAVX,QAVW,QAUD,QAM4,QAGI,QAKP,QANY,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Incorrect Date Generates an Exception Error in NTBACKUP</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 13, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q108241</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The Windows NT Backup utility (NTBACKUP.EXE) generates the following error
message when the system date is greater than the year 2070:
<P>
<PRE>   An application error has occurred and an application error log is being
   generated.

                        NTBACKUP.EXE
   Exception: access violation (0xc0000005), Address:0x0182aa2d

</PRE>NOTE: If you have Dr. Watson installed, this error message may also appear
in the Dr. Watson error log.
<P>
<P><h2>CAUSE</h2>
 
<P>
NTBACKUP uses the clib function time(). The initial release of NTBACKUP did
not check the return value and if the year is out of reach, this function
returns 0 (zero).
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, change the date to the current year or to a
year earlier than 2071.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following are relevant portions of the DRWTSN32.LOG file:
<P>
Application exception occurred:
<PRE>        App: ntbackup.DBG (pid=215)
        When: 11/19/2071 @ 18:48:2.265
        Exception number: c0000005 (access violation)

</PRE>*----&gt; System Information &lt;----*
<PRE>        Computer Name: TEST
        User Name: test
        Number of Processors: 1
        Processor Type: Intel 486
        Windows Version: 3.10
        Current Build: 1.528.1 () (July 1993)
        Current Type: Uniprocessor Free
        Registered Organization: Microsoft
        Registered Owner:

</PRE>State Dump for Thread Id 0x75
<P>
eax=00000000 ebx=0013be90 ecx=0012fd04 edx=0000002f esi=00137f50
edi=001411c0
<PRE>eip=0182aa2d esp=0012fd04 ebp=0013bd60 iopl=0         nv up ei pl nz na pe
nc
</PRE>cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000
efl=00000202
<P>
<P>
function: GetCurrentDate
<PRE>        0182aa10 83ec04           sub     esp,0x4
        0182aa13 8d442400         lea     eax,[esp]
</PRE>ss:007ae8ab=????????
<PRE>        0182aa17 50               push    eax
        0182aa18 e8a37c0700       call    time (018a26c0)
        0182aa1d 8d442404         lea     eax,[esp+0x4]
</PRE>ss:007ae8ab=????????
<PRE>        0182aa21 83c404           add     esp,0x4
        0182aa24 50               push    eax
        0182aa25 e8e65b0600       call    localtime (01890610)
        0182aa2a 83c404           add     esp,0x4
FAULT -&gt;0182aa2d 8b4814           mov     ecx,[eax+0x14]
</PRE>ds:0067eba6=????????
<PRE>        0182aa30 8b542408         mov     edx,[esp+0x8]
</PRE>ss:007ae8ab=????????
<PRE>        0182aa34 6681c16c07       add     cx,0x76c
        0182aa39 66894a02         mov     [edx+0x2],cx
</PRE>ds:0067ebd6=????
<PRE>        0182aa3d 8b4810           mov     ecx,[eax+0x10]
</PRE>ds:0067eba6=????????
<PRE>        0182aa40 6641             inc     cx
        0182aa42 66894a04         mov     [edx+0x4],cx
</PRE>ds:0067ebd6=????
<PRE>        0182aa46 8b480c           mov     ecx,[eax+0xc]
</PRE>ds:0067eba6=????????
<PRE>        0182aa49 66894a06         mov     [edx+0x6],cx
</PRE>ds:0067ebd6=????
<PRE>        0182aa4d 8b4808           mov     ecx,[eax+0x8]
</PRE>ds:0067eba6=????????
<PRE>        0182aa50 66894a08         mov     [edx+0x8],cx
</PRE>ds:0067ebd6=????
<PRE>        0182aa54 8b4804           mov     ecx,[eax+0x4]
</PRE>ds:0067eba6=????????
<P>
*----&gt; Stack Back Trace &lt;----*
<P>
RetAddr  FramePtr Param#1  Param#2  Param#3  Param#4
0182aa2d 0012fd04 018c8a80 001411c0 00137f50 01896ff4 GetCurrentDate
0184da26 0012fd14 00140400 00000001 0012fd6c 0013b7a0 FS_SetDefaultDBLK
01896ff4 0012fe10 0013bd60 00137f50 018403dd 0013bd60 F40_RdSSET
01841b4e 0012fe1c 0013bd60 00137f50 0013b7a0 01870001 GetCurrentVCB
018403dd 0012fe3c 0013bd60 00000113 01870001 018a5e48 ReadThisSet
01842e96 0012fed4 0013b7a0 018a34b0 00140400 0183a430 TF_PollDrive
0183a0e7 0012fef0 0187e9a0 0012ff40 76a04046 00000000 PD_PollDrive
0187e9ea 0012fefc 00000000 00000113 00002c28 01e3de2d WM_UnhookTimer
76a04046 0012ff20 0012ff40 00000001 018211ce 0012ff40 DispatchMessageWorker
76a04e07 0012ff2c 0012ff40 00148e10 0013145f 00000000 SendMessageWorker
018211ce 0012ff58 01820000 00000000 0013145f 00000001 WinMain
<P>
Microsoft has confirmed this to be a problem in Windows NT version 3.1 and
Windows NT Advanced Server version 3.1. We are researching this problem and
will post new information here in the Microsoft Knowledge Base as it
becomes available.
<P>
The Dr. Watson product discussed here is manufactured by a vendor
independent of Microsoft; we make no warranty, implied or otherwise,
regarding this product's performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt blue trap<BR>
Keywords            : kbbug3.10 kbother ntstop<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>
Issue type          : kberrmsg<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 13, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
