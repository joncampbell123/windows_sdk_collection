

<HTML>
<HEAD>
<TITLE>Using WinNT 3.5x Uptomp.exe to Upgrade 4.0 Systems to multiproc </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q156612">
<META NAME="KBModify" CONTENT="1997/08/29">
<META NAME="KBCreate" CONTENT="1996/09/26">
<META NAME="Keywords" CONTENT="ntsetup NTSrvWkst kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  While trying to use the Uptomp.exe utility that shipped in the Windows NT version 3.5x Resource Kit, the following error message may appear:     The Txtsetup.sif file in the specified path is not formatted correctly.    Verify the correct disk and ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBKX,QAY2,QAC1,QAA1,QAFI,QDNN,QBXB,QATJ,QAA5,QDNL,QBF0,QBE7,QBE6,QBBI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Using WinNT 3.5x Uptomp.exe to Upgrade 4.0 Systems to multiproc</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 29, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q156612</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 4.0
<LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
While trying to use the Uptomp.exe utility that shipped in the Windows NT
version 3.5x Resource Kit, the following error message may appear:
<P>
<PRE>   The Txtsetup.sif file in the specified path is not formatted correctly.
   Verify the correct disk and files can be found in the specified path.

</PRE><h2>WORKAROUND</h2>
 
<P>
To work around this problem, perform the following:

<UL><LI> Use the Uptomp.exe from the Windows NT 4.0 Resource Kit.
<P>
   -or-

<LI>Copy these files from the Windows NT 4.0 CD into a temporary directory
   on the system you want to upgrade to multiprocessor.
<P>
</UL>Select the HAL that applies to your computer from the list below and copy
it to the temporary directory.
<P>
<PRE>Halast.dll    = "AST Manhattan SMP"
Halsp.dll     = "Compaq SystemPro Multiprocessor or 100% Compatible"
Halcbus.dll   = "Corollary C-bus Architecture"
Halmca.dll    = "IBM PS/2 or other Micro Channel-based PC"
Halapic.dll   = "MPS Uniprocessor PC"
Halmps.dll    = "MPS Multiprocessor PC"
Halncr.dll    = "NCR System 3000 Model 3360/3450/3550"
Haloli        = "Olivetti LSX5030/40"
Hal.dll       = "Standard PC"
Hal486c.dll   = "Standard PC with C-Step i486"
</PRE>Halwyse7.dll  = "Wyse Series 7000i Model 740MP/760MP"
<P>
Then the following 5 files:
<P>
KERNEL32.DLL
WINSRV.DLL
NTDLL.DLL
NTKRNLMP.EXE
WIN32K.SYS
<P>
Copy the Txtsetup.sif file from the Windows NT 3.51 CD found under the
supporting platforms directory (i.e. copy D:\I386\Txtsetup.sif to the
temporary directory).
<P>
Modify the Txtsetup.inf (from Windows NT version 3.51) to add Win32k.sys
under these sections.:
<P>
[Smash]
win32k.sys = 1
<P>
[Files]
win32k.sys  = dx,d1,,2,0,0
<P>
Modify the Uptomp.inf file from the Windows NT 3.51 Resource Kit and add
the following entry under:
<P>
[SystemFilesToCopy] section:
Win32k.sys = 0, 2,
<P>
Run Uptomp.exe again, using the modified Uptomp.inf file, type in the
temporary directory name in the "NEW HAL FILE PATH" box, and then select
the correct HAL from the "HAL TO INSTALL" box.
<P>
The upgrade should complete without errors and successfully upgrade you to
Multiprocessor support. Restart the computer and when the Windows NT kernel
loads, ensure that it displays "Multiprocessor Kernel" during startup.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The Txtsetup.sif file that shipped with Windows NT 4.0 is not backwards
compatible with the Windows NT 3.5x resource utility Uptomp.exe.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: reskit<BR>
Keywords          : ntsetup NTSrvWkst kbsetup<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 29, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
