

<HTML>
<HEAD>
<TITLE>Setting Primary and Secondary WINS Server Options </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150737">
<META NAME="KBModify" CONTENT="1997/12/23">
<META NAME="KBCreate" CONTENT="1996/05/08">
<META NAME="Keywords" CONTENT="kbbug3.51 nttcp kbenv">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  If a Windows NT server is running the Windows Internet Naming Service (WINS) and is participating in WINS database replication on the network, special consideration must be taken configuring where the WINS server points to for it's own name resolut...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBQU,QACK,QDIU,QBDZ,QAMA,QAHT,QBWP,QDIZ,QAKP,QBWD,QBC9,QBC8,QANO,QAM2,QABA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Setting Primary and Secondary WINS Server Options</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150737</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
If a Windows NT server is running the Windows Internet Naming Service
(WINS) and is participating in WINS database replication on the network,
special consideration must be taken configuring where the WINS server
points to for it's own name resolution (this parameter is set in the
Network section of Control Panel, in the Configuration section of TCPIP
Protocol).
<P>
It is highly recommended that a WINS server point to itself as Primary and
Secondary WINS in the TCP/IP configuration. If another configuration is
used, you may experience random instability in making certain network
connections.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When any WINS enabled computer is booted it must register a variety of
services with WINS. Commonly a computer has a Primary and Secondary WINS
address configured in the TCP/IP setup. If the Primary WINS does not
respond to the registrations, the computer tries the Secondary WINS.
<P>
For additional information on the services that can be registered, please
see the following article(s) in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q119495.htm">Q119495</A></B>
   TITLE     : List of Names Registered with WINS Service

</PRE>Generally, most clients and servers should be configured with a Primary and
Secondary WINS address, however caution must be taken with how a WINS
server is itself configured. A WINS server eventually register its services
in its own local WINS database, regardless of whether it points to itself
or not (either Primary, Secondary, or none). Registering with itself and
another WINS server can cause problems when it comes to replication and
renewal of these entries.
<P>
For example, if you have a WINS server ("Srv1") that points to itself as
Primary and points to another WINS as Secondary ("Wins2").  When Srv1 is
booted, it usually tries to register its services before its own WINS
Service is started. Since those registrations fail, it tries to register
them at Wins2. If Wins2 is available, it accepts the registration requests.
However, not all the services are registered at Wins2, because as these
registration requests are made, Srv1 continues to check its local WINS
service. Once the service is running, it switches back to it and continues
registering locally.
<P>
After replication has occurred between Srv1 and Wins2, both databases show
this ownership:
<P>
<PRE>   Srv1:  Owns his Srv1&lt;20&gt;, and Domain&lt;1c&gt; (if it is a domain controller)
   Wins2: Owns all other Srv1 registrations, and also owns Domain&lt;1c&gt; from
          Srv1

</PRE>This potentially problematic condition is referred to as "split
registration."
<P>
At this point, Srv1 has reverted to re-registering locally, however it
takes a while before you can see it. Meanwhile, Srv1 and Wins2 are
replicating the split registration mappings to other WINS servers.
Eventually these replicas should be reconciled at the remote WINS (that is,
the Wins2 replicas are replaced by the newer Srv1 replicas). However,
before reconciliation is finished, client connection problems may have
occurred, including the inability to connect to a WINS server that split
its registration (in this example, Srv1), or the inability to resolve the
domain&lt;1c&gt; name that Srv1 registered.
<P>
The exact conditions that lead to failure are varied. If your WINS servers
are running Windows NT version 3.51 with Service Pack 4 (or greater), these
conditions should only be temporary. However, the problem may be more
severe depending on your replication scheme or if you are running pre-
Service Pack 4 WINS servers.
<P>
Another faulty configuration is setting a remote IP address (in this
example, Wins2) as Primary while setting the local WINS (Srv1) as
Secondary. In this case, Srv1 will eventually stop refreshing its NetBIOS
lease at Wins2, and will begin registering locally. Depending on your WINS
replication scheme, this may cause connection problems.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
It is recommended that a WINS server point to itself as Primary WINS and as
Secondary WINS. This will avoid split registrations and other problems.
<P>
For additional information on some of these other problems, please see the
following articles in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q135405.htm">Q135405</A></B>
   TITLE     : Repairing a Corrupted WINS Database w/ Starting Version
               Count

   ARTICLE-ID: <B><A href="../winnt/q168712.htm">Q168712</A></B>
   TITLE     : How to Manually Recreate a WINS Database

   ARTICLE-ID: <B><A href="../winnt/q150520.htm">Q150520</A></B>
   TITLE     : Server Sporadically Loses Name Resolution

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT versions 3.5,
3.51, and 4.0. We are researching this problem and will post new
information
here in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: System error 53 occurred network path not found<BR>
log logon<BR>
Keywords          : kbbug3.51 nttcp kbenv<BR>
Version           : 3.5 3.51 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 23, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
