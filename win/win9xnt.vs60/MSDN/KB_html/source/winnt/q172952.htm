

<HTML>
<HEAD>
<TITLE>How to Rebuild Corrupted or Missing SYSTEM Partition </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q172952">
<META NAME="KBModify" CONTENT="1998/03/04">
<META NAME="KBCreate" CONTENT="1997/08/20">
<META NAME="Keywords" CONTENT="ntboot ntsetup NTSrvWkst kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Digital Equipment Corporation (DEC) ALPHA-based RISC computers rely on a small (less than 4 GB) FAT-formatted SYSTEM partition containing boot files. This SYSTEM partition can also contain the Windows NT operating system, but must be FAT. RISC comp...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAFV,QDIV,QAA1,QDI2,QAGB,QBWS,QDIZ,QBCT,QAGC,QAEF,QDL9,QBWQ,QBWO,QBWN V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Rebuild Corrupted or Missing SYSTEM Partition</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 4, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q172952</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.51 and 4.0
<LI>Microsoft Windows NT Server versions 3.51 and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Digital Equipment Corporation (DEC) ALPHA-based RISC computers rely on a
small (less than 4 GB) FAT-formatted SYSTEM partition containing boot
files. This SYSTEM partition can also contain the Windows NT operating
system, but must be FAT. RISC computers use the system’s firmware and the
ARC paths defined in NVRAM to read the SYSTEM and OSLOAD partitions. The
firmware loads boot files from the SYSTEM partition; the SYSTEM partition
loads the Windows NT operating system files from the OSLOAD partition. If
the SYSTEM partition is damaged, corrupted, or deleted, the system will no
longer start. The SYSTEM partition can have any partition number, but is
usually Partition-1.
<P>
<P><h3>Typical Disk Configuration</h3>
 
<P>
<PRE>    _________&lt;4GB______________________________________________
   | SYSTEM PARTITION - FAT   |  BOOT PARTITION – NTFS or FAT  |
   |                          |                                |
   | \Os\Winntxx\Osloader.exe | \Winnt\System32\Ntoskrnl.exe   |
   |            \Hal.dll      |                                |
   |            \*.PAL files  |                                |
   |__________________________|________________________________|
        SYSTEMPARTITION (1)            OSLOADPARTITION (2)

</PRE>The SYSTEM partition contains Os\Winntxx directory (xx = Windows NT OS
version). The OSLOAD partition contains the Winnt directory or a user-
defined directory for Windows NT.
<P>
Until the SYSTEM partition can be rebuilt, use the article below to
help return to Windows NT:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q172806.htm">Q172806</A></B>
   TITLE     : Creating an NT Boot Floppy for DEC ALPHA RISC Machines

</PRE>After you are in Windows NT, you can try to run Chkdsk.exe to recover the
partition. If Disk Administrator shows the small SYSTEM partition as
unknown, Windows NT 3.51 will allow you to reformat or delete and recreate
the SYSTEM partition.
<P>
Disk Administrator in Windows NT 4.0 will not allow you to delete or
reformat the SYSTEM partition. If you try to do so, you will receive one of
the following messages:
<P>
<PRE>   Windows NT cannot format a volume containing Windows NT system files

</PRE>-or-
<P>
<PRE>   Disk Administrator cannot delete the active partition on disk 0

</PRE><h2>MORE INFORMATION</h2>
 
<P>
To rebuild the SYSTEM partition, you must either run a built-in program
contained in the ALPHA firmware or use a utility called Arcinst.exe from
the Windows NT installation compact disc's Alpha directory to delete and
then create the SYSTEM partition.
<P>
DEC has two different kinds of firmware: the new AlphaBios firmware and
the original ARC MULTIBOOT firmware. Depending on the model number and age
of the computer, either kind of firmware could be in place.
<P>
NOTE: The screens and menu items may vary from one firmware revision to
the next. Use the appropriate section below for instructions on deleting
or creating a new SYSTEM partition.
<P>
<P><h3>Deleting and Creating a SYSTEM Partition Using AlphaBios Firmware</h3>
 
<P>
To delete a system partition and then create a new one, use the following
steps:

<OL><P><LI>Turn on power to the system.

<P><LI>After POST initialization completes, press F2 to enter SETUP; the menu
   will look similar to the following:
<P>
<P><PRE>      Display System Configuration
      Upgrade AlphaBios
      Hard Disk Setup ...
      CMOS Setup ...
      Install Windows NT
      Utilities
      About AlphaBios
</PRE>
<P><LI>From the AlphaBios SETUP menu, click Hard Disk Setup.

<P><LI>A map of the drives and partitions will be displayed along with
   selections for deleting and creating or formatting partitions. The map
   will resemble the following diagram:
<P>
<P><PRE>      -----------------------------------------------------------
<PRE></PRE>      Disk 0  QLISP10x0    SCSI  ID  0      4091MB
            Partition 1                   4081MB FAT
            Partition 2                     10MB UNKNOWN


      Insert=NEW   DEL=Delete   F6=Format   F7=Express   Esc=Exit
      -----------------------------------------------------------

</PRE><P><LI>Select the damaged SYSTEM partition, and then either press F6 to format,
   or choose DELETE and then create a new partition and format it.
<P>
   NOTE: If you are recovering a Windows NT 3.51 installation, it will be
   necessary to start Windows NT using the boot floppy as described in
   the following Knowledge Base article:
<P>
<P><PRE>      ARTICLE ID: <B><A href="../winnt/q172806.htm">Q172806</A></B>
<PRE></PRE>      TITLE     : Creating a WinNT Boot Floppy for DEC ALPHA RISC Computers

   This is necessary because the Windows NT repair process fails to copy
   the Windows NT loader files if the Os\Winnt351 directory structure is
   not found on the newly-created partition. After you manually recreate
   this directory structure on the SYSTEM partition, copy the six boot
   files manually from the Windows NT installation compact disc, or perform
   a normal shutdown and then continue with step 5 from within the
   AlphaBios SETUP menu.

</PRE><P><LI>Go back to the main menu, and then click Install Windows NT.

<P><LI>At the first Windows NT Setup screen, press R to repair.

<P><LI>When you see the following menu, select only this repair option:
<P>
<P><PRE>     [ ]  Inspect registry files
     [ ]  Inspect startup environment
     [x]  Verify Windows NT system files.
</PRE><P>
   By selecting this option, Windows NT 4.0 setup will recreate the
   Os\Winnt40 directory structure on the newly created SYSTEM partition,
   and then prompt to replace the following files from the Windows NT
   installation compact disc:
<P>
<P><PRE>       - A221064.PAL
       - A221066.PAL
       - A221164.PAL
       - A321064.PAL
       - Osloader.exe
       - Hal.dll
</PRE><P>
<P>
   NOTE: If you have any Windows NT service packs installed, it is very
   important that you only allow Windows NT to replace the above six files,
   then select F3 to exit repair after they have been replaced. Do NOT
   select A to replace all files during Repair.

<P><LI>After repair is complete, restart the system. The system should start up
   using the re-created SYSTEM partition.
<P>
</OL><h3>Deleting and Creating a SYSTEM Partition Using ARC Multiboot Firmware</h3>
 

<OL><P><LI>Insert the Windows NT installation compact disc into the CD-ROM drive.

<P><LI>Start the system. The first menu will be the Boot menu, which will
   appear similar to the following:
<P>
<P><PRE>      Boot menu:
</PRE><P>
<PRE>         Boot Windows NT Server Vx.xx
         Boot an alternate Operating System
         Run A Program
         Supplementary menu...

</PRE><P><LI>Click Run a Program on the menu. Type the following path, and then
   press ENTER:
<P>
<P><PRE>      cd:\alpha\arcinst
</PRE><P>
   Arcinst.exe will load from the compact disc and give you the following
   choices:
<P>
<P><PRE>      CONFIGURE PARTITIONS
      EXIT
</PRE><P>
   Click Configure Partitions. Next, you will see this menu:
<P>
<P><PRE>      CREATE SYSTEM PARTITION
      DELETE PARTITION
      MAKE EXISTING PARTITION INTO THE SYSTEM PARTITION
      EXIT
</PRE><P>
   Click Delete Partition, and then select the small ~4 MB FAT partition.
   Click Create a New System partition; the program will prompt you to
   enter the size of the new partition:
<P>
<P><PRE>      ENTER SIZE IN MB (1-4)
</PRE><P>
   After the partition is made, it will be automatically formatted.

<P><LI>Exit Arcinst.exe and go back to the main Boot menu.
<P>
   NOTE: If you are recovering a Windows NT 3.51 installation, it will be
   necessary to start Windows NT using the boot floppy as described in
   the following Knowledge Base article:
<P>
<P><PRE>      ARTICLE ID: <B><A href="../winnt/q172806.htm">Q172806</A></B>
<PRE></PRE>      TITLE     : Creating a WinNT Boot Floppy for DEC ALPHA RISC Computers

   This is necessary because the Windows NT repair process fails to copy
   the Windows NT loader files if the Os\Winnt351 directory structure is
   not found on the newly-created partition. After you manually recreate
   this directory structure on the SYSTEM partition, copy the six boot
   files manually from the Windows NT installation compact disc, or perform
   a normal shutdown and then continue with step 5 from within the
   ARC Multiboot menu.

</PRE><P><LI>Select Run a Program from the main Boot menu. Type the following path,
   then press ENTER:
<P>
<P><PRE>      cd:\alpha\setupldr
</PRE>
<P><LI>At the first Windows NT Setup screen, press R to repair.

<P><LI>When you see the following menu, select only this repair option:
<P>
<P><PRE>    [ ]  Inspect registry Files
    [ ]  Inspect startup environment
    [x]  Verify Windows NT system files.
</PRE><P>
   When you select this option, Windows NT 4.0 setup will recreate the
   directory structure os\winnt40 on the newly-created SYSTEM partition,
   then prompt you to replace the following files from the Windows NT
   Installation CD-ROM:
<P>
<P><PRE>       - A221064.PAL
       - A221066.PAL
       - A221164.PAL
       - A321064.PAL
       - Osloader.exe
       - Hal.dll
</PRE><P>
   NOTE: If you have any Windows NT service packs installed, it is very
   important that you only allow Windows NT to replace the above six files,
   then select F3 to exit repair after they have been replaced. Do NOT
   select A (replace all files) during Repair.

<P><LI>After Repair is complete, restart the system. The system should boot
   using the re-created system partition.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: RISC ALPHA BOOT SYSTEM<BR>
Keywords          : ntboot ntsetup NTSrvWkst kbsetup<BR>
Version           : WinNT:3.51,4.0<BR>
Platform          : winnt<BR>
Hardware          : ALPHA<BR>
Issue type        : kbhowto<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 4, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
