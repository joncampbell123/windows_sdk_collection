

<HTML>
<HEAD>
<TITLE>CSNW &amp; GSNW Won't Display NetWare Servers via a SAP Seed Server </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166842">
<META NAME="KBModify" CONTENT="1997/05/20">
<META NAME="KBCreate" CONTENT="1997/04/11">
<META NAME="Keywords" CONTENT="kbbug4.00 kbfix4.00 kbfix4.00.sp2 ntnetserv NTPROTOCOL NTSrvWkst kbbuglist kbfixlist">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  A computer running Windows NT cannot list or attach to some Novell NetWare servers, although Windows 95-based clients operate successfully.  CAUSE =====  Client Services for NetWare (CSNW) and Gateway Services for NetWare (GSNW) attach to a default...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAVZ,QDL9,QBWO,QBWN,QBV8,QAI5,QBVV,QABA,QAY2,QBVX,QAB9,QBWQ,QDO3,QBG2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>CSNW &amp; GSNW Won't Display NetWare Servers via a SAP Seed Server</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166842</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.51 and 4.0
<LI>Microsoft Windows NT Server versions 3.51 and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
A computer running Windows NT cannot list or attach to some Novell NetWare
servers, although Windows 95-based clients operate successfully.
<P>
<P><h2>CAUSE</h2>
 
<P>
Client Services for NetWare (CSNW) and Gateway Services for NetWare (GSNW)
attach to a default or preferred server. The client then queries that
server for a list of other servers. Windows NT CSNW is only able to connect
to servers that are included in its default or preferred server's service
advertising process (SAP) table. If the segment that the default server is
on is not routed or bridged to the other segments, the server is unaware of
the servers on those segments. To see what servers the default server knows
about, type DISPLAY SERVERS at the NetWare console.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
A network configuration may include intermediate devices such as a bridge
that filters IPX SAP broadcasts or routers that are not configured to
forward SAP broadcasts. One NetWare "seed" server can be located on each
side of the router. SAP information is only forwarded to designated "seed"
servers.
<P>
When a Windows 95 client attaches to one of the "seed" servers, the SAP
queries are performed against the bindery of the server being attached to
in order to obtain the complete SAP table. The Windows 95 redirector
performs this operation successfully through the Map command run from an MS-
DOS prompt. This is not supported under Windows NT because CSNW uses the
preferred server for all SAP queries.
<P>
For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q151236.htm">Q151236</A></B>
   TITLE     : CSNW/GSNW Will Only Show Servers on One Network

</PRE><h2>RESOLUTION</h2>
 
<P>
Log off and log back on, selecting the desired preferred server.
<P>
A command line option is now available to allow CSNW to obtain the SAP
table from a "seed" server. This is only supported with the Net use
command. Also, this capability is only available from the command line and
is not supported through API or through any GUI applications such as the
Explorer. The NetWare Map command does not support this CSNW capability.
<P>
To provide support for this new option, first apply the updated Nwrdr.sys
file mentioned below and then perform the following steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Run the Registry Editor (Regedt32.exe).

<P><LI>From the HKEY_LOCAL_MACHINE subtree, go to the following key:
<P>
<P><PRE>      \System\CurrentControlSet\Services\NWRDR\parameters
</PRE>
<P><LI>From the Edit menu, click Add Value.

<P><LI>Add the following:
<P>
<P><PRE>      Value Name: AllowSeedServerRedirection
      Data Type:  REG_DWORD
      Data: 0x1 (Hex)
</PRE>
<P><LI>Enable the AllowSeedServerRedirection on CSNW; Default is Disabled (0x0)
<P>
</OL><h3>Command Line Usage</h3>
 
<P>
The following command syntax can be used to access the seed server SAP
table:
<P>
<PRE>   net use * \\server(bindery_server)\volume

</PRE></OL>Where server = the name of a Netware file server containing Volume and
bindery_server = the name of the NetWare seed server.
<P>
Net use drivespec /d must be used to disconnect the connection.
<P>
Note: This command line option is only intended to provide support through
the net use command. All other NetWare API interoperability is not
supported. The Map command should not be used to remove the connection.
Support for this command option from GUI applications including Explorer is
not included.
<P>
For example:
<P>
Map lists the seed server connection
<P>
Drives A,B,C,D,E,F,G,.... map to a local disk.
Drive T: = NetwareServer\PUB: \
....
Drive X: = NetwareServerName(SeedServerName)\SYS: \
<P>
net use lists the "seed" server connection:
<P>
<PRE>Status       Local  Remote                    Network
</PRE> 
<PRE>Disconnected F:     \\jsbach\public           Microsoft Windows Network
             V:     \\bullet\pub              NetWare or Compatible Network
             W:     \\bullet(nw41_essbp)\sys  NetWare or Compatible Network

</PRE>Whoami will return the following error upon completing.
<P>
<PRE>User ID:    UserName
Server:     NetwareServerName   NetWare 4.10
</PRE>Connection: 3 (Bindery)
Login time: Wednesday 3/05/97 9:47:30 am
....
WHOAMI-4.1-230: An error occurred during WHOAMI's attempt to get the
connection status.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version 4.0
Service Pack 2.
This problem was corrected in the latest Microsoft Windows NT 4.0 U.S. Service
Pack. For information on obtaining the service pack, query on the following word
in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE>Microsoft has confirmed this to be a problem in Windows NT version 3.51. We
are researching this problem and will post additional information here in
the Microsoft Knowledge Base as it becomes available.
 
<PRE>Keywords          : kbbug4.00 kbfix4.00 kbfix4.00.sp2 ntnetserv NTPROTOCOL NTSrvWkst kbbuglist kbfixlist
Version           : 3.51 4.0
Platform          : winnt
Issue type        : kbbug
Solution Type     : kbservicepack</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 20, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
