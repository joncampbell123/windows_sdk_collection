

<HTML>
<HEAD>
<TITLE>REG: Device Driver Entries, PART 5 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102992">
<META NAME="KBModify" CONTENT="1997/05/08">
<META NAME="KBCreate" CONTENT="1993/08/12">
<META NAME="Keywords" CONTENT="kbother ntregistry">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" NOTE: You can view current settings for these device drivers by choosing the Devices button in WinMSD.  Sound Card Driver Entries  Usually, sound drivers consist of two parts: a front-end for installation and request processing, consisting of files ...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAYS,QAU9,QAHR,QDK0,QAB5,QBWP,QAKD,QDL2,QAKC,QAGI,QAPF,QABA,QA5W,QDJP,QAKG V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>REG: Device Driver Entries, PART 5</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 8, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102992</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Windows NT operating system version 3.1
<LI>Windows NT Advanced Server version 3.1
<P>
</UL>The article contains REGISTRY entries for Sound Card and Video Drivers.
These subgroups are included:

<UL><LI>Sound Card Drviers
<LI>Video Device Driver
<P><PRE>      - Video Information in the DeviceMap Subkey
      - Video Device Entries in the Services Subkey
</PRE><P>
<P>
</UL>There are 5 parts to the Device Driver Entries article series:
<P>
Part 1: Device Driver Entries, containing:

<UL><LI>File System Drivers and Recognizers
<LI>Disk, Serial and Parallel Ports
<P>
</UL>Part 2: Mouse and Keyboard Entries, containing:

<UL><LI>Microsoft Bus Mouse Port Driver
<LI>Intel 8042 Port Driver
<LI>Microsoft InPort Bus Mouse Port Driver
<P>
</UL>Part 3: Mouse and Keyboard Entries, cont'd, containing:

<UL><LI>Microsoft Serial Mouse Port Driver
<LI>Mouse Class Driver
<LI>Keyboard Class Driver
<LI>Device Map Entries for the Keyboard and Mouse
<P>
</UL>Part 4: SCSI Miniport Entries
<P>
Part 5: Sound Card and Video Device Driver Entries
<P>
 
<P>
NOTE: You can view current settings for these device drivers by choosing
the Devices button in WinMSD.
<P>
<P><h2>Sound Card Driver Entries</h2>
 
<P>
Usually, sound drivers consist of two parts: a front-end for installation
and request processing, consisting of files such as SNDBLST.DLL or
SYNTH.DLL; and a kernel driver for communicating with the hardware,
consisting of files such as SNDBLST.SYS or SYNTH.SYS.
<P>
There is also a helper driver named MMDRV.DLL that transforms most low-
level calls to Wave, MIDI, and AUX devices into calls to kernel mode
drivers.
<P>
These are the installable sound kernel drivers for Windows NT:
<P>
<PRE>Sound Driver   Comment

MIPSSND.SYS    MIPS ARCSystem 100/150 built-in sound
MVAUDIO.SYS    Media Vision Pro Audio Spectrum 16
               and Pro Studio 16
MVOPL3.SYS     Synthesizer driver for Media Vision
               Pro Audio Spectrum 16 and Pro Studio 16
SNDBLST.SYS    SoundBlaster 1.5 and compatibles
SNDSYS.SYS     Windows sound system and Compaq
               Business Audio
SYNTH.SYS      Ad Lib and OPL3 MIDI synthesizer driver

</PRE>For each installed sound driver, several parameters are stored in the
Registry, based on choices made by using the Drivers icon in Control Panel.
The following shows the Registry path for sound system driver entries:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\
<PRE>     Services\SoundDriverName\Parameters

</PRE>The actual key name in the Registry is the same as the filename of the
related kernel driver. For example, for SNDBLST.SYS, the key name is
Sndblst.
<P>
Some drivers can write over the values they receive on the basis of
information read from the hardware. The following shows some typical values
found in the Parameters subkey for sound cards:
<P>
<PRE>Configuration Error    REG_DWORD     0, 1, 2, 3, or 4
</PRE>Specifies an error that occurred during install. This value is only
relevant if the driver fails to load. (Not all drivers write this
information into the Registry.)
<P>
<PRE>Value     Meaning

0         Nonspecific error
1         Hardware not found (usually the wrong
          I/O port was assumed)
2         Specified interrupt was incorrect or
          did not work
3         Specified DMA channel was incorrect or
          did not work
4         Hardware is present but not working


DmaChannel     REG_DWORD
</PRE>Defines the DMA channel settings for transferring digitized sound.
Default: Depends on the sound card-not user-configurable.
<P>
<PRE>Interrupt    REG_DWORD     Interrupt number
</PRE>Defines the interrupt number used by the hardware.
Default: 0xa (configured for Interrupt 10)
<P>
<PRE>LeftLineInAtten    REG_DWORD     Number
</PRE>Specifies the current volume level of the left channel of the line-in
input.
<P>
<PRE>Port    REG_DWORD     Address
</PRE>Defines the I/O port start address used to communicate with the hardware.
Default: 0x220 for SNDBLST.SYS
<P>
<PRE>RightLineInAtten    REG_DWORD     Number
</PRE>Specifies the current volume level of the right channel of the line-in
input.
<P>
<P><h2>Video Device Driver Entries</h2>
 
<P>
This section describes the entries for video device drivers under the
DeviceMap subkey and under the CurrentControlSet\Services subkeys for
specific video drivers.
<P>
<P><h3>Video Information in the DeviceMap Subkey</h3>
 
<P>
The hardware device mapping for video is under the following subkey:
<P>
HKEY_LOCAL_MACHINE\Hardware\DeviceMap\Video
<P>
This information is volatile and is reconstructed at startup by the video
port driver. It can change from startup to startup based on external
factors, such as failure to initialize a video adapter or the addition of
other video cards to the system.
<P>
This subkey contains the mappings from Windows NT logical video devices to
the physical device they represent in the CurrentControlSet\Services
subkey. This mapping allows the system to find the right display driver for
the currently installed video device.
<P>
<PRE>%device_object_name%     REG_SZ     Registry path for device
</PRE>Indicates the first logical video device is the first physical adapter. For
example, the following entry indicates that the first logical video device
is the second physical XGA adapter:
Video\Device0 = \Registry\Machine\CurrentControlSet\Services\XGA\Device1
<P>
In this example, the value indicates that the second logical video device
is the first physical VGA adapter:
<P>
Video\Device1 = \Registry\Machine\CurrentControlSet\Serivces\Vga\Device0
<P>
These values point to entries in the Services subkey, as described in the
next section.
<P>
<P><h3>Video Driver Entries in the Services Subkey</h3>
 
<P>
The port driver portion of the video driver is hardware-independent and
contains operating system-specific code. Therefore, the port driver,
VIDEOPRT.SYS, can support one or more video devices. The Services\Videoprt
subkey has no added parameters, and its standard entries are:
<P>
<PRE>Value Entry     Default value

ErrorControl    0x1 (Normal)
Group           Video
Start           0x1 (system)
Type            0x1 (Kernel driver)

</PRE>The specific subkey for each video driver contains all the information
required to initialize and program the device properly. If several adapters
can be handled by a single driver, the subkeys Device1, Device2, and so on
will contain information for the other devices. The Registry path looks
like this, where VideoDriverName is the name of a specific video device
driver:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services
<PRE>     \VideoDriverName\Device0

</PRE>The VideoDriverName subkeys for drivers in Windows NT include the
following. This is not an exhaustive list:
<P>
Ati
ET4000
Jazzgxxx
S3
Trident
Vga
Wdvga
Xga
<P>
For example, the following subkey contains information for the first
logical device of type VGA:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Vga\Device0
<P>
The following values can be set in a video driver subkey.
<P>
<PRE>DefaultSettings.BitsPerPel     REG_DWORD     Number of bits per pixel
</PRE>Contains the number of colors for the mode requested by the user. For
example, for the v7vram miniport, the following value yields a 256-color
mode:
DefaultSettings.BitsPerPel = 8
<P>
<PRE>DefaultSettings.Interlaced     REG_DWORD     0 or 1
</PRE>Determines whether the mode requested by the user is interlaced. For
example, for the v7vram miniport:
DefaultSettings.Interlaced = 0x0 (FALSE)
<P>
<PRE>DefaultSettings.VRefresh     REG_DWORD     Number Hz
</PRE>Contains the refresh rate of the mode requested by the user. For example,
for the et4000 miniport:
DefaultSettings.VRefresh = 72
<P>
<PRE>DefaultSettings.XResolution     REG_DWORD     Number of pixels
</PRE>Contains the width of the mode requested by the user. For example, for the
et4000 miniport:
DefaultSettings.Xresolution = 1024
<P>
<PRE>DefaultSettings.YResolution     REG_DWORD     Number of pixels
</PRE>Contains the height of the mode requested by the user. For example, for the
et4000 miniport:
DefaultSettings.Yresolution = 768
<P>
<PRE>DeviceData     REG_BINARY     Binary code
</PRE>Contains binary data specific to the Windows display driver. For example,
for the VGA miniport:
DeviceData = 05a0 5075 8ef0 8456 c8dd
<P>
<PRE>InstalledDisplayDrivers     REG_MULTI_SZ     Driver names
</PRE>Contains a list of names of display drivers that can function with this
miniport, depending on which mode is selected by the user.
<P>
NOTE: Display driver names do not contain the .DLL filename extension.
<P>
The system attempts to initialize the adapter by calling each display
driver, using the user-selected parameter. If the combination of display
driver and monitor do not support the mode requested by the user, the
display driver fails to initialize and the system tries the next display
driver. If all display drivers fail to initialize, the system calls the
first display driver again to set the adapter to any mode it can.
<P>
For example, for the et4000 miniport:
<P>
InstalledDisplayDrivers = "vga" "vga256" "vga64k"
<P>
For the S3 miniport:
<P>
InstalledDisplayDrivers = "s3"
<P>
<PRE>Monitor     REG_SZ     Monitor name
</PRE>This entry is reserved to contain the name of the VESA VDIF monitor
information file for the monitor connected to the adapter. No such files
are provided with Windows NT in the current version.
<P>
If a file is supplied and a value is added, the miniport can load this file
to determine the exact timings of the monitor connected to the physical
device.
<P>
For example, for the XGA miniport, if a NEC4FS monitor was attached to the
XGA card:
<P>
Monitor = "NEC4fg.vdb"
<P>
<PRE>VgaCompatible     REG_DWORD     0 or 1
</PRE>Determines whether the driver supports all of the VGA functionality
required to perform full-screen operations.
<P>
If this value is 1, the driver supports full-screen applications in x86-
based computers. If this value is 0, the VGA miniport (described under the
Vga subkey) will also be used to enable and disable full-screen modes for
non-Windows applications.
<P>
As a rule, all drivers for SVGA adapters should set this value to 1,
because they must implement all the VGA functionality to perform extended
save/restore of all registers. A video accelerator designed as an
accelerator working independently of the VGA miniport (via pass-through)
can set this to 0 and let the VGA miniport do all the full-screen work.
<P>
For example, for the et4000 miniport:
VgaCompatible = 0x1 (TRUE)
<P>
For the S3 miniport:
VgaCompatible = 0x0 (FALSE)
<P>
This functionality is not required for other computer platforms, such as
RISC-based computers, because the VDM sessions are emulated using
NTVDM.EXE, and there are no full-screen sessions.
<P>
None of the DefaultSettings.xxx values should be read by the miniport
directly -that is, using VideoPortGetRegistry() parameters. All the
DefaultSettings.xxx values are only to be read by the window manager and
are passed in a DEVMODE structure to the display driver. It is up to the
Windows display driver to match these settings with the modes returned by
the miniport driver.
<P>
<P>
Reference: "The Windows NT Resource Kit for Operating
System Version 3.1".
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt wss<BR>
Keywords            : kbother ntregistry<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 8, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
