

<HTML>
<HEAD>
<TITLE>Duplexed Mirror Generation Fails with Insufficient Space </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q148425">
<META NAME="KBModify" CONTENT="1997/10/01">
<META NAME="KBCreate" CONTENT="1996/03/13">
<META NAME="Keywords" CONTENT="kbbug4.00 ntfault NTSrv kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  When you use duplexed SCSI controllers and a software mirror of either the operating system partition or a data partition, you may receive the message  Insufficient space on drive X  where X is the target drive or partition. This can happen when us...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDIR,QAKC,QBC6,QALX,QAG8,QBW5,QAC9,QDIV,QBXS,QAR4,QBKX,QANY,QDJN,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Duplexed Mirror Generation Fails with Insufficient Space</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 1, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q148425</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Server version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you use duplexed SCSI controllers and a software mirror of either the
operating system partition or a data partition, you may receive the message
"Insufficient space on drive X" where X is the target drive or partition.
This can happen when using identical controllers and drives.
<P>
<P><h2>CAUSE</h2>
 
<P>
When two SCSI controllers are used, the drive geometry is calculated
differently for controllers that have BIOS enabled and the identical
controller with BIOS disabled.
<P>
With a controller that has BIOS enabled, the operating system can query the
controller BIOS for drive geometry. The BIOS returns a generic drive
geometry translation. This translation will have a cylinder count of less
than 1,024 to work with MS-DOS. The number of heads is normally increased
to arrive at a correct overall size.
<P>
Because the second controller does not have BIOS enabled, all it can
provide the operating system is the size of a block (sector size) and the
total number of blocks on the device. Windows NT then uses a default
translation of 32 tracks per cylinder, 64 heads and adjusts the number of
cylinders to arrive at a correct approximate size. Because of the different
translations, cylinder boundaries will be in different places on the
drives. This often results in a drive's free space being 1 or 2 MB
different on the two identical drives.
<P>
Internally, Windows NT uses a LARGE_INTEGER (64-bit) number for the number
of cylinders and is not constrained by MS-DOS or partition table
limitations.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, perform one of the following:

<UL><LI>If the SCSI controller supports it, set the translation mode on the
   primary controller to 32 sectors per track and 64 heads.

<LI>Disable the BIOS on the primary controller, and enable it on the
   secondary controller. Because creating a mirror does not mirror the
   master boot record, it may also be necessary to set the active partition
   byte on the new boot drive with MS-DOS Fdisk.exe or with a sector
   editor. An alternative is to boot the computer from a Windows NT boot
   floppy disk. Information on how to create this disk can be found in the
   Windows NT Resource Kit and the Concepts and Planning Guide.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT SUR version 4.0.
We are researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords          : kbbug4.00 ntfault NTSrv kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbwontfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 1, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
