

<HTML>
<HEAD>
<TITLE>Chgpass.exe May Cause Message "Error Getting PDC Name" </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q153617">
<META NAME="KBModify" CONTENT="1997/03/26">
<META NAME="KBCreate" CONTENT="1996/07/12">
<META NAME="Keywords" CONTENT="ntinterop NTSrv">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT=" SYMTPOMS  When a NetWare client uses Microsoft Chgpass.exe to change or synchronize passwords on File and Print Services for NetWare (FPNW) and NetWare servers, the message  Error getting PDC name  is returned.  CAUSE =====  When the client gets a p...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QAPN,QAUJ,QAUD,QARL,QBFN,QA9A,QAW6,QAKD,QARM,QAGU,QAH5,QBVX,QAAP,QABI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Chgpass.exe May Cause Message "Error Getting PDC Name"</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 26, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q153617</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:
<P>
- Microsoft Windows NT Server versions 3.51 and 4.0
 
<P>
<P><h2>SYMTPOMS</h2>
 
<P>
When a NetWare client uses Microsoft Chgpass.exe to change or synchronize
passwords on File and Print Services for NetWare (FPNW) and NetWare
servers, the message "Error getting PDC name" is returned.
<P>
<P><h2>CAUSE</h2>
 
<P>
When the client gets a positive response for the object queries for the
FPNWPDC or SYNCPDC properties, it tries to contact the PDC in the following
response frame(s):
<P>
client -&gt; server NCP Request: Read Property Value, Object Name = MS_WINNT,
Property Name = SYNCPDC
<P>
server -&gt; client: the server only returns the PDC name (for example
EVEREST) NCP Reply: Read Property Value - Success
<P>
client -&gt; server NCP Request: Read Property Value, Object Name = EVEREST,
Property Name = NET_ADDRESS
<P>
server-client: NCP Reply:  Read Property Value - No such object
<P>
Because the client couldn't get the MAC address of the DSMN PDC,
Chgpass.exe returns the message "Error getting PDC name."
<P>
<P><h2>WORKAROUND</h2>
 
<P>
The incorrect name of the DSMN PDC was returned by the NetWare server. If
the NetWare server returns incorrect information, delete the
WINNT_SYNC_AGENT user account from the NetWare server and add this NetWare
server to your DSMN domain (using DSMN Synchronization Manager). This way
the correct information will be written to the NetWare bindery.
<P>
For more information on adding a NetWare server to your DSMN domain, see
Chapter 2 ("Adding a NetWare Server to Be Managed in a Domain") in the
Administrator's Guide for Directory Service Manager for NetWare.
<P>
Be aware that a NetWare server will continue to answer the client's CHGPASS
question regardless of whether it is a DSMN- added NetWare server (NCP
Request: Read Property Value, Object Name = MS_WINNT, Property Name =
SYNCPDC). Also be aware that if this NetWare server wasn't properly deleted
using the DSMN Synchronization Manager, it will return the original DSMN
domain and PDC name. If this happens, use the NetWare utility Setpass.exe
to change the password on the NetWare server, because this utility doesn't
check for DSMN functionality.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
If Microsoft Chgpass.exe is involved, the following will happen:

<OL><P><LI>The client opens Chgpass.exe on an FPNW server and reads the .exe file:
<P>
   NCP Request: File Open PUBLIC\CHGPASS.EXE
   NCP Request: File Read
   NCP Request: Burst Read: 22,840 bytes
<P>
</OL>There are two situations in which the behavior of Chgpass.exe is different
from that of NetWare Setpass.exe: with an FPNW server and with a NetWare
server managed by Directory Service Manager for NetWare (DSMN).

<OL><P><LI>The client checks to see if the servers it is attached to are real
</OL>NetWare servers or FPNW servers. An FPNW server will return the domain and
primary domain controller (PDC) name.
<P>
NCP Request: Read Property Value, Object Name = MS_EXTENDED_NCPS, Property
Name = FPNWPDC
<P>
An FPNW server will respond with the PDC and domain name of the account
domain.

<OL><P><LI>The client asks the FPNW server for the MAC address of the PDC, and the
</OL>server returns the address.
<P>
NCP Request: Read Property Value, Object Name = Name_of_PDC, Property Name
= NET_ADDRESS

<OL><P><LI>The client connects via remote procedure call (RPC) over SPX to the PDC
</OL>and changes the password. Before this happens, you will see in the trace
that the client reads an RPC module:
<P>
Request: File Open PUBLIC\RPC16C6.RPC

<OL><P><LI>If the response to the request in item 2 is negative, the client checks
</OL>to see if the server it is attached to is a NetWare server that is part of
a DSMN domain:
<P>
NCP Request: Read Property Value, Object Name = MS_WINNT, Property Name =
SYNCPDC
<P>
The PDC name returned is from the domain that added this NetWare server to
the DSMN Synchronization Manager. The WINNT_SYNC_AGENT NetWare user account
that is created when DSMN Synchronization Manager is installed on Windows
NT is an indication that the NetWare server is managed by DSMN and that it
will respond to this request.
<P>
If the NetWare server is neither an FPNW server nor a DSMN- added server,
it will answer both Read Property Value requests with "no such object,"
causing the NetWare client to change the password directly on this NetWare
server as Setpass.exe from Novell would do.

<OL><P><LI>The client asks the NetWare server for the MAC address of the PDC and
</OL>the server returns the address.
<P>
NCP Request: Read Property Value, Object Name = Name_of_PDC, Property Name
= NET_ADDRESS

<OL><P><LI>The password of the user is changed on the PDC of the DSMN domain the
</OL>same way as with the FPNW server. The PDC will replicate the change to its
backup domain controllers (BDCs) and the NetWare servers listed in the DSMN
administrator tool.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT versions 3.51
and 4.0. We are researching this problem and will post new information here
in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords            : ntinterop NTSrv<BR>
Version             : 3.51 4.0<BR>
Platform            : WinNT<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 26, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
