

<HTML>
<HEAD>
<TITLE>Creating a Boot Disk for an NTFS or FAT Partition </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q119467">
<META NAME="KBModify" CONTENT="1997/12/20">
<META NAME="KBCreate" CONTENT="1994/08/17">
<META NAME="Keywords" CONTENT="ntfilesys kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  This article describes how to create a Windows NT boot disk to access a drive with a faulty boot sequence on an Intel x86-processor-based computer.  NOTE: The procedure for RISC-based computers is different and not documented in this article.  This...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QDIV,QAC9,QDIR,QDL9,QBWQ,QBWO,QBWN,QAIJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Creating a Boot Disk for an NTFS or FAT Partition</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  December 20, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q119467</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article describes how to create a Windows NT boot disk to access a
drive with a faulty boot sequence on an Intel x86-processor-based
computer.
<P>
NOTE: The procedure for RISC-based computers is different and not
documented in this article.
<P>
This Windows NT boot disk can access a drive that has the Windows NT file
system (NTFS) or File allocation table (FAT) file system installed. The
procedures in this article can be useful to work around the following boot
problems:

<UL><LI>Corrupted boot sector.
<LI>Corrupted master boot record (MBR).
<LI>Virus infections.
<LI>Missing or corrupt NTLDR or NTDETECT.COM.
<LI>Incorrect NTBOOTDD.SYS driver.
<LI>This boot disk can also be used to boot from the shadow of a broken
   mirror, although you may need to change the BOOT.INI to do that.
<P>
</UL>This Windows NT boot disk cannot be used for the following problems:

<UL><LI>Incorrect or corrupt device drivers that have been installed into the
   Windows NT System directory.

<LI>Boot problems that occur after the OSLOADER screen.
<P>
</UL>To work around or fix these problems, run the Emergency Repair disk, load
the last known good control set, or reinstall Windows NT, if necessary.
<P>
<P><h2>How to Create a Windows NT Boot Floppy</h2>
 
<P>
The Windows NT floppy disk must include the files NTLDR (or SETUPLDR.BIN
in Windows NT 3.5), NTDETECT.COM, BOOT.INI, and the correct device driver
for your hard drive.
<P>
NOTE: The NTLDR, NTDETECT.COM, and BOOT.INI files usually have their file
attributes set to System, Hidden, and Read-Only. You do not need to reset
these attributes for this disk to work properly. For more information on
the structure of the BOOT.INI file, see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q102873.htm">Q102873</A></B>
   TITLE:      BOOT.INI and ARC Path Naming Conventions and Usage

</PRE>To create a Windows NT boot floppy disk, use the appropriate method:
<P>
<P><h3>If You Do Not Have Access to a Computer Running Windows NT</h3>
 

<OL><P><LI>Create a copy of the first Windows NT Setup disk using the DISKCOPY
   command, and then delete all files on the new disk.

<P><LI>Copy the NTDETECT.COM and NTLDR files to the new disk.

<P><LI>Rename the NTLDR file to SETUPLDR.BIN.

<P><LI>Create a BOOT.INI file.
<P>
   The following is an example that works for a single partition SCSI
   drive with Windows NT installed under \WINNT, however, the exact value
   in the [operating systems] section depends upon the configuration of
   the Windows NT System you want to boot:
<P>
<P><PRE>      [boot loader]
      timeout=30
      Default= scsi(0)disk(0)rdisk(0)partition(1)\winnt
</PRE><P>
<P><PRE>      [operating systems]
      scsi(0)disk(0)rdisk(0)partition(1)\winnt="Windows NT"
</PRE><P>
   If your computer boots from an IDE, EIDE, or ESDI hard drive, replace
   the scsi(0) with multi(0). If you are running Windows NT 3.5 or 3.51
   and your system boots from the first or second SCSI drive, then you can
   also replace scsi(0) with multi(0).

<P><LI>If you are using scsi(x) in the Boot.ini, copy the correct device
   driver for the SCSI controller in use on the computer, and then rename
   it to NTBOOTDD.SYS. If you are using multi(x) in the Boot.ini, you do
   not need to do this.

<P><LI>Start your computer using the floppy disk, and then log on to Windows
   NT.
<P>
</OL><h3>If You Have Access to a Computer Running Windows NT</h3>
 

<OL><P><LI>Format a floppy disk using the Windows NT format utility.

<P><LI>Copy NTLDR from the Windows NT Setup CD-ROM, Windows NT Setup floppy
   disk, or from a computer running the same version of Windows NT as the
   computer you want to access with the boot floppy. You may need to
   expand this file from NTLDR._ to NTLDR by using the following command
   line:
<P>
<P><PRE>      EXPAND NTLDR._ NTLDR
</PRE>
<P><LI>Copy the NTDETECT.COM file to the disk.

<P><LI>Create a BOOT.INI file or copy one from a running Windows NT computer
   and modify it to match the computer you are trying to access. Below is
   an example which will work for a single partition SCSI drive with
   Windows NT installed under \WINNT, however, the exact value in the
   [operating systems] section depends upon the configuration of the
   Windows NT computer you are trying to access:
<P>
<P><PRE>      [boot loader]
      timeout=30
      Default= scsi(0)disk(0)rdisk(0)partition(1)\winnt
</PRE><P>
<P><PRE>      [operating systems]
      scsi(0)disk(0)rdisk(0)partition(1)\winnt="Windows NT"
</PRE><P>
   If your computer starts from an IDE, EIDE, or ESDI hard drive, replace
   the scsi(0) with multi(0). If you are running Windows NT 3.5 or 3.51
   and your computer starts from the first or second SCSI drive, then you
   can also replace scsi(0) with multi(0).

<P><LI>If you are using scsi(x) in the Boot.ini, copy the correct device
   driver for the SCSI controller in use on the computer and rename it to
   NTBOOTDD.SYS. If you are using multi(x) in the Boot.ini, you do not
   need to do this.

<P><LI>Start using the floppy disk, and then log on to Windows NT.
<P>
</OL><h3>If You Have Windows NT Version 3.51</h3>
 

<OL><P><LI>Format a blank 3.5" 1.44mb floppy disk under Windows NT 3.51.

<P><LI>Copy NTDETECT.COM and NTLDR to the new disk.

<P><LI>Create a BOOT.INI file with the following lines: (This example is for a
   single partition SCSI drive with Windows NT installed in the default
   directory, C:\WINNT35.)
<P>
<P><PRE>     [boot loader]
     timeout=30
     Default= multi(0)disk(0)rdisk(0)partition(1)\winnt35
</PRE><P>
<P><PRE>     [operating systems]
     multi(0)disk(0)rdisk(0)partition(1)\winnt35="Windows NT 3.51"
</PRE>
<P><LI>Boot from the floppy disk and log on to Windows NT.
<P>
</OL><h2>Troubleshooting</h2>
 
<P>
You may encounter one or more of the following problems when you attempt
to start your computer using your Windows NT boot floppy disk:

<UL><LI>If the path pointing to the system files is incorrect or includes the
   drive letter, you may receive the following error message:
<P>
<P><PRE>      Windows NT could not start because of the following ARC firmware
      boot configuration problem: Did not properly generate ARC name for
      HAL and system paths. Please check the Windows NT (TM) documentation
      about ARC configuration options and your hardware reference manuals
      for additional information. Boot Failed.
</PRE>
<LI>If an incorrect SCSI driver has been selected or the NTBOOTDD.SYS file
   does not exist, you may receive the following message:
<P>
<P><PRE>      Windows NT could not start because of a computer disk hardware
      configuration problem. Could not read from selected boot disk. Check
      boot path and disk hardware. Please check the Windows NT (TM)
      documentation about hardware disk configuration and your hardware
      disk configuration and your hardware reference manuals for
      additional information. Boot Failed.
<P></BLOCKQUOTE>
</UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.00 3.51 3.50 3.10 repair tshoot<BR>
Keywords          : ntfilesys kbsetup<BR>
Version           : 3.1 3.5 3.51 4.0<BR>
Platform          : winnt<BR>
Issue type        : kbtshoot<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  December 20, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
