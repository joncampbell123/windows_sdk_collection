

<HTML>
<HEAD>
<TITLE>REG: Device Driver Entries, PART 2--Mouse/Keyboard Driver </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102989">
<META NAME="KBModify" CONTENT="1997/07/24">
<META NAME="KBCreate" CONTENT="1993/08/12">
<META NAME="Keywords" CONTENT="kbprint ntprint ntregistry NTSrvWkst">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="The article contains REGISTRY entries for Mouse and Keyboard Drivers. There is a second half of this topic, found in the article Device Driver Entries, Part 3.  These subgroups are included:   - Microsoft Bus Mouse Port Driver  - Intel 8042 Port Driv...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABA,QAU9,QBDT,QAKD,QAKC,QAPN,QADN,QAQ7,QBBI,QAHC,QAB5,QDJP,QAKG,QAP2,QBC6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>REG: Device Driver Entries, PART 2--Mouse/Keyboard Driver</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 24, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102989</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
The article contains REGISTRY entries for Mouse and Keyboard Drivers. There
is a second half of this topic, found in the article Device Driver Entries,
Part 3.
<P>
These subgroups are included:

<UL><LI>Microsoft Bus Mouse Port Driver
<LI>Intel 8042 Port Driver
<LI>Microsoft InPort Bus Mouse Port Driver
<P>
</UL>There are 5 parts to the Device Driver Entries article series:
<P>
Part 1: Device Driver Entries, containing:

<UL><LI>File System Drivers and Recognizers
<LI>Disk, Serial and Parallel Ports
<P>
</UL>Part 2: Mouse and Keyboard Entries
<P>
Part 3: Mouse and Keyboard Entries, cont'd, containing:

<UL><LI>Microsoft Serial Mouse Port Driver
<LI>Mouse Class Driver
<LI>Keyboard Class Driver
<LI>Device Map Entries for the Keyboard and Mouse
<P>
</UL>Part 4: SCSI Miniport Entries
<P>
Part 5: Sound Card and Video Device Driver Entries
<P>
 
<P>
NOTE: You can view current settings for these device drivers by choosing
the Devices button in WinMSD.
<P>
<P><h2>Mouse and Keyboard Driver Entries</h2>
 
<P>
Parameters in this section are for the mouse and keyboard class and port
drivers, including these drivers:
<P>
<PRE>Busmouse          Inport          Mouclass
i8042             Kbdclass        Sermouse


</PRE><h2>Microsoft Bus Mouse Port Driver Entries</h2>
 
<P>
The following value entries for the Microsoft bus mouse are found in this
subkey:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Busmouse\Parameters
<P>
<PRE>MouseDataQueueSize     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of mouse events to be buffered internally by the
driver, in nonpaged pool. The allocated size, in bytes, of the internal
buffer is this value times the size of the MOUSE_INPUT_DATA structure
(defined in NTDDMOU.H). Consider increasing the size if the System log in
Event Viewer frequently contains this message from the Busmouse source:
"The ring buffer that stores incoming mouse data has overflowed (buffer
size is configurable via the Registry)."
Default: 0x64 (100)
<P>
<PRE>NumberOfButtons     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of buttons on the bus mouse. If the number of buttons
detected at startup time and placed in the Registry is incorrect, this
value can be used to override it.
Default: 0x2 (two buttons)
<P>
<PRE>PointerDeviceBaseName     REG_SZ     Base port device name
</PRE>Specifies the base name for the device object(s) created by the bus mouse
port device driver. The device driver also writes information about the
device objects into HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap so that the
pointer class driver can locate the pointer port device objects.
Default: PointerPort
<P>
<PRE>SampleRate     REG_DWORD     Mouse sample rate in Hz
</PRE>Specifies the sample rate for the bus mouse. Intended for future use. This
value might have no effect in the first release of Windows NT.
Default: 0x32 (50 Hz)
<P>
<P><h2>Intel 8042 Port Driver Entries</h2>
 
<P>
The i8042prt driver handles the keyboard and mouse port mouse (also known
as a PS/2-compatible mouse) for the Intel 8042 controller. These value
entries are found in the following subkey:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\i8042prt\Parameters
<P>
<PRE>KeyboardDataQueueSize     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of keyboard events to be buffered internally by the
driver, in nonpaged pool. The allocated size, in bytes, of the internal
buffer is this value times the size of the KEYBOARD_INPUT_DATA structure
(defined in NTDDKBD.H). Consider increasing the size if the System log in
Event Viewer contains the following message from the i8042prt source:  "The
ring buffer that stores incoming keyboard data has overflowed (buffer size
is configurable via the Registry)."
Default: 0x64 (100)
<P>
<PRE>KeyboardDeviceBaseName     REG_SZ     Base keyboard port device name
</PRE>Specifies the base name for the keyboard device object(s) created by the
i8042prt device driver. The device driver also writes information about the
device objects into HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap so that the
keyboard class driver can locate the keyboard port device objects.
Default: KeyboardPort
<P>
<PRE>MouseDataQueueSize     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of mouse events to be buffered internally by the
driver, in nonpaged pool. Consider increasing the size if the System log in
Event Viewer contains the following message from the i8042prt source: "The
ring buffer that stores incoming mouse data has overflowed (buffer size is
configurable via the Registry)."
Default: 0x64 (100)
<P>
<PRE>MouseResolution     REG_DWORD     Mouse resolution specifier
</PRE>Used in specifying the mouse port mouse resolution, where 2 to the power of
MouseResolution specifies counts-per-millimeter.
Default: 0x3
<P>
<PRE>MouseSynchIn100ns      REG_DWORD     Time, in 100 nanosecond units
</PRE>Specifies the length of time after which the next mouse interrupt is
assumed to indicate the start of a new mouse packet (partial packets are
discarded). This allows the driver to synchronize its internal notion of
the mouse packet state with the hardware state, in the event that a mouse
interrupt has been lost. Consider modifying this value if the system
behaves as if there are random mouse events occurring (for example, button
clicks when no mouse button has been pressed).
Default: 10000000 (1 second)
<P>
<PRE>NumberOfButtons     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of buttons on the mouse port mouse. If an incorrect
number of buttons is detected at startup time and placed in the Registry,
this value can be used to override it.
Default: 0x2
<P>
<PRE>PointerDeviceBaseName     REG_SZ     Base mouse port device name
</PRE>Specifies the base name for the pointer device object(s) created by the
mouse port mouse driver. The device driver also writes information about
the device object into HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap so that the
pointer class driver can locate the pointer port device objects.
Default: PointerPort
<P>
<PRE>PollStatusIterations     REG_DWORD     Number
</PRE>Specifies the maximum number of times to check the i8042 controller status
register for interrupt verification before dismissing the interrupt as
spurious. This value can be used to work around a problem experienced on
some hardware (including the Olivetti MIPS computers) where the keyboard
interrupt is raised before the Output Buffer Full bit is set in the i8042
status register.
<P>
Increase this value if the system seems to suddenly stop taking keyboard
interrupts. This can happen if a keyboard interrupt is mistakenly dismissed
as spurious, when instead it just took too long to set Output Buffer Full
after raising the interrupt. Increasing the value of PollStatusIterations
results in a longer execution time for the Interrupt Service Routine if the
keyboard interrupt truly is spurious (there is a 1 microsecond delay
following each check for Output Buffer Full).
<P>
To determine whether the driver is taking keyboard interrupts, press the
NUMLOCK key. If the NumLock light on the keyboard turns on or off, this
indicates that the i8042prt driver handled the keyboard interrupt
correctly. Default: 1
<P>
<PRE>OverrideKeyboardType     REG_DWORD     &gt;= 0x0
</PRE>This entry is not usually present. When present, it specifies the keyboard
type (overriding the keyboard type detected during system initialization).
Add this value entry if the detected keyboard type is incorrect in the
Registry. Type values 0x2 and 0x4 indicate an enhanced 101-key or 102-key
keyboard, or compatible; other values typically indicate an old-style AT
keyboard (83, 84, or 86 keys), or compatible.
Default: 0x4 (Enhanced 101-key or 102-key keyboard)
<P>
<PRE>OverrideKeyboardSubtype     REG_DWORD     &gt;= 0x0
</PRE>This entry is not usually present. When present, it specifies the OEM-
dependent keyboard subtype (overriding the keyboard subtype detected during
system initialization).
Default: 0x0
<P>
<PRE>PollingIterations     REG_DWORD     &gt;= 0x400
</PRE>Specifies the standard number of times to poll the hardware (in polling
mode) before giving up and timing out the operation. Consider increasing
this value if the driver fails to initialize or work correctly and the
System log in Event Viewer contains the following message from the i8042prt
source: "The operation on ... timed out (time out is configurable via the
Registry)."
Default: 0x400
<P>
<PRE>PollingIterationsMaximum     REG_DWORD     &gt;= 0x400
</PRE>Specifies the maximum number of times to poll the hardware (in polling
mode) before giving up and timing out the operation. This value is used
instead of PollingIterations when an old-style AT keyboard is detected (see
OverrideKeyboardType). Consider increasing this value if the driver fails
to initialize or work correctly and the System log in Event Viewer contains
the following message from the i8042prt source:  "The operation on ...
timed out (time out is configurable via the Registry)."
Default: 0x2EE0
<P>
<PRE>ResendIterations     REG_DWORD     &gt;= 0x1
</PRE>Specifies the maximum number of times a hardware operation will be retried
before timing out. Consider increasing this value if the driver fails to
initialize or work correctly and the System log in Event Viewer contains
the following message from the i8042prt source: "Exceeded the allowable
number of retries (configurable via the Registry) on device ..."
Default: 0x3
<P>
<PRE>SampleRate     REG_DWORD     Mouse sample rate in Hz
</PRE>Specifies the sample rate for the mouse. Intended for future use. This
value might have no effect in the first release of Windows NT.
Default: 0x3C (60 Hz)
<P>
<P><h2>Microsoft InPort Bus Mouse Port Driver Entries</h2>
 
<P>
The value entries for the Microsoft InPort bus mouse are found in this
subkey:
<P>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Inport\Parameters
<P>
<PRE>HzMode     REG_DWORD     Mouse sample rate mode specifier
</PRE>Specifies the value written to the Microsoft InPort mode register to set
the mouse sample rate. Might be used in the first release of Windows NT,
but should become obsolete.
Default: 0x2 (selects 50 Hz)
<P>
<PRE>MouseDataQueueSize     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of mouse events to be buffered internally by the
driver, in nonpaged pool. The allocated size, in bytes, of the internal
buffer is this value times the size of the MOUSE_INPUT_DATA structure
(defined in NTDDMOU.H). Consider increasing the size if the System log in
Event Viewer contains the following message from the InPort source:  "The
ring buffer that stores incoming mouse data has overflowed (buffer size is
configurable via the Registry)."
Default: 0x64 (100)
<P>
<PRE>NumberOfButtons     REG_DWORD     &gt;= 0x1
</PRE>Specifies the number of buttons on the Microsoft InPort bus mouse. If the
number of buttons detected at startup time and placed in the Registry is
incorrect, this value can be used to override it.
Default: 0x2
<P>
<PRE>PointerDeviceBaseName     REG_SZ     Base port device name
</PRE>Specifies the base name for the device object(s) created by the Microsoft
InPort bus mouse device driver. The device driver also writes information
about the device objects into HKEY_LOCAL_MACHINE\HARDWARE\DeviceMap so that
the pointer class driver can locate the pointer port device objects.
Default: PointerPort
<P>
<PRE>SampleRate     REG_DWORD     Mouse sample rate in Hz
</PRE>Specifies the sample rate for the Microsoft InPort bus mouse. Intended for
future use. This value might have no effect in the first release of Windows
NT.
Default: 0x32 (50 Hz)
<P>
Reference: "The Windows NT Resource Kit for Operating
System Version 3.1".
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt<BR>
Keywords            : kbprint ntprint ntregistry NTSrvWkst<BR>
Version             : 3.1<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 24, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
