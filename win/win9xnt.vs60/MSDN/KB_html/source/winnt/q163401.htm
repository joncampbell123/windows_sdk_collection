

<HTML>
<HEAD>
<TITLE>How to Disable Network Redirector File Caching </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q163401">
<META NAME="KBModify" CONTENT="1998/02/17">
<META NAME="KBCreate" CONTENT="1997/02/10">
<META NAME="Keywords" CONTENT="nthowto ntregistry NTSrvWkst kberrmsg kbhowto">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  While data is being transferred to a remote server, you may experience one of the following error messages:     Event ID 26:    Application popup: System process-lost delayed write data:    the system was attempting to transfer file data from buffe...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAB4,QAYY,QA8T,QAO4,QBJZ,QAVZ,QBF0,QAPN,QBXS,QA4P,QA4H,QALQ,QAKD,QAGI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Disable Network Redirector File Caching</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 17, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q163401</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 3.51 and 4.0
<LI>Microsoft Windows NT Server versions 3.51 and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
While data is being transferred to a remote server, you may experience one
of the following error messages:
<P>
<PRE>   Event ID 26:
   Application popup: System process-lost delayed write data:
   the system was attempting to transfer file data from buffers to
   &lt;filename path&gt;. The write operation failed and only some of the
   data may have been written to the file.

   -or-

   Event ID 26
   Application popup: System process-lost delayed write data:
   the system was attempting to transfer file data from buffers to
   &lt;network share&gt;. The write operation failed and only some of the
   data may have been written to the file.

</PRE>These popup messages may also be accompanied by one or more of the
following event log messages:
<P>
<PRE>   Event ID: 3013
   Description: The redirector has timed out to &lt;Servername&gt;

   -or-

   Event ID: 8007
   Description: NetWare redirector timed out its request to server
   &lt;Servername&gt;


</PRE><h2>CAUSE</h2>
 
<P>
By default, when the Windows NT redirector opens a file for read or
read/write access, the redirector utilizes the Windows NT system cache.
Therefore, when data is written to the file, it is written to the cache and
not immediately flushed to the redirector. The cache manager flushes the
data at a later time. If an unrecoverable network error occurs while the
data is being transferred to the remote server, it may cause the write
request to fail and the above application popup to occur.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
WARNING: This procedure should first be tested in a non-critical
environment before being implemented into a production environment. In
general, this change will slow down network I/O.
<P>
You can disable Network Redirector File Caching by performing the following
steps:
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.

<OL><P><LI>Start Registry Editor (Regedt32.exe) and go to the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Rdr\Parameters
</PRE>
<P><LI>Click Add Value on the Edit menu.

<P><LI>Enter the following:
<P>
<P><PRE>      Value Name: UseWriteBehind
      Data Type:  REG_DWORD
<PRE></PRE>      Data:       0

      1-true 0-false (default: 1)

      UseWriteBehind - Enables the write-behind optimization for write
      Only files.

</PRE><P><LI>Go to the following subkey:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services
<PRE></PRE>         \Lanmanworkstation\parameters

</PRE><P><LI>Click Add Value on the Edit menu.

<P><LI>Enter the following:
<P>
<P><PRE>      Value Name: UtilizeNTCaching
      Data Type:  REG_DWORD
<PRE></PRE>      Data:       0

      1-true 0-false (default: 1)

      UtilizeNTCaching - Indicates whether the redirector uses the cache
      manager to cache the contents of files. Disable this parameter only
      to guarantee that all data is flushed to the server immediately after
      it is written by the application.

</PRE><P><LI>Shut down and restart your computer.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 4.00 3.51 prodnt nts<BR>
Keywords          : nthowto ntregistry NTSrvWkst kberrmsg kbhowto<BR>
Version           : 3.51 4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 17, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
