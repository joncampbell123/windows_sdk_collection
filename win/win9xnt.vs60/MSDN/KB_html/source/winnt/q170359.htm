

<HTML>
<HEAD>
<TITLE>How to Modify the TCP/IP Maximum Retransmission Timeout </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170359">
<META NAME="KBModify" CONTENT="1997/10/03">
<META NAME="KBCreate" CONTENT="1997/06/18">
<META NAME="Keywords" CONTENT="NTSrvWkst nttcp kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  TCP starts a retransmission timer when each outbound segment is handed down to IP. If no acknowledgment has been received for the data in a given segment before the timer expires, then the segment is retransmitted, up to the TcpMaxDataRetransmissio...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABA,QATK,QAMR,QAKD,QACE,QBWP,QAM2,QBG2,QAU3,QAI5,QAFH,QDNT,QAHH,QBJZ,QAL0 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How to Modify the TCP/IP Maximum Retransmission Timeout</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 3, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170359</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation versions 4.0
<LI>Microsoft Windows NT Server versions 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
TCP starts a retransmission timer when each outbound segment is handed
down to IP. If no acknowledgment has been received for the data in a given
segment before the timer expires, then the segment is retransmitted, up to
the TcpMaxDataRetransmissions times. The default value for this parameter
is 5.
<P>
The retransmission timer is initialized to three seconds when a TCP
connection is established; however, it is adjusted on the fly to match the
characteristics of the connection using Smoothed Round Trip Time (SRTT)
calculations as described in RFC793. The timer for a given segment is
doubled after each retransmission of that segment. Using this algorithm,
TCP tunes itself to the normal delay of a connection. TCP connections over
high-delay links will take much longer to time out than those over low-
delay links.
<P>
By default, after the retransmission timer hits 240 seconds, it uses that
value for retransmission of any segment that needs to be retransmitted.
This can be a cause of long delays for a client to time out on a slow
link.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Windows NT provides a mechanism to tune the maximum retransmission timer.
<P>
WARNING: Using Registry Editor incorrectly can cause serious, system-wide
problems that may require you to reinstall Windows NT to correct them.
Microsoft cannot guarantee that any problems resulting from the use of
Registry Editor can be solved. Use this tool at your own risk.
<P>
To change from the default value of 240 seconds, adjust the default
maximum retransmission timer by changing the following registry entry:

<OL><P><LI>Run Registry Editor (Regedt32.exe).

<P><LI>Go to the following key in the registry:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\
      tcpip\Parameters
</PRE>
<P><LI>On the Edit menu, click Add Value and use the following entry:
<P>
<P><PRE>      Value Name: TcpTimedWaitDelay (new in 3.51 SP5 and 4.0)
      Data Type:  REG_DWORD (time in seconds)
<PRE></PRE>      Value:      30-300 (decimal)
      Default:    0xF0 (240 decimal) not in registry by default

      Description: This parameter determines the length of time that a
      connection will stay in the TIME_WAIT state when being closed. While
      a connection is in the TIME_WAIT state, the socket pair cannot be
      reused. This is also known as the "2MSL" state, as by RFC the value
      should be twice the maximum segment lifetime on the network. See
      RFC793 for further details.

</PRE><P><LI>Restart the computer for the registry change to take effect.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: lpr lpd lpdsvc tcpip print<BR>
Keywords          : NTSrvWkst nttcp kbnetwork<BR>
Version           : WinNT:4.0<BR>
Platform          : winnt<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 3, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
