

<HTML>
<HEAD>
<TITLE>WinNT 3.5 Software Update for the Pentium Floating Point Error </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q122323">
<META NAME="KBModify" CONTENT="1995/08/16">
<META NAME="KBCreate" CONTENT="1994/02/15">
<META NAME="Keywords" CONTENT="kbtool kbfix3.50.sp1">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Microsoft has developed a utility (PENTNT.EXE) that, on Pentium-based systems, checks whether the processor contains the floating point division error, reports the current status of floating point, and allows disabling and re-enabling of hardware f...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QANO,QBC9,QBC8,QAII,QBWP,QBXS,QDIO,QAAP,QAB4,QAJH,QAG2,QDIV,QBCU,QAKM,QAXB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>WinNT 3.5 Software Update for the Pentium Floating Point Error</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 16, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q122323</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5
<LI>Microsoft Windows NT Server version 3.5
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft has developed a utility (PENTNT.EXE) that, on Pentium-based
systems, checks whether the processor contains the floating point division
error, reports the current status of floating point, and allows disabling
and re-enabling of hardware floating point.
<P>
This software effectively turns off the math coprocessor by trapping the
floating point instructions. This makes the Pentium processor behave
similarly to 486SX or 386 processors that do not have a math coprocessor.
The utility works on Pentium and x86 systems.
<P>
Additionally, the solution is implemented through registry settings so that
system policy administrators can control the use of Pentium floating point
hardware on user systems.
<P>
<P><h2>STATUS</h2>
 
<P>
This utility is available in the latest U.S. Service Pack for Windows NT
version 3.5. For information on obtaining the Service Pack, query on the
following word in the Microsoft Knowledge
Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE>This utility is included in Windows NT version 3.51.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Performance Considerations</h3>
 
<P>
Core operating system code (for window management, disk and file
operations, and application programming interfaces) in Windows NT does not
perform floating point calculations, and so will not be affected either by
the potential floating point hardware division errors, or by disabling
hardware floating point.  However, choosing software emulation of floating
point will result in lower performance of floating point operations.  Some
utilities and applications such as the Calculator application provided with
Windows NT, and the OpenGL rendering engine, may use floating point
hardware when present.  Most word processors, databases, email, and so on,
perform few or no floating point operations.
<P>
Math-intensive applications, including spreadsheets and technical
applications, typically perform floating point operations, and therefore
will experience some performance degradation.  The OpenGL rendering engine,
which is part of Windows NT 3.5, and other 3D and CAD applications, are
instances of this type of application.  The user of such applications will
be able to choose between the higher speed of hardware floating point, or
slower floating point software emulation libraries, which will not
encounter the Pentium floating point division error.  Many applications
contain their own floating point libraries to use in this case.  A few
applications (such as Autocad) require floating point hardware and will not
run without it.  Customers running these applications will need to replace
their Pentium processor in order to avoid the floating point division
error.  The floating point software emulation's libraries are used on
systems with 486SX or 386 processors.
<P>
<P><h3>Running PENTNT.EXE</h3>
 
<P>
To start the PENTNT.EXE utility, at the MS-DOS prompt type:
<P>
<PRE>    PENTNT [-C|-c] [-F|-f] [-O|-o] [-?|-H|-h]

</PRE>The utility will test floating point division.  If no error is found, a
message will appear recommending that you use floating point hardware.  If
a division error is detected, a message appears notifying you of the error.
You then have several choices: to disable floating point hardware only if
you are using a Pentium processor with a division error, or disable
floating point hardware always.  If you choose to disable or re-enable
floating point emulation, you must restart the computer for the changes to
take effect.
<P>
The complete PENTNT command syntax is as follows:
<P>
PENTNT [-C|-c] [-F|-f] [-O|-o] [-?|-H|-h]
<P>
where:
<P>
<PRE>-C|-c      Turns on conditional emulation.  This means that floating point
           emulation will be forced on if and only if the system detects
           the Pentium floating point division error at start time.  If you
           select this parameter, you must restart the computer for the
           changes to take effect.

-F|-f      Turns on forced emulation. This means that floating point
           hardware is disabled and floating point emulation will always be
           forced on, regardless of whether the system exhibits the Pentium
           division error.  This parameter is useful for testing software
           emulators and for working around floating point hardware defects
           known to the operating system.  If you select this parameter,
           you must restart the computer for the changes to take effect.

-O|-o      Turns off forced emulation and re-enables floating point
           hardware if it is present.  If you select this parameter, you
           must restart the computer for the changes to take effect.

-?|-H|-h   Displays help for the command.

</PRE><h3>Registry Entry</h3>
 
<P>
The Registry entry for the PENTNT utility is located in the Registry
subtree HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\SessionManager.
The following parameter is used by the PENTNT utility:
<P>
REG_DWORD
ForceNpxEmulation = 0 | 1 | 2
<P>
Specifies if the floating point emulation is turned on or off.  If set to
0, floating point emulation is not enabled and floating point hardware is
enabled. If set to 1, conditional floating point emulation is enabled.  If
set to 2, unconditional emulation is enabled.  By default, this parameter
is set to 0.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbtool kbfix3.50.sp1<BR>
KBSubcategory: ntutil<BR>
Additional reference words: prodnt 3.50 fpu bug intel<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 16, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
