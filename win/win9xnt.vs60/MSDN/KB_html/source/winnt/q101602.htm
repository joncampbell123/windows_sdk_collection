

<HTML>
<HEAD>
<TITLE>Configuring Windows NT for Replication </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q101602">
<META NAME="KBModify" CONTENT="1997/11/14">
<META NAME="KBCreate" CONTENT="1993/07/19">
<META NAME="Keywords" CONTENT="kbusage">
<META NAME="KBArea" CONTENT="Support; KB; winnt, crossnet, iis">
<META NAME="Description" CONTENT="  Windows NT implements replication to maintain identical copies of specified files and directories on different computers. Changes made to files on one computer are automatically replicated to other computers configured to receive the changes. Repli...">
<META NAME="Product" CONTENT="Windows NT">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBXS,QA3P,QBWS,QAGU,QAFI,QAFO,QAG2,QAI5,QAM4,QBTX,QBG2,QA9A,QBBI,QBXB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Configuring Windows NT for Replication</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 14, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q101602</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Windows NT operating system version 3.1
<LI>Microsoft Windows NT Advanced Server version 3.1
<LI>Microsoft Windows NT Workstation versions 3.5, 3.51, and 4.0
<LI>Microsoft Windows NT Server versions 3.5, 3.51, and 4.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Windows NT implements replication to maintain identical copies of
specified files and directories on different computers. Changes made
to files on one computer are automatically replicated to other
computers configured to receive the changes. Replication requires a
Windows NT Advanced Server to serve as the export server. The import
server(s) can be other Windows NT Advanced Servers, Windows NT
workstations, or OS/2 LAN Manager version 2.x servers. The information
below provides detailed instructions to replicate information from an
export server to an import server.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Perform the following fourteen steps to configure the export server:

<OL><P><LI>Run the User Manager from the Administrative Tools group.

<P><LI>Create a new account for replication (for example, REPL). Specify
    a password, if desired. Remove the check from the "User must
    change password at next logon" check box.

<P><LI>Choose OK. Then close User Manager.

<P><LI>Run the Control Panel and select Services.

<P><LI>Choose the Directory Replicator service and choose Startup. Change
    the Startup Type from Manual to Automatic.

<P><LI>In the Log On As control, choose This Account. Then choose Add
    User. Select the account created in step 2 above and choose Add.

<P><LI>Type the password for the replication account and choose OK.
    Control Panel responds with a message such as "The account
    DOMAIN\REPL has been granted the Log On As A Service right and
    added to the Replicator local group." (If this message does not
    appear, use the User Manager to grant this right. In User Manager,
    choose Policies, then choose User Rights, and choose Show Advanced
    User Rights. Select Log On As a Service. If the replication account
    does not appear in the Grant To box, click Add, then Show Users,
    highlight the replication account, click Add, and click OK. The
    replication account should appear in the Grant To box. Click OK.)

<P><LI>Choose OK to dismiss this message.

<P><LI>Run the Server Manager from the Administrative Tools group.

<P><LI>Choose the export Advanced Server, then choose Computer and
    Properties.

<P><LI>Choose Replication. In the Replication dialog box, choose Export
    Directories. The Server Manager displays the default path:
    C:\WINNT\SYSTEM32\REPL\EXPORT.

<P><LI>Choose Add. Specify the name of the domain or computer to act as
    the import server. (Specifying the name of a domain replicates the
    files and directories to any workstation or Windows NT Advanced
    Server in the domain that is configured for import replication.)
<P>
    NOTE: If you're setting up replication across a WAN, use specific
    computer names instead of or in addition to the domain name. For
    additional information, please see the following article in the
    Microsoft Knowledge Base:
<P>
       ARTICLE-ID: <B><A href="../winnt/q139103.htm">Q139103</A></B>
<PRE>       TITLE     : Replication to Import Computers in a WAN Environment

</PRE><P><LI>Choose Manage to configure specific directories for replication.
    By default, the Server Manager exports the Scripts directory that
    contains any user logon scripts. Choose the Add button to specify
    any additional subdirectories. (If necessary, create the
    directories first in the File Manager or at the command prompt.)
<P>
    If you choose the Add Lock button, Windows NT does not replicate
    the selected directory until all &lt;LOCKS&gt; are removed. If you
    choose Wait until Stabilized, Windows NT does not replicate files
    until two or more minutes after the last file changed. Otherwise,
    Windows NT replicates files immediately.
<P>
    If you choose Entire Subtree, Windows NT exports the specified
    subdirectory and all subdirectories it contains. Otherwise,
    Windows NT exports only the specified subdirectory.
<P>
    After you choose all applicable options, choose OK.

<P><LI>Choose OK to exit the Directory Replication dialog box. Windows NT
    responds with the message "Attempting to Start the Directory
    Replication service on &lt;computername&gt;." If the service does not
    start, refer to the Error Log for specific error information.
<P>
</OL>Perform the following nine steps to configure the import server:

<OL><P><LI>On each import computer, run Control Panel and select Services.

<P><LI>Choose the Directory Replicator service and choose Startup. Change
   the Startup Type from Manual to Automatic.

<P><LI>In the Log On As control, choose This Account. Then choose Add
   User. Select the replication account created on the export server
   and choose Add.
<P>
   If the importing computer is in a different domain from the exporting
   computer, set up a replication account in the import domain with the
   same name and password as the account used for the export domain.

<P><LI>Type the password for the replication account and choose OK.
   Control Panel responds with a message such as "The account
   DOMAIN\REPL has been granted the Log On As A Service right and
   added to the Replicator local group." (If this message does not
   appear, use the User Manager to grant this right. In User Manager,
   choose Policies, then choose User Rights, and choose Show
   Advanced User Rights. Check Log On As A Service and choose OK.)

<P><LI>Choose OK to dismiss this message.

<P><LI>In Control Panel, choose Server, then choose Replication.

<P><LI>In the Replication dialog box, choose Import directories. The
   Server Manager displays the default path:
   C:\WINNT\SYSTEM32\REPL\IMPORT.

<P><LI>Choose Add. Specify the name of the domain or computer to act as
   the export server. (By default, the From List is blank and the
   computer automatically imports files from the local domain. If you
   add any entries to the From List, the computer no longer
   automatically imports files from the local domain; if desired, it
   must be added to the From List.)
<P>
   If you're setting up replication in a WAN environment, use specific
   computer names instead of or in addition to the domain name. For
   additional information, please see the following article in the
   Microsoft Knowledge Base:
<P>
<P><PRE>      ARTICLE-ID: <B><A href="../winnt/q139103.htm">Q139103</A></B>
<PRE></PRE>      TITLE     : Replication to Import Computers in a WAN Environment

</PRE><P><LI>Choose Manage to display the status screen for the imported
   directories.
<P>
   Add Lock prevents Windows NT from updating the specified directory.
<P>
   The Status field can be one of the following:
<P>
<P><PRE>    - "OK" indicates that the subdirectory receives regular updates.
</PRE><P>
<P><PRE>    - "No Master" indicates that the subdirectory is not receiving
      regular updates.
</PRE><P>
<P><PRE>    - "No Sync" indicates that the subdirectory has received updates,
      but that its data is not up to date.
</PRE><P>
<P><PRE>    - A blank status indicates that the subdirectory has not been
      replicated.
</PRE><P>
</OL>Additional notes:

<UL><LI>An Advanced Server can be configured as both an import and an
   export server.

<LI>Windows NT can replicate files across domain trust relationships by
   establishing the same Replication account and password in each
   domain.

<LI>When Windows NT replicates files from NTFS to FAT, it replicates
   only 8.3 filenames.

<LI>Windows NT can support other import and export paths. However, the
   default paths, C:\WINNT\SYSTEM32\REPL\IMPORT and
   C:\WINNT\SYSTEM32\REPL\EXPORT, have complex permissions that
   support replication. Maintaining these paths is recommended.

<LI>When Windows NT displays the message such as "The account
   DOMAIN\REPL has been granted the Log On As A Service right and
   added to the Replicator local group.", it indicates that the
   specified account has been added to the Backup Operators and Domain
   Users groups by default in addition to the Replicator group.
<P>
</UL><h2>REFERENCE</h2>
 
<P>
System Guide NT Advanced Server
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodnt repl replication backup logon scripts<BR>
Keywords          : kbusage<BR>
Version           : 3.1<BR>
Platform          : WINDOWS<BR>
Issue type        : kbhowto<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 14, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
