

<HTML>
<HEAD>
<TITLE>FIX: MASM Fails to Generate Error When Real Values Are Too Smal </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" href="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q72791 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1991/06/10">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  The Microsoft Macro Assembler (MASM) may fail to generate an error when a floating-point value is outside the range of the minimum allowable values.  As documented on page 142 of the  Microsoft Macro Assembler Programmer's Guide  included with vers...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QAAP,QAKP,QALG,QAKD,QAH4,QAR4,QAIJ,QAKC,QAP2,QAJ6,QAC1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: MASM Fails to Generate Error When Real Values Are Too Smal</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q72791 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10 5.10a 6.00 6.00a 6.00b | 5.10 5.10a 6.00 6.00a 6.00b
<PRE>MS-DOS                      | OS/2
</PRE>kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 5.1, 5.1a, 6.0,
   6.0a, and 6.0b
<LI>Microsoft Macro Assembler for OS/2, versions 5.1, 5.1a, 6.0,
   6.0a, and 6.0b
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The Microsoft Macro Assembler (MASM) may fail to generate an error
when a floating-point value is outside the range of the minimum
allowable values.
<P>
As documented on page 142 of the "Microsoft Macro Assembler
Programmer's Guide" included with version 6.0, the limits when
using the 4-byte REAL4 (or DD), 8-byte REAL8 (or DQ), or the
10-byte REAL10 (or DT) are as follows:
<P>
<PRE>   Size        Low          High
   ----        ---          ----

   4 byte      1.18E-38     3.40E+38
   8 byte      2.23E-308    1.79E+308
  10 byte      3.37E-4932   1.18E+4932

</PRE>However, MASM versions 5.1, 5.1a, 6.0, 6.0a, and 6.0b fail to generate
an error when exceeding the low end of this range until a value of
3.37E-32752 or smaller for the 4 and 8-byte types and a value of
3.37E-32746 or smaller for the 10-byte type.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in MASM versions 5.1,
5.1a, 6.0, 6.0a, and 6.0b. This problem was corrected in MASM for
MS-DOS version 6.1.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The sample program below may be used to illustrate this problem. In
the code, two of each of the 4-, 8-, and 10-byte data types are
declared and initialized. For each type, one initializing value is
used that correctly causes an error, while the other similar
initializing value fails to cause an error, even though it should.
<P>
The declaration of n1, n3, and n5 correctly result in the following
error in MASM version 6.0, 6.0a, and 6.0b:
<P>
<PRE>   error A2071: initializer magnitude too large for specified size

</PRE>MASM versions 5.1 and 5.1a are not as explicit in their error message,
but they correctly generate the following overflow error for n1, n3,
and n5:
<P>
<PRE>   error A2029: division by 0 or overflow

</PRE>Neither MASM version 5.1, 5.1a, 6.0, 6.0a, or 6.0b generates an error
(as they should) on the declaration of n2, n4, and n6. (These versions
fail to produce the expected error for any number smaller than the
values listed above for each data type.)
<P>
<P><h3>Sample Code</h3>
 
<P>
; Assemble options needed: none
<P>
.MODEL large
.STACK 4096
<P>
.DATA
<PRE>n1 DD 1.18E-32752   ;Causes error
n2 DD 1.18E-32751   ;Should cause error, but doesn't
n3 DQ 2.23E-32752   ;Causes error
n4 DQ 2.23E-32751   ;Should cause error, but doesn't
n5 DT 3.37E-32746   ;Causes error
n6 DT 3.37E-32745   ;Should cause error, but doesn't

</PRE>.CODE
start:
<PRE>   mov ax, 4C00h
   int 21h
</PRE>END start
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.10 5.10a 6.00 6.00a 6.00b buglist6.00<BR>
buglist6.00a buglist6.00b fixlist6.10<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubCategory: MLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
