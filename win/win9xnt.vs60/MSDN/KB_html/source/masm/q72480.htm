

<HTML>
<HEAD>
<TITLE>FIX: MASM 5.1/5.1a .OBJ May Cause LINK to Generate L2013 Error </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" href="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q72480 ">
<META NAME="KBModify" CONTENT="1997/09/11">
<META NAME="KBCreate" CONTENT="1991/05/29">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  The Microsoft Macro Assembler (MASM) versions 5.1 and 5.1a may create an object file that cannot be linked properly with LINK because of an LIDATA record that is too large for LINK to handle. In this case, the following LINK error will be generated...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA5V,QAH4,QAAP,QAR4,QAB4,QAE2,QAW6,QAPN,QAKP,QDMH,QBXA,QAYY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: MASM 5.1/5.1a .OBJ May Cause LINK to Generate L2013 Error</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 11, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q72480 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10 5.10a | 5.10 5.10a
<PRE>MS-DOS     | OS/2
</PRE>kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 5.1 and 5.1a
<LI>Microsoft Macro Assembler for OS/2, versions 5.1 and 5.1a
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The Microsoft Macro Assembler (MASM) versions 5.1 and 5.1a may create an
object file that cannot be linked properly with LINK because of an LIDATA
record that is too large for LINK to handle. In this case, the following
LINK error will be generated:
<P>
<PRE>   error L2013: LIDATA record too large

</PRE><h2>CAUSE</h2>
 
<P>
The problem results from the fact that MASM may generate an LIDATA record
up to 1K in size, which is valid for LIDATA records in the Intel Object
Module Format, but LINK will only accept LIDATA records that are 512 bytes
or less. There is nothing actually wrong with the code generated by MASM
except for the fact that it may contain an object module record that
exceeds a documented limitation of LINK.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
In MASM version 6.0, the assembler automatically corrects for this
situation by creating multiple LIDATA records as necessary so that none
exceed 512 bytes.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in MASM versions 5.1 and 5.1a.
This problem was corrected in MASM version 6.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The sample code below demonstrates this problem. While MASM 5.1 and
5.1a will correctly assemble the code, the object file created will
cause the following error when linked:
<P>
<PRE>   error L2013: LIDATA record too large pos: 29E Record type: A2

</PRE>For more information on the LIDATA record, or any other object module
record, see the "MS-DOS Encyclopedia."
<P>
<P><h3>Sample Code</h3>
 
<P>
;Assemble options needed: none
<P>
<PRE>s       STRUC
fld000  DB      10 dup ( ' ' )
fld001  DB      10 dup ( ' ' )
fld002  DB      10 dup ( ' ' )
fld003  DB      10 dup ( ' ' )
fld004  DB      10 dup ( ' ' )
fld005  DB      10 dup ( ' ' )
fld006  DB      10 dup ( ' ' )
fld007  DB      10 dup ( ' ' )
fld008  DB      10 dup ( ' ' )
fld009  DB      10 dup ( ' ' )
fld010  DB      10 dup ( ' ' )
fld011  DB      10 dup ( ' ' )
fld012  DB      10 dup ( ' ' )
fld013  DB      10 dup ( ' ' )
fld014  DB      10 dup ( ' ' )
fld015  DB      10 dup ( ' ' )
fld016  DB      10 dup ( ' ' )
fld017  DB      10 dup ( ' ' )
fld018  DB      10 dup ( ' ' )
fld019  DB      10 dup ( ' ' )
fld020  DB      10 dup ( ' ' )
fld021  DB      10 dup ( ' ' )
fld022  DB      10 dup ( ' ' )
fld023  DB      10 dup ( ' ' )
fld024  DB      10 dup ( ' ' )
fld025  DB      10 dup ( ' ' )
fld026  DB      10 dup ( ' ' )
fld027  DB      10 dup ( ' ' )
fld028  DB      10 dup ( ' ' )
fld029  DB      10 dup ( ' ' )
fld030  DB      10 dup ( ' ' )
fld031  DB      10 dup ( ' ' )
fld032  DB      10 dup ( ' ' )
fld033  DB      10 dup ( ' ' )
fld034  DB      10 dup ( ' ' )
fld035  DB      10 dup ( ' ' )
fld036  DB      10 dup ( ' ' )
fld037  DB      10 dup ( ' ' )
fld038  DB      10 dup ( ' ' )
fld039  DB      10 dup ( ' ' )
fld040  DB      10 dup ( ' ' )
fld041  DB      10 dup ( ' ' )
fld042  DB      10 dup ( ' ' )
fld043  DB      10 dup ( ' ' )
fld044  DB      10 dup ( ' ' )
fld045  DB      10 dup ( ' ' )
fld046  DB      10 dup ( ' ' )
fld047  DB      10 dup ( ' ' )
fld048  DB      10 dup ( ' ' )
fld049  DB      10 dup ( ' ' )
fld050  DB      10 dup ( ' ' )
fld051  DB      10 dup ( ' ' )
fld052  DB      10 dup ( ' ' )
fld053  DB      10 dup ( ' ' )
fld054  DB      10 dup ( ' ' )
fld055  DB      10 dup ( ' ' )
fld056  DB      10 dup ( ' ' )
fld057  DB      10 dup ( ' ' )
fld058  DB      10 dup ( ' ' )
fld059  DB      10 dup ( ' ' )
s       ENDS

_TEXT   SEGMENT word public 'CODE'

main    PROC    far
main    ENDP

_TEXT   ENDS

_DATA   SEGMENT word public 'DATA'
sinst   s       &lt;&gt;
_DATA   ENDS

        END
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 5.10 5.10a buglist5.10 buglist5.10a fixlist6.00<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubCategory: MLIss<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 11, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
