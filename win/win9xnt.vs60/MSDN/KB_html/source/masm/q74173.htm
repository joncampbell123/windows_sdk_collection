

<HTML>
<HEAD>
<TITLE>DOCERR: MASM 6.0 Programmer's Guide Errors: Chapters 7-10 </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" href="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q74173 ">
<META NAME="KBModify" CONTENT="1994/11/03">
<META NAME="KBCreate" CONTENT="1991/07/14">
<META NAME="Keywords" CONTENT="kbref kbdocerr">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT=" The following is a list of documentation additions and corrections for Chapters 7 through 10 of the  Microsoft Macro Assembler Programmer's Guide  for version 6.0. The section and page numbers are listed first, followed by a description of the addit...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAH4,QBWA,QAMB,QAC2,QAAP,QBXT,QA5V,QAIB,QBXV,QAUR,QAHH,QA4N,QAKC,QAPF,QA7R V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>DOCERR: MASM 6.0 Programmer's Guide Errors: Chapters 7-10</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 3, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q74173 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, version 6.0, 6.0a, and 6.0b
<LI>Microsoft Macro Assembler for OS/2, version 6.0, 6.0a, and 6.0b
</UL> 
<P>
The following is a list of documentation additions and corrections for
Chapters 7 through 10 of the "Microsoft Macro Assembler Programmer's
Guide" for version 6.0. The section and page numbers are listed first,
followed by a description of the addition or correction.
<P>
<P><h3>Section 7.1.2.3, Page 174</h3>
 
<P>
The note in the margin states:
<P>
<PRE>   "pairs of operands cannot be both registers or both memory
    locations."

</PRE>This is incorrect. The TEST instruction is able to take two registers
as operands.
<P>
<P><h3>Section 7.2.1, Page 178</h3>
 
<P>
The summary of the action for the ".REPEAT,.UNTILCXZ" directive is
incorrect. It specifies this directive will compare a label to an
expression. However, this is not the case.
<P>
The correct description is as follows:
<P>
<PRE>   The .UNTILCXZ directive can be used with expression1 ==
   expression2 or expression1 != expression2 to generate a LOOPE
   or LOOPNE instruction. The .UNTILCXZ directive also decrements CX
   and exits the loop if CX = 0. If &lt;condition&gt; is omitted, the
   .UNTILCXZ directive generates a LOOP instruction.

</PRE><h3>Section 7.2.1, Page 182</h3>
 
<P>
Line number eight of the sample program is incorrect. It should be:
<P>
<PRE>   .CONTINUE  .IF (al &lt; '0') || (al &gt; '9')

</PRE><h3>Section 7.3.3.2, Page 191</h3>
 
<P>
The syntax description for parameters has a "single" closing square
bracket rather than a "double" closing square bracket. It must have a
"double" closing square bracket.
<P>
<P><h3>Section 7.3.3.2, Page 192</h3>
 
<P>
The last sentence of the third paragraph should end with the
following:
<P>
<PRE>   "...--the first MOV gets the address of the parameter, and the
   second MOV gets the parameter."

</PRE><h3>Section 7.3.4, Page 195</h3>
 
<P>
The fourth portion of the diagram in this page does not show where SP
is located. This is misleading. SP should be shown at the same
location as BP-2.
<P>
<P><h3>Section 7.3.8.2, Page 206</h3>
 
<P>
The first sentence on this page is incorrect. It should read:
<P>
<PRE>   "Therefore parmbytes is not always equal to the bytes occupied
   by the parameters."

</PRE><h3>Section 8.2.1, Page 217</h3>
 
<P>
Midway through the second paragraph the sentence should read:
<P>
<PRE>   Multiple /I options can be used to specify that multiple
   *directories* be searched in the order they appear on the command
   line.

</PRE><h3>Section 8.2.2.1, Page 219</h3>
 
<P>
In figure 8.1, there are three files and MOD2.ASM contains the
following line:
<P>
<PRE>   mov ax, array[12]

</PRE>This line should be changed to:
<P>
<PRE>   mov al, array[12]

</PRE>Also, the last sentence in this section states:
<P>
<PRE>  You can also use EXTERNDEF to make code labels global.

</PRE>This means EXTERNDEF can make code labels global between files so that
another module can access that label. However, the code label must
have global scope within the file where it is defined. For example:
<P>
<P><h3>File 1</h3>
 
<P>
<PRE>      EXTERNDEF codelabel:near
      .model small
      .code

   firstproc    proc
   codelabel::  mov ax,1
   firstproc    endp

</PRE><h3>File 2</h3>
 
<P>
<PRE>      EXTERNDEF codelabel:near
      .model small
      .code

   secondproc   proc
                jmp codelabel
   secondproc   endp

</PRE>In the first file, it is important that the label codelabel is defined
with two colons (::). With the OPTION SCOPED turned on by default, the
double colon allows the variable to be seen globally in the first
file. The EXTERNDEF statement makes codelabel public so that it can be
seen by file 2.
<P>
<P><h3>Section 8.3.1, Page 224</h3>
 
<P>
In figure 8.3, the file MOD2.ASM should read:
<P>
<PRE>   .model small, pascal
   EXTERN Var:BYTE, BuildTable:NEAR

   .code
      .
      .
      .
      mov   al,Var
      call  BuildTable
      .
      .
      .

</PRE><h3>Section 8.4.2, Page 226</h3>
 
<P>
Change the example line of code from
<P>
<PRE>   EXTERN init(dummy)

</PRE>to the following:
<P>
<PRE>   EXTERN init(dummy):PROC

</PRE><h3>Section 9.3.2, Page 239</h3>
 
<P>
Page 239 states that the following line should work:
<P>
<PRE>   work MACRO arg:=%07h

</PRE>This is incorrect. The line above will produce a syntax error when
trying to assemble. It was not implemented in MASM 6.0.
<P>
<P><h3>Section 9.4.3, Page 245</h3>
 
<P>
In the sample at the bottom of page 245, the following line should be
change from
<P>
<PRE>   FOR  arg, arglist

</PRE>to the following:
<P>
<PRE>   %FOR arg, arglist

</PRE><h3>Section 9.5, Page 249</h3>
 
<P>
The first sentence on this page should read:
<P>
<PRE>   The string in the SUBSTR syntax, as well as in the syntax for the
   other string directives and predefined functions, can be any
   textItem where textItem can be text enclosed in angle brackets
   (&lt;&gt;), the name of a text macro, or a constant expression preceded
   by a percent sign (%) such as %constExpr or %(constExpr).

</PRE><h3>Section 9.5, Page 249</h3>
 
<P>
The first paragraph in the description for SIZESTR states:
<P>
<PRE>   Although the length is always a positive number, it is assigned as
   a string of digits in the current radix rather than as a numeric
   value.

</PRE>The above statement is incorrect. The SIZESTR directive assigns a
number to a variable like a numeric equate. For example
<P>
<PRE>   stringsize SIZESTR &lt;hello&gt;

</PRE>makes stringsize a numeric equate, setting it equal to 5.
<P>
<P><h3>Section 9.5, Page 250</h3>
 
<P>
Change the following
<P>
<PRE>   RestoreRegs MACRO
      LOCAL regs
      %FOR reg,regpushed
   pop reg
      ENDM
   ENDM

</PRE>to the following:
<P>
<PRE>   RestoreRegs MACRO
      LOCAL regs
      %FOR regs,regpushed        ; reg s/b regs...
   pop regs                      ; "   "   "   "
      ENDM
   ENDM

</PRE><h3>Section 9.7.2, Page 257</h3>
 
<P>
The Macro Assembler 6.0 README.DOC has the following correction for
the table on the top of page 257:
<P>
<PRE>   Option     Description
   ------     -----------

   ASSUMES    Saves segment register information
   LISTING    Saves listing and CREF information
   CPU        Saves current CPU and processor
   RADIX      Saves current default radix
   ALL        All of the above

</PRE><h3>Section 10.3.1.5, Page 268</h3>
 
<P>
The following is the example shown in section 10.3.1.5:
<P>
<PRE>   project.exe:*.obj
       LINK $*.obj;

</PRE>The documentation states that this description block links all files
having the .OBJ extension in the current directory. This should be
written as:
<P>
<PRE>   project.exe:*.obj
     LINK $**;

</PRE><h3>Section A.1.4, Page 555</h3>
 
<P>
The list of new directives at the bottom of this page is missing the
directive .ENDIF.
<P>
<P><h3>Section A.2.3, Page 583</h3>
 
<P>
There is a comma missing from the encoding example at the bottom of
the page. The line should be:
<P>
<PRE>   "MASM 6.0 uses this encoding instead: rm16/32,imm8."
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 6.00 6.00a 6.00b<BR>
KBCategory: kbref kbdocerr<BR>
KBSubcategory:<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 3, 1994</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
