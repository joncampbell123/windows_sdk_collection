

<HTML>
<HEAD>
<TITLE>BUG: Causes of A2042 During Data Initialization </TITLE>

<!--STYLE_BEGIN-->
<LINK REL="STYLESHEET" href="/support/kbstyle.css" TYPE="text/css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q85228 ">
<META NAME="KBModify" CONTENT="1994/10/21">
<META NAME="KBCreate" CONTENT="1992/06/03">
<META NAME="Keywords" CONTENT="kbtool kbbuglist">
<META NAME="KBArea" CONTENT="Support; KB; masm">
<META NAME="Description" CONTENT="  Attempting to initialize a STRUCT or an array with a single data statement may generate the following error when too many initialization values are used:     error A2042: statement too complex  CAUSE =====  The error is produced because the token l...">
<META NAME="Product" CONTENT="Macro Assembler">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAAP,QAB4,QAI4,QBXT,QA5V,QAIB,QAKP,QAJQ,QAPN,QAH4,QAYY,QABN,QBJQ,QA5E,QALZ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Causes of A2042 During Data Initialization</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 21, 1994</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q85228 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Macro Assembler for MS-DOS, versions 6.0, 6.0a, 6.0b,
   6.1, 6.1a, and 6.11
<LI>Microsoft Macro Assembler for OS/2, versions 6.0, 6.0a, and 6.0b
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Attempting to initialize a STRUCT or an array with a single data statement
may generate the following error when too many initialization values are
used:
<P>
<PRE>   error A2042: statement too complex

</PRE><h2>CAUSE</h2>
 
<P>
The error is produced because the token limit for that particular line has
been exceeded. This limit may also be exceeded by lines that are extended
using the backslash ("\") character or the comma, as shown in the sample
code below.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Do not attempt to initialize a struct on a single line that contains more
than 99 tokens, commas, numbers, and so forth.
<P>
The data statement can be broken into several statements as shown by the
array D2 in the sample below. Consecutive data items specified in this way
are allocated in memory exactly as they would be if they were in a single
data declaration.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the Microsoft Macro
Assembler (MASM) versions 6.x. We are researching this problem and will
post new information here in the Microsoft Knowledge Base as it becomes
available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Sample Code</h3>
 
<P>
In the sample code below, there are 97 tokens in the line where
test_struct0 is declared on a single text line. This line assembles without
a problem. The initialization of test_struc1, however, causes error A2042
to be generated. test_struc1 has 99 tokens, which causes the error A2042 to
be produced. test_struct2 and test_struct3 are multiple-line demonstrations
of the same problem.
<P>
The array d1 illustrates the same problem for an array of WORD. Array d2
shows a workaround.
<P>
; assembly options needed: /c
.MODEL SMALL,C
.DATA
<P>
prob_struct STRUCT 2
element WORD 60 DUP(0)
prob_struct ENDS
<P>
; test_struct0 and test_struct1 should be single lines; they were
; broken for readability. Reassemble them to a single line.
<P>
test_struct0 prob_struct {{0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,
<PRE>                           1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,
                           2,3,4,5,6,7}} ; no error

</PRE>test_struct1 prob_struct {{0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,
<PRE>                           1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,
                           2,3,4,5,6,7,8}} ; error produced

</PRE>test_struct2 prob_struct {{0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,
<PRE>                           0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,
                           0,1,2,3,4,5,6,7}} ; no error

</PRE>test_struct3 prob_struct {{0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,
<PRE>                           0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,
                           0,1,2,3,4,5,6,7,8}} ; error produced

</PRE>d1 WORD  1,2,3,4,5,6,7,8,9,10,11,2,3,4,5,6,7,8,9,20,
<PRE>         21,2,3,4,5,6,7,8,9,30,31,2,3,4,5,6,7,8,9,
         40,41,2,3,4,5,6,7,8,9
</PRE>;  error A2042: statement too complex
<P>
d2 WORD 1,2,3,4,5,6,7,8,9,10,11,2,3,4,5,6,7,8,9,20,
<PRE>        21,2,3,4,5,6,7,8,9,30,31,2,3,4,5,6,7,8,9,40,
        41,2,3,4,5,6,7,8
   WORD 9
</PRE>; same data as d1 but assembles without error
<P>
END
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 6.00 6.00a 6.00b 6.10 6.10a buglist6.00b<BR>
buglist6.10 buglist6.10a buglist6.11<BR>
KBCategory: kbtool kbbuglist<BR>
KBSubcategory: MLIss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 21, 1994</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
