

<HTML>
<HEAD>
<TITLE>INFO: Interpreting File Names in the Storage Directory </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q174307">
<META NAME="KBModify" CONTENT="1998/03/04">
<META NAME="KBCreate" CONTENT="1997/09/24">
<META NAME="Keywords" CONTENT="kbenv MQGen">
<META NAME="KBArea" CONTENT="Support; KB; msmq">
<META NAME="Description" CONTENT="  This article describes the files in the Msmq\Storage and Msmq\Storage\Lqs directories.  This information is useful, for example, if you want to manually inspect the properties of a private queue or determine the disk space being used for the storag...">
<META NAME="Product" CONTENT="msmq">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAFI,QAEV,QAYC,QBW5,QATJ,QBXB,QAUJ,QAOG,QBRZ,QAYY,QAX6,QBVX,QARM,QDMW,QDMH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INFO: Interpreting File Names in the Storage Directory</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 4, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q174307</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Message Queue Server version 1.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article describes the files in the Msmq\Storage and Msmq\Storage\Lqs
directories.
<P>
This information is useful, for example, if you want to manually inspect
the properties of a private queue or determine the disk space being used
for the storage of messages.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Files in the Msmq\Storage Directory</h3>
 
<P>
File names with an .mq extension represent memory-mapped files in which
messages are stored.
<P>
The .mq file name extension will be prefixed with a letter representing the
type of messages it is tracking:
<P>
r - Express messages (Note that express messages are normally held in RAM,
<PRE>    not disk. This file is used when there is no more available RAM.)

</PRE>p - Persistent (recoverable) messages
<P>
j - Journal messages
<P>
l - Indexing bitmap for interpreting the journal or recoverable files.
<P>
NOTE: An .mq file does not identify or map to a unique queue. Messages from
multiple queues may be held in one .mq file, or messages from a single
queue may span multiple .mq files. A single message cannot span multiple
files (hence the 4 MB limit in size).
<P>
The QMLog file is a history of all message queue processing. When the log
is full, the oldest log data is overwritten as new entries are made.
<P>
To allow this continuous, cyclic writing to the QMlog, the state of
receiving ordered messages and the state of all active transactions is
periodically saved to the following files (respectively):
<P>
<PRE>   MQInSeqs.lg1
   MQInSeqs.lg2
   MQTrans.lg1
   MQTrans.lg2

</PRE>The .lg1 and .lg2 files are written to in an alternating pattern, to ensure
that one of the pair will persist if the other is damaged during a write.
<P>
<P><h3>Files in the Msmq\Storage\Lqs Directory</h3>
 
<P>
Files in this directory are text files that describe properties of the
local queues. They are accessed as an .ini file.
<P>
File names formatted nnnnnnnn.hhhhhhhh represent private queues. The
nnnnnnnn portion is the queue number (included in the direct format name
for the queue). The hhhhhhhh extension is a hash of the path name used for
quick lookup.
<P>
File names formatted aaaaaaaabbbbccccddddeeeeeeeeeeee.hhhhhhhh represent
local public queues. The 32 character portion of the file name to the left
of the period is the GUID of the queue. The hhhhhhhh extension is again a
hash of the path name.
<P>
<P><h2>REFERENCES</h2>
 
<P>
For more information, visit the Web site at:
<P>
<PRE>   <B><A href="http://www.microsoft.com/msmq">http://www.microsoft.com/msmq</A></B>
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: filename filenames pathname<BR>
Keywords          : kbenv MQGen<BR>
Version           : WINNT:1.0<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 4, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
