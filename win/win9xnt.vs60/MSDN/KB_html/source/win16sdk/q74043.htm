

<HTML>
<HEAD>
<TITLE>Changing the Color of an Edit Control </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q74043 ">
<META NAME="KBModify" CONTENT="1995/06/23">
<META NAME="KBCreate" CONTENT="1991/07/11">
<META NAME="Keywords" CONTENT="kbprg">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  The source code fragment below demonstrates how to paint the foreground and background of a single-line edit control in an application developed for the Microsoft Windows graphical environment. It creates a window that contains one single-line edit...">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAG9,QAHP,QDL9,QBWO,QBWN,QAUD,QA7O,QAPG,QAMN,QAB5,QAOE,QAI4,QBWQ,QAGX,QBWP V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Changing the Color of an Edit Control</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  June 23, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q74043 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows
   versions 3.1 and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The source code fragment below demonstrates how to paint the foreground and
background of a single-line edit control in an application developed for
the Microsoft Windows graphical environment. It creates a window that
contains one single-line edit control and paints the edit control cyan on
blue.
<P>
Windows sends the WM_CTLCOLOR message to the parent of an edit control
before the control is painted. If desired, the parent window, usually
a dialog box procedure, can process this message and change the text
and background colors of the control.
<P>
NOTE: WM_CTRLCOLOR is obsolete on Windows NT and Windows 95. Instead, you
would use WM_CTLCOLORBTN, WM_CTLCOLORDLG, WM_CTLCOLOREDIT,
WM_CTLCOLORLISTBOX, WM_CTLCOLORMSGBOX, WM_CTLCOLORSCROLLBAR, or
WM_CTLCOLORSTATIC.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following MainWndProc demonstrates WM_CTLCOLOR processing:
<P>
long FAR PASCAL MainWndProc(HWND hwnd, unsigned msg,
<PRE>                            WORD wParam, LONG lParam)
{
static   HWND     hwndEdit;
static   HBRUSH   hBrush;

   switch (msg)
   {
      case WM_CREATE:
         {
            HDC hdc;
            TEXTMETRIC tm;

            hdc = GetDC(hwnd);
            GetTextMetrics(hdc, &amp;tm);
            ReleaseDC(hwnd, hdc);

            hwndEdit = CreateWindow("edit", NULL,
                            WS_CHILD | WS_VISIBLE
                            | ES_AUTOHSCROLL | ES_MULTILINE,
                            10, 20, 100, tm.tmHeight,
                            hwnd, 1, hInst, NULL);

            // Create a blue brush to be used for the edit control's
            // background color.
            hBrush = CreateSolidBrush(RGB(0, 0, 255));
         }
         break;

      case WM_CTLCOLOR:
      {
         // Set foreground and background colors only if this
         // is an edit control.
         if (HIWORD(lParam) == CTLCOLOR_EDIT)
         {
            // Set the edit control's foreground text color to
            // cyan and the text's background color to blue.
            SetTextColor(wParam, RGB(0, 255, 255));
            SetBkColor(wParam, RGB(0, 0, 255));

            // Properly originate the background brush. This is
            // of use if the brush is a pattern instead of a
            // solid color.
            UnrealizeObject(hBrush);
            SetBrushOrg(wParam, 0, 0);

            // Return a handle to the background brush for the edit
            // control.
            return (DWORD)hBrush;
         }
      }
      break;

      case WM_SETFOCUS:
         SetFocus(hwndEdit);
         return 0;

      case WM_DESTROY:
         PostQuitMessage(0);
         DeleteObject(hBrush);
         break;
   }
   return DefWindowProc(hwnd, msg, wParam, lParam);
</PRE>}
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00 3.10<BR>
KBCategory: kbprg<BR>
KBSubcategory: UsrCtl<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  June 23, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
