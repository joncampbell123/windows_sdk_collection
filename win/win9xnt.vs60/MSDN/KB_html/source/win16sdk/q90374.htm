

<HTML>
<HEAD>
<TITLE>DBWIN Won't Work with Text on First Line of Mono Display </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q90374 ">
<META NAME="KBModify" CONTENT="1997/07/23">
<META NAME="KBCreate" CONTENT="1992/10/13">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; win16sdk">
<META NAME="Description" CONTENT="  The DBWIN sample shipped with the Microsoft Windows Software Development Kit version 3.1 allows your system to redirect its debugging output to a variety of locations, including a secondary monochrome monitor.  Due to the design of DBWIN, if the mo...">
<META NAME="Product" CONTENT="Win16 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAEF,QAXX,QDL9,QBWO,QBWN,QA5V,QBXT,QAIB,QATX,QAMB,QAFR,QAKJ,QA5A,QAJZ,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>DBWIN Won't Work with Text on First Line of Mono Display</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 23, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q90374 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.10
WINDOWS
kbtool
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows version 3.1
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The DBWIN sample shipped with the Microsoft Windows Software
Development Kit version 3.1 allows your system to redirect its
debugging output to a variety of locations, including a secondary
monochrome monitor.
<P>
Due to the design of DBWIN, if the monochrome monitor contains any
text on the first line of its display when DBWIN attempts to write to
it, DBWIN will not output any text.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Because Windows does not control access to the secondary monochrome
monitor, it is possible for more than one application to write to the
monitor at the same time, producing garbled results.
<P>
To reduce the possibility of this occurring, DBWIN attempts to detect
when another application is using the monochrome display, and will
stop output if this is detected.
<P>
The method DBWIN uses to detect whether another application is using
the monochrome monitor is to check for output on the first line of the
monitor. If there is any text on this line, DBWIN assumes that another
application is using the monitor and discontinues output to the
monitor.
<P>
All output that DBWIN sends to the monochrome monitor begins on the
second line of the monitor, so it will never write on the first line.
Each time a request is made to output to the monochrome monitor
[either through an OutputDebugString() call or through a debugging
message from Windows], a check for any text on the first line is made.
If any text exists on the first line, DBWIN will not attempt to write
to the monitor because a second application might be using it.
<P>
Note that this method of checking for monochrome monitor usage is not
foolproof and may not work in all cases. In certain situations, it may
be necessary to clear the monitor manually to allow DBWIN to send text
to the monochrome monitor again. The following batch file clears the
monochrome monitor and allow DBWIN to work again:
<P>
<PRE>   @echo off
   mode mono
   cls
   mode co80

</PRE>In addition, the following C function clears the monochrome monitor:
<P>
<PRE>extern   WORD _B000h; // Selector exported by KERNEL
void ClearMono(void) {
  _asm{
    push di               // DI is not saved automatically
    mov ax, OFFSET _B000h // Get selector to mono video memory
    mov es,ax             // Move into ES
    xor di,di             // ES:DI points to mono video memory
    mov ax, 0720h         // 0x07 = attributes, 0x20 = space character
    mov cx, 80*25         // Repeat for 80 columns by 25 rows
    rep stosw             // Store AX into (ES:DI)++, CX times
    pop di
    }
</PRE>}
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10<BR>
KBCategory: kbtool<BR>
KBSubcategory: TlsDbg<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 23, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
