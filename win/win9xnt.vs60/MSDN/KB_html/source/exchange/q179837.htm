

<HTML>
<HEAD>
<TITLE>XCON: NDR from Malformed Message Not Received </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q179837">
<META NAME="KBModify" CONTENT="1998/01/27">
<META NAME="KBCreate" CONTENT="1998/01/23">
<META NAME="Keywords" CONTENT="kbbug5.50 kbfix5.50.sp1">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  When you send a message to an X.400 recipient, or reply to a message  sent from an X.400 recipient, the message might not be successfully  delivered and you might not receive a Non-Delivery Report (NDR).  This can occur if an organization has a sec...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAEV,QBE7,QBE6,QAPN,QAO4,QBG2,QAID,QAYC,QBVV,QAH4,QA6A,QAY2,QAK9,QABC,QAB4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XCON: NDR from Malformed Message Not Received</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 27, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q179837</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, version 5.5
</UL> 
<P>
SYMPTOMS
 
<P>
When you send a message to an X.400 recipient, or reply to a message 
sent from an X.400 recipient, the message might not be successfully 
delivered and you might not receive a Non-Delivery Report (NDR). 
This can occur if an organization has a second X.400 connector with 
an overlapping address space and if the message cannot be converted 
to X.400 successfully. The Windows NT Event Viewer Application log 
on the Exchange Server with the X.400 Connector will have events 
logged such as:
<P>
<PRE>   Event 210: X.400 Service Event, severity 14
   (MTA DISP:FANOUT(12) Proc 112) 01-23-98 10:24:31am
   Content conversion failed
   Object at fault     0600002D
   Conversion error    258
   MTS Identifier      C=US;A= ;P=LAB;L=LAB_RED-980123152503Z-601
   Old content type    2A864886F7140501
   New content type    56010A01
   PDU dump reference  2

   Event 62: X.400 Service Event, severity 12
   (MTA DISP:FANOUT(12) Proc 112) 01-23-98 10:24:31am
   Delivery failure
   X.400 reason code     unable-to-transfer
   X.400 diagnostic code content-syntax-error
   Internal qualifier    0
   MTS Identifier C=US;A= ;P=LAB;L=LAB_RED-980123152503Z-601

   Event 287: X.400 Service Event, severity 12
   (MTA DISP:RESULT(17) Proc 436) 01-23-98 10:24:31am
   Successful rerouting
   MTS Identifier    C=US;A= ;P=LAB;L=LAB_RED-980123152503Z-601
   New Connector     /O=LAB/OU=GREEN2/CN=CONFIGURATION/CN=CONNECTIONS/CN=SITE CONNECTOR (RED)
   New Target entity /O=LAB/OU=RED/CN=CONFIGURATION/CN=SERVERS/CN=LAB_RED/CN=MICROSOFT MTA
   Old Connector     /O=LAB/OU=GREEN2/CN=CONFIGURATION/CN=CONNECTIONS/CN=X400 TO BECTOGO
   Old Target entity /O=LAB/OU=GREEN2/CN=CONFIGURATION/CN=CONNECTIONS/CN=X400 TO BECTOGO

</PRE>Note: The connector names and target entity names will be different for 
servers.  
<P>
The Event 287 shows the message is being re-routed to another server 
that also has an X.400 connector on it. Further events will show the 
message is successfully transfered to the server with the second 
X.400 connector. At this point the message is corrupted by the 
unsuccessful conversion attempt. The second server cannot process it, 
so it logs an event and prevents further processing of the message. 
The event you will see on the second server is:
<P>
<PRE>   Event 200: X.400 Service Event, severity 14
   (MTA XFER-IN(12) Proc 98) 01-21-98 02:32:39pm
   Transfer-In failure, error in received APDU
   Syntax server error code mandatory absent
   Error detected at offset 892
   Internal qualifier       2913
   Node label               1msgt
   PDU dump reference       3

</PRE>From looking at the Protocol Data Units (PDUs) saved in the BF*.log 
files, (in this case PDU reference 3), you will notice that the data 
is cut off at offset 892. The sending server's PDU is exactly the 
same. This is the message after it has been corrupted by an 
unsuccessful conversion attempt. 
<P>
<P><h2>CAUSE</h2>
 
<P>
The initial message is mal-formed, causing the content conversion 
failure. The Exchange Server doing the content conversion then realizes 
it has a second X.400 connector available, and routes the message to it. 
The message routed is the data that failed the conversion, and is no 
longer a valid message.  
<P>
<P><h2>WORKAROUND</h2>
 
<P>
One possible workaround is to remove the second X.400 connector from your 
organization.
<P>
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft Exchange server,
version 5.5. 
<P>
A supported fix is now available, but has not been fully regression-tested 
and should be applied only to systems experiencing this specific problem. 
Unless you are severely impacted by this specific problem, Microsoft 
recommends that you wait for the next Service Pack that contains this fix. 
Contact Microsoft Technical Support for more information. 
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords          : kbbug5.50 kbfix5.50.sp1<BR>
Version           : WinNT:5.5<BR>
Platform          : winnt<BR>
Issue type        : kbbug<BR>
Solution Type     : kbfix kbpatch<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 27, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
