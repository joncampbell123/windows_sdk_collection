

<HTML>
<HEAD>
<TITLE>XADM: Adjustment of Connection Retry Values on Override Tab </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q157630">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1996/10/15">
<META NAME="Keywords" CONTENT="XCON">
<META NAME="KBArea" CONTENT="Support; KB; exchange">
<META NAME="Description" CONTENT="  In network environments where connectivity is inconsistent and/or unreliable, the MSExchangeMTA may routinely log X.400 Service errors in the Windows NT Event Viewer Application log if mail is queued up to an  X.400 Connector that cannot successful...">
<META NAME="Product" CONTENT="Exchange">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBG2,QAI5,QA5E,QAH6,QBE7,QBE6,QADN,QAB4,QACE,QBWS,QABA,QAFH,QAU3,QAOE,QAMR V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>XADM: Adjustment of Connection Retry Values on Override Tab</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q157630</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft Exchange Server, versions 4.0, 5.0, 5.5
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
In network environments where connectivity is inconsistent and/or
unreliable, the MSExchangeMTA may routinely log X.400 Service errors in the
Windows NT Event Viewer Application log if mail is queued up to an  X.400
Connector that cannot successfully connect to the computer specified on the
X.400 Connector's Stack tab in the Microsoft Exchange Administrator
program.
<P>
If the Microsoft Exchange Message Transfer Agent (MTA) is unable to make
the connection to the remote computer due to network problems, it is
designed to continue to retry every 600 seconds, by default, until a
specified number of retries has been reached (144, by default). Eventually,
the MTA will generate a Non-Delivery Report (NDR) to the originator of the
message and cease attempts to deliver to the remote computer.
<P>
Based on the Microsoft Exchange administrator's needs, these defaults may
be set differently on each X.400 Connector, depending on the reliability of
the network link between the local and remote computers.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following series of Event Viewer errors may indicate that networking
problems are contributing to the MTA's inability to deliver mail across the
X.400 Connector:
<P>
Warning Event ID 1294 Source: MSExchangeMTA Category: X.400 Service:
<P>
<PRE>   An association with entity
   /O=orgname/OU=site/CN=Configuration/CN=Connections/CN=X400ConnectorName
   ended abnormally.

</PRE>Warning Event ID 4284 Source: MSExchangeMTA Category: X.400 Service:
<P>
<PRE>   An error occurred during connection/disconnection. Error code: 8511.

</PRE>Warning Event ID 289 Source: MSExchangeMTA Category: X.400 Service:
<P>
<PRE>   A connection to
   /O=orgname/OU=site/CN=Configuration/CN=Connections/CN=X400ConnectorName
   could not be opened.

</PRE>Information Event ID 301 Source: MSExchangeMTA Category: X.400 Service:
<P>
<PRE>   An open retry delay timer started on the association to
   /O=orgname/OU=site/CN=Configuration/CN=Connections/CN=X400ConnectorName
   on control block &lt;##&gt;. Another attempt to reopen the association will be
   made in 600 seconds."

</PRE>Also, the NDR that is generated may appear as follows:
<P>
<PRE>   &gt;----------
   &gt;From:   System Administrator
   &gt;Sent:   Friday, September 27, 1996 12:53 PM
   &gt;Subject:   Undeliverable: Exchange 4.5
   &gt;
   &gt;Your message did not reach some or all of the intended recipients.
   &gt;
   &gt;      Subject:   Exchange 4.5
   &gt;      Sent:   9/27/96 12:51:32 PM
   &gt;
   &gt;The following recipient(s) could not be reached:
   &gt;
   &gt;      David Honis on 9/27/96 12:53:24 PM
   &gt;            The recipient could not be processed due to congestion in
   &gt;            the message transfer service
   &gt;*  MSEXCH:MSExchangeMTA:SiteName:ServerName

</PRE>The administrator can change the Connection Retry options (these
definitions are taken from the Online Help, F1, on the Override tab) on the
Override tab of the affected X.400 Connector:

<OL><P><LI>Max Open Retries controls the maximum number of times that the
   system attempts to open a connection before it sends a NDR (default is
   144). Increasing this value will allow NDRs to be delayed (total time
   delay in sec = Max Open Retries X Open Interval) when there are known
   network problems that will be corrected.

<P><LI>Max Transfer Retries controls the number of times that the system
   tries to transfer a message across an open connection (default is 2).
   Increasing this value will also delay the amount of time before the MTA
   gives up on delivery and generates an NDR.

<P><LI>Open Interval (sec) controls the amount of time to wait before
   attempting to reopen a connection after an error (default is 600).

<P><LI>Transfer Interval (sec) controls the amount of time to wait before
   resending a message across an open connection after a previous attempt
   failed (default is 120).
<P>
</OL><h3>An Example Showing How All Of These Settings May Be Used</h3>
 

<OL><P><LI>Assume MTA1Machine successfully makes connection to MTA2Machine after
   mail is queued up to the X.400 Connector going to MTA2 on MTA2Machine.
</OL>2. MTA1 unsuccessfully attempts to send the message over the open
<PRE>   connection every Transfer Interval seconds until Max Transfer
   Retries is reached.
</PRE></OL>3. MTA1Machine waits Open Interval seconds before re-attempting to
<PRE>   open the connection and fails to make the connection.
</PRE>4. The MTA1Machine continues to wait Open Interval seconds between
<PRE>   attempts to reconnect and finally generates an NDR after Max Open
   Retries attempts.

</PRE>As can be seen from the above example, the amount of time before an NDR is
generated is dependent on all of these variables. With the default values
on the MTA, an NDR will be generated after 24 hours (144 attempts times 600
seconds is 86,400 seconds, which is 24 hours) assuming the connection
failed 144 times. If the connections are intermittently dropping, this
calculation becomes less predictable.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: kbfaq Override<BR>
Keywords          : XCON<BR>
Version           : 4.0 5.0<BR>
Platform          : WINDOWS<BR>
Issue type        : kbtshoot<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
