

<HTML>
<HEAD>
<TITLE>SNA Client Allocate Requests May Hang After AS/400 IPL </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170070">
<META NAME="KBModify" CONTENT="1998/03/19">
<META NAME="KBCreate" CONTENT="1997/06/13">
<META NAME="Keywords" CONTENT="prodsna snaappc snacpic snaserverservice kbfix3.00.sp2 kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  If an APPC or CPIC application issues several conversation startup requests (that is, [MC_]ALLOCATE or CMALLC) immediately after an AS/400 IPL, some allocates may fail to complete, or complete after further client ALLOCATEs are issued.  This proble...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QDO3,QAJZ,QARL,QABN,QAKP,QANN,QAJ6,QAHH,QAAP,QAJH,QAJQ,QACJ,QAC1,QDJO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Client Allocate Requests May Hang After AS/400 IPL</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 19, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170070</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, version 2.11, 2.11 SP1 &amp; SP2,
   3.0, 3.0 SP1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If an APPC or CPIC application issues several conversation startup requests
(that is, [MC_]ALLOCATE or CMALLC) immediately after an AS/400 IPL, some
allocates may fail to complete, or complete after further client ALLOCATEs
are issued.
<P>
This problem occurs after SNA Server renegotiates session limits for an
LU/LU pair, where some pending client ALLOCATE requests are queued
incorrectly and fail to be processed.
<P>
The symptoms of the problem may vary, based on the application being used.
This problem would occur most commonly with an APPC or CPIC application
which initiates many conversations concurrently to the same remote system
(say, an AS/400 or CICS). It would be unlikely to occur when starting a
single conversation (for example, 5250 emulation) on multiple client
computers.
<P>
<P><h2>CAUSE</h2>
 
<P>
After the remote system is stopped and started (the AS/400 in this
example), the existing session limits on all LU6.2 pairs have not been
reset. If one or more users attempt to activate a new LU6.2 session at the
same time, after the remote system has been reactivated, the remote system
rejects the BIND request with sense code 08050000 (session limit exceeded),
which causes SNA Server to reinitiate change-number-of-sessions (CNOS)
renegotiation with the remote system.
<P>
The problem is that SNA Server was incorrectly queueing the user's initial
activation requests after CNOS renegotiation had taken place, causing the
client application to hang on the ALLOCATE request (for an APPC
application) or CMALLC request (for a CPIC application).
<P>
<P><h2>RESOLUTION</h2>
 
<P>
An update to SNA Server 3.0 Service Pack 1 is available to correct
this problem. The updated module is Snaservr.exe.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version
2.11 (including SP1 and SP2) and SNA Server 3.0 (including SP1). 
This problem was corrected in the latest SNA Server version 3.0 U.S. 
Service Pack. For information on obtaining this Service Pack, query
on the following word in the Microsoft Knowledge Base (without the 
spaces):
<P>
<PRE>   S E R V P A C K
</PRE> 
<PRE>Keywords          : prodsna snaappc snacpic snaserverservice kbfix3.00.sp2 kbnetwork
Version           : 1.0
Platform          : WINDOWS
Issue type        : kbbug</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 19, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
