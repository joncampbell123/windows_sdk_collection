

<HTML>
<HEAD>
<TITLE>SNA Server Windows Client Memory Tuning </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q126432">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1995/02/23">
<META NAME="Keywords" CONTENT="kbnetwork snasetup snawin3x">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  The following tuning suggestions can reduce conventional memory usage on Windows 3.x and Windows for Workgroups 3.x clients running the SNA Server Windows 3.x client software. If the machine is running low on available conventional memory (memory b...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBW6,QBWO,QDL9,QBWQ,QBWN,QARL,QAEF,QBWS,QA59,QAIJ,QBXS,QBVV,QAVZ,QAH4,QAB4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server Windows Client Memory Tuning</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q126432</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, 2.11, 2.11 SP1,
   and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The following tuning suggestions can reduce conventional memory usage
on Windows 3.x and Windows for Workgroups 3.x clients running the SNA
Server Windows 3.x client software. If the machine is running low on
available conventional memory (memory between zero and one megabyte), you
may see the following problems, no matter how much RAM you have installed:

<UL><LI>One of the following error message appears:
<P>
<P><PRE>      Out of Memory
</PRE><P>
<P><PRE>      SNA Server Error 546: Cannot establish connection with SNA Server
</PRE><P>
<P><PRE>      NAP not started
</PRE>
<LI>The SNA Server Windows client icon (WNAP.EXE) does not maintain its
   sponsor connection

<LI>A 5250 emulator displays the following APPC error:
<P>
<PRE>      Primary return code = F011        (AP_UNEXPECTED_DOS_ERROR)
      Secondary return code = 00000008  (out of memory)

</PRE><LI>Applications the do not properly handle low memory situations cause
   general protection (GP) faults or stop responding (hang).
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
Windows client memory tuning suggestions:
<P>
<P><h3>SNA Server Windows Client Memory Allocation</h3>
 
<P>
By default, WNAP reserves enough internal buffers to handle connections
through several servers. If you only connect through one or two SNA
Servers, you can add the following entry to the [wnap] section of
WIN.INI:
<P>
<PRE>   maxpipes=6

</PRE>This entry determines the number of communication buffers that the SNA
client software allocates, regardless of the client network interface
selected (named pipes, IPX/SPX, TCP/IP or Banyan IP).
<P>
Stop and restart WNAP so this change can take effect.
<P>
<P><h3>Disabling Network DDE on Windows for Workgroups Version 3.11 Machines</h3>
 
<P>
A significant amount of conventional memory can be gained by disabling
Network DDE, if it is not being used. To do this, run the Windows for
Workgroups 3.11 Control Panel, choose Network, choose Startup, and clear
the Network DDE check box. Quit and restart Windows for Workgroups so this
change can take effect.
<P>
<P>
You can make more conventional memory available by removing any unnecessary
drivers or terminate-and-stay-resident (TSR) programs from the
configuration, and maximizing the use of available upper memory block (UMB)
areas if MS-DOS 5.0 or later is being used.
<P>
<P><h3>Identify Low Memory Situations</h3>
 
<P>
You can use the Heap Walker utility (HEAPWALK.EXE), included with the
Windows 3.1 SDK, to help identify low conventional memory situation in
Windows:

<UL><LI>Select the Sort/Address option to view memory allocation from low to
   high memory addresses. Conventional memory addresses start with
   000xxxxx while virtual addresses start with 80xxxxxx.

<LI>All segments which appear as Fixed memory (where the FLG field is set to
   F) cannot be moved or discarded by Windows. Low conventional memory
   problems occur when excessive Fixed memory regions occupy conventional
   memory space, and very few free conventional memory areas are available,
   even though the may be large amounts of virtual memory available.

<LI>You can save Heap Walker information to a file called HWG0x.TXT (where x
   increments from 0 - 9) by choosing Save from the file menu.
<P>
</UL>If HEAPWALK is not available, you can run MEM /C (before running Windows or
Windows for Workgroups) to determine how much free conventional memory is
available before Windows is loaded. You cannot view Windows memory
allocation.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna tcp/ip gpf<BR>
Keywords            : kbnetwork snasetup snawin3x<BR>
Version             : 2.0 2.1 2.11 3.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
