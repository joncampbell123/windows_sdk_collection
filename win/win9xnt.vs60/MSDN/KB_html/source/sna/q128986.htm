

<HTML>
<HEAD>
<TITLE>Connecting over TCP/IP to SNA Server with Multiple Net Cards </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q128986">
<META NAME="KBModify" CONTENT="1995/11/01">
<META NAME="KBCreate" CONTENT="1995/04/17">
<META NAME="Keywords" CONTENT="kbnetwork kbsetup kbbug2.10">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When connecting from an SNA Server client using the TCP/IP sockets interface to SNA Server, the following problems may occur if the Windows NT TCP/IP Protocol is bound to more than one network card on the server, and different IP addresses are conf...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QBWP,QARL,QDNT,QAI5,QAVZ,QBWS,QDIZ,QBTX,QDJ3,QBVX,QA9A,QA05,QAG2,QBVV V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Connecting over TCP/IP to SNA Server with Multiple Net Cards</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 1, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q128986</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, version 2.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When connecting from an SNA Server client using the TCP/IP sockets
interface to SNA Server, the following problems may occur if the Windows NT
TCP/IP Protocol is bound to more than one network card on the server, and
different IP addresses are configured for each card:

<UL><LI>When opening a 3270 session, the session may never activate (the SNA
   3270 applet may display "No SNA Server found in domain" on the status
   line).

<LI>When opening a 5250 session, an APPC error may occur (F004 - or
   AP_COMM_SUBSYSTEM_NOT_LOADED). This indicates that the SNA client could
   not locate a running SNA Server in the domain which supports the local
   and remote LU aliases being requested.

<LI>If multiple SNA Servers are configured the same way, the client may not
   be able to open a session through one or more of the servers, but not
   all.
<P>
</UL>NOTE: A network trace will indicate that the IP router is returning an
"ICMP Destination Unreachable" message to the SNA client's connection
request.
<P>
<P><h2>CAUSE</h2>
 
<P>
When SNA Server is configured (using SNA Setup) to accept client sessions
over TCP/IP sockets, SNA Server only searches for the first IP address that
is configured on the server. The first IP address corresponds with the
first adapter that the Windows NT TCP/IP Protocol is bound to.
<P>
When an SNA client opens its "sponsor connection" to an SNA Server in the
domain, SNA Server sends down the server name and IP address it finds.
However, the SNA client may not be able to connect to the server over this
first IP address since the IP address may only be available over the other
server's network card.
<P>
<P><h2>RESOLUTION</h2>
 

<UL><LI>Configure the TCP/IP protocol on the Windows NT Server using the Control
   Panel / Network option and select the Enable IP Routing option. This
   will cause the client to be able to connect to either IP address
   supported by the server
<P>
   -or-

<LI>Control which IP address is used by the SNA Server clients by
   configuring the Windows NT TCP/IP Protocol on SNA Server to bind to the
   desired adapter:
<P>
   1. Open the Network icon in Control Panel
<P>
   2. Choose the Bindings button
<P>
   3. Select the TCP/IP Protocol and choose OK
<P>
   4. Select the desired adapter and choose the "up" arrow button on the
<P><PRE>      right side of the Network Bindings dialog. Move the adapter to make
      it the first in the list.
</PRE><P>
   5. Choose OK.
<P>
   NOTE: It doesn't matter which SNA Server in the domain is providing the
   "sponsor connection" for the SNA client software (the sponsor server is
   indicated when installing the SNA client software within the "primary"
   and "backup" servers when the "remote domain" option is selected). The
   client sponsor connection will work against either of these servers.
   However, this problem will prevent the client from opening a 3270 or
   APPC session through the servers.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server 2.1. We are
researching this problem and will post new information here in the
Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbsetup kbbug2.10<BR>
KBSubcategory: ntnetserv ntprotocol<BR>
Additional reference words: prodsna 2.10 tcp/ip sockets<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 1, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
