

<HTML>
<HEAD>
<TITLE>SNA Server 802.2 Connection Stays in Pending State </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q159462">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1996/11/14">
<META NAME="Keywords" CONTENT="sna3rdparty snaadmin snadlc snasetup">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  A computer running SNA Server on an Ethernet network that has an 802.2 DLC connection configured to communicate with a remote device (AS/400, 3174, or 3745, for example) on a Token Ring may exhibit the following symptoms:    The 802.2 DLC Connecti...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB5,QAI5,QBG2,QBWP,QAYV,QANN,QDJ3,QDIZ,QATK,QAPN,QAO4,QAKP,QAJG,QAJ4,QAVZ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server 802.2 Connection Stays in Pending State</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q159462</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server version for Windows NT, versions 2.0, 2.1, 2.11,
   2.11 Service Pack 1, and 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
A computer running SNA Server on an Ethernet network that has an 802.2 DLC
connection configured to communicate with a remote device (AS/400, 3174, or
3745, for example) on a Token Ring may exhibit the following symptoms:
<P>
  The 802.2 DLC Connection configured in SNA Server Admin stays in a
<PRE>  perpetual "Pending" state.

</PRE>  The Windows NT Application Event Log on the SNA Server does not contain
<PRE>  any events that indicate connection activation problems. The Application
  Log will usually contain an Event 230 or an Event 23 when an 802.2 DLC
  connection fails to activate.

</PRE>  A Network General Sniffer(TM) or Microsoft Network Monitor trace on the
<PRE>  Ethernet segment of the computer running SNA Server shows an XID exchange
  that never completes. The computer running SNA Server never receives the
  SABME mode setting command from the remote system to indicate the end of
  the XID exchange.

</PRE><h2>CAUSE</h2>
 
<P>
This problem has been observed when SNA Server is connected to the remote
system across a Cisco router which is configured for LLC Local
Acknowledgment. The Cisco router fails to forward the SABME command sent by
the remote device (for example, IBM 3745) to SNA Server, causing the
connection to fail to activate. The result is that the SNA Server restarts
the XID process by sending a pre-negotiation XID to the remote device. This
process continues indefinitely.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem:

<UL><LI>Disable Local Acknowledgment on the Cisco router(s) between the Ethernet
   and Token Ring.
<P>
</UL><h2>MORE INFORMATION</h2>
 
<P>
In an LLC (802.2 DLC) session, when Device A sends a frame to Device B,
Device A expects Device B to respond before the T1 timer expires. In a WAN
environment that contains slow links, it is possible to see the T1 timer
expire before a response was received causing retransmissions. Cisco's
Local Acknowledgment feature attempts to solve this problem by splitting
the LLC session between the two devices. If Local Acknowledgment is
configured, the LLC session between two two devices is not end-to-end but
instead terminates at the local router(s). The LLC session with Device A
ends at the Router as does the LLC session with Device B. The router then
responds to the frames sent from Devices A and B instead of having the
actual device send the response. When this feature is enabled, all LLC
supervisory frames (RR, RNR, REJ) from one of the devices go no farther
than the router since the router will respond to them on behalf of the
other device.
<P>
The third-party products discussed here are manufactured by vendors
independent of Microsoft; we make no warranty, implied or otherwise,
regarding these products' performance or reliability.
<P>
<P><h2>REFERENCE</h2>
 
<P>
For additional information on SNA Server and 802.2 Connection Timers,
please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sna/q129786.htm">Q129786</A></B>
   TITLE     : SNA Server and 802.2 Connection Timers (t1, t2, ti)
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna spoofing llc2<BR>
Keywords            : sna3rdparty snaadmin snadlc snasetup<BR>
Version             : 2.0 2.1 2.11 3.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
