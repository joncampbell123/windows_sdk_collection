

<HTML>
<HEAD>
<TITLE>Event 11 (1178) Causes SNA Server to Fail Abnormally </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q135355">
<META NAME="KBModify" CONTENT="1996/02/01">
<META NAME="KBCreate" CONTENT="1995/08/21">
<META NAME="Keywords" CONTENT="kbnetwork kbbug2.00 kbbug2.10 kbbug2.11">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When a Local APPC LU / Remote APPC LU partnership is defined in the SNA Server configuration file, SNA Server automatically negotiates the parallel session limit with the remote system when the connection that owns the Remote APPC LU is started. Th...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QAR4,QABN,QAKC,QAO4,QBC6,QA5W,QAIJ,QAAP,QAKP,QAPN,QAG8,QACK,QBVX,QAM2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Event 11 (1178) Causes SNA Server to Fail Abnormally</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 1, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q135355</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, and 2.11
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When a Local APPC LU / Remote APPC LU partnership is defined in the SNA
Server configuration file, SNA Server automatically negotiates the
parallel session limit with the remote system when the connection that
owns the Remote APPC LU is started. This negotiation occurs over an
SNASVCMG mode session between these APPC LUs, using the Change Number
of Sessions (CNOS) command as defined by IBM SNA architecture.
<P>
When a large number of APPC LUs are configured in SNA Server and SNA Server
is started, SNA Server builds the SNASVCMG mode BIND messages and CNOS
commands for all these LU/LU/mode partnerships and queues them internally
until they can be processed. If there are so many partnerships that the
internal SNA Server queue becomes exhausted, SNA Server logs the following
event in the Windows NT application event log:
<P>
<PRE>   Event 11 (1178) Initialization Failure
   1178 = Insufficient resources for automatic session limit negotiation

</PRE>After this error occurs, the SNA Server service terminates.
<P>
<P><h2>CAUSE</h2>
 
<P>
SNA Server interprets this condition as a fatal error, causing the SNA
Server service (SNASERVR.EXE) to generate an SNA Server dump file.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
You can correct this problem by installing an SNA Server 2.11 fix that is
now available. This fix reduces the severity of the error so that SNA
Server attempts to recover from the condition, rather than failing.
Microsoft has updated the file SNASERVR.EXE to correct this problem.
<P>
To work around the problem without installing the fix:

<UL><LI>Reduce the number of APPC LU partnerships.
<P>
   Using the SNA Server Admin program, select each Local APPC LU, choose
   the Partners button, and delete any LU/LU/mode partnerships that are not
   being used. When the Enable Automatic Partnering checkbox is selected on
   an APPC LU or Mode, this can cause extra LU/LU partnerships that are not
   intended.

<LI>Reduce the number of automatically activated sessions.
<P>
   Within the SNA Server APPC mode definition, the Automatic Activation
   Limit can be configured to automatically bind a specified number of
   LU6.2 sessions when the connection is started. Automatically starting an
   LU6.2 session ahead of time makes the session immediately available for
   an LU6.2 conversation. However, the overhead necessary to start an LU6.2
   session is often negligible, so automatic session activation is often
   unnecessary.
<P>
   Reducing the automatic activation limit will reduce the number of
   BIND messages that SNA Server will queue internally.

<LI>Defer CNOS processing until sessions are needed.
<P>
   The SNA Server service can be configured to defer the APPC LU CNOS
   processing until the LU sessions are actually requested by APPC
   applications. This feature can be enabled using the following registry
   entry:
<P>
<P><PRE>      HKEY_LOCAL_MACHINE
      \SYSTEM\CurrentControlSet\Services\SnaServr\Parameters
      NOINITCNOS: REG_SZ: YES
</PRE><P>
   This setting will cause SNA Server to defer CNOS processing until
   an APPC application allocates a conversation over an APPC LU pair.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server for Windows NT.
This problem was corrected in the latest SNA Server for Windows NT, 2.11
U.S. Service Pack. For information on obtaining the Service Pack, query on
the following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug2.00 kbbug2.10 kbbug2.11<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: prodsna 2.00 2.10 2.11 Event 11 1178 cnos<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 1, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
