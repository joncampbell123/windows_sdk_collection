

<HTML>
<HEAD>
<TITLE>TN3270 Name Resolution Requires Fully Qualified Domain Names </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176280">
<META NAME="KBModify" CONTENT="1998/02/03">
<META NAME="KBCreate" CONTENT="1997/11/05">
<META NAME="Keywords" CONTENT="snamanager snatn3270">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  The TN3270 service included with SNA Server version 3.0 (and later) allows an administrator to restrict access to specific TN3270 clients by assigning either IP addresses or host names to LUA LUs/Pools assigned to the TN3270 service.  When you rest...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QAUJ,QAI5,QBWP,QARL,QAPN,QDO3,QARM,QACK,QBW7,QAUD,QALG,QDIZ,QAY2,QAK1 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TN3270 Name Resolution Requires Fully Qualified Domain Names</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 3, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176280</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0SP1, 3.0SP2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The TN3270 service included with SNA Server version 3.0 (and later) allows
an administrator to restrict access to specific TN3270 clients by assigning
either IP addresses or host names to LUA LUs/Pools assigned to the TN3270
service.
<P>
When you restrict access to TN3270 sessions using host names, TN3270
clients fail to connect to the TN3270 service if the host name used is the
NETBIOS name (that is, computer name) of the client. The exact error that
the client sees will depend on the TN3270 emulator being used.
<P>
The 3270 applet included with SNA Server 3.0 Service Pack 2 when configured
for TN3270E Server Connection returns the following error when this problem
occurs:
<P>
<PRE>   [TN3270-33]: ERROR - The server is unable to satisfy the session
   request.

</PRE>A TN3270 internal trace returns the following message to the TN3270 client:
<P>
<PRE>   &gt;10/31 14:00:50.491 (+ smidgen )  Event=TEV_DataToClient
    Thread = 0x00000145  Session = 0x0009F6F0  Socket = 0x00000300
    SUBNEG BEGIN TN3270E DEVICE-TYPE REJECT
    Number of bytes = 9

</PRE><h2>CAUSE</h2>
 
<P>
If the TN3270 service is configured for Use Name Resolution, it requires
the use of fully qualified domain names (FQDNs). The TN3270 service does
not allow clients to connect to LUA LUs/Pools that are configured with
client NETBIOS names.
<P>
Note: You must select the Use Name Resolution option under TN3270 Server
properties when you restrict access via host names.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Specify the fully qualified domain names in the LUA LUs/Pools properties
when restricting access by host name. A simple way of determining the FQDN
for a client is to Ping the client. For example:
<P>
<PRE>  c:\&gt; ping client1

  Pinging client1.dns.company.com [ip address] with 32 bytes of data:

  Reply from &lt;ip address&gt;: bytes=32 time&lt;10ms TTL=128
  Reply from &lt;ip address&gt;: bytes=32 time&lt;10ms TTL=128
  Reply from &lt;ip address&gt;: bytes=32 time&lt;10ms TTL=128
  Reply from &lt;ip address&gt;: bytes=32 time&lt;10ms TTL=128

</PRE>In this case, the LUA LU/Pool should be configured with a name of
client1.dns.company.com to allow a user on the CLIENT1 system to access
this LU/Pool.
<P>
<P><h2>STATUS</h2>
 
<P>
The TN3270 service has been updated to correctly use both NETBIOS names and
FQDNs for name resolution.
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0,
3.0 SP1, and 3.0 SP2.
A supported fix is now available, but has not been fully regression-tested
and should be applied only to systems experiencing this specific problem.
Unless you are severely impacted by this specific problem, Microsoft
recommends that you wait for the next Service Pack that contains this fix.
Contact Microsoft Product Support Services for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The name resolution method used is determined by the Windows NT Server
computer on which SNA Server is installed. There are currently four NetBIOS
over TCP/IP name resolution methods: b-node, p-node, m-node, and h-node.
For more information about these name resolution methods, please refer to
the following Microsoft Knowledge Base article:
<P>
<PRE>  ARTICLE-ID: <B><A href="../crossnet/q119493.htm">Q119493</A></B>
  TITLE     : NetBIOS over TCP/IP Name Resolution and WINS

</PRE>To determine which name resolution method is being used by a Windows NT
system, use the IPCONFIG utility from a command prompt as shown here:
<P>
<PRE>  c:\&gt; ipconfig /all

</PRE>The IPCONFIG /ALL command will return information similar to the following:
<P>
Windows NT IP Configuration
<P>
<P>
<P>
<PRE>   Host Name . . . . . . . . . : server1.companyname.com
   DNS Servers . . . . . . . . : 123.23.234.123
                              123.23.235.124
   Node Type . . . . . . . . . : Mixed

   NetBIOS Scope ID. . . . . . :

   IP Routing Enabled. . . . . : No

   WINS Proxy Enabled. . . . . : No

   NetBIOS Resolution Uses DNS : No


</PRE>Ethernet adapter El90x1:
<P>
<P>
<P>
<PRE>   Description . . . . . . . . : 3Com 3C90x Ethernet Adapter

   Physical Address. . . . . . : 00-80-C7-55-55-C5

   DHCP Enabled. . . . . . . . : Yes

   IP Address. . . . . . . . . : 124.24.235.123

   Subnet Mask . . . . . . . . : 255.255.248.0

   Default Gateway . . . . . . : 124.24.235.1

   DHCP Server . . . . . . . . : 124.24.235.111

   Primary WINS Server . . . . : 123.23.234.125

   Secondary WINS Server . . . : 123.23.234.126

   Lease Obtained. . . . . . . : Tuesday, January 01, 1998 7:30:00 AM

   Lease Expires . . . . . . . : Saturday, November 05, 1998 7:30:00 AM


</PRE>The name resolution method used for this sample system is Mixed (m-node) as
shown by the Node Type parameter above.
<P>
 
<PRE>Keywords          : snamanager snatn3270
Version           : WINDOWS:3.0,3.0SP1,3.0SP2
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 3, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
