

<HTML>
<HEAD>
<TITLE>Automatic Logon Fails using Client Access for Windows 95 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q171621">
<META NAME="KBModify" CONTENT="1998/03/19">
<META NAME="KBCreate" CONTENT="1997/07/17">
<META NAME="Keywords" CONTENT="sna3rdparty snasecurity kbfix3.00.sp2 kbnetwork buglist">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  You are using Automatic Logon with IBM's Client Access for Windows 95. By default, the AS/400 connection is established at startup, but you can also establish it through the AS400 Connections utility in Client Access for Windows 95. When you establ...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA1S,QDN9,QARL,QDL9,QBWQ,QBWO,QBWN,QAWK,QAI5,QDO3,QA4H,QAGU,QABI,QAAP,QBG2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Automatic Logon Fails using Client Access for Windows 95</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 19, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q171621</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<P>
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0 and 3.0 Service Pack 1 (SP1)
<LI>Microsoft SNA Client for Windows 95, versions 3.0 and 3.0 SP1
</UL> 
<P>
SYMPTOMS
 
<P>
You are using Automatic Logon with IBM's Client Access for Windows 95. By
default, the AS/400 connection is established at startup, but you can also
establish it through the AS400 Connections utility in Client Access for
Windows 95. When you establish the AS/400 connection, the following error
message appears:
<P>
<PRE>   CWBSY1000 - Communication error while validating security information on
   system &lt;AS400_System_Name&gt;

</PRE>CAUSE
 
<P>
SNA Server is incorrectly sending both the User ID and Password as the
User ID subfields. The SNA Server service rebuilds the sign-on general
data stream (GDS) variable (X'1221) once it gets the real user ID and
password from the Host Security Cache.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0 and
3.0 Service Pack 1 (SP1). This problem was corrected in the latest SNA 
Server version 3.0 U.S. Service Pack. For information on obtaining this 
Service Pack, query on the following word in the Microsoft Knowledge Base 
(without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE><h2>MORE INFORMATION</h2>
 
<P>
Once you apply the fix referenced in this article, Microsoft SNA Server 3.0
supports automatic logon process, also known as single sign-on (SSO). To
use this feature with IBM Client Access for Windows 95, the following must
be true:

<UL><LI>SNA Server version 3.0 or later is the communications provider.

<LI>Host Security Integration (HSI) has been installed and configured and
   is working properly.

<LI>The Windows 95 computer is running the SNA Client for Windows 95 version
   3.0 and IBM's Client Access for Windows 95 V3R1M0 or V3R1M1.
<P>
</UL>To use automatic logon, do the following on the Client Access for Windows
95 client:

<OL><P><LI>On the AS/400 Connections/Properties tab, the following fields are
   displayed, showing the requested information:
<P>
<P><PRE>      AS/400 Connection: &lt;AS400_System_Name&gt;
      Default User ID  : MS$SAME
      Connection type  : Microsoft SNA Server
</PRE><P>
   By using MS$SAME as the default User Id and Password, you ensure that
   SNA Server will then replace these keywords with the actual host account
   information (stored for the Windows NT logon Id of the user who's logged
   into the SNA Windows 95 client) when it sends the conversation startup
   request to the host computer.

<P><LI>In Control Panel Passwords, on the Client Access tab, check the
   "Enable caching of AS/400 passwords" option.

<P><LI>In Control Panel Passwords, on the Change Password tab, click the Change
   Windows Password button. Make sure the Client Access check box is not
   selected. It is not necessary to change the Client Access password
   because Host Security Integration provides the password synchronization.
<P>
</OL><h3>Further Description of Symptoms</h3>
 
<P>
When this problem occurs, you may see a trace similar to the one below. In
this trace, the User Id is TESTNT and the Password is TEST. The "Sign-On
Request Data" (X'FF00) shows "TESTNT" as a User Id subfield (X'01) which is
correct, but "TEST" is incorrectly identified as a User Id subfield as
well. The subfield containing "TEST" should be identified as a Password
subfield (X'02)
<P>
<PRE>   PVI   ----------------------------------------------------------
   PVI   18000001-&gt;010204B2 LU 6.2
   PVI                      MSGID:SWAT   MSGTYP:PRFLS  Sense1:537E
   PVI                      Sense2:325F
   PVI
   PVI   ---- Header  at address 01444348, 1 elements ----
   PVI   0B05537E 325F0800 50000000 01007FDC     &lt;..S~2_..P.....¦.&gt;
   PVI
   PVI   ---- Element at address 0193BDB0, start 13, end 92 ----
   PVI   300502FF 0003D000 000406F3 F0F10016     &lt;0..........301..&gt;
   PVI   0DC1D7D7 D54BC3D6 C9D5C9D5 C7F207CD     &lt;.APPNKRAINIER..&gt;
   PVI   05170F3B 00010008 00000000 00000001     &lt;...;............&gt;
   PVI   00201221 001CFF00 0C01D4E2 5BE2C1D4     &lt;. .!......MS[SAM&gt;
   PVI   C5404040 0C02D4E2 5BE2C1D4 C5404040     &lt;E@@@..MS[SAME@@@&gt;
   DLC   ----------------------------------------------------------
   DLC   01020101-&gt;04160000 DLC DATA
   DLC                      DAF:01 OAF:02 ODAI:on  Normal
   DLC                      RQE FMD FI BC EC DR1 PI CD
   DLC
   DLC   ---- Header  at address 01444348, 1 elements ----
   DLC   0B05537E 325F2E00 01020001 01007FDC     &lt;..S~2_........¦.&gt;
   DLC
   DLC   ---- Element at address 0193BDB0, start 10, end 82 ----
   DLC   0B912030 0502FF00 03D00000 0406F3F0     &lt;.j 0..........30&gt;
   DLC   F100160D C1D7D7D5 4BC3D6C9 D5C9D5C7     &lt;1...APPNKRAINIER&gt;
   DLC   F207CD05 170F3B00 01000800 00000000     &lt;2.....;.........&gt;
   DLC   00000100 16122100 12FF0008 01E3C5E2     &lt;......!......TES&gt;
   DLC   E3D5E306 01E3C5E2 E3                    &lt;TNT..TEST       &gt;

</PRE></OL>NOTE: For additional information regarding the above error when using
Client Access for Windows 95, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   Article ID: <B><A href="../sna/q159745.htm">Q159745</A></B>
   Title     : CWBSY1000 Communication Error w/ Client Access for Windows
               95/NT

</PRE>The IBM product discussed here is manufactured by International Business
Machines Corp. (IBM), a vendor independent of Microsoft; we make no
warranty, implied or otherwise, regarding this product's performance or
reliability.
 
<PRE>Keywords          : sna3rdparty snasecurity kbfix3.00.sp2 kbnetwork buglist
Version           : 3.0
Platform          : winnt
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 19, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
