

<HTML>
<HEAD>
<TITLE>SNA Server Stops Forwarding FMH-5 Attach Messages </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q182574">
<META NAME="KBModify" CONTENT="1998/03/18">
<META NAME="KBCreate" CONTENT="1998/03/16">
<META NAME="Keywords" CONTENT="kbbug3.00 snaappc snabaseservice snacpic snaserverservice snatp snawinnt kbbug3.00.sp2">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  SNA Server may unexpectedly stop forwarding FMH-5 Attach messages to a specific branch-based SNA Server client computer (where the invokable transaction program [TP] is registered or running). When this occurs, SNA Server reports an Event 60 (DLOAD...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDO3,QARL,QAKP,QBWP,QAR4,QAO4,QBWE,QAVZ,QAI5,QDKW,QBVX,QA39,QALZ,QABT,QAGB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server Stops Forwarding FMH-5 Attach Messages</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 18, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q182574</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0 Service Pack 1 (SP1),
   3.0 SP2, and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
SNA Server may unexpectedly stop forwarding FMH-5 Attach messages to a
specific branch-based SNA Server client computer (where the invokable
transaction program [TP] is registered or running). When this occurs, SNA
Server reports an Event 60 (DLOAD timeout) in the server's application log.
For example:
<P>
<PRE>   Event ID: 60
   Source:   SNA Server
   Description: Failed to invoke APPC TP &lt;tpname&gt;, sense data = 084C0000

</PRE>084C0000 refers to AP_TRANS_PGM_NOT_AVAIL_NO_RETRY.
<P>
On the client computer, the APPC or CPIC invokable TP may never be invoked,
or if it is running, the TP's call to CMAPPC or RECEIVE_ALLOCATE will not
complete. To recover from this problem, the SnaBase service on the Windows
NT client machine must be stopped and restarted.
<P>
<P><h2>CAUSE</h2>
 
<P>
This problem can occur when the SNA Server client's sponsor connection (LAN
session) to the server-side SnaBase service is lost. This problem occurs
when the client-end of the client end of the LAN connection fails first.
<P>
If the SNA Server client's sponsor fails and reconnects to the SnaBase
before SnaBase is notified of the LAN session failure, a timing window
exists where the client's invokable TP's are deregistered even though the
client has reconnected.
<P>
This problem has been observed when an SNA Server Windows NT client is
connecting to an SNA Server over TCP/IP sockets, although it may occur with
other LAN interfaces.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem:

<UL><LI>Determine and correct the cause of the underlying LAN session failure
   between the SNA Server client and the server.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0,
3.0 SP1, 3.0 SP2. We are researching this problem and will post new
information here in the Microsoft Knowledge Base as it becomes available.
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 3.0,
3.0 SP1, 3.0 SP2, and 4.0.
A supported fix is now available for SNA Server 3.0 and 4.0, but has not
been fully regression tested and should be applied only to systems
experiencing this specific problem. Unless you are severely impacted by
this specific problem, Microsoft recommends that you wait for the next
Service Pack that contains this fix. Contact Microsoft Technical Support
for more information.
 
<PRE>Keywords          : kbbug3.00 snaappc snabaseservice snacpic snaserverservice snatp snawinnt kbbug3.00.sp2 kbbug4.00
Version           : WINDOWS:3.0,3.0SP1,3.0SP2,4.0
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 18, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
