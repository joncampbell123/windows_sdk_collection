

<HTML>
<HEAD>
<TITLE>TN3270E Print Job Hangs in Print Manager </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q140800">
<META NAME="KBModify" CONTENT="1996/02/01">
<META NAME="KBCreate" CONTENT="1995/12/11">
<META NAME="Keywords" CONTENT="kbnetwork kbbug2.00 kbbug2.10 kbbug2.11">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  A TN3270E printer session hangs if the Host sends a BIND RU that specifies an Inbound Maximum RU size of 0 (indicating that no maximum RU size applies on the session to the Host). This causes the print job to remain in 'Spooling...  state in the Wi...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBT0,QAOX,QBBI,QAR4,QARL,QAKP,QDN1,QAH6,QDO3,QABA,QAKC,QDJO,QBXS,QAY2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TN3270E Print Job Hangs in Print Manager</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 1, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q140800</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.0, 2.1, and 2.11
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
A TN3270E printer session hangs if the Host sends a BIND RU that specifies
an Inbound Maximum RU size of 0 (indicating that no maximum RU size applies
on the session to the Host). This causes the print job to remain in
<PRE>'Spooling..." state in the Windows NT Print Manager until the Printer
</PRE>Session is disconnected.
<P>
This symptom occurs sporadically.
<P>
<P><h2>CAUSE</h2>
 
<P>
There are two causes to this problem:

<OL><P><LI>The TN3270 Server incorrectly interprets 0 as the maximum RU size which
   prevents it from sending any data to the host. When the host establishes
   a session and specifies the maximum inbound RU size as "no maximum", the
   TN3270E Server treats this as an RU size of zero bytes. This has the
   effect that it ignores all the data it receives from a TN3270 or TN3270E
   client, apart from the 5-byte header in the case of TN3270E.

<P><LI>A TN3270E client may also misinterpret this byte and would then be
   unable to send any response to the TN3270 Server. The WRQ emulator is
   one such emulator.
<P>
</OL><h2>RESOLUTION</h2>
 
<P>
There is a fix for cause number one and two:

<OL><P><LI>The fix for cause number 1 ensures that the TN3270 sends inbound data.
   The data is sent in Request Units (RUs) up to the  Default Inbound RU
   Size  specified in the  Options  dialog of TN3270 Admin.

<P><LI>To work around the second cause, the client problem, the TN3270 Server
   has a registry entry that allows a 0 RU size in the BIND image
   transmitted to the client to be overwritten by the  Default Inbound RU
   Size  specified in the  Options  dialog of TN3270 Admin. You can find
   the registry entry under the subtree HKEY_LOCAL_MACHINE under the
   subkey:
<P>
<P><PRE>      CurrentControlSet\Services\TN3270\Parameters
</PRE><P>
   The registry value is as follows:
<P>
<P><PRE>      Value Name: ReplaceRUSize
      Data Type:  REG_EXPAND_SZ
</PRE><P>
   If this entry is set to "ON" then the value for the inbound RU size in
   the BIND Image sent to the TN3270E client is set to the default inbound
   RU size as configured for the TN3270E Server, if the host has specified
   no maximum.
<P>
   Set this registry entry only if you experience this problem.
<P>
</OL>Microsoft has updated the following files to correct this problem:

<UL><LI>&lt;TN3270Root&gt;\TN3SERVR.EXE
<LI>&lt;TN3270Root&gt;\TN3SERVR.DBG
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server for Windows NT.
This problem was corrected in the latest SNA Server for Windows NT, 2.11
U.S. Service Pack. For information on obtaining the Service Pack, query on
the following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug2.00 kbbug2.10 kbbug2.11<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: prodsna 2.00 2.10 2.11 3.50 3.51<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 1, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
