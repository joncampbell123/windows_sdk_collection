

<HTML>
<HEAD>
<TITLE>SNA Server 3.0 Supports Multiple Connections to Same AS/400 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q162133">
<META NAME="KBModify" CONTENT="1997/11/06">
<META NAME="KBCreate" CONTENT="1997/01/14">
<META NAME="Keywords" CONTENT="snaappc kbnetwork kbusage">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  Microsoft SNA Server, version 3.0 can be configured to have multiple  APPN-capable connections to the same AS/400. Previous versions of SNA  Server did not support multiple APPN-capable connections to the same  AS/400.  For additional information o...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAUJ,QAI5,QBG2,QBC9,QBC8,QANO,QANN,QAJQ,QDIZ,QABA,QDJ3,QARM,QAKD,QAVZ,QA7O V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SNA Server 3.0 Supports Multiple Connections to Same AS/400</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 6, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q162133</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, version 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Microsoft SNA Server, version 3.0 can be configured to have multiple 
APPN-capable connections to the same AS/400. Previous versions of SNA 
Server did not support multiple APPN-capable connections to the same 
AS/400.
<P>
For additional information on why SNA Server 2.x did not support multiple
APPN-capable connections to the same AS/400, please see the following
article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sna/q131625.htm">Q131625</A></B>
   TITLE: Multiple APPN-capable Connections to Same AS/400 Not Supported

</PRE><h2>MORE INFORMATION</h2>
 
<P>
For SNA Server to connect to an AS/400, an APPC controller definition must
exist for SNA Server's local control point name. The APPC controller may be
autocreated by the AS/400 or manually created by the AS/400 administrator.
<P>
The AS/400 allows only a single APPC controller, with a given control point
name, over any line it supports. Previous versions of SNA Server can only
be configured with one local control point name. SNA Server, version 3.0 
allows the local control point name to be overridden for each connection 
defined for a particular SNA Server. This allows multiple APPC controllers 
to be created for a single SNA Server.
<P>
The following is an example of two 802.2 connections to the same AS/400:

<OL><P><LI>Install two DLC 802.2 Link Services via SNA Server Manager and configure
   each to use a different Local Service Access Point (SAP). The first DLC
   802.2 Link Service can be setup to use the default local SAP of 0x4 and
   the second can be setup to use a local SAP of 0x8. For this example, we
   will call them SnaDlc1 and SnaDlc2.

<P><LI>Create and configure an 802.2 connection for the first connection to the
   AS/400 by selecting Insert -&gt; Connection -&gt; 802.2 from the Menu Bar in
   Manager. The AS/400 Wizard can also be used to create and configure the
   connection.
<P>
   Note: SNA Server 3.0 does not create connections for installed link
   services by default like the previous versions of SNA Server did. SNA
   Server Manager can be configured to automatically create connections
   when link services are installed by checking the Automatically Create
   Connections for New Link Services checkbox under View -&gt; Options.
<P>
<P><PRE>      Name = Enter a 1 to 8 character connection name.
      Link Service = SnaDlc1 (or the name of one of the link
<PRE></PRE>                     services added in Step 1)
      Remote End = Peer System
      Allowed Directions = Outgoing Calls. Check Incoming Calls if
                           you want the AS/400 to activate the link.
      Activation = If set to "On Server Startup" (default), then the
                   Switched disconnect (SWTDSC) value on the AS/400
                   controller definition should be set to NO. This
                   causes the underlying link to stay active even if
                   there are no active sessions. Otherwise, if
                   SWTDSC is YES, then SNA Server should be set to
                   "On Demand" activation.

   Select the Address tab:

   Remote Network Address = The Ethernet or Token Ring MAC address of the
                            AS/400.
   Remote SAP Address = 0x4

   Select the System Identification tab:

   Local Node Name:

   Network Name = APPN (or Remote Network ID, RMTNETID value on the
                        AS/400).
   Control Point Name = This is the remote control point name (RMTCPNAME)
                        value in the AS/400 APPC controller definition.
                        This is set to the local Windows NT machine name
                        by default for all connections that are created.
                        For this connection use the default value, which
                        will be SNASERV1 for this example.
   Local Node ID = EXCHID value on the AS/400 controller description (if
                   not specified on the AS/400, leave at default - 05D
                   FFFFF).

   Remote Node Name:

   Note: The parameters in the Remote Node Name do not need to be
   specified for 802.2 connections.

   Network Name = APPN (or remote network ID RMTNETID value on the
                        AS/400).
   Control Point Name = AS/400 local control point name, configured in the
                        AS/400 Display Network Attributes screen.
   Remote Node ID = Not used (leave blank).

   Settings in the 802.2 DLC tab can be left at their default settings.

</PRE><P><LI>Create and configure the second 802.2 connection that will be used to
   communicate with the AS/400.
<P>
<P><PRE>      Name = Enter a 1 to 8 character connection name. The name must
<PRE></PRE>             be different from all other connections names on this
             SNA Server.
     Link Service = SnaDlc2 (The other link service that was
                    installed in Step 1).
     Remote End = Peer System
     Allowed Directions = Outgoing Calls. Check Incoming Calls if
                          you want the AS/400 to activate the link.
     Activation = If set to "On Server Startup" (default), then the
                  Switched disconnect (SWTDSC) value on the AS/400
                  controller definition should be set to NO. This
                  causes the underlying link to stay active even if
                  there are no active sessions. Otherwise, if
                  SWTDSC is YES, then SNA Server should be set to
                  "On Demand" activation.

   Select the Address tab:
  
      Remote Network Address = The Ethernet or Token Ring MAC address of the
                               AS/400.
      Remote SAP Address = 0x8

   The Remote SAP Address for this connection needs to be set to a value 
   different than the value for the first 802.2 connection. The SAPs are 
   defined in the communications line description on the AS/400. Your
   AS/400 administrator can help you with this. Valid SAPs are configured
   in increments of 0x4 (in other words, 0x4, 0x8, 0xC, 0x10, and so forth).
   SAP 0x4 is configured by default on the AS/400.

   Select the System Identification tab:

      Local Node Name:

      Network Name = APPN (or Remote Network ID, RMTNETID value on the
                           AS/400).
      Control Point Name = SNASERV2 (Specify a value different than the one
                           used for the previous connection. Note: *** This
                           is the key parameter for allowing multiple APPN-
                           capable connections from a SNA Server to the same
                           AS/400. *** )

      Local Node ID = EXCHID value on the AS/400 controller description (if
                      not specified on the AS/400, leave at default - 05D
                      FFFFF).

      Remote Node Name:

      Note: The parameters in the Remote Node Name do not need to be
      specified for 802.2 connections.

      Network Name = APPN (or remote network ID RMTNETID value on the
                           AS/400).
      Control Point Name = AS/400 local control point name, configured in the
                           AS/400 Display Network Attributes screen.
      Remote Node ID = Not used (leave blank).

      Settings in the 802.2 DLC tab can be left at their default settings.

</PRE><P><LI>Create two Local APPC LUs for the SNA Server by selecting
   Insert -&gt; APPC -&gt; Local LU from the SNA Server Manager menu
   bar.

<P><LI>Create a Remote APPC LU for each connection to the AS/400 by selecting
   Insert -&gt; APPC -&gt; Remote LU from the SNA Server Manager menu bar. The
   Remote LU Alias will be different for each Remote LU, but the Remote LU
   Name will be the same for both Remote LUs.
<P>
</OL>For additional information on configuring an SNA Server to communicate with
an AS/400 over 802.2, please see the following article in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sna/q112158.htm">Q112158</A></B>
   TITLE: Configuring SNA Server to Talk to AS/400 Over 802.2

</PRE></OL>For additional information on configuring an SNA Server to communicate with
an AS/400 over SDLC, please see the following article in the Microsoft
Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sna/q112159.htm">Q112159</A></B>
   TITLE: Configuring SNA Server to Talk to AS/400 Over SDLC
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna cp cpname<BR>
Keywords          : snaappc kbnetwork kbusage<BR>
Version           : 3.0<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 6, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
