

<HTML>
<HEAD>
<TITLE>API or Message Tracing May Cause SNA Server Process to Hang </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q182375">
<META NAME="KBModify" CONTENT="1998/03/18">
<META NAME="KBCreate" CONTENT="1998/03/12">
<META NAME="Keywords" CONTENT="">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  When you do API or Message tracing on an SNA Server process (such as the Shared Folders Gateway Service), the process may hang in certain conditions, causing other problems such as a loss of network connectivity to the SNA Server computer.  The SNA...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAEV,QDJO,QACK,QDIT,QAKP,QAYC,QDO3,QBVV,QAO4,QAJ6,QAR4,QAJH,QBVX,QAX6,QAML V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>API or Message Tracing May Cause SNA Server Process to Hang</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 18, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q182375</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0 SP1, 3.0 SP2, and 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you do API or Message tracing on an SNA Server process (such as the
Shared Folders Gateway Service), the process may hang in certain
conditions, causing other problems such as a loss of network connectivity
to the SNA Server computer.
<P>
The SNA Server service or Win32 SNA application may hang unexpectedly if
Message tracing or API tracing is enabled. This problem does not affect
internal tracing. When the process hangs, the SNA session status may
continue to indicate an active status and the SNA data flow on the session
will be suspended.
<P>
This problem can cause the SNA Server service to hang while message tracing
is enabled. The types of message tracing that can cause this problem to
occur are Server Data Link Control (DLC), LU 6.2, and 3270. An SNA Server
link service may also hang when enabling DLC message traces. If this
occurs, the SNA Server service or SNA link service will become unresponsive
(for example, existing clients will lose their sessions), and any attempt
to stop the SNA Server service will show a perpetual "Stopping" status.
<P>
This problem can also cause a Win32 SNA application to hang while API or
message tracing is enabled. If this occurs, the SNA Application traces will
not have been flushed to disk; therefore, the API or message traces will
not indicate the last API call issued by the application. The trace file
size may have reached its maximum configured size when this problem occurs.
SNA Application full internal traces will indicate that it is still
responding to SNA Server "keepalive" messages.
<P>
This problem may occur more frequently when a small trace file size is
configured, or if there is a large amount of message activity that causes
the trace files to fill quickly.
<P>
<P><h2>CAUSE</h2>
 
<P>
The tracing mechanism within SNA Server is not properly flushing the trace
statements to the file.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server 3.0 (all service
packs) and SNA Server 4.0. A supported fix is now available for SNA Server
4.0, but has not been fully regression-tested and should be applied only to
systems experiencing this specific problem. Unless you are severely
impacted by this specific problem, Microsoft recommends that you wait for
the next Service Pack that contains this fix. Contact Microsoft Technical
Support for more information.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
With this update applied, the Trace utility functions correctly.
 
<PRE>Version           : WINDOWS:3.0,3.0SP1,3.0SP2,4.0
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 18, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
