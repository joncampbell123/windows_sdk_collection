

<HTML>
<HEAD>
<TITLE>APPC DISPLAY Call May Return AP_COMM_SUBSYSTEM_ABENDED. </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q180705">
<META NAME="KBModify" CONTENT="1998/02/09">
<META NAME="KBCreate" CONTENT="1998/02/06">
<META NAME="Keywords" CONTENT="kbbug3.00 kbbug3.00.sp1 prodsna snaappc snaprog snaserverservice kbbug3.00.sp2 kbbug4.0">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  If a Win32 APPC application calls the SNA Server DISPLAY function to retrieve  a list of all configured remote APPC LU's (in other words, sets the  plu_def_info option), the following symptoms may occur:   - the DISPLAY call may return with the fol...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QDO3,QBWP,QAUD,QAO4,QARL,QAKP,QDJ3,QDIZ,QAR4,QAPN,QANN,QAIF,QDL9,QBWQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>APPC DISPLAY Call May Return AP_COMM_SUBSYSTEM_ABENDED.</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 9, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q180705</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server, versions 3.0, 3.0SP1, 3.0SP2, 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If a Win32 APPC application calls the SNA Server DISPLAY function to retrieve 
a list of all configured remote APPC LU's (in other words, sets the 
plu_def_info option), the following symptoms may occur:

<UL><LI>the DISPLAY call may return with the following error:
<P>
<P><PRE>      primary_rc = 0xF003 (AP_COMM_SUBSYSTEM_ABENDED)
</PRE>
<LI>The following event may appear in the Windows NT application event log:
<P>
<P><PRE>      Event ID: 706
      Source:  SNA Server
      Description: 
      Connection to client &lt;client&gt;has been aborted due to too many (100) 
      pending writes.
</PRE><P>
</UL>This problem has been observed when configuring IBM Personal Communications 
for the AS/400 (version 4.1) while using the SNA Server Windows NT or Windows 
95 client software. This problem occurs when the SNA Server is configured 
with a large number of local APPC LU/remote APPC LU/mode partnerships. In the 
customer's failure scenario, there were over 2300 local APPC LU's configured, 
each partnered with up to 4 remote APPC LU's.
<P>
<P><h2>CAUSE</h2>
 
<P>
The SNA Server was incorrectly reporting information on all the local APPC 
LU's defined, even though the application was only requesting remote APPC LUs 
(via the plu_def_info option). When attempting to send this large response to 
the client's DISPLAY request, the SNA Server exceeded 100 consecutive pending 
write requests to the client, causing the default "MaxPendingWrites" counter 
to be exceeded. For more information about Event 706 and MaxPendingWrites, 
see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sna/q142037.htm">Q142037</A></B>
   TITLE: SNA Server Fails to Release Memory in SNA TCP/IP Interface DLL

</PRE><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server version 3.0, 3.0 
Service Pack 1 (SP1), 3.0 SP2 and 4.0.
<P>
A supported fix is now available for SNA 3.0 and 4.0, but has not been fully 
regression-tested and should be applied only to systems experiencing this 
specific problem. Unless you are severely impacted by this specific problem, 
Microsoft recommends that you wait for the next Service Pack that contains 
this fix. Contact Microsoft Product Support Services for more information.
 
<PRE>Keywords          : kbbug3.00 kbbug3.00.sp1 prodsna snaappc snaprog snaserverservice kbbug3.00.sp2 kbbug4.00
Version           : WINDOWS:3.0,3.0SP1,3.0SP2,4.0
Platform          : WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 9, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
