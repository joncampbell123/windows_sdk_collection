

<HTML>
<HEAD>
<TITLE>GetLuaReturnCode Mapping Problems and Possible Access Violation </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q163561">
<META NAME="KBModify" CONTENT="1997/04/14">
<META NAME="KBCreate" CONTENT="1997/02/12">
<META NAME="Keywords" CONTENT="kbbug2.10 kbbug2.11 kbbug3.00 kbfix2.11.sp2 kbfix3.00.sp1 kbnetwork kbprg snalua snapro">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  The following problems occur when calling GetLuaReturnCode() from an RUI or SLI application:  - The following return codes are not mapped properly:     LUA_RECEIVED_UNBIND 0x55    LUA_DATA_INCOMPLETE 0x60    LUA_LU_INOPERATIVE 0xFF     LUA_RECEIVER...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDO3,QAH4,QAUD,QAKP,QA1S,QAI4,QBWP,QAXB,QAR4,QDN9,QAC1,QBD2,QAAP,QALW,QBGA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>GetLuaReturnCode Mapping Problems and Possible Access Violation</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 14, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q163561</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.1, 2.11, 2.11 Service
   Pack 1 (SP1), and 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The following problems occur when calling GetLuaReturnCode() from an RUI
or SLI application:
<P>
- The following return codes are not mapped properly:
<P>
<PRE>   LUA_RECEIVED_UNBIND 0x55
   LUA_DATA_INCOMPLETE 0x60
   LUA_LU_INOPERATIVE 0xFF

   LUA_RECEIVER_IN_TRANSMIT_MODE  0x081B0000
   LUA_SSCP_LU_SESSION_NOT_ACTIVE 0x08570000

   LUA_RESPONSE_ALREADY_SENT  0x10050122

  Also, GetLuaReturnCode reports these unmapped return codes in Intel
  byte-reversed format.  For example, a sense code of 0x081B0000 may be
  returned as 0x00001B08.

</PRE>- If GetLuaReturnCode() receives a primary_rc or the secondary_rc that it
<PRE>  doesn't expect, this may lead to an access violation in LUASTR32.DLL.

</PRE><h2>CAUSE</h2>
 
<P>
These problems are caused by deficiencies in the GetLuaReturnCode()
function.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
An update to SNA Server 2.11 Service Pack 1 and 3.0 is available to
correct these problems. The updated modules are Luastr32.dll,
Winrui32.dll and Winsli32.dll.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in SNA Server versions 2.1,
2.11, 2.11 Service Pack 1 (SP1), and 3.0.
This problem was corrected in the latest Microsoft SNA Server 2.11 and
3.0 U.S. Service Packs. For information on obtaining the service pack,
query on the following word in the Microsoft Knowledge Base (without
the spaces):
<P>
<PRE>   S E R V P A C K
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbbug2.10 kbbug2.11 kbbug3.00 kbfix2.11.sp2 kbfix3.00.sp1 kbnetwork kbprg snalua snaprog kbbuglist<BR>
Version             : 2.10 2.11 3.00<BR>
Platform            : WINDOWS<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 14, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
