

<HTML>
<HEAD>
<TITLE>Comparing SNA client TCP/IP named pipes vs sockets </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q128985">
<META NAME="KBModify" CONTENT="1997/04/17">
<META NAME="KBCreate" CONTENT="1995/04/17">
<META NAME="Keywords" CONTENT="kbinterop kbnetwork ntnetserv ntprotocol snawin3x snawin95">
<META NAME="KBArea" CONTENT="Support; KB; sna">
<META NAME="Description" CONTENT="  The TCP/IP windows sockets interface was added in SNA Server 2.1 and is configured during SNA Server client setup:    - Microsoft Networking (named pipes)   - Novell Netware (native ipx/spx)   - Banyan VINES  (via Banyan IP)   - TCP/IP  (via window...">
<META NAME="Product" CONTENT="SNA Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QARL,QDNT,QBWD,QBWO,QAUJ,QDL9,QBWQ,QBWN,QAVZ,QAEV,QAH6,QBVX,QDIK,QAGI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Comparing SNA client TCP/IP named pipes vs sockets</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q128985</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SNA Server for Windows NT, versions 2.1, 2.11, and 3.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The TCP/IP windows sockets interface was added in SNA Server 2.1 and is
configured during SNA Server client setup:
<P>
<PRE>  - Microsoft Networking (named pipes)
  - Novell Netware (native ipx/spx)
  - Banyan VINES  (via Banyan IP)
  - TCP/IP  (via windows sockets)

</PRE>When the Microsoft TCP/IP protocol is installed onto a Windows 3.1, Windows
for Workgroups 3.11, Windows 95 or Windows NT machine, the SNA Server
client can communicate to the server over:

<UL><LI>Microsoft Networking (named pipes over tcp/ip)
<P>
   -or-

<LI>TCP/IP (over the Windows sockets interface)
<P>
</UL>The TCP/IP windows sockets interface was added to SNA Server 2.1 and is the
recommended SNA Server client connection method for customers using the
TCP/IP transport. NOTE: To use TCP/IP sockets, the SNA Server client
software requires that the TCP/IP transport support the Windows Sockets
version 1.1 specification.  TCP/IP sockets provides better performance and
better reliability when connecting to servers across routed IP networks.
<P>
This article compares these two methods of connecting from an SNA Server
client.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Named Pipes over TCP/IP</h3>
 
<P>
When communicating over named pipes, the SNA Server client opens a named
pipe resource (\\server\PIPE\...) which is created by the SNA Server. A
named pipe is an interprocess communication facility supported by the
client redirector (that is, Windows for Workgroups protected mode
redirector) and the Windows NT Server. The SNA Server client and server
send messages to each other over this named pipe.
<P>
As with shared file and printer connections, named pipe session traffic
flows over a NetBIOS session between the client redirector and the Windows
NT server using the "Server Message Block" (SMB) protocol. The following
illustrates the message flow:
<P>
<PRE>  SNA Client         &lt;- Named Pipe -&gt;           SNA Server

  Redirector   &lt;- SMB over NetBIOS session -&gt;   NT Server

  TCP/IP          &lt;- TCP/IP connection -&gt;       TCP/IP

  Network card &lt;----------------------------&gt;   Network card


</PRE>A typical message packet would include the following information:
<P>
<PRE>   [ IP | TCP [ NetBios [ SMB ( SNA application data ) ] ] ]

</PRE><h3>Disadvantages of Using Named Pipes</h3>
 
<P>
- The client redirector and Windows NT server process all messages passed
<PRE>  between the SNA Server client and the server. All named pipe messages
  are formatted within "SMB" requests by the client redirector and NT
  server which flow over a NetBios session.

</PRE>- Each NetBios session requires "keep-alive" messages to flow between
<PRE>  the client redirector and Windows NT server. These NetBIOS level
  acknowledgments lead to network overhead, and the possibility of
  NetBIOS-level timeout conditions when traveling across a routed
  IP network.

</PRE>- A NetBIOS session over TCP/IP requires NetBIOS-to-IP address name
<PRE>  resolution, requiring a client LMHOSTS file entry for each server,
  or a WINS server to provide this name resolution. DNS servers don't
  provide this name resolution.

</PRE>- Since each SNA Server client has one outstanding read request pending
<PRE>  on the sponsor connection, and one read pending on the SNA application
  session, Windows NT server resources are required to handle these
  pending I/O requests even when the SNA client session is idle.

</PRE><h3>Advantages of Using Named Pipes</h3>
 
<P>
- Windows NT user validation is performed by the client redirector and
<PRE>  the Windows NT server (as part of the SMB protocol). This allows the
  user's initial network login to be used.

</PRE><h3>TCP/IP Sockets</h3>
 
<P>
When communicating over TCP/IP sockets, the SNA Server client opens a
TCP/IP socket number created by the SNA Server. A socket is a session-
oriented interprocess communication facility supported directly over the
TCP/IP transport. The following illustrates the message flow:
<P>
<PRE>  SNA Client         &lt;- TCP/IP socket -&gt;         SNA Server

  TCP/IP           &lt;- TCP/IP connection -&gt;       TCP/IP

  Network card  &lt;----------------------------&gt;   Network card


</PRE>A typical message packet includes the following information:
<P>
<PRE>   [ IP | TCP ( SNA application data ) ]

</PRE><h3>Advantages of Using TCP/IP Sockets</h3>
 
<P>
- The SNA Server client and server communicate directly over the
<PRE>  Windows sockets interface, bypassing NetBIOS, the SMB protocol, and
  overhead introduced using the named pipes interface.

</PRE>- TCP/IP name-to-IP address resolution is provided by the client HOSTS
<PRE>  file, DNS server, or WINS server

</PRE>- TCP/IP session keep-alive timeout processing is handled directly by
<PRE>  the SNA Server client and server. The SNA Server WatchDogTimeOut
  setting controls the timeout value, as described in the SNA Server 2.1
  readme file (the default is 60 seconds).

</PRE>- The SNA Server Win 3.x client uses a larger buffer size to exchange
<PRE>  data with the server than does the SNA client named pipe interface.
  Also, data transfer is performed using byte stream protocol which
  makes better use of network resources (named pipes uses message mode
  protocol).

</PRE><h3>Disadvantages of Using TCP/IP Sockets</h3>
 
<P>
- User authentication is handled by the SNA Server client and server.
<PRE>  This requires the user to "login" to the Windows NT network when
  the SNA client software is loaded. This client login can be
  automated to some degree, as described on page 208 of the SNA
  Server 2.1 Reference Guide. In SNA Server 2.11, more enhancements
  have been made in this area. For additional information, see the
  following article in the Microsoft Knowledge Base:

     ARTICLE-ID: <B><A href="../sna/q130854.htm">Q130854</A></B>
     TITLE     :Automating the SNA Server Win 3.x Client Login Process

  NOTE: Windows 95 and Windows NT support secure programmatic methods to
  impersonate the currently logged on user. Therefore, there is no need to
  automate the client logon request when using the SNA Server Windows 95 or
  Windows NT client software.
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsna tcp/ip sockets named pipes<BR>
Keywords            : kbinterop kbnetwork ntnetserv ntprotocol snawin3x snawin95<BR>
Version             : 2.1 2.11 3.0<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
