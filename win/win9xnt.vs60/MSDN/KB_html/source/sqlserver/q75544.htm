

<HTML>
<HEAD>
<TITLE>PRB: Reasons for Receiving Message Numbers 3115 and 3116 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q75544 ">
<META NAME="KBModify" CONTENT="1997/04/25">
<META NAME="KBCreate" CONTENT="1991/08/25">
<META NAME="Keywords" CONTENT="kbother SSrvGen SSrvSQL_Admin">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  Upon loading a database from a dump made on another server (Case 1) or upon loading a dump after re-creating the database (Case 2), the following messages are received:     User X in database Y has suid Z1 which is the same as    the suid of the db...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAZV,QABM,QAH5,QAGU,QAEV,QAN0,QAGX,QAYC,QAY2,QBVV,QAEF,QAKC,QAJQ,QAA3,QBE7 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Reasons for Receiving Message Numbers 3115 and 3116</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q75544 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Upon loading a database from a dump made on another server (Case 1)
or upon loading a dump after re-creating the database (Case 2), the
following messages are received:
<P>
<PRE>   User X in database Y has suid Z1 which is the same as
   the suid of the dbo ( as defined in sysdatabases ). User X
   will be given suid Z2
       ( Msg. 3115, Level 0, State 1 )

</PRE>This message is followed by:
<P>
<PRE>   When all load transactions have been completed for database
   Y, user X should be given a reasonable suid
        ( Msg. 3116, Level 0, State 1 )

</PRE><h2>CAUSE</h2>
 
<P>
<P><h3>Case 1</h3>
 
<P>
When the dump is loaded on a different server, these messages
occur because the suid of the database owner (DBO) (as indicated
in the sysdatabases table in the master database) does not match
the suid of the DBO in the database loaded from the dump (as
indicated in the sysusers table). Furthermore, the suid indicated
for the owner in the sysdatabases table is associated with a user
in the sysusers table in the loaded database.
<P>
<P><h3>Case 2</h3>
 
<P>
When the database is re-created and loaded back from a dump, the
above messages will be received only if the system administrator
(SA) has inadvertently been added as a user in sysusers. This
creates a conflict similar to Case 1 because the SA cannot exist
both as a DBO and a user in sysusers.
<P>
Therefore, instead of arbitrarily deleting the row, SQL Server will
change the conflicting suid in sysusers to a negative number
(usually -99), thus providing the opportunity to re-establish the
original owner by changing the value of suid as suggested by Msg.
3116 above.
<P>
Please note that in Case 2, if the SA has not been added as a user
in sysusers, SQL Server will NOT display any of the above
messages; however, the row from sysusers will still be deleted for
the previous owner. As a result, the previous owner will not be
able to access the database at all until restored as owner or at
least as a user.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
As indicated by the level of the messages (level 0), there are no
ill effects on the database. The messages are merely informing the
user of the housekeeping that SQL Server is doing to successfully
restore the database.
<P>
The ownership can subsequently be changed back to the original owner by
using the stored procedure sp_changedbowner, using SQL Administrator, or by
removing the row with the negative suid (usually -99) from the sysusers
table.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words:<BR>
Keywords            : kbother SSrvGen SSrvSQL_Admin<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>
Issue type          : kberrmsg<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
