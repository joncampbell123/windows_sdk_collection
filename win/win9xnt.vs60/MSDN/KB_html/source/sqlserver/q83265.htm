

<HTML>
<HEAD>
<TITLE>INF: Change in Behavior of ALTER DATABASE in SQL Server 4.2 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q83265 ">
<META NAME="KBModify" CONTENT="1997/04/03">
<META NAME="KBCreate" CONTENT="1992/04/08">
<META NAME="Keywords" CONTENT="kbother SSrvGen">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  ALTER DATABASE works differently in SQL Server versions 1.1 and 1.11 than it does in version 4.2 when it is used to allocate space on the same device that the database currently resides on.  MORE INFORMATION  Consider a 2 megabyte (MB) database tes...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QALQ,QAZV,QDMH,QAB5,QAYY,QAVX,QAVW,QAU5,QAHI,QAVS,QAJQ,QDMW,QBDM,QA6V V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Change in Behavior of ALTER DATABASE in SQL Server 4.2</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 3, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q83265 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
ALTER DATABASE works differently in SQL Server versions 1.1 and 1.11
than it does in version 4.2 when it is used to allocate space on the
same device that the database currently resides on.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Consider a 2 megabyte (MB) database test on device testdev.
<P>
<P><h3>SQL Server 1.1x</h3>
 
<P>
The following code marks the new fragment as data only:
<P>
<PRE>   alter database test on testdev = 1

</PRE>The output from sp_helpdb is as follows:
<P>
<PRE>   Device    Size    Usage
   ------    ----    -----

   testdev   1 MB    data only
   testdev   2 MB    data and log

</PRE>NOTE: As a consequence of the second fragment being marked "data
only," if the user is running out of log space, new space allocations
will be marked "data only," and thus cannot contain transaction log
pages until sp_logdevice() is subsequently used to mark the new
fragment "log only."
<P>
Also note that on the target device, sp_logdevice marks all fragments
except the fragment containing the first logical page of the database
"log only."
<P>
<P><h3>SQL Server 4.2</h3>
 
<P>
The new fragment is marked "data and log," as revealed by the output
from sp_helpdb:
<P>
<PRE>   Device    Size    Usage
   ------    ----    -----

   testdev   1 MB    data and log
   testdev   2 MB    data and log

</PRE>In SQL Server 4.2, sp_MSlogdevice can be used to mark only the most
recently allocated fragment "log only," as opposed to the situation
described above.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 1.10 4.20 Transact-SQL<BR>
Keywords            : kbother SSrvGen<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 3, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
