

<HTML>
<HEAD>
<TITLE>BUG: Deadlock on Table with Text/Image Column May Cause Errors </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170296">
<META NAME="KBModify" CONTENT="1997/06/18">
<META NAME="KBCreate" CONTENT="1997/06/17">
<META NAME="Keywords" CONTENT="kbbug6.50 kbusage SSrvGen">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="BUG #: 16861 (6.5)   Heavy stress that causes an extremely high number of deadlocks on a table with image/text columns may cause the following errors and cause the server to stop responding:     udread: Operating system error 38(Reached end of file.)...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QABM,QDIR,QAAP,QBTP,QAKP,QAMA,QBXV,QBFY,QAOE,QAB5,QAI4,QBE7,QBE6,QAYY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Deadlock on Table with Text/Image Column May Cause Errors</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  June 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170296</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5
</UL> 
BUG #: 16861 (6.5)
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Heavy stress that causes an extremely high number of deadlocks on a table
with image/text columns may cause the following errors and cause the server
to stop responding:
<P>
<PRE>   udread: Operating system error 38(Reached end of file.) on device
   'C:\MSSQL\DATA\MASTER.DAT' (virtpage 0x00ffff00).
   Buffer 10da140 from database 'MSS' has page number 2855763 in the page
   header and page number -256 in the buffer header
   mirrorproc: i/o error on primary device 'C:\MSSQL\DATA\MASTER.DAT'
   udread: Operating system error 6(The handle is invalid.) on device
   'C:\MSSQL\DATA\MASTER.DAT' (virtpage 0x00000114).
   udread: Operating system error 6(The handle is invalid.) on device
   'C:\MSSQL\DATA\MASTER.DAT' (virtpage 0x00000394).
   udread: Operating system error 6(The handle is invalid.) on device
   'C:\MSSQL\DATA\MASTER.DAT' (virtpage 0x00000105).
   bufwait: timeout, BUF_IO, bp 0x10fdea0, pg 0x110, stat 0x1004/0x6, obj
   0x1d906ebe, bpss 0

</PRE>The errorlog is filled with bufwait error messages until server is killed
(it cannot shut down normally); all existing connections become
unresponsive, and no new connection can be made.
<P>
This problem only happens infrequently on very high performance servers. In
the scenario in which Microsoft was able to reproduce these errors, an SMP
computer with fairly high CPU speed was required, and even then this
problem only surfaced occasionally.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft SQL Server
version 6.5. We are researching this problem and will post new information
here in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: un-handled AV exception stack overflow link crash<BR>
hang hung freeze froze frozen stopped dead unresponsive<BR>
Keywords            : kbbug6.50 kbusage SSrvGen<BR>
Version             : 6.5<BR>
Platform            : WINDOWS<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  June 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
