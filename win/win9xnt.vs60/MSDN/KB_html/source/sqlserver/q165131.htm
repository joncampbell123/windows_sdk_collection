

<HTML>
<HEAD>
<TITLE>FIX: Stress of Lock Limit Threshold Causes Bufwait Error Message </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q165131">
<META NAME="KBModify" CONTENT="1997/06/27">
<META NAME="KBCreate" CONTENT="1997/03/13">
<META NAME="Keywords" CONTENT="kbusage SSrvGen kbbug6.50">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="BUG#: 16530 (6.5)   The SQL Server errorlog file may contain one or more of the following errors if there is stress on the SQL Server lock limit threshold:   - Error : 1204, Severity: 19, State: 3    SQL Server has run out of LOCKS.  Re-run your comm...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAB4,QAAP,QABN,QAKP,QAR4,QALS,QAI4,QABT,QAX6,QDKW,QAA8,QBWS,QA5E,QDIR V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Stress of Lock Limit Threshold Causes Bufwait Error Message</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  June 27, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q165131</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5
</UL> 
BUG#: 16530 (6.5)
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The SQL Server errorlog file may contain one or more of the following
errors if there is stress on the SQL Server lock limit threshold:

<UL><LI>Error : 1204, Severity: 19, State: 3
   SQL Server has run out of LOCKS.  Re-run your command when there are
   fewer active users, or ask your System Administrator to reconfigure SQL
   Server with more LOCKS.

<LI>Error : 5904, Severity: 17, State: 0
   Background checkpoint process suspended until locks are available.
<P>
</UL>Continued stress may cause one or more of the following errors:

<UL><LI>bufwait: timeout, BUF_IO, bp 0xee55e0, pg 0x26f7, stat 0x1004/0x6, obj
   0x8, bpss 0xfa31f0

<LI>udread: Operating system error 6(The handle is invalid.) on device
<PRE>   'C:\MSSQL\DATA\devTempdb.DAT' (virtpage 0x020022f7).

</PRE><LI>EXCEPTION_ACCESS_VIOLATION raised, attempting to create symptom dump

<LI>WARNING: Pss found with open sdes;  pspid 11, psuid 1, pcurdb 1, system
<PRE>   table entry 0, sdesp 0xf51ba0,   objid 1

</PRE><LI>Error : 826, Severity: 20, State: 1
   Attempt made to hold allocation page 11520 that is

<LI>Error : 602, Severity: 21, State: 3
   Could not find row in Sysindexes for dbid '2', object '16003088',index
<PRE>   '0'. Run DBCC CHECKTABLE on Sysindexes.

</PRE><LI>Error : 913, Severity: 22, State: 2
   Could not find row in Sysdatabases with database id -27352. Run DBCC
   CHECKTABLE on Sysdatabases.
<P>
</UL><h2>WORKAROUND</h2>
 
<P>
To work around this problem, use sp_configure to increase the locks value.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft SQL Server
version 6.5. This problem has been corrected in U.S. Service Pack 3 for
Microsoft SQL Server version 6.5. For more information, contact your
primary support provider.
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbusage SSrvGen kbbug6.50<BR>
Version             : 6.5<BR>
Platform            : WINDOWS<BR>
Issue type          : kbbug<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  June 27, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
