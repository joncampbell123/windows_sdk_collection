

<HTML>
<HEAD>
<TITLE>PRB: SQL Server Won't Start After Setting TEMPDB IN RAM Too High </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q166350">
<META NAME="KBModify" CONTENT="1997/04/16">
<META NAME="KBCreate" CONTENT="1997/04/03">
<META NAME="Keywords" CONTENT="kbusage SSrvAdmin SSrvGen">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  If the SQL Server tempdb in RAM value is configured to a value higher than the available RAM remaining on the computer, SQL server fails on the next startup attempt. Because the configuration value does not take affect until the server is stopped a...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QBW6,QAIJ,QDIZ,QANE,QAKD,QDIV,QAB4,QDJ3,QBVV,QAB5,QAAP,QBWS,QBV8,QAB9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: SQL Server Won't Start After Setting TEMPDB IN RAM Too High</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q166350</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, versions 6.0 and 6.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If the SQL Server tempdb in RAM value is configured to a value higher than
the available RAM remaining on the computer, SQL server fails on the next
startup attempt. Because the configuration value does not take affect until
the server is stopped and restarted, the server functions as normal until
that time. Upon attempting to restart the server, the following message
appears in the SQL Server error log:
<P>
<PRE>   kernel   udactivate(IN_RAM): Operating system error 8(Not enough storage
   is available to process this command.) encountered
   spid1    Device activation error. The physical filename 'IN_RAM' may be
   incorrect
   spid1    crdb_tempdb: Unable to move tempdb into RAM; RAM device doesn't
   exist, cannot be created, or doesn't have enough space for tempdb

</PRE><h2>CAUSE</h2>
 
<P>
On startup, if tempdb is configured to exist in RAM, SQL Server must create
a temp_db device within the available system RAM in which to store tempdb.
If the size of tempdb exceeds the available amount of system RAM, the
device cannot be created. Without the device, SQL Server is unable to
create tempdb in RAM. It is important to note that the tempdb in RAM value
uses RAM in addition to memory currently allocated to SQL Server, and is
specified in MB, not 2-KB pages.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To resolve this problem, do the following:

<OL><P><LI>Open a command prompt session and start SQL Server in minimal
   configuration mode with the following command:
<P>
<P><PRE>      sqlservr -c -f
</PRE><P>
   You will get a screen dump of the error log. When the startup is
   complete, you will have a flashing cursor after the following line:
<P>
<PRE>      97/02/27 15:34:46.14 kernel   Warning: override, autoexec procedures
      skipped.

</PRE><P><LI>Once the server is started, open a second command prompt session and
</OL>connect to the server as the system administrator (SA) using ISQL:
<P>
<PRE>   isql -Usa -Ppassword   (if you are not local to the computer, add
   -Sservername)

</PRE><P><LI>Reconfigure the tempdb in RAM parameter to an acceptable value. It is
</OL>important to note that the tempdb in RAM value uses RAM in addition to
memory currently allocated to SQL Server, and is specified in MB, not 2-KB
pages. To adjust the current value, use the following commands (where X is
the value of tempdb in RAM, in MB):
<P>
<PRE>   sp_configure 'tempdb in ram', X
   go

   Configuration option changed. Run the RECONFIGURE command to install.

   reconfigure
   go

</PRE><P><LI>Shut down SQL Server:
<P>
   shutdown
   go
<P>
   Server SHUTDOWN by request.

<P><LI>Start SQL Server as normal.
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbusage SSrvAdmin SSrvGen<BR>
Version             : 6.0 6.5<BR>
Platform            : WINDOWS<BR>
Issue type          : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
