

<HTML>
<HEAD>
<TITLE>INF: Using Batch Sizes with the BCP Utility </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q81339 ">
<META NAME="KBModify" CONTENT="1997/04/28">
<META NAME="KBCreate" CONTENT="1992/03/03">
<META NAME="Keywords" CONTENT="kbtool SSrvAdmin SSrvWinNT">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  The bulk copy program (BCP) accepts  /b               (without quotation marks) as one of its parameters. This  /b               parameter allows the user to specify the number of rows per batch for the data that will be loaded into a SQL Server ta...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QA5V,QDMH,QAKJ,QA9N,QBVV,QAHE,QAY5,QAY2,QASB,QBCF,QAU5,QAHI,QAZV,QAY4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Using Batch Sizes with the BCP Utility</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 28, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q81339 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
  - Microsoft SQL Server version 4.2
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The bulk copy program (BCP) accepts "/b &lt;batch size&gt;" (without
quotation marks) as one of its parameters. This "/b &lt;batch size&gt;"
parameter allows the user to specify the number of rows per batch for
the data that will be loaded into a SQL Server table. The use of the
/b parameter has a large impact on how the data insertions are logged.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When the /b parameter is not used with the BCP utility, all rows from
a data file are copied into SQL Server in one batch, and BCP displays
the message "1000 rows sent to SQL Server" after every 1000 rows have
been copied.
<P>
When the non-logged (or "fast") version of BCP is used, the data
insertions are not logged in the transaction log. However, SQL Server
still logs page allocations each time a new data page is allocated, as
well as extent allocations each time a new extent is allocated to the
table. (An extent is a block of eight 2K data pages.)
<P>
If the /b parameter is not used, SQL Server treats the entire BCP
operation as a single transaction. Thus, if for any reason the BCP is
aborted before it finishes, the entire transaction is rolled back, and
the destination table will not contain any new rows from the BCP
operation.
<P>
If the /b parameter is used, each batch of rows is logged as a
separate transaction. For example, if a data file has 1000 rows, and a
batch size of 100 is used, SQL Server will log the operation as 10
separate transactions. If the BCP operation were to abort while
copying in row 750, only the previous 49 rows would be removed, and
the destination table would still contain the first 700 rows.
<P>
When copying large data files into SQL Server with BCP, it is possible
for the transaction log to fill up from the page and extent allocation
logging before the BCP is complete. In this situation, you can either
enlarge the transaction log or do the BCP by using the /b option (with
the "trunc. log on chkpt." database option enabled). Setting this
option "on" will instruct SQL Server to truncate the log each time it
performs a CHECKPOINT, so the log records for those batches that have
been committed will be removed from the log. Because only committed
transactions can be truncated from the log, this option will not free
up space in the log if the /b option is not used (because the entire
operation is logged as a single transaction).
<P>
NOTE: When using the non-logged version of BCP to import data into a
SQL Server database, it is important to back up the database (using
the DUMP DATABASE command) when the BCP is complete.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Windows NT<BR>
Keywords            : kbtool SSrvAdmin SSrvWinNT<BR>
Version             : 4.2 | 4.2<BR>
Platform            : OS/2 WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 28, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
