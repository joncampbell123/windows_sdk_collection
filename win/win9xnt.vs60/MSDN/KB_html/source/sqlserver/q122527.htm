

<HTML>
<HEAD>
<TITLE>INF: Understanding MSscheduled_Backups Entries </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q122527">
<META NAME="KBModify" CONTENT="1997/04/30">
<META NAME="KBCreate" CONTENT="1994/11/07">
<META NAME="Keywords" CONTENT="kbinterop kbtool SSrvAdmin">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  When you encounter difficulties with SQL Monitor scheduled tape events, it is frequently helpful to review the MSscheduled_backups table to quickly review the events that are scheduled. This article discusses the fields that directly affect what is...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QALB,QAGJ,QAI4,QABM,QAB5,QACE,QA7O,QA7N,QBVV,QA5E,QADK,QAO4,QAKD,QAPN,QAL4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Understanding MSscheduled_Backups Entries</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 30, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q122527</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, versions 4.2x
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When you encounter difficulties with SQL Monitor scheduled tape events, it
is frequently helpful to review the MSscheduled_backups table to quickly
review the events that are scheduled. This article discusses the fields
that directly affect what is dumped, and when and where it is to be dumped.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The MSscheduled_backups table has the following structure for SQL Server
versions 4.21 and 4.21a. Starting with SQL 4.2, the 'stat' field was added,
and in 4.21 both the 'attempts' and 'email_name' fields were added.
<P>
NOTE: SQL Server version 4.2b for OS/2 does not contain these additional
fields.
<P>
<PRE>   Event_id        int                  4     NOT NULL
   Database_name   varchar             30     NOT NULL
   Database_owner  varchar             30     NOT NULL
   Database_dump   varchar             30     NULL
   Log_dump        varchar             30     NULL
   Day             tinyint              1     NOT NULL
   Frequency       tinyint              1     NOT NULL
   Start_time      char                 5     NOT NULL
   Enabled         bit                  1     NOT NULL
   Last_dump       datetime             8     NULL
   In_progress     bit                  1     NOT NULL
   Stat            tinyint              1     NULL
   attempts        tinyint              1     NULL
   email_name      varchar             60     NULL

</PRE>The combination of entries in the database_dump, log_dump, and stat fields
determine what type of activity will be accomplished by a particular event.
<P>
The following chart represents the relationships:
<P>
<PRE>   Activity                         Database_dump   log_dump   stat
   ----------------------------------------------------------------------
   Dump Database to disk               Device         NULL       0
   Dump LOG to disk                    NULL           Device     0
   Dump Database with INIT             Device         NULL       0
   Dump LOG with INIT                  NULL           Device     0
   Dump both DB &amp; LOG with INIT        Device         Device     0
   Dump Database with APPEND           Device         NULL       2
   Dump DB with INIT, APPEND LOG       Device         Device     3
   Dump both DB &amp; LOG with APPEND      Device         Device     4
   Dump Trans with truncate_only       NULL           NULL       5
   Dump Trans with no_log              NULL           NULL       6

</PRE>The append and init are only appropriate for tape related events; if disk
dumps are involved, the stat field is zero. The only way to verify that a
dump with a stat of zero is to a tape rather than to disk is by comparing
the logical name listed in the MSscheduled_backups table for the
database_dump and log_dump with the logical name in sysdevices, where the
control type is five.
<P>
The start_time, day, and frequency fields will determine when the scheduled
event actually occurs. The time is entered using a twelve-hour clock in SQL
Administrator but is converted to the 24-hour clock, and it is entered in
the start_time field. The day is the day of the week, and the values start
with Sunday with a value of one. Daily dumps will have a day value of zero
with a frequency value of one.
<P>
The additional frequency values are as follows:
<P>
<PRE>   Dump              Frequency      Day
</PRE> 
<PRE>   Daily                1           day = 0
   Weekly               7           day in {1,2,3,4,5,6,7}
   Bi-Weekly           14           day in {1,2,3,4,5,6,7}
   Monthly Week 1      31           day in {1,2,3,4,5,6,7}
   Monthly Week 2      32           day in {1,2,3,4,5,6,7}
   Monthly Week 3      33           day in {1,2,3,4,5,6,7}
   Monthly Week 4      34           day in {1,2,3,4,5,6,7}

</PRE>The attempts field was added in SQL Server version 4.21 and corresponds to
the SQLMonitor registry entry BackupRetryAttempts. By default, SQL Monitor
will attempt to dump a database three times, with each attempt being
documented in this field. This retry activity can be manipulated by making
the appropriate changes in the Windows NT registry.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: windows nt<BR>
Keywords            : kbinterop kbtool SSrvAdmin<BR>
Version             : 4.2 4.21 4.21a<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 30, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
