

<HTML>
<HEAD>
<TITLE>PRB: Server May Stop Responding or Get an AV w/ Low Open Objects </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q181563">
<META NAME="KBModify" CONTENT="1998/03/05">
<META NAME="KBCreate" CONTENT="1998/02/23">
<META NAME="Keywords" CONTENT="SSrvAdmin">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  SAP SQL Servers may experience any of the following symptoms if the 'open objects' configuration value for SQL Server is set too low:   - Access violations.   - SQL Server stops responding while operating under normal production.   - SQL Server sto...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAPN,QAJZ,QBWS,QAW6,QAGB,QAZM,QAZL,QABA,QAKP,QDIX,QDIZ,QBXS,QA6A,QAX6 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Server May Stop Responding or Get an AV w/ Low Open Objects</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 5, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q181563</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
SAP SQL Servers may experience any of the following symptoms if the 'open
objects' configuration value for SQL Server is set too low:

<UL><LI>Access violations.

<LI>SQL Server stops responding while operating under normal production.

<LI>SQL Server stops responding while doing DBCC CHECKDB().
<P>
</UL><h2>CAUSE</h2>
 
<P>
The cause of the access violations and when SQL Server stops responding
while the server is operating under normal production is believed to occur
as a result of one or both of the following two known bugs:
<P>
<PRE>   BUG 17420, Concurrent Insert w/ Open Object Reuse May Cause Hang
   BUG 17338, Problems with Server Cursors on a Stored Procedure

</PRE>For more information on these bugs, see the articles in the Microsoft
Knowledge Base listed in the MORE INFORMATION section of this article.
<P>
As of the writing of this article, a bug has not yet been filed for the
third condition, when SQL Server stops responding while running a DBCC
statement. However, it has been observed that an overlapping execution of
DBCC CHECKCATALOG() will often aggravate this problem, if not serve as the
catalyst for it to arise.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Generally, in advising a configuration setting for the 'open objects'
configuration option, it is suggested that you find the sum total of all
objects in the sysobjects tables for each database on the server, and set
the 'open objects' parameter to at least that value. By default, the 31H
Kernel sets the 'open objects' configuration value to 50,000 during SAP
installation. Due to the heavy use of temporary objects by the SAP
application, the configuration value for 'open objects' should be set to at
least twice the sum of the total objects in all user databases, or 50,000,
whichever is higher.
<P>
Additionally, if cursors are known to be in use on the server, enable Trace
Flag 7502 for SQL Server.
<P>
To avoid the condition where SQL Server stops responding while running a
DBCC statement, execute DBCC CHECKCATLOG() either before or after DBCC
CHECKDB(), but do not start DBCC CHECKCATALOG() at the same time as DBCC
CHECKDB(), nor while DBCC CHECKDB() is running.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For more information on Bug 17420, see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sqlserver/q178296.htm">Q178296</A></B>
   TITLE     : BUG: Concurrent Insert w/ Open Object Reuse May Cause Hang

</PRE>For more information on Bug 17338, see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../sqlserver/q175126.htm">Q175126</A></B>
   TITLE     : BUG: Problems with Server Cursors on a Stored Procedure
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: AV AVs hang hangs hung freeze freezes frozen lock<BR>
locks locked up crash crashes crashed fail fails failed failure<BR>
Keywords          : SSrvAdmin<BR>
Version           : WINNT:6.5<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 5, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
