

<HTML>
<HEAD>
<TITLE>PRB: Anti-virus Program May Cause Named Pipes Connection Problem </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q170338">
<META NAME="KBModify" CONTENT="1997/09/04">
<META NAME="KBCreate" CONTENT="1997/06/18">
<META NAME="Keywords" CONTENT="SSrvGen kb3rdparty kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  Anti-virus software running on client computers may cause Named Pipes connections to Microsoft SQL Server to fail. The client application may stop responding, take a long time, or sometimes receive error 231,  Connection Busy.  On the SQL Server er...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAI5,QBG2,QBHJ,QARL,QAB4,QAAP,QAUJ,QAJQ,QAKP,QAJH,QDKW,QBWS,QDJ3,QDIZ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Anti-virus Program May Cause Named Pipes Connection Problem</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 4, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q170338</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, versions 6.0 and 6.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Anti-virus software running on client computers may cause Named Pipes
connections to Microsoft SQL Server to fail. The client application may
stop responding, take a long time, or sometimes receive error 231,
"Connection Busy." On the SQL Server error log, error 17832 "Unable to read
login packet" may be logged. Connections to SQL Server using a different
network protocol work normally.
<P>
<P><h2>CAUSE</h2>
 
<P>
When the client application requests to open a pipe, and if the anti-virus
software is configured to scan all files, the anti-virus software treats
the pipe as a file, and attempts to scan it. This results in opening the
pipe is a "deny all" mode that prevents the client software from reading or
writing to the pipe while connected to the server. After the pipe is opened
in this mode, the client is not able to send the login packet to the
server. This results in raising error 17832 "Unable to read login packet"
in the SQL Server error log.
<P>
Other Named Pipes connections from the same client fail because the pipe is
already open in a "deny all" mode that prevents the usage of the same pipe
by those connections. This scenario results in receiving error 231 "Pipe
busy" or "Connection Busy."
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem, try the following suggestions:

<UL><LI>Configure the anti-virus software to scan program files only.

<LI>Remove the anti-virus software and evaluate the SQL Server Named Pipes
   connection.

<LI>Contact the anti-virus vendor for suggestions on configuring the
   software.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: virus antivirus detection WIN95 WIN-95 WIN<BR>
Keywords          : SSrvGen kb3rdparty kbnetwork<BR>
Version           : WINDOWS:6.0 6.5<BR>
Platform          : WINDOWS<BR>
Issue type        : kbprb<BR>
Solution Type     : kbworkaround<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 4, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
