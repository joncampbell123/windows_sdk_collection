

<HTML>
<HEAD>
<TITLE>INF: Interpreting Msg 4305 "Specified File Is Out of Sequence" </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q95867 ">
<META NAME="KBModify" CONTENT="1997/04/28">
<META NAME="KBCreate" CONTENT="1993/02/28">
<META NAME="Keywords" CONTENT="kbother SSrvServer SSrvWinNT">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  When restoring transaction log dumps, the following error is displayed:     ( Msg. 4305, Level 16, State 1,  Specified file 'dumpfile' is out    of sequence. Current time stamp is            while dump was from              .   These messages can b...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAML,QAZV,QACE,QABM,QBBI,QAY2,QAS1,QAKD,QDMH,QAYZ,QAU3,QAMR,QBXJ,QAFH,QBFY V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: Interpreting Msg 4305 "Specified File Is Out of Sequence"</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 28, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q95867 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
  - Microsoft SQL Server version 4.2
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
When restoring transaction log dumps, the following error is
displayed:
<P>
<PRE>   ( Msg. 4305, Level 16, State 1, "Specified file 'dumpfile' is out
   of sequence. Current time stamp is &lt;datetime&gt; while dump was from
   &lt;datetime&gt;."

</PRE>These messages can be confusing, as the datetime values returned  will
generally not be the date of the database or transaction log dump file
creation.
<P>
The datetime value specified for "current timestamp" reflects the time
at which the last dump of the transaction log was made. This value is
obtained from the database into which the dump is being loaded.
<P>
The datetime value specified for "dump was from" reflects the time
from which transactions will be rolled forward by loading the
transaction log dump. This value is obtained from information
contained in the dump header of the dump file.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For example, suppose the following sequence of dumps and loads is
executed against a database to two dump devices, datadump and logdump,
with the physical names of C:\SQL\DATA\DATADUMP.DAT and
C:\SQL\DATA\LOGDUMP.DAT:
<P>
<PRE>dump database pubs to datadump          &lt;&lt; executed at 4:10pm
go
dump transaction pubs to logdump        &lt;&lt; executed at 4:15pm
go
load database pubs from datadump        &lt;&lt; executed at 4:20pm
go
load transaction pubs from logdump      &lt;&lt; executed at 4:30pm
go

</PRE>Timestamp on C:\SQL\DATA\DATADUMP.DAT = 4:10pm
Timestamp on C:\SQL\DATA\LOGDUMP.DAT = 4:15pm
<P>
<PRE>dump database pubs to datadump          &lt;&lt; executed at 5:10pm
go
dump transaction pubs with NO_LOG       &lt;&lt; executed at 5:15pm
go
dump transaction pubs to logdump        &lt;&lt; executed at 5:20pm
go
load database pubs from datadump        &lt;&lt; executed at 5:25pm
go
load transaction pubs from logdump      &lt;&lt; executed at 5:35pm
go

</PRE>The final load transaction statement will now fail with
error 4305:
<P>
<PRE>   Specified file 'logdump' is out of sequence.  Current time stamp is
   MM DD YYYY 4:15pm while dump was from MM DD YYYY 5:15pm

</PRE>Timestamp on C:\SQL\DATA\DATADUMP.DAT = 5:10pm
Timestamp on C:\SQL\DATA\LOGDUMP.DAT = 5:20pm
<P>
In this case, the database is dumped at 4:10pm, followed by a
transaction log dump at 4:15pm. These dumps are then reloaded into the
database. Thus the database now contains information indicating that
the last dump occurred at 4:15pm. If you dump the database again,
this new dump will contain the information in the database indicating
that the last dump occurred at 4:15pm. We then dump the transaction
log with NO_LOG, updating the database in order to specify a new
transaction log dump time of 5:15pm. We then dump the transaction log
to a file. The transaction log dump file created by this dump will
contain the last dump time of 5:15pm in its dump header.
<P>
Now when the database dump is loaded, you restore a database
containing information indicating that the last dump occurred at
4:15pm. When you now attempt to restore the transaction log dump, the
load process compares the value stored in the database with the value
contained in the dump header of the dump file. As the dump file
contains a value of 5:15pm as the time of the databases last
transaction log dump, and this value does not equal the 4:15pm dump
time stored in the database, the LOAD TRANSACTION fails with a 4305
error.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: backup sql trans<BR>
Keywords            : kbother SSrvServer SSrvWinNT<BR>
Version             : 4.2 | 4.2a 4.21<BR>
Platform            : OS/2 Windows<BR>
Issue type          : kberrmsg<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 28, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
