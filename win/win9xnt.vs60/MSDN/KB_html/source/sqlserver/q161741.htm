

<HTML>
<HEAD>
<TITLE>FIX: Dump Aborts if PG_DMPTRLR Bit Set (MSG 3220) </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161741">
<META NAME="KBModify" CONTENT="1997/06/27">
<META NAME="KBCreate" CONTENT="1997/01/03">
<META NAME="Keywords" CONTENT="kbusage SSrvGen">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  When you attempt to dump a database in which the PG_DMPTRLR bit has been set, the dump will terminate prematurely with the following error:     Msg 3220, Level 16, State 1, Server         , Line 1    page           of database        has the PG_DMP...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAAP,QAB4,QAZV,QAR4,QAKP,QABI,QBXS,QBWA,QAO4,QABH,QBVV,QA28,QAW6,QATJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Dump Aborts if PG_DMPTRLR Bit Set (MSG 3220)</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  June 27, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161741</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft SQL Server, version 6.5
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you attempt to dump a database in which the PG_DMPTRLR bit has been
set, the dump will terminate prematurely with the following error:
<P>
<PRE>   Msg 3220, Level 16, State 1, Server &lt;server&gt;, Line 1
   page &lt;pagenum&gt; of database &lt;name&gt; has the PG_DMPTRLR bit set
   Msg 3204, Level 16, State 1, Server &lt;server&gt;, Line 1
   Operator aborted Dump or Load.

</PRE><h2>WORKAROUND</h2>
 
<P>
This problem occurs most frequently in databases in which other corruption
problems exist, typically in the form of page or extent allocation errors.
Correction of existing database errors usually results in the ability to
perform a successful dump of the database for which the error 3220 has been
reported.
<P>
If the error occurs on a page for which a 2540 error exists, run the DBCC
FIX_AL() command against the database in question. Deallocation of the mis-
allocated page will correct the problem under this condition.
<P>
NOTE: it is necessary to carefully review the output from DBCC FIX_AL(), to
ensure that error 7915 has not been reported. If error 7915 has been
reported, the FIX_AL() will not correct the allocation discrepancies, and
you will receive the following message:
<P>
<PRE>   Allocation page &lt;pagenum&gt; extid &lt;extentid&gt; is referenced, but there are
   no referenced pages within this extent.  Contact Tech Support for object
   &lt;objid&gt;.

</PRE>Should message 7915 be reported from DBCC FIX_AL(), contact technical
support for assistance in resolving this error.
<P>
In cases in which DBCC NEWALLOC() does not report allocation errors, the
error may exist on a correctly allocated data page. Identify the object on
which the error occurs (see the SQL Server Troubleshooting Guide, Appendix
A, "Associating a page with an Object"). If the error occurs on a table
object, export the data, drop and re-create the table, and import the data
again. It is also possible that the error will occur on an index page.
Should this situation arise, drop and re-create the index to which the page
specified in the error message belongs.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft SQL Server
version 6.5. This problem has been corrected in U.S. Service Pack 3 for
Microsoft SQL Server version 6.5. For more information, contact your
primary support provider.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
SQL Server versions prior to 6.5 did not check to see if this bit was set
while performing a database dump. This allowed for situations in which an
error 605 would occur when attempting to reload a database that was dumped
while the PG_DMPTRLR bit was set. The check for the PG_DMPTRLR bit, which
was added in SQL Server 6.5, was designed to address SQL Server 6.0 bug
11857, "Need to check and clear PG_DMPTRLR status at DUMP DATABASE time."
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : kbusage SSrvGen<BR>
Version             : 6.5<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  June 27, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
