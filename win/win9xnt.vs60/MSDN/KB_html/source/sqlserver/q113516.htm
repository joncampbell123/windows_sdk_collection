

<HTML>
<HEAD>
<TITLE>BUG: Tape Problem Results in Access Violation with Alt/Cr DB </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q113516">
<META NAME="KBModify" CONTENT="1997/04/29">
<META NAME="KBCreate" CONTENT="1994/04/06">
<META NAME="Keywords" CONTENT="kbbug4.21 kbother SSrvWinNT">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="BUG# NT: 714 (4.21)   The client thread in the process of creating or altering a database may terminate due to an access violation when there have been prior problems with a SQL Server tape dump device.  CAUSE =====  Scheduled Database/Log tape dumps...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAKP,QAAP,QAB4,QBW7,QAI5,QA1S,QBWG,QDMH,QA5E,QAZV,QAO4,QAL3,QAH5,QABA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Tape Problem Results in Access Violation with Alt/Cr DB</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 29, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q113516</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.21
</PRE> 
BUG# NT: 714 (4.21)
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The client thread in the process of creating or altering a database
may terminate due to an access violation when there have been prior
problems with a SQL Server tape dump device.
<P>
<P><h2>CAUSE</h2>
 
<P>
Scheduled Database/Log tape dumps can be conveniently scheduled using SQL
Administrator. SQL Monitor actually manages the process by reading the
information that it inserted into Msscheduled_backups via SQL
Administrator.
<P>
Additional settings for SQL Monitor are listed in the SQL Server
"Configuration Guide" on pages 132-134. One setting in particular to note
is the BackupRetryAttempts that is documented in the 4.21 Release Notes.
<P>
The default for BackupRetryAttempts is 3. When there is a problem with the
tape or tape device, SQL Monitor will try up to 3 times to execute the dump
to tape. The retry attempt is indicated by the following message displayed
in the error log:
<P>
<PRE>   94/03/24 04:30:00 kernel ksconsole: Reinitializing the console

</PRE>This message is notification by SQL Server that it is going to reinitialize
the console program used to manage tape activity. When three or more
occurrences of this message are present in the error log, subsequent CREATE
DATABASE or ALTER DATABASE statements initiated by a client thread may
result in the termination of that thread due to an access violation. When
the access violation occurs, the following error will be displayed in the
SQL Server error log:
<P>
<PRE>   94/03/24 04:30:00 server Error : 0, Severity: 19, State: 0
   94/03/24 04:30:00 server language_exec: Process (number) generated
   access violation; SQL Server is terminating this process.

</PRE>Few immediate problems result from this error; however, it is recommended
that SQL Server be shutdown or restarted, and the situation be corrected
(see the workaround below).
<P>
Shutdown of the system may prove difficult after this error has occurred.
The first attempt should be made by using the SQL Service Manager, then if
that fails, using NET STOP SQLSERVER, and finally, from ISQL, use "shutdown
with nowait."
<P>
<P><h2>WORKAROUND</h2>
 
<P>
This problem has typically occurred when a tape has been ejected before or
not been placed in the tape drive prior to a scheduled tape dump. Avoid
this situation by monitoring the error log and the backup history available
through SQL Administrator.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Microsoft SQL Server
version 4.21. We are researching this problem and will post new information
here in the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Windows NT<BR>
Keywords            : kbbug4.21 kbother SSrvWinNT<BR>
Version             : 4.21<BR>
Platform            : WINDOWS<BR>
Issue type          : kberrmsg<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 29, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
