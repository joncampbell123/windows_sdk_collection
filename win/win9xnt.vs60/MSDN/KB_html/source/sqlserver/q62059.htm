

<HTML>
<HEAD>
<TITLE>INF: SQL Server Performance Analysis </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q62059 ">
<META NAME="KBModify" CONTENT="1997/04/25">
<META NAME="KBCreate" CONTENT="1990/05/18">
<META NAME="Keywords" CONTENT="kbenv SSrvServer">
<META NAME="KBArea" CONTENT="Support; KB; sqlserver">
<META NAME="Description" CONTENT="  The following information is a high-level description of general SQL Server performance analysis.  MORE INFORMATION  General Performance  On stand-alone systems, allocate all available physical memory to SQL Server.  On non-stand-alone systems, sub...">
<META NAME="Product" CONTENT="SQL Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QATJ,QA28,QAU3,QAMR,QABM,QAB9,QAY5,QBWS,QAFH,QAXB,QATP,QBXS,QACE,QACF,QBF0 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>INF: SQL Server Performance Analysis</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  April 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q62059 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



<P><h3> </h3>
 
The information in this article applies to:
<P>
<PRE>  - Microsoft SQL Server version 4.2 for OS/2
</PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The following information is a high-level description of general SQL
Server performance analysis.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>General Performance</h3>
 
<P>
On stand-alone systems, allocate all available physical memory to SQL
Server.
<P>
On non-stand-alone systems, subtract memory requirements of other
applications from available physical memory.
<P>
The percent of memory allocated to the procedure cache is
configurable.
<P>
The procedure cache needs to be higher during development than during
production.
<P>
Triggers, rules, and defaults also go in the procedure cache.
<P>
Performance can be improved by having devices on separate disks.
<P>
The log device should preferably be on a separate device.
<P>
If the recovery interval is too low, it can hurt performance and fill
the device.
<P>
If the recovery interval is too high, it causes periodic massive
slowdowns.
<P>
<P><h3>Time Slice</h3>
 
<P>
The time slice is configurable (the default is 100 milliseconds).
<P>
If the time slice is too low, it will slow down the system due to
overhead.
<P>
If the time slice is too high, it can cause long response times when
one process doesn't schedule out for a long time.
<P>
<P><h3>Stored Procedures</h3>
 
<P>
Stored procedures are faster than ad-hoc queries because they are
stored in the procedure cache. It is possible for stored procedures
to run slower than ad-hoc queries if the search value cannot be
determined until run time. This can happen as when using following
type of stored procedure creation:
<P>
<PRE>   create procedure how_fast @parm int as
   begin
   select x from y where z=@parm
   end

</PRE>In general, frequently used simple operations should be contained in
stored procedures.
<P>
<P><h3>Indexes</h3>
 
<P>
For a query to run fast on a large table, you must have an index on
the columns in the WHERE clause.
<P>
The query optimizer chooses the best-looking index, depending on the
following factors:
<P>
<PRE>   Clustered or nonclustered indexes
   Statistics
   Nonclustered index covering query
   Selectivity
   Size of table
   Uniqueness

</PRE>Clustered indexes are generally faster -- use them for most frequent
look ups, use nonclustered indexes for less frequent look ups.
<P>
Nonclustered indexes that use "cover query" are very fast, you can add
nonkey columns to nonclustered indexes to make specific queries run
faster.
<P>
The ORDER BY clause will not force a sort if the chosen index is
already in the right order.
<P>
Indexes must be updated when their tables are updated. When there are
a lot of indexes, the UPDATE, INSERT, and DELETE commands can be very
slow.
<P>
<P><h3>Problem Analysis</h3>
 
<P>
The following is the approach to take if a query is running too slowly:

<UL><LI>You should first see whether useful looking indexes exist.

<LI>Be careful about views. If the query uses a view, the query can be
   a lot more complicated than it appears.

<LI>Be careful about triggers. It may be that the trigger is running
   slowly, not the user-submitted query itself.

<LI>If there are useful-looking indexes, see what indexes the optimizer
   is choosing. To do this, set "noexec" on, and also set "showplan"
   on.

<LI>If the optimizer is not choosing good indexes, make sure the
   statistics are up to date by using the UPDATE STATISTICS command.
<P></UL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: Optimization and tuning<BR>
Keywords            : kbenv SSrvServer<BR>
Version             : 4.2<BR>
Platform            : OS/2<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  April 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
