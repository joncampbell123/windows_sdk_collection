

<HTML>
<HEAD>
<TITLE>PRB: DSKLAYT2 May Create Too Many Files on a Disk Image </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q114605">
<META NAME="KBModify" CONTENT="1995/05/22">
<META NAME="KBCreate" CONTENT="1994/05/08">
<META NAME="Keywords" CONTENT="kbtool kbprg kbprb">
<META NAME="KBArea" CONTENT="Support; KB; win32sdk">
<META NAME="Description" CONTENT="  The DSKLAYT2 program may create a disk image with more than 224 files on a single disk when many small files are part of your product. When trying to copy this image to a floppy disk, MS-DOS gives an error message indicating it cannot create all of...">
<META NAME="Product" CONTENT="Win32 SDK">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAC9,QAFI,QA9N,QASB,QBJQ,QAVV,QAB4,QDO0,QDL9,QBWO,QBWN,QDNO,QBXR,QDH9,QBXB V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: DSKLAYT2 May Create Too Many Files on a Disk Image</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 22, 1995</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q114605</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows Software Development Kit (SDK) for Windows
   version 3.1
<LI>Microsoft Win32 SDK, version 3.1
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The DSKLAYT2 program may create a disk image with more than 224 files
on a single disk when many small files are part of your product. When
trying to copy this image to a floppy disk, MS-DOS gives an error
message indicating it cannot create all of the files.
<P>
<P><h2>CAUSE</h2>
 
<P>
MS-DOS allows aproximantly 224 files to be placed in the root directory
of a floppy disk. Therefore, if DSKLAYT2 creates a disk image with more
than 224 files, MS-DOS will generate an error message when trying to
copy this disk image to an actual floppy disk. DSKLAYT2, however, will
not provide any warnings about the potential problem.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The MS-DOS 224-file limit only applies to the root directory of the
floppy disk, and therefore the solution involves creating a subdirectory
on the floppy disk and copying some of the files to the subdirectory.
The .INF file must also be modified to reflect the new locations of
the files.
<P>
Perform the following steps:

<OL><P><LI>Create your disk images as normal.

<P><LI>When copying the problem disk image to a floppy disk, create a
   subdirectory on the floppy disk to receive most of the files. For
   example, suppose your target disk is in drive A:. Use
<P>
<P><PRE>      md a:\files
</PRE><P>
   to create the subdirectory. Then, when copying the image files to the
   floppy disk, be sure to copy all the Setup Toolkit files (for example,
   SETUP.EXE, _MSTEST.EXE, SETUPAPI.INC, and so forth) to the root
   directory of the floppy disk and all the other files to the "files"
   subdirectory.

<P><LI>Modify the .INF file and place the new copy in the root of disk 1. Your
   .INF file must be modified to reference the new subdirectory as follows:
<P>
<P><PRE>      Before
</PRE><P>
<P><PRE>      [Files]
<PRE></PRE>          1, myfile1.exe,,,,1992-01-30,,,,,,,ROOT,,,13833,,6,,,

      After

      [Files]
          1, files\myfile1.exe,,,,1992-01-30,,,,,,,ROOT,,,13833,,6,,,

   This modification is easy using the global search and replace
   capabilities of a good editor. For example, if disk 2 is the problem
   disk, search for all occurrences of "2, " and replace them
   with "2, files\".

</PRE><P><LI>Change the "STF_ROOT" line in the [Default File Settings] section of
   your .INF to read:
<P>
<P><PRE>      "STF_ROOT" = "YES"
</PRE><P>
   If your .LST file specifies a compressed .INF file, you must use
   COMPRESS.EXE to compress your modified .INF file before copying it to
   disk 1.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.10 MSSETUP<BR>
KBCategory: kbtool kbprg kbprb<BR>
KBSubcategory: TlsMss<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 22, 1995</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
