

<HTML>
<HEAD>
<TITLE>SMS: An Error Was Reported While Executing the Database Upgrade </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q180407">
<META NAME="KBModify" CONTENT="1998/03/18">
<META NAME="KBCreate" CONTENT="1998/02/03">
<META NAME="Keywords" CONTENT="smsdatabase">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  When you run Setup.exe and attempt to apply Service Pack 2 (SP2) or Service Pack 3 (SP3) to a Microsoft Systems Management Server version 1.2 Site Server, an error occurs and you receive the following error message:     An error was reported while ...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Security" CONTENT="PUBLIC ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QDNQ,QAA1,QAB4,QDO3,QAAP,QAC1,QDI2,QDIZ,QBXT,QA5V,QAZV,QAIB,QAGC,QAGB,QAA5 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: An Error Was Reported While Executing the Database Upgrade</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  March 18, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q180407</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server version 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you run Setup.exe and attempt to apply Service Pack 2 (SP2) or Service
Pack 3 (SP3) to a Microsoft Systems Management Server version 1.2 Site
Server, an error occurs and you receive the following error message:
<P>
<PRE>   An error was reported while executing the database upgrade script
   UPGRD12.SQL. The error was reported on line 180. Continue with setup?
   Press Okay to skip the upgrade script or Press Cancel to cancel setup.

</PRE><h2>CAUSE</h2>
 
<P>
Line number 180 in the Upgrd12.sql script runs the Dbcnv12a.exe program to
convert tables in the Systems Management Server database through the
SqlExec function. This function may not work in some SQL environments that
use integrated security.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
Make the following two changes to the Upgrd12.sql script.

<UL><LI>Replace line number 180 ("sqlexec dbcnv12a") with
<P>
<P><PRE>      EXEC master..xp_cmdshell "C:\SMS\SITE.SRV\X86.BIN\dbcnv12a.exe"
</PRE>
<LI>Replace the last line ("sqlexec dbcnv12") with
<P>
<P><PRE>      EXEC master..xp_cmdshell "C:\SMS\SITE.SRV\X86.BIN\dbcnv12.exe"
</PRE><P>
</UL>The command shell extended stored procedure uses the SQL security context
of the user who is logged in, which works well in SQL integrated security
environments.
<P>
Copy Systems Management Server SP3 to the system's hard disk, copy the new
Upgrd12.sql script to this source, and then run the SP3 Setup.exe program
again.
<P>
Verify that the Dbcnv12a.exe and Dbcnv12.exe which are mentioned in the
modified script's path, actually exist in the directory specified.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms<BR>
Keywords          : smsdatabase<BR>
Version           : WinNT:1.2<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  March 18, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
