

<HTML>
<HEAD>
<TITLE>SMS: Long Inventory Package Names Cause Incomplete Inventory </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q175763">
<META NAME="KBModify" CONTENT="1997/11/19">
<META NAME="KBCreate" CONTENT="1997/10/27">
<META NAME="Keywords" CONTENT="kbbug1.20 kbfix1.20.sp2 smsdataloader kbbug1.20.sp1 kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  An Inventory package whose name exceeds 40 characters can cause the Systems Management Server Inventory Dataloader service to only partially process a client's inventory if one of these packages is detected on the Systems Management Server client. ...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABO,QAUQ,QAUJ,QA5V,QARL,QAY2,QASU,QAGB,QAGR,QAEF,QDO3,QBJQ,QARM,QAE1,QDKW V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: Long Inventory Package Names Cause Incomplete Inventory</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q175763</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server version 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
An Inventory package whose name exceeds 40 characters can cause the Systems
Management Server Inventory Dataloader service to only partially process a
client's inventory if one of these packages is detected on the Systems
Management Server client. When one of these MIFs is processed, the
information contained in the MIF is ignored by SMS_Inventory_Dataloader
without logging any errors in the Datalodr.log file.
<P>
-or-
<P>
You may also see multiple incomplete inventory records when you view them
from the Systems Management Server Administrator utility. These machine
inventory records contain only four or five inventory groups in the
Personal Computer Properties window of the computer.
<P>
<P><h2>CAUSE</h2>
 
<P>
The symptoms may occur if you have package inventory rules with names that
are longer than 40 characters and the Software_Name0 column size in the
Software_Comm table in the SMS database is 40 characters. You can check the
length of your software package names in the Package.rul file to confirm
whether these names contain more than 40 characters.
<P>
The Software_Name0 column size was increased from 40 characters to 128
characters in Systems Management Server version 1.2 Service Pack 2. But
when you upgrade to Service Pack 2, Dbcnv12a.exe fails to modify the
Software_Name0 column size to 128 characters.
<P>
When SMS_Inventory_Dataloader processes the MIF that has a software name
longer than 40 characters, it fails to load this attribute into SQL and
truncates this field. It subsequently ignores the rest of the groups
defined in the MIF file. Therefore, an incomplete inventory record appears
in Systems Management Server Administrator for this client. It does not log
any errors in the Datalodr.log. It also does not move the MIF to the
Sms\Site.srv\Datalodr.box\Deltamif.col\Badmifs subdirectory.
<P>
The Datalodr.log files looks like the following:
<P>
Adding group: MICROSOFT|IDENTIFICATION|1.0...
$$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue Nov 04 13:07:27 1997~&gt;&lt;thread=A0&gt;
<PRE>Adding group: MICROSOFT|MOUSE|1.0...   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:27 1997~&gt;&lt;thread=A0&gt;
<PRE>Adding group: MICROSOFT|VIDEO|1.0...   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:27 1997~&gt;&lt;thread=A0&gt;
<PRE>Adding group: MICROSOFT|SOFTWARE|1.0...   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:28 1997~&gt;&lt;thread=A0&gt;
<PRE>Adding group: MICROSOFT|SOFTWARE|1.0...   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:29 1997~&gt;&lt;thread=A0&gt;
<PRE>Adding group: MICROSOFT|SOFTWARE|1.0...   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:30 1997~&gt;&lt;thread=A0&gt;
<PRE>finished processing current machine.   $$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue
</PRE>Nov 04 13:07:31 1997~&gt;&lt;thread=A0&gt;
~No more machine MIFs to be processed, terminating thread
$$&lt;SMS_INVENTORY_DATA_LOADER&gt;&lt;Tue Nov 04 13:07:31
<P>
<P><h2>WORKAROUND</h2>
 
<P>
You can use either of the following workarounds.
<P>
The first is to change the names in the inventory packages to 40 characters
or fewer. By doing this, the Package.rul and Pkg16.cfg files will be
rebuilt and subsequent inventory from the clients will be processed
correctly.
<P>
The other workaround is to delete the Software group class using the
Systems Management Server Database Manager. After deleting a group class,
it is important to stop and restart the Systems Management Server Executive
service on the site server. Also, in order to keep client resynchronization
(resync) jobs from occurring, delete the history (.hms and .smh) files from
Sms\Site.srv\Inventory.box\History directory. This will allow the Inventory
Data Loader to recreate this table with 128 characters for the length of
the Software_Name0 column when it processes a client's inventory.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms 1.20<BR>
Keywords          : kbbug1.20 kbfix1.20.sp2 smsdataloader kbbug1.20.sp1 kbnetwork<BR>
Version           : Windows:1.2<BR>
Platform          : WINDOWS<BR>
Issue type        : kbbug<BR>
Solution Type     : kbworkaround<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 19, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
