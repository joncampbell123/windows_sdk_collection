

<HTML>
<HEAD>
<TITLE>SMS: Upgrade May Fail with SQL Integrated or Mixed Security </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q161561">
<META NAME="KBModify" CONTENT="1997/05/21">
<META NAME="KBCreate" CONTENT="1996/12/30">
<META NAME="Keywords" CONTENT="kbbug1.20 kbfix1.20.sp2 kbinterop kbsetup smssetup kbfixlist">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  When you attempt to upgrade Systems Management Server with a new version or service pack, it may stop responding at the  Preparing for Service Installation  message.  The Smssetup.log file that is located in the root of drive C has the following in...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABM,QAA1,QAC1,QA4H,QAAD,QAA5,QAI5,QDNQ,QDI2,QBWP,QDO3,QDIK,QDIZ,QAGR,QAK7 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: Upgrade May Fail with SQL Integrated or Mixed Security</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 21, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q161561</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server, version 1.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you attempt to upgrade Systems Management Server with a new version or
service pack, it may stop responding at the "Preparing for Service
Installation" message.
<P>
The Smssetup.log file that is located in the root of drive C has the
following information at the end of the log:
<P>
<PRE>   &lt;11-22-1996 13:42:14&gt; Executing upgrade script
   SITE.SRV\X86.BIN\SP_SITE.SQL
   &lt;11-22-1996 13:42:18&gt; Script execution returns code 0
   &lt;11-22-1996 13:42:18&gt; Executing upgrade script
   SITE.SRV\X86.BIN\UPGRD12.SQL
   SMS SETUP Log &gt; Beginning DBCNV12.SQL - Creating SNMP Traps tables.

</PRE><h2>CAUSE</h2>
 
<P>
This problem occurs when Microsoft SQL server is set for mixed or
integrated security and the SQL Server logon ID for the Systems Management
Server database is blank. During the upgrade, Setup calls a Systems
Management Server utility that requires the SQL Server logon ID not to be
null.
<P>
<P><h2>WORKAROUND</h2>
 
<P>
To work around this problem, change the SQL Server logon ID to SA (or
another "dummy" logon ID) when using integrated security, and enter the
correct password. Do this by going to Operations in Systems Management
Server Setup, and then selecting Systems Management Server Database.
<P>
STATUS
 
<P>
Microsoft has confirmed this to be a problem in System Management Server
version 1.2. This problem was corrected in the latest Microsoft Systems
Management Server version 1.2 U.S. Service Pack. For information on
obtaining the service pack, query on the following word in the Microsoft
Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE>MORE INFORMATION
 
<P>
Using PViewer or something similar (with Windows NT Server 3.51) or Task
Manager (with Windows NT Server 4.0) will likely show a process called
Dbcnv12a.exe running when Setup stops responding. Setup waits for this
process to complete before continuing. To start the upgrade again, you must
stop Dbcnv12a.exe.
<P>
Although Systems Management Server does not use the SQL Server logon ID
when using SQL Server integrated security, the ID must not be blank. Use
the method described in the WORKAROUND section of this article to change
the SQL Server logon ID to a value that Systems Management Server requires.
This can be a dummy value. Because SQL Server integrated security uses the
currently logged on user ID for authentication, you will need to log on as
the current Systems Management Server database owner (DBO) or a systems
administrator (SA) equivalent.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms fail<BR>
Keywords            : kbbug1.20 kbfix1.20.sp2 kbinterop kbsetup smssetup kbfixlist<BR>
Version             : 1.2<BR>
Platform            : WinNT<BR>
Issue type          : kbbug<BR>
Resolution Type     : kbservicepack<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 21, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
