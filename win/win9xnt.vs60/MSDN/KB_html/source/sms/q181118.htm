

<HTML>
<HEAD>
<TITLE>SMS: Security Considerations for the PCM Service Account </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q181118">
<META NAME="KBModify" CONTENT="1998/02/16">
<META NAME="KBCreate" CONTENT="1998/02/13">
<META NAME="Keywords" CONTENT="smspcm">
<META NAME="KBArea" CONTENT="Support; KB; sms">
<META NAME="Description" CONTENT="  The Package Command Manager (PCM) service, Pcmsvc32.exe, was designed to run on secured Windows NT Workstation computers where the local user does not have rights required to install software, write to the registry, or modify the system files. User...">
<META NAME="Product" CONTENT="Systems Management Server">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBG2,QACK,QAGU,QA9A,QAAD,QAH5,QAI5,QAK7,QABO,QAA1,QBWU,QBW3,QAVY,QDI2 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SMS: Security Considerations for the PCM Service Account</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  February 16, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q181118</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Systems Management Server, version 1.2
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The Package Command Manager (PCM) service, Pcmsvc32.exe, was designed to
run on secured Windows NT Workstation computers where the local user does
not have rights required to install software, write to the registry, or
modify the system files. Users on workstations where PCM is installed as a
service should not be members of the local Administrators group for the
client workstation computer.
<P>
The PCM service requires a user account that has:

<UL><LI>Administrator privileges on the client computer.

<LI>Domain user authority to read a PCM instruction file on the Systems
   Management Server logon server and to run a setup program in the
   package directory on the Systems Management Server distribution
   server.
<P>
</UL>This article describes security considerations for setting up the PCM
service user account in a domain. This article assumes that you have
familiarity with the PCM service installation instructions and a good
understanding of Windows NT domain concepts.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Choosing the Right Security Model for Your Environment</h3>
 
<P>
Generally speaking, the less secure the environment, the easier it is to
administer, in terms of deployment and password changes. For example, if a
single PCM service account is used across all Windows NT clients, a single
Rservice.ini file can be used for the deployment of the PCM service across
the entire enterprise. Similarly, a single password change and re-run of
RSERVICE can update the account on all Windows NT clients. The risk with
this level of security is that any user who knows the PCM service account
and password can effectively have local Administrator rights on all
Windows NT computers that have the PCM service installed.
<P>
Because the Domain Administrators group is added to the local
Administrators group when a Windows NT Workstation computer joins a domain,
it is possible to make the PCM service account a Domain Administrator to
satisfy the user account requirements. However, Microsoft Technical Support
does not recommend granting the PCM service account membership in the
Domain Administrators group, because it provides little or no security to
the domain where the account resides, including all the Windows NT
workstations and servers that are part of that domain. When an account is
specified in the Rservice.ini file, it is automatically added to the
workstation's local Administrators group. There is no reason why the
PCM service should have Domain Administrator rights.
<P>
A secure environment requires more complex administration. In the most
secure scenario, it is possible to set up an individual PCM service account
for each Windows NT client that runs the PCM service. The drawback is that
under this configuration, individual user accounts and Rservice.ini files
must be manually created. Additionally, password changes would also need to
be done on an individual basis.
<P>
The Windows NT Security Account Manager (SAM) database does have a size
limitation, so you may need to use one or more resource domains to store a
large number of per-workstation service accounts. The maximum SAM size for
Windows NT Server 4.0 is 40 MB. SAM objects include users, groups, incoming
trusts, and machine accounts. The SAM must reside in non-paged pool memory
for reasonable authentication response times, so SAM size is a primary
factor when determining RAM requirements for the primary and all backup
domain controllers.
<P>
Problems will occur if the SAM is too large for the hardware and software
environment. For example, User and User group enumerations and SAM
replications may take significantly longer, sessions may be dropped, and/or
policies or logon scripts may not apply or run. Additionally, the browse
list has a 64-KB limit, which limits the number of machine and user
accounts browseable in the domain to between 2,000 and 3,000, depending on
the description field. Adding more RAM to (or distributing the load among)
more domain controllers will relieve some of these problems. With a large
SAM database, if you have several domain controllers or slow links, it may
be necessary to tune the NETLOGON registry parameters to allow
synchronization to occur.
<P>
Most environments will find a middle ground in these two extremes of
security. To further increase security without much additional work,
individuals with very sensitive data can be given individual PCM accounts,
while other individuals could share a PCM account in groups of 10 to 50. It
is possible, for example, to create one PCM service user account, and
consequently one Rservice.ini file, for every 10, 20, or 50 computers. For
example, suppose there are 1,000 target Windows NT client computers that
you need to install the PCM service on. You can create account security in
groups of 50 clients, so only 20 Rservice.ini files and user accounts will
need to be created and maintained instead of 1,000. By doing this, only the
computers sharing the same account and password are at risk if the password
becomes compromised. The other groups of computers remain secure.
<P>
<P><h3>Additional Security Concerns</h3>
 
<P>
If users of workstations running the PCM service are able to replace the
Pcmsvc32.exe file with their own service applications, they would then be
able to run any application they wanted in the security context specified
for that service. For example, if an account with Domain Administrator
privileges was used, the substituted application could grant the user's
regular user account full Domain Administrator privileges. To maintain
security, the directory containing Pcmsvc32.exe, as designated in the
Rservice.ini file, must be carefully protected, and users must not have
administrative access to their computers when running services with domain
privileged accounts. You can use RSERVICE to periodically scan each
computer's service executable file, compare it to the master copy, and
report any deviations.
<P>
<P><h3>Creating Users and Granting Rights</h3>
 
<P>
It is possible to use User Manager for Domains to remotely add the PCM
service account to the local Administrators group on a computer running
Windows NT Workstation. To do this, click Select Domain on the User menu,
and type the name of the remote workstation (instead of a domain name). If
you are logged on as a domain administrator, it is also possible to do this
from a command line, by using the Addusers.exe utility from the Windows NT
Resource Kit, as in the following example;
<P>
<PRE>   Command Line: ADDUSERS \\RemoteComputer /C FILE.TXT
   File.TXT Contents:          [Local]
   Administrators,Members can fully administer the
   computer/domain,DOMAIN1\PCMUSER,

</PRE><h3>Additional Information</h3>
 
<P>
For more information, see the following articles in the Microsoft Knowledge
Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../winnt/q180546.htm">Q180546</A></B>
   TITLE     : Automating Updates to Local Groups on Member Servers

   ARTICLE-ID: <B><A href="../sms/q167114.htm">Q167114</A></B>
   TITLE     : PCM Service Now Available for Windows NT Clients
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: prodsms admin admins usergroup<BR>
Keywords          : smspcm<BR>
Version           : WINNT:1.2<BR>
Platform          : winnt<BR>
Issue type        : kbinfo<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  February 16, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
