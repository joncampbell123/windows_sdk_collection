

<HTML>
<HEAD>
<TITLE>FIX: dbDao's CdbException Uses Private Constructor </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q141447">
<META NAME="KBModify" CONTENT="1997/09/19">
<META NAME="KBCreate" CONTENT="1995/12/18">
<META NAME="Keywords" CONTENT="dbDao MfcDAO kbbuglist kbcode kbfixlist kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  It is difficult to explicitly throw a CdbException from the dbDAO class library. It is possible, depending on how the exception class is thrown, to generate this error:     C2248: 'CdbException::CdbException' : cannot access private member    decla...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QASP,QABO,QAR4,QBFY,QAAP,QBWP,QAK7,QAB4,QDIX,QAKP,QBVV,QBHQ,QBF0,QA56,QA55 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: dbDao's CdbException Uses Private Constructor</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q141447</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.00
WINDOWS NT
kbprg kbcode kbbuglist kbfixlist
<P>
 
The information in this article applies to:

<UL><LI>The DAO C++ Class Library included with:
   The DAO Software Development Kit (SDK), version 3.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
It is difficult to explicitly throw a CdbException from the dbDAO class
library. It is possible, depending on how the exception class is thrown, to
generate this error:
<P>
<PRE>   C2248: 'CdbException::CdbException' : cannot access private member
   declared in class 'CdbException'

</PRE><h2>CAUSE</h2>
 
<P>
This is because the constructor for the class is implicitly private. It
does not inherit, nor are any classes inherited from CdbException, and it
does not define any friends for the class.
<P>
The dbDao classes, however, are successfully able to throw the exception,
but only because of another bug within the Visual C++ 4.0 compiler that
allows you to throw a temporary instance of a class with only a private
constructor.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The error is generated if you declare an instance of CdbException and then
attempt to throw it.
<P>
<PRE>   HRESULT hr;
   CdbException myException( hr );
   throw myException;          // Generates error C2248

</PRE>However, you can successfully throw the instance if you throw a temporary
instance of CdbException.
<P>
<PRE>   HRESULT hr;
   throw CdbException( hr );

</PRE>Now it is possible to catch this exception using C++ exception handling.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article. This bug was corrected in Visual C++ 32-
bit Edition version 4.1.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 3.00 4.00 4.10 vcbuglist400 vcfixlist410<BR>
KBCategory: kbprg kbcode kbbuglist kbfixlist<BR>
KBSubcategory: MfcDAO dbDao<BR>
Keywords          : dbDao MfcDAO kbbuglist kbcode kbfixlist kbprg<BR>
Technology        : kbMfc<BR>
Version           : 3.00<BR>
Platform          : NT WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 19, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
