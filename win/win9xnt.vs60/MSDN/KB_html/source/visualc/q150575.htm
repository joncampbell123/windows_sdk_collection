

<HTML>
<HEAD>
<TITLE>HOWTO: Set Up a TCP/IP Peer-to-Peer Network Connection </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150575">
<META NAME="KBModify" CONTENT="1997/10/08">
<META NAME="KBCreate" CONTENT="1996/05/03">
<META NAME="Keywords" CONTENT="VCMac kb3rdparty kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The process for setting up a TCP/IP peer-to-peer network connection between two computers is not intuitively obvious, especially if you have never set up networks before. This article describes how to put together a TCP/IP peer-to-peer network conn...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWD,QBTX,QAVZ,QDNT,QBWS,QAA1,QDO9,QABI,QBG2,QAI5,QDI2,QBWP,QAY2,QBXS,QAUJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>HOWTO: Set Up a TCP/IP Peer-to-Peer Network Connection</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 8, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150575</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Visual C++ version 4.0 Cross-Development Edition
   for Macintosh and Windows
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The process for setting up a TCP/IP peer-to-peer network connection between
two computers is not intuitively obvious, especially if you have never set
up networks before. This article describes how to put together a TCP/IP
peer-to-peer network connection between your PC and your Macintosh quickly
and easily.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>General Physical Network Connection Issues</h3>
 
<P>
There are three common types of network cabling: Twisted Pair, ThinNet, and
ThickNet.
<P>
If you are using twisted-pair, which is thin wire with wide phone
connectors (RJ-45), both your PC and Macintosh need to be plugged into a
network hub so power is flowing through the network cable to carry data.
Depending on the manufacturer and model, hubs usually allow between four
and 20 machines to network.
<P>
Typically no extra hardware is required if you are using either ThinNet,
which looks like Cable TV wiring with a round plug, or ThickNet, which is
heavy, 1/4 inch cable with D-shell 15-pin connectors. The network cards can
be connected to each other directly.
<P>
Several newer Macintosh models have a built-in network connector called
FriendlyNet. You are required to obtain a network transceiver, such as
Asante's 10T Adapter, to use one of the cables mentioned above.
<P>
<P><h3>Choosing IP Addresses for Your Machines</h3>
 
<P>
For simplicity, use class B IP addresses for your peer-to-peer network. The
specifications for class B IP addresses are as follows:

<UL><LI>The first digit of the IP address must be between 128 to 191
   inclusively.

<LI>The subnet mask is: 255.255.0.0

<LI>The first two digits of the IP address must match on both machines. For
   example:
<P>
   machine1:  150.100.100.10
   machine2:  150.100.250.20
<P>
</UL>NOTE: When creating an IP address, avoid using 0 or 255 for any of the
digits because these numbers are reserved for special use.
<P>
Here's a good example of a set of IP address to use:
<P>
<PRE>   Macintosh:                            150.100.100.10
   PC Running Windows NT or Windows 95:  150.100.100.20

</PRE><h3>Configuring TCP/IP on the Macintosh</h3>
 
<P>
If you see MacTCP on your Macintosh control panel, you are running MacTCP.
If you see TCP/IP instead, you are running Apple's Open Transport.
<P>
The new PCI-based PowerMacs only come with Open Transport. Older models of
the Macintosh come with MacTCP on the System 7.x installation media. Check
Apple's documentation for installation details.
<P>
To configure your system using MacTCP:

<OL><P><LI>From the MacTCP control panel, select Ethernet or Ethernet Built-In
   and enter the following:
<P>
<PRE>   IP Address:     150.100.100.10

</PRE><P><LI>Click More, and enter the following:
<P>
   Obtain Address: Manually
<PRE>   Class:          B
   Net:            38500
   Subnet:         0
   Node:           25610
   Gateway:        0.0.0.0
   Name Server:    &lt;blank&gt;

</PRE><P><LI>Click OK, and close the control panel. Restart your Macintosh to
   ensure that the settings take place.
<P>
</OL>NOTE: MacTCP may not respond to network packets with its IP address until
you initiate a TCP/IP network connection from the Macintosh end. Apple has
a program available called MacPing that initializes your TCP/IP network
connection on start up. Using MacPing allows your PC to see your Macintosh.
<P>
To configure your system using Open Transport TCP/IP:

<OL><P><LI>Go to the TCP/IP control panel, and enter the following settings:
<P>
<PRE>   Connect Via:    ethernet
   Configure:      manually
   IP Address:     150.100.100.10
   Domain Name:    &lt;blank&gt;
   Subnet Mask:    255.255.0.0
   Router Address: &lt;blank&gt;
   Name Server:    &lt;blank&gt;

</PRE><P><LI>Close the control panel, and restart your Macintosh to ensure the
   settings take place.
<P>
</OL><h3>Configuring TCP/IP on Windows NT</h3>
 

<OL><P><LI>Go to the Network control panel.

<P><LI>From the Installed Network Software list box, select TCP/IP Protocol,
   and click Configure.

<P><LI>Make sure the Enable Automatic DHCP Configuration is deselected, and
   enter the following:
<P>
<PRE>   IP Address:   150.100.100.20
   Subnet Mask:  255.255.0.0

</PRE><P><LI>Make sure the Default Gateway and the Primary/Secondary WINS Server
   entries are blank.

<P><LI>Click DNS, and ensure everything is blank except for the Host Name,
   which contains the name of your Windows NT machine. Click OK.

<P><LI>Click Advanced, and ensure that Enable LMHOSTS Lookup is selected.
   Everything else should be either blank or deselected. Click OK.

<P><LI>Close the Network control panel, and restart Windows NT.

<P><LI>Find the file named Hosts.sam in the \Winnt\System32\Drivers
   directory. Make a copy and name it Hosts, leaving it in the same
   directory.

<P><LI>Edit the Hosts file, and add the following line at the bottom:
<P>
   150.100.100.10  mymac

<P><LI>From the File menu, choose Save. You are now ready to test the
<P><PRE>    connection.
</PRE><P>
</OL><h3>Configuring TCP/IP on Windows 95</h3>
 

<OL><P><LI>From the Network control panel, select TCP/IP, and click Properties.

<P><LI>Go to WINS Configuration, and select Disable WINS resolution.

<P><LI>Go to the IP Address, select Specify an IP Address, and enter:
<P>
<PRE>   IP Address:   150.100.100.20
   Subnet Mask:  255.255.0.0

</PRE><P><LI>Go to Gateway, and make sure it is empty.

<P><LI>Go to DNS cofiguration, and select Disable DNS.

<P><LI>Click OK, and close out the Network control panel. Restart Windows 95.

<P><LI>In the main Windows directory, usually C:\Windows, find the file named
   Hosts.sam. Copy the file, and name it Hosts. Place the file in the main
   Windows directory.

<P><LI>Edit the Hosts file, and add the following line at the bottom:
<P>
   150.100.100.10  mymac

<P><LI>From the File menu, choose Save. You are now ready to test the
   connection.
<P>
</OL>NOTE: If the MSN login dialog box appears when you are connecting, click
Cancel to continue. To disable this behavior, run the Internet applet from
the control panel and clear the UseAutoDial option in the AutoDial Tab.
<P>
<P><h3>Testing the TCP/IP Connection</h3>
 
<P>
To test the network connection, use the Ping command line utility on the
PC. Open an MS-DOS/Command window and type one of the following:
<P>
<PRE>   C:\&gt;ping mymac

   -or-

   C:\&gt;ping 150.100.100.10

</PRE></OL>Replace 150.100.100.10 and mymac with whatever you set in the Hosts file.
Using mymac causes the TCP/IP service to look up the name in the Hosts file
to resolve it to an IP address. The expected output from Ping looks like
the following:
<P>
<PRE>   C:\&gt;ping 150.100.100.10

   Pinging 150.100.100.10 with 32 bytes of data:

   Reply from 150.100.100.10: bytes=32 time=10ms TTL=254
   Reply from 150.100.100.10: bytes=32 time&lt;10ms TTL=254
   Reply from 150.100.100.10: bytes=32 time&lt;10ms TTL=254
   Reply from 150.100.100.10: bytes=32 time&lt;10ms TTL=254

</PRE>If you receive a Bad IP address error, you need to check your Hosts file
entry to ensure that the IP address and name match what is set on the
Macintosh.
<P>
If you receive a Request timed out error, you need to check the physical
network connection and ensure that the IP address in the Hosts file
matches what is set on the Macintosh. If you are running MacTCP, you can
run MacPing to initialize the TCP/IP network.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: listbox<BR>
Keywords          : VCMac kb3rdparty kbnetwork<BR>
Version           : WINNT:4.0;MAC:4.0;<BR>
Platform          : MACINTOSH NT WINDOWS<BR>
Issue type        : kbhowto<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 8, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
