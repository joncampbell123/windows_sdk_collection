

<HTML>
<HEAD>
<TITLE>FIX: C4713: reg86.c, line 3799 </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q114069">
<META NAME="KBModify" CONTENT="1997/09/18">
<META NAME="KBCreate" CONTENT="1994/04/24">
<META NAME="Keywords" CONTENT="CLIss kb16bitonly kbbuglist kbfixlist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The compiler generates the following internal compiler error message when the sample program below is compiled with /Oe or /Ox.     warning C4713: func: internal compiler error; restarting       (compiler file '@(#)reg86.c:1.26', line 3799)  The in...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAOT,QBFY,QAB4,QDKW,QA4Q,QAR4,QAKP,QBXT,QA7H,QA5V,QA26,QANG,QAMB,QAIB,QBV8 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: C4713: reg86.c, line 3799</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q114069</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00
WINDOWS
kbtool kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE), included with:
<P><PRE>    - Microsoft Visual C++ for Windows, version 1.0
</UL></PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The compiler generates the following internal compiler error message when
the sample program below is compiled with /Oe or /Ox.
<P>
<PRE>   warning C4713: func: internal compiler error; restarting
      (compiler file '@(#)reg86.c:1.26', line 3799)

</PRE>The internal compiler error is triggered by using the global register
allocation optimization (/Oe). Note that global register allocation is
included with the /Ox compiler option.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The C4713 message is just a warning. The compiler realizes a problem has
occurred due to the global register allocation optimization and restarts
the compile without the optimization.
<P>
To avoid the message, one option is to use the fast compiler (/f) instead
of the optimizing compiler. Another option is to disable the global
register allocation optimization. This can be done by either not using the
/Oe or /Ox options on the command line or by using #pragma optimize to
disable the optimization in the source file. The comments in the sample
below demonstrate using the #pragma to work around the problem.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the Microsoft products
listed above. This is not a problem in Visual C++, 32-bit Edition. This
problem was corrected in Visual C++ version 1.5.
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>/* Compile options needed: /c /f- /Oe
*/

</PRE>typedef char ARRAY[8];
<P>
typedef struct _table1
{
<PRE>    ARRAY aItem[4];
</PRE>} TABLE1;
<P>
typedef struct _table2
{
<PRE>    int nItem;
    union
    {
     TABLE1 far * t1Item;
    };
</PRE>} TABLE2;
<P>
typedef struct _table3
{
<PRE>    TABLE2 t2Item[4];
</PRE>} TABLE3;
<P>
<PRE>// Uncomment for work around
// #pragma optimize ("e", off)

void func(
    TABLE3 far * t3Param,
    int nParam)
</PRE>{
<PRE>    TABLE2 far * pt2Local1;
    TABLE2 far * pt2Local2;
    int nLocal1;
    int nLocal2;
    ARRAY far * paLocal;
    int nIndex;

    pt2Local1 = &amp;t3Param-&gt;t2Item[2];
    pt2Local2 = &amp;t3Param-&gt;t2Item[1];

    nLocal1 = pt2Local1-&gt;nItem;
    nLocal2 = pt2Local2-&gt;nItem;

    if (nParam)
     paLocal = pt2Local1-&gt;t1Item-&gt;aItem;

    for (nIndex = 0; nIndex &lt; nLocal2; )
     nIndex++;
</PRE>}
<P>
<PRE>// Uncomment for work around
// #pragma optimize ("", on)
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 8.00 1.00<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubcategory: CLIss<BR>
Keywords          : CLIss kb16bitonly kbbuglist kbfixlist kbtool<BR>
Version           : 1.00<BR>
Platform          : WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
