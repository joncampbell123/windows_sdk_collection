

<HTML>
<HEAD>
<TITLE>How _clearscreen(), ANSI.SYS Affect Text and Cursor Color </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q74614 ">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1991/07/24">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The text and cursor color in a Microsoft C program are affected in various ways by the _settextcolor() function in conjunction with the _clearscreen() function and whether or not the ANSI.SYS driver is loaded.  MORE INFORMATION  The following are s...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPG,QAG9,QATZ,QATY,QAL3,QATX,QAMB,QAO2,QBE7,QBE6,QBFY,QAY5,QBXS,QA5A,QAEF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>How _clearscreen(), ANSI.SYS Affect Text and Cursor Color</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q74614 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10 6.00 6.00a 6.00ax 7.00 | 1.00 1.50
<PRE>MS-DOS                      | WINDOWS
</PRE>kbprg
<P>
 
The information in this article applies to:

<UL><LI>The C Run-time (CRT), included with:
<P>
<P><PRE>    - Microsoft C for MS-DOS, versions 5.1, 6.0, 6.0a, and 6.0ax
    - Microsoft C/C++ for MS-DOS, version 7.0
    - Microsoft Visual C++ for Windows, versions 1.0 and 1.5
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The text and cursor color in a Microsoft C program are affected in
various ways by the _settextcolor() function in conjunction with the
_clearscreen() function and whether or not the ANSI.SYS driver is
loaded.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The following are several ways text and cursor color are affected in a
C application:

<UL><LI>The function _settextcolor() sets the text color for the functions
   _outtext() and _outmem() only.

<LI>The function _clearscreen() will set the text and cursor color to
   white by default, but will use a different color if one has been
   previously set [for example, with _settextcolor()].

<LI>The ANSI.SYS driver defines functions that change display graphics,
   control cursor movement, and reassign keys. Text output is
   controlled by ANSI.SYS if it is installed.
<P>
</UL>The following table summarizes how various colors are affected by
combinations of ANSI.SYS, _clearscreen(), and _settextcolor(). An "X"
indicates that the displayed color was the color set by
_settextcolor(). The results were generated by running the sample code
below with and without ANSI.SYS installed.
<P>
 
<PRE>| Combinations of ANSI.SYS  | _outtext() | printf() | User  | Cursor |
| and C Functions*          |  Output    | Output   | Input |        |
|---------------------------|------------|----------|-------|--------|
|1. ANSI/CLRSCR/SETTXTCLR   |      X     |          |       |        |
|2.      CLRSCR/SETTXTCLR   |      X     |          |       |        |
|3. ANSI/SETTXTCLR/CLRSCR   |      X     |          |       |   X    |
|4.      SETTXTCLR/CLRSCR   |      X     |    X     |   X   |   X    |
|--------------------------------------------------------------------|
| *ANSI=ANSI.SYS   CLRSCR=_clearscreen()   SETTXTCLR=_settextcolor() |
</PRE> 
<P>
In the first case, the color of _outtext() is affected by
_settextcolor(). The only way that the output of printf(), what the
user types, and the cursor color can be affected is by use of ANSI
escape sequences.
<P>
In the second case, the color of _outtext() is affected by
_settextcolor().
<P>
In the third case, the color of _outtext() is affected by
_settextcolor(). When the subsequent _clearscreen() is performed, the
text color and the cursor color are affected. However, because
ANSI.SYS is installed, the output of printf() and what the user types
appear in the default white. The only way to change those colors is
through the ANSI escape sequences.
<P>
In the fourth case, the color of _outtext() is affected by
_settextcolor(). When the subsequent _clearscreen() is performed, the
text color and the cursor color are affected.
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>/* Compile options needed: none
*/

#include &lt;graph.h&gt;
#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;

void main( void )
</PRE>{
<PRE>   char line[81];        /* declare a buffer for user input */

/* Clear the screen first, then set the text color. Pause so that you
   can observe the color of the text output with _outtext() and
   printf(), the user input, and the cursor.
*/
   _clearscreen( _GCLEARSCREEN );
   _settextcolor( 5 );
   _outtext( "Enter your name: " );
   gets( line );
   _outtext( "\n\nUsing outtext: Hello " );
   _outtext( line );
   printf( "\nUsing printf: Press any key to continue...\n"  );
   while( !kbhit( ) );
   getch( );

/*  Set the text color first, then clear the screen.  */

   _settextcolor( 3 );
   _clearscreen( _GCLEARSCREEN );
   _outtext( "Enter your name: " );
   gets( line );
   _outtext( "\n\nUsing outtext: Goodbye " );
   _outtext( line );
   printf( "\nUsing printf: The end.\n" );
</PRE>}
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.10 6.00 6.00a 6.00ax 7.00 1.00 1.50<BR>
KBCategory: kbprg<BR>
KBSubcategory: CRTIss<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
