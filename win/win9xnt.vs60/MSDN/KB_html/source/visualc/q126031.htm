

<HTML>
<HEAD>
<TITLE>PRB: Repeated Blank Screens During Build Process in VC++ </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q126031">
<META NAME="KBModify" CONTENT="1998/01/07">
<META NAME="KBCreate" CONTENT="1995/02/13">
<META NAME="Keywords" CONTENT="vc20setup vc40setup vc50setup VwbIss kbsetup">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When you build from the development environment in Visual C++, the screen repeatedly flashes to a blank text mode screen with no text on it. A text cursor may show up if you move the mouse while the blank screen is showing. The screen returns to Vi...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBXS,QABA,QBWS,QANE,QBWQ,QASR,QBJM,QBJL,QBFY,QAKJ,QDIZ,QA56,QA55,QAFI V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Repeated Blank Screens During Build Process in VC++</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  January 7, 1998</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q126031</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The development environment, included with:
   Microsoft Visual C++, 32-bit Editions, versions 2.0, 2.1, 2.2, 4.0,
   4.1, 4.2, and 5.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you build from the development environment in Visual C++, the screen
repeatedly flashes to a blank text mode screen with no text on it. A text
cursor may show up if you move the mouse while the blank screen is showing.
The screen returns to Visual C++ and then blanks out again. The blanking
occurs at least twice but possibly more times during the entire build
process.
<P>
<P><h2>CAUSE</h2>
 
<P>
The default settings for the Command Prompt on Windows NT or Windows95
is set to full screen.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Depending on whether you are on Windows NT or Windows95, the resolution
process is different.

<OL><P><LI>For Windows NT you must set the options for one of the following to
   "Windowed."
<P>
   - The environment settings of all Windows NT Command Prompts.
<P>
<P><PRE>     -or-
</PRE><P>
   - The program Vcspawn.exe, which Visual C++ runs as a background
<P><PRE>     process.
</PRE>
<P><LI>For Windows95, you must reset the options for one or all of the
   following.
<P>
   _Default.pif
   Conagent.exe
<P>
</OL>Follow the instructions given in the "More Information" section below.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
On Windows NT, Visual C++ repeatedly invokes a background process called
Vcspawn.exe for each command-line tool executed by the development
environment. Tools such as Cl.exe, Link.exe, and Bscmake.exe run in the
Vcspawn.exe environment, which is a 32-bit console application.
<P>
Usually Vcspawn.exe is invoked as a hidden window and you never see it.
However, if the setting for Vcspawn.exe is in "full screen" mode, the
screen switches to text mode each time Vcspawn.exe is invoked. No text is
actually sent to the vcspawn screen, so the screen appears blank.
<P>
On Windows95, Vcspawn.exe is affected by the presence of the _Default.pif
and the settings of the Conagent.exe file. If a _Default.pif is in the
path, its properties will be used for all invoked console applications.
Often, a _Default.pif will be left over from a previous Windows 3.1 or 3.11
installation. Windows95 will not create one itself during installation. If
_Default.pif is not present, Windows95 will use the properties of
Conagent.exe.
<P>
<P><h3>On WINDOWS NT :</h3>
 
<P>
Use one of the following procedures to correct the problem.
<P>
<P><h3>Steps to Reset Default Configuration of ALL Command Prompts</h3>
 

<OL><P><LI>Go to the Windows NT Control Panel.

<P><LI>Double click the Console icon.

<P><LI>Choose the General Settings or Options tab.

<P><LI>Select Window under the Display Options group.

<P><LI>Click OK.
<P>
   - or -
<P>
</OL><h3>Steps to Reset Configuration for Just Vcspawn.exe by Using Regedt32</h3>
 
<P>
Use the following process to add a registry entry so only vcspawn's
settings are not "full screen."

<OL><P><LI>Run Regedt32, which is located in the \System32 subdirectory of
   the Windows NT root directory.

<P><LI>Open \HKEY_CURRENT_USER\Console branch of the registry tree.

<P><LI>Choose Add Key on the Edit menu to add a node called:
<P>
<P><PRE>      C:_MSVC20_BIN_vcspawn.exe
</PRE><P>
   If Visual C++ is installed in a different directory or on a
   different drive, use the following form for the Key Name:
<P>
<P><PRE>      &lt;drive&gt;:_DIR1_DIR2_DIR3..._vcspawn.exe
</PRE><P>
   Leave the Class field empty.

<P><LI>With "C:_MSVC20_BIN_vcspawn.exe" highlighted, click Add Value
   on the Edit menu. In the Value Name, type: FullScreen. In the Data Type,
   choose REG_DWORD. Click OK, and then add a value of 0 (zero).

<P><LI>Exit the registry editor, and restart Visual C++.
<P>
   - or -
<P>
</OL><h3>Steps to Reset Configuration for Just Vcspawn.exe Without Using Regedt32</h3>
 
<P>
If you are not familiar with the system registry and do not want to
reset the default configurations for the Command Prompt, use the
following procedure to reset the settings for vcspawn. This procedure
adds the same registry entry.
<P>
NOTE: if you have a fast machine, you may have trouble performing some
of the following steps and you need a larger project. Therefore, if you
have a fast machine, use one of the previous methods to work around the
problem.
<P>
If you are compiling a large project, you can switch tasks and see the
minimized Vcspawn.exe icon. Resetting the attributes of this icon will
reset the attributes of vcspawn.

<OL><P><LI>Open a large project, such as the sample project CTRLBARS, or
   SUPERPAD supplied with Visual C++.

<P><LI>Choose to "Rebuild All."

<P><LI>Press ALT+TAB to see the minimized vcspawn icon in the corner of the
   screen.

<P><LI>Quickly open the system menu, and follow the steps shown in the
   "Steps to Reset Default Configuration of ALL Command Prompts" section
   of this article.
<P>
</OL>NOTE: You must save the configuration before the development environment
finishes the build process. If you do not, the Vcspawn.exe window will
be terminated, the icon will disappear and any changes you made will not
be saved.
<P>
<P>
<P><h3>ON WINDOWS 95 :</h3>
 
<P>
Use one of the following procedures to correct the problem.
<P>
<P><h3>Steps to Reset Configuration of _Default.pif</h3>
 

<OL><P><LI>In the Explorer, choose the _DEFAULT file with the MS-DOS icon next
   to it in your Windows95 directory.

<P><LI>Single click the right mouse button. Choose "Properties".

<P><LI>Select the "Screen" tab.

<P><LI>Choose the "Window" option and click on "Apply" and then "OK".
<P>
   - or -
<P>
</OL><h3>Steps to Reset Configuration of Conagent.exe</h3>
 

<OL><P><LI>Make sure there is no _Default.pif file in your path, specifically
   check your Windows95 directory.

<P><LI>Follow the instructions  for steps 2, 3, and 4 above given for resetting
   _Default.pif on the file Conagent.exe in your Windows95 directory.
<P></OL>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional query words: 2.00 2.10 2.20 4.00 4.10 4.20 5.00 VWB cl link<BR>
Keywords          : vc20setup vc40setup vc50setup VwbIss kbsetup<BR>
Version           : winnt:2.0,2.1,2.2,4.0,4.1,4.2,5.0<BR>
Platform          : winnt<BR>
Issue type        : kbprb<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  January 7, 1998</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
