

<HTML>
<HEAD>
<TITLE>HOWTO: Set Up and Troubleshoot Macintosh Communications </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q137450">
<META NAME="KBModify" CONTENT="1997/10/06">
<META NAME="KBCreate" CONTENT="1995/09/27">
<META NAME="Keywords" CONTENT="MFILEIss kbtshoot">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  This article is designed to help you properly set up and troubleshoot network and serial communications between a PC and a Macintosh for file transfer and debugging.  This article is divided into four sections:  1. Verify network communication para...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABI,QDO9,QBTX,QAVZ,QAA1,QBWS,QBFY,QAVX,QDI2,QAUJ,QAFI,QAI5,QBAO,QABA,QDJ9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>HOWTO: Set Up and Troubleshoot Macintosh Communications</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 6, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q137450</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Visual C++, Macintosh Cross-Development, version 2.0
</UL> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
This article is designed to help you properly set up and troubleshoot
network and serial communications between a PC and a Macintosh for file
transfer and debugging.
<P>
This article is divided into four sections:

<OL><P><LI>Verify network communication parameters
</OL>2. Verify serial communication parameters
3. Troubleshoot file transfers
4. Troubleshoot remote debugging
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h2>SECTION 1: VERIFY NETWORK COMMUNICATION PARAMETERS</h2>
 
<P>
<P><h3>Verify the Physical Network Connection</h3>
 
<P>
What type of network cable are you using: ThinNet (coax cable that looks
like cable TV wire), ThickNet (fat cable with 15 pin connectors on the
ends), or Twisted Pair (looks like telephone wire)?
<P>
ThinNet and ThickNet are considered active networks and allow direct
connections between the two computers. Twisted Pair is a passive network
and requires both computers to be plugged into a net hub or similar device
before the network connection can be active between the two machines.
Simply hooking up two machines using Twisted-pair will not work unless one
of the network cards is a net hub or there is a net hub between the two
network cards.
<P>
<P><h3>Verify the Macintosh Network Settings</h3>
 

<OL><P><LI>Verify the Macintosh communications setup by clicking the Macintosh
   Control Panel on the Apple Menu (the Apple icon at the leftmost position
   of the menu bar). Verify these settings:
<P>
   a. Sharing Setup control panel
<P>
<P><PRE>      Under Network Identity, type and note the Macintosh Name. Don't
      worry about the Macintosh Owner field; Visual C++ doesn't use it.
</PRE><P>
   b. Network control panel
<P>
<P><PRE>      Ensure you are using EtherTalk. Note the Zone you are located in. If
      it says &lt; No zones available &gt;, you are in a peer-to-peer network and
      no zone is required.
</PRE><P>
   C. Visual C++ Debug Monitor control panel
<P>
<P><PRE>      Make sure this and the other Visual C++ Macintosh components are
      installed. Ensure that Network (AppleTalk) is highlighted in
      the connection list. Click Settings; then type and note the debug
      password (Case sensitive).
</PRE>
<P><LI>Restart the Macintosh computer to ensure that the current network and
   debug settings are used.

<P><LI>Make sure the Visual C++ File Utility and WLM Debug Output are both up
   and running. You can check this by looking in the Application Menu.
   Click the icon that appears in the far right of the menu bar. This is
   similar to the Task List in Windows.
<P>
   NOTE: These can be made to start automatically when the computer starts
   by creating aliases to these two programs and moving the aliases to the
   System Folder:Startup Items: folder. To create an alias, click the
   program icon and then click Make Alias on the Finder File menu.
<P>
   You are now finished verifying the Macintosh communications setup
<P>
</OL><h3>Verify the PC Network Settings</h3>
 

<OL><P><LI>Ensure that Appletalk is installed and running under Windows NT. Check
   this by clicking the Networks icon in the Control Panel. If it isn't
   installed, click Add Protocol, and add AppleTalk.

<P><LI>Within the Visual C++ development environment, complete these steps:
<P>
   a. On the Project menu, click Settings, and then click the Debug tab.
<P>
<P><PRE>      "Executable for Debug Session:"
</PRE><P>
<PRE>          This is the location for the executable on the local Windows NT
          computer. Under a Debug build, it is usually here:

             &lt;project_dir&gt;\MacDebug\MyProgram.EXE

          For Release build, it is usually here:

             &lt;project_dir&gt;\MacRel\MyProgram.EXE

      "Remote Executable Path and File Name:"

         This is where you want the remote executable to be placed.
         Macintosh uses colons (:) as a separator between folders
         (analogous to directories on PCs). Unlike PCs, Macintosh
         hard drives are addressed by their full volume names as
         opposed to single hard drive letters. The proper format for
         specifying the full path on the Macintosh is:

             &lt;Macintosh HD name&gt;:&lt;Folder&gt;:&lt;Program Name&gt;

         So, to specify a filename "My MacProg" to be stored on a hard
         drive named "BobHD" in a folder (directory) named "Testing",
         you would enter:

             BobHD:Testing:My MacProg

   b. On the Tools menu, click Options, and click the Debug tab.

      1) Ensure that Remote Debugging is enabled.

      2) Click the Connection button.

          - Ensure that Platform: is set to Macintosh.

          - Ensure that Connection: is set to Network (AppleTalk).

          - Click Settings, and make sure Macintosh Name, Macintosh Zone,
            and Debug Monitor Password all match up with what is set on the
            Macintosh (see previous section). If there is no Zone, enter
            "*" as Macintosh Zone.

</PRE></OL><h2>SECTION 2: VERIFY SERIAL COMMUNICATION PARAMETERS</h2>
 
<P>
Due to a bug with serial communications on the Visual C++ Cross-Development
Edition, the network Macintosh Name and Zone are required.
<P>
Ensure that you have the null modem cable properly connected between the
two computers. Also note which serial port you are using on both machines.
For Windows NT, it may be COM1, COM2, COM3, or COM4. For Macintosh, it may
be either MODEM (phone handset symbol) or PRINTER (printer symbol).
<P>
<P><h3>Verify the Macintosh Serial Settings</h3>
 

<OL><P><LI>Verify the Macintosh serial settings by clicking the Macintosh Control
   Panel on the Apple Menu (the Apple icon at the leftmost position of the
   menu bar). Verify these settings:
<P>
   a. Sharing Setup control panel
<P>
<P><PRE>      Under Network Identity, type and note the Macintosh Name. Don't
      worry about the Macintosh Owner field. Visual C++ doesn't use it.
</PRE><P>
   b. Network control panel
<P>
<P><PRE>      Note the Zone in which you are located, even if it says &lt; No zones
      available &gt;.
</PRE><P>
   c. Visual C++ Debug Monitor control panel
<P>
<P><PRE>      Make sure this and the other Visual C++ Macintosh components are
      installed. Ensure that Serial is highlighted in the connection
      list. Click Settings. Note the connection settings and make sure
      you are using the correct port the serial cable is attached to.
</PRE>
<P><LI>Restart the Macintosh to ensure the current serial and debug settings
   are used.

<P><LI>Make sure the Visual C++ File Utility and WLM Debug Output are both up
   and running. You can check this by looking in the Application Menu.
   Click the icon that appears in the far right of the menu bar. This is
   similar to the Task List in Windows.
<P>
   NOTE: These can be made to start automatically when the computer starts
   by creating aliases to these two programs and moving the aliases to the
   System Folder:Startup Items: folder. To create an alias, click the
   program icon and then click Make Alias on the Finder File menu.
<P>
   You are now finished verifying the Macintosh communications setup
<P>
</OL><h3>Verify the PC Serial Settings</h3>
 
<P>
Verify the PC serial settings within the Visual C++ development environment
by following these steps:

<OL><P><LI>On the Project menu, click Settings, and click the Debug tab.
<P>
   Executable for Debug Session
<P>
<P><PRE>      This is the location for the executable on the local Windows NT
      computer. Under a Debug build, it is usually here:
</PRE><P>
<PRE>         &lt;project_dir&gt;\MacDebug\MyProgram.EXE

      For a Release build, it is usually here:

         &lt;project_dir&gt;\MacRel\MyProgram.EXE

   Remote Executable Path and File Name

      This is where you want the remote executable to be placed.
      Macintosh uses colons (:) as a separator between folders
      (analogous to directories on PCs). Unlike PCs, Macintosh
      hard drives are addressed by their names as opposed to single
      letters. The proper format for specifying the full path on the
      Macintosh is:

         &lt;Macintosh HD name&gt;:&lt;Folder&gt;:&lt;Program Name&gt;

      For example, to specify a filename "My MacProg" to be stored on a
      hard drive named "BobHD" in a folder (directory) named "Testing,"
      you would enter this:

         BobHD:Testing:My MacProg

</PRE><P><LI>On the Tools menu, click Options, and click the Debug tab.
<P>
   a. Ensure that Remote Debugging is enabled.
<P>
   b. Click the Connection button.
<P>
   c. Set Platform: to Macintosh.
<P>
   d. Set Connection: to Network (AppleTalk).
<P>
   e. Click Settings and make sure Macintosh Name and Macintosh Zone match
<P><PRE>      up with what is set on the Macintosh. If there is no zone or
      Macintosh name, type anything for the Macintosh name and "*" as the
      Macintosh Zone.
</PRE><P>
   f. Leave the Debug Monitor Password blank, and click OK.
<P>
   g. Set Connection: to Serial, and click OK. You are now finished
<P><PRE>      verifying the PC communications setup.
</PRE><P>
</OL><h2>SECTION 3: TROUBLESHOOT FILE TRANSFERS (MFILE)</h2>
 
<P>
MFILE is the utility that Visual C++ uses to transfer files between the PC
and the Macintosh. This is usually executed by: the build process, the
"Update Remote Output File" option under the Tools menu, or a command
entered at the command line.

<OL><P><LI>Ensure that the communication settings are correct on both the Macintosh
   and the PC as documented in Section 1 or 2 of this article. Improper
   configuration and setup are the main causes of communication problems.

<P><LI>If you are using a serial connection:
<P>
   a. Exit Visual C++. Visual C++ takes over the serial port when it
<P><PRE>      starts. This will prevent you from testing the serial connection.
</PRE><P>
   b. Try to use Terminal or a similar communications program to
<P><PRE>      communicate to a communications program running on the Macintosh.
      This is all documented in the Macintosh Components Help file on the
      Macintosh in the Visual C++ 2.0 Folder. There is a help section
      called "Troubleshooting: Communication Problems" that explains this
      in more detail.
</PRE><P>
   c. Ensure that the Visual C++ File Utility is up and running. As noted
<P><PRE>      in Section 2 of this article, you need to make sure the Macintosh
      Name and Zone are entered into the Network connections settings on
      the PC side.
</PRE>
<P><LI>If you are using a network connection:
<P>
   a. Ensure that the cables are connected properly. If you are on a
<P><PRE>      network with other computers, check to see if you can "see" other
      computers or printers on the network.
</PRE><P>
   b. Ensure that the network protocols are installed and running on each
<P><PRE>      of the computers.
</PRE><P>
   c. Go through Section 1 of this article, and verify that everything is
<P><PRE>      is set correctly.
</PRE>
<P><LI>Ensure that the Macintosh has a name in the Sharing Setup applet in the
   Control Panel. Also make sure the name set in the Connection Settings on
   the PC matches. Check the Help file mentioned in Step 2 of this section
   for additional suggestions.

<P><LI>If you are receiving an MFILE error (MFxxxx), check to make sure the
   Visual C++ File Utility is actually running and that it is in the user's
   Startup Folder on the Macintosh. This error occurs when the Macintosh
   can't be found or the Visual C++ File Utility is not started.

<P><LI>If you are receiving one of the following errors, make sure the name of
   the remote output file is specified on the Debug tab reached by clicking
   Settings on the Project menu:
<P>
<P><PRE>    - MF4017 (no Mac specified for volume mount) or
    - MF4007 (all source files must be on the Mac xxx is not)
</PRE><P>
   The typical cause of these errors is that the name of the remote output
   file is not entered correctly. Please refer to Section 1 or 2 of this
   article for a discussion of how it should be entered.
<P>
</OL><h2>SECTION 4: TROUBLESHOOT REMOTE DEBUGGING PROBLEMS</h2>
 
<P>
Ensure the communication settings are correct on both the Macintosh and PC
as documented in Section 1 or 2 of this article. Improper configuration and
setup are the main causes of communication problems.

<OL><P><LI>Check for conflicting INITs. INITs are like device drivers. They are in
   the System Folder in the Extensions Folder. There is already at least
   one known conflict with the Procomm SCSI drivers (see the release
   notes). Remove any unnecessary INITs.

<P><LI>Try to run the application standalone. Just like the Intel debugger, a
   very unstable application can cause unusual behavior in the debugger.

<P><LI>Try building and debugging one of the sample applications such as HELLO.
   If you can debug the sample application, there may simply be a problem
   with your application binary itself.

<P><LI>Restart the Macintosh. Sometimes the Macintosh may have been in an
   unstable state that prevented proper debugging to occur.

<P><LI>Try switching the connection from Serial to Network or vice-versa. This
   will require use of a Null-modem cable for a serial connection. It may
   be just the physical connection or driver problem.

<P><LI>If you are using a Macintosh with a 680x0 processor, check the Memory
   Control Panel. In one unconfirmed case, 32-bit addressing being off
   caused a debugger failure.

<P><LI>If possible, try accessing another Macintosh. If this works, you may
   have a configuration problem with the Macintosh or a conflict with at
   least one of the INITs installed.
</OL> 
<PRE>Keywords          : MFILEIss kbtshoot
Version           : MAC:2.0;
Platform          : MACINTOSH
Issue type        : kbhowto</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 6, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
