

<HTML>
<HEAD>
<TITLE>PRB: Using STL in Windows Program Can Cause Min/Max Conflicts </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q143208">
<META NAME="KBModify" CONTENT="1997/07/25">
<META NAME="KBCreate" CONTENT="1996/01/28">
<META NAME="Keywords" CONTENT="STLIss kb3rdparty">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  A windows-based program that uses the Standard Template Library (STL) will not compile, and it generates several invalid parameter and syntax errors.  CAUSE =====  The problem is caused by conflicting definitions of min and max. Min and max are def...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAUD,QA36,QAH4,QDL9,QDKS,QBWQ,QBWO,QBWN,QABO,QBA8,QAG7,QABB,QBFY,QAY5,QAB4 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Using STL in Windows Program Can Cause Min/Max Conflicts</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q143208</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Visual C++, 32-bit Edition, version 4.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
A windows-based program that uses the Standard Template Library (STL) will
not compile, and it generates several invalid parameter and syntax errors.
<P>
<P><h2>CAUSE</h2>
 
<P>
The problem is caused by conflicting definitions of min and max. Min and
max are defined as macros in Windef.h as follows:
<P>
<PRE>   #ifndef NOMINMAX
   #ifndef max
   #define max(a,b)  (((a) &gt; (b)) ? (a) : (b))
   #endif

   #ifndef min
   #define min(a,b)  (((a) &lt; (b)) ? (a) : (b))
   #endif
   #endif  /* NOMINMAX */

</PRE>NOTE: Windef.h is included by Windows.h, which is included in nearly every
Windows-based program.
<P>
Min and max are defined as templated functions in the Standard Template
Library (STL). The following definitions of min and max can be found in the
file Algobase.h:
<P>
<PRE>   template &lt;class T&gt;
   inline const T&amp; min(const T&amp; a, const T&amp; b) {
       return b &lt; a ? b : a;
   }

   template &lt;class T, class Compare&gt;
   inline const T&amp; min(const T&amp; a, const T&amp; b, Compare comp) {
       return comp(b, a) ? b : a;
   }

   template &lt;class T&gt;
   inline const T&amp; max(const T&amp; a, const T&amp; b) {
       return  a &lt; b ? b : a;
   }

   template &lt;class T, class Compare&gt;
   inline const T&amp; max(const T&amp; a, const T&amp; b, Compare comp) {
       return comp(a, b) ? b : a;
   }

</PRE>Because the Windef.h definition is a macro, the function definitions cause
syntax errors when both Windef.h (or Windows.h) and Algobase.h (from the
STL) are included. The precise errors will depend on the order in which the
two are compiled.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Simply define the NOMINMAX preprocessor symbol. This can be done in the
Developer Studio project under Build, Settings, on the C/C++ tab, in the
Preprocessor category. This will suppress the min and max definitions in
Windef.h.
<P>
<P><h2>STATUS</h2>
 
<P>
This behavior is by design.
 
<PRE>Keywords          : STLIss kb3rdparty
Version           : 4.0
Platform          : NT WINDOWS
Issue type        : kbprb
Solution Type     : Info_Provided</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
