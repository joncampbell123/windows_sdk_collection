

<HTML>
<HEAD>
<TITLE>FIX: C2248 Error When Calling CView::OnInitialUpdate() </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q113534">
<META NAME="KBModify" CONTENT="1997/09/18">
<META NAME="KBCreate" CONTENT="1994/04/06">
<META NAME="Keywords" CONTENT="MfcDocView kbbuglist kbfixlist kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  Attempting to call CView::OnInitialUpdate() from a non-CView derived class causes the compiler to generate the following error message:     error C2248: 'OnInitialUpdate' : cannot access protected member    declared in class 'CView'  CAUSE =====  T...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QABO,QAY5,QAGI,QAB4,QAY2,QAR4,QAAP,QBV8,QAB9,QBFY,QA56,QA55,QBXF,QAC1,QDL9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: C2248 Error When Calling CView::OnInitialUpdate()</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q113534</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
<PRE>1.00    | 1.00
</PRE>WINDOWS | WINDOWS NT
kbprg kbfixlist kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft Foundation Classes (MFC), included with:
<P>
<P><PRE>    - Microsoft Visual C++ for Windows, versions 1.0
    - Microsoft Visual C++ 32-bit Edition, version 1.0
</UL></PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
Attempting to call CView::OnInitialUpdate() from a non-CView derived class
causes the compiler to generate the following error message:
<P>
<PRE>   error C2248: 'OnInitialUpdate' : cannot access protected member
   declared in class 'CView'

</PRE><h2>CAUSE</h2>
 
<P>
The CView class contains the function OnInitialUpdate(), which is called by
the framework after the view is attached to a document but before the view
is initially displayed. OnInitialUpdate() is declared as a protected member
of the CView class. Protected member functions cannot be accessed by
objects of another class type unless that class is derived from the
protected member function's class or is declared to be a friend of the
protected member function's class.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in the Microsoft Foundation
Classes (MFC) version 2.0. The problem was corrected in MFC version 2.5 and
MFC version 3.0.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, do one of the following:

<UL><LI>Upgrade to Visual C++ version 1.5. MFC version 2.5 supplied with Visual
   C++ version 1.5 for Windows declares the OnInitialUpdate() function as a
   public member of the CView class.
<P>
   -or-

<LI>Use the CWnd::SendMessage function to send a WM_INITIALUPDATE message to
   the view. For example:
<P>
<P><PRE>      class CAnotherClass
      {
<PRE></PRE>          void MemberFunction()
          {
              CDerivedView * pView = new CDerivedView;

              if( pView != NULL )
                  pView-&gt;SendMessage(WM_INITIALUPDATE);
          }
      };

   -or-

</PRE><LI>Derive from CView and declare the class where OnInitialUpdate() is being
   called from as a friend. For example:
<P>
<P><PRE>      class CDerivedView : public CView
      {
<PRE></PRE>          friend class CAnotherClass;

       public:
           virtual void OnDraw(CDC* pDC);
       };

   -or-

</PRE><LI>Derive from CView and override the OnInitialUpdate() member function,
   making the override a public member of the derived class. For example:
<P>
<P><PRE>      class CDerivedView : public CView
      {
      public:
<PRE></PRE>          virtual void OnDraw(CDC* pDC);
          virtual void OnInitialUpdate(){ CView::OnInitialUpdate(); }
      };
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 1.00 2.00 2.10 CScrollView CFormView<BR>
KBCategory: kbprg kbfixlist kbbuglist<BR>
KBSubcategory: MfcDocView
<P>

<BR>
Keywords          : MfcDocView kbbuglist kbfixlist kbprg<BR>
Technology        : kbMfc<BR>
Version           : 1.00    | 1.00<BR>
Platform          : NT WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
