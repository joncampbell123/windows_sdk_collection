

<HTML>
<HEAD>
<TITLE>FIX: IDE Debugger Truncates Floating Point Numbers </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q155622">
<META NAME="KBModify" CONTENT="1997/09/19">
<META NAME="KBCreate" CONTENT="1996/09/03">
<META NAME="Keywords" CONTENT="vcbuglist410 vcfixlist500 WBDebug kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  If you change the Language Settings under the operating system to a language that uses a comma as the decimal separator, recalculating any floating point numbers in the QuickWatch window in the integrated debugger truncates the floating point numbe...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAAQ,QBC9,QBC8,QANO,QAHH,QAYL,QAR4,QATL,QATK,QAKC,QABA,QBWI,QBC6,QAH4,QAFO V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: IDE Debugger Truncates Floating Point Numbers</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q155622</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The integrated debugger included with:
   - Microsoft Visual C++, 32-bit Edition, versions 4.0, 4.1, 4.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
If you change the Language Settings under the operating system to a
language that uses a comma as the decimal separator, recalculating any
floating point numbers in the QuickWatch window in the integrated debugger
truncates the floating point number. Thereafter, incorrect results may be
generated from program execution. To reproduce the problem, please see
“More Information” below.
<P>
The following language settings may cause this problem.
<P>
<PRE>   German      Italian    Portuguese    Swedish    Norwegian
   Indonesian  Icelandic  French        Finnish   Dutch
   Danish      Catalan    Basque

</PRE><h2>RESOLUTION</h2>
 
<P>
To work around the problem, use one of the following suggestions:

<UL><LI>In the QuickWatch window, cast the variable you plan to watch to the
   proper type. For example, if you plan to watch variable “a” in the
   following program, because “a” is defined as type double, cast it to a
   double in the QuickWatch window. That is, type “(double)a” (without the
   quotation marks) in the QuickWatch window.
<P>
   -or-

<LI>In the QuickWatch window, add zero to the variable. For example, in the
   following program, type “a+0” (without the quotation marks) in the
   QuickWatch window to watch variable “a”.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article. This bug was corrected in Visual C++
version 5.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
You can use the following steps to reproduce the problem:

<OL><P><LI>Use Control Panel to change language settings to German(Standard), then
   reboot the system.

<P><LI>Build an application using the source file below:
<P>
<PRE>   /* Compile options needed: Developer Studio default console application
   */

   #include &lt;stdio.h&gt;

   void main()
   {
      double a = 1.99;
      double b;

      printf("a = %g\n", a);

      b = a;  // At this point do QuickWatch and Recalculate for 'a'.

      printf("b = %g\n", b);
   }

</PRE><P><LI>Start debugging and get to the commented line "b = a".

<P><LI>Use QuickWatch for “a”; it will show the correct value 1.99.

<P><LI>Click Recalculate one or two times more.
<P>
</OL>Result: The value of “a” is changed to 1.0, and the program's output will
be wrong when execution is continued to next line.
 
<PRE>Keywords          : vcbuglist410 vcfixlist500 WBDebug kbprg
Version           : 4.0 4.1 4.2
Platform          : NT WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 19, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
