

<HTML>
<HEAD>
<TITLE>Example Using _dos_findfirst() to Get the Time and Date </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q39916 ">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1988/12/30">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The code below illustrates how to extract the time and the date out of the C run-time function _dos_findfirst(). The program prints out the time and the date of the creation of the file  test .  This information also applies to QuickC.  MORE INFORM...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QACE,QBFY,QAU3,QAMR,QAVX,QAVW,QAML,QAFH,QA4F,QAH4,QAKC,QAEF,QBC6,QAKD,QAGJ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Example Using _dos_findfirst() to Get the Time and Date</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q39916 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
5.10 6.00 6.00a 6.00ax 7.00 | 5.10 6.00 6.00a | 1.00
<PRE>MS-DOS                      | OS/2            | WINDOWS
</PRE>kbprg kbcode
<P>
<P>
 
The information in this article applies to:

<UL><LI>The C Run-time (CRT), included with:
<P>
<P><PRE>    - Microsoft C for MS-DOS, versions 5.0, 5.1, 6.0, 6.0a, and 6.0ax
    - Microsoft C for OS/2, versions 5.1, 6.0, and 6.0a
    - Microsoft C/C++ for MS-DOS, version 7.0
    - Microsoft Visual C++ for Windows, version 1.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The code below illustrates how to extract the time and the date out of
the C run-time function _dos_findfirst(). The program prints out the
time and the date of the creation of the file "test".
<P>
This information also applies to QuickC.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The time at which the file was last written to is returned as a binary
value in a word formatted as follows:
<P>
<PRE>   Bits     Meaning
   ----     -------

   0-4      Number of seconds DIVIDED BY TWO
               (to find actual number of seconds, multiply by two)
   5-10     Minutes
   11-15    Hours, based on a 24-hour clock

</PRE>The date at which the file was last written to is returned as a binary
value in a word formatted as follows:
<P>
<PRE>   Bits     Meaning
   ----     -------

   0-4      Day of the month
   5-8      Month (1 = January and so on)
   9-15     This number plus 1980 give current year

</PRE><h3>Sample Code</h3>
 
<P>
<PRE>/* Compile options needed: none
*/

#include &lt;dos.h&gt;
#include &lt;stdio.h&gt;
#include &lt;time.h&gt;

</PRE>struct low_unit {
<PRE>  unsigned biseconds: 5;  /* in units of TWO seconds */
  unsigned minutes: 6;
  unsigned hours:   5;
</PRE>} *ptime;
<P>
struct hi_unit {
<PRE>  unsigned day:   5;
  unsigned month: 4;
  unsigned year:  7;
</PRE>} *pdate;
<P>
struct find_t c_file;
<P>
<PRE>void main(void)
</PRE>{
<PRE>   _dos_findfirst ("test", _A_NORMAL, &amp;c_file);

   system("cls");

   ptime = (struct low_unit *) &amp;c_file.wr_time;
   pdate = (struct hi_unit *) &amp;c_file.wr_date;

   printf ("Created at %u:%u:%u",\
            ptime-&gt;hours, ptime-&gt;minutes, ptime-&gt;biseconds * 2);
                /* NOTE: seconds are divided by two when stored,
                         so we have to multiply by two to get
                         the proper value.... */

   printf (" on %u-%u-%u.",\
            pdate-&gt;month, pdate-&gt;day, pdate-&gt;year + 80);
}

</PRE>The program might produce the following output (depending on when the
file "test" was created):
<P>
<PRE>   Created at 10:32:28 on 12-19-89

</PRE>Note that the seconds field of the time will always be even.
<P>
For more information on function _dos_findfirst(), see the Microsoft C
Run-Time Library Reference."
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 5.00 5.10 6.00 6.00a 6.00ax 7.00 1.00<BR>
KBCategory: kbprg kbcode<BR>
KBSubcategory: CRTIss<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
