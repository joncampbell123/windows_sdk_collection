

<HTML>
<HEAD>
<TITLE>SAMPLE: Context Sensitive Help in a CDialog </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q110506">
<META NAME="KBModify" CONTENT="1997/07/18">
<META NAME="KBCreate" CONTENT="1994/01/24">
<META NAME="Keywords" CONTENT="kb16bitonly MfcUI kbfile kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The DLGHLP sample illustrates implementing context sensitive help in a CDialog object.  DLGHLP.EXE can be downloaded as a self-extracting file from the Microsoft Software Library (MSL) on the following services:   - Microsoft Download Service (MSDL...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB5,QA01,QAOE,QA7O,QAMN,QBUN,QAKD,QAJB,QANX,QAPF,QABA,QA4H,QA2O,QADO,QAK3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>SAMPLE: Context Sensitive Help in a CDialog</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 18, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q110506</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00 1.50
WINDOWS
kbprg kbfile
<P>
 
The information in this sample applies to:

<UL><LI>The Microsoft Foundation Classes (MFC) included with:
<P><PRE>    - Microsoft Visual C++ for Windows, versions 1.0 and 1.5
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
The DLGHLP sample illustrates implementing context sensitive help in
a CDialog object.
<P>
DLGHLP.EXE can be downloaded as a self-extracting file from the Microsoft
Software Library (MSL) on the following services:

<UL><LI>Microsoft Download Service (MSDL)
<P><PRE>      Dial (206) 936-6735 to connect to MSDL
      Download <A href="http://support.microsoft.com/download/support/mslfiles/dlghlp.exe">DLGHLP.EXE</A> <I>(size: 100484 bytes)</I> 
</PRE>
<LI>Internet (anonymous FTP)
<P><PRE>      ftp ftp.microsoft.com
      Change to the \softlib\mslfiles directory
      Get <A href="http://support.microsoft.com/download/support/mslfiles/dlghlp.exe">DLGHLP.EXE</A> <I>(size: 100484 bytes)</I> 
</PRE><P>
</UL>DLGHLP.EXE was archived as a self-extracting file using the PKware file-
compression utility. The archived file contains subdirectories, and
therefore, the -d switch needs to be used when decompressing the file to
disk.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The DLGHLP sample implements context sensitive help in a dialog box by
overriding CWnd::OnCommandHelp in the dialog class to handle the
WM_COMMANDHELP message. WM_COMMANDHELP is a private AFX Windows message
that is received by the active window when Help is requested. DLGHLP uses
the ID of the currently active control to generate the help context, which
is passed on to the CWinApp::WinHelp member.
<P>
DLGHLP includes two dialog boxes, each with a number of controls in them.
The user is able to set the focus to a particular control and, by pressing
F1, bring up help that is specific to that control. Several of the control
IDs are used in both dialog boxes. For example, each dialog box contains a
radio button control with the ID of IDC_RADIO1. To allow a unique help
context value to be generated for each control, the ID of each dialog box
is used as a base and is added to the ID of the control.
<P>
For example, Dialog Box 1 has an ID of IDD_DIALOGBOX1 and Dialog Box 2 has
an ID of IDD_DIALOGBOX2, both of which are defined in the header file
RESOURCE.H. IDD_DIALOGBOX1 and IDD_DIALOGBOX2 have been made to differ in
value by enough that adding the individual control IDs to them does not
generate any overlapping help context values. In this case IDD_DIALOGBOX1
has a value of 101 and IDD_DIALOGBOX2 has a value of 131. Because
IDC_RADIO1 has a value of 101, adding IDC_RADIO1 to each of the dialog box
IDs gives unique help context values of 202 and 232.
<P>
A base value of 0x20000 is also added to the help context value to cause
the context value for each control to be in the range of 0x20000 to
0x2FFFF, the help context range for windows and dialog boxes. For more
information on help context ranges and context sensitive help in MFC, refer
to MFC Technical Note 28: Context-Sensitive Help Support.
<P>
DLGHLP illustrates mixing context sensitive help and default help in the
same dialog box. Pressing the F1 key when any of the radio buttons in
Dialog Box 2 has the focus causes the context sensitive help for the radio
button to be used. Pressing F1 when either the OK or Cancel button has the
focus causes the default application help index to be invoked. Dialog Box 1
provides context sensitive help for all controls, including the OK and
Cancel buttons.
<P>
DLGHLP is based on an AppWizard generated application. Files included with
the sample, which are directly related to implementing context sensitive
help in a dialog box, are:
<P>
<PRE>   DLGBOX1.CPP -
   Implements context sensitive help for Dialog Box 1 by overriding
   CWnd::OnCommandHelp.

   DLGBOX2.CPP -
   Implements context sensitive help for Dialog Box 2 by overriding
   CWnd::OnCommandHelp.

   DLGRES.H -
   Defines the help context IDs based on the ID of the dialog box
   and the specific control.

   DLGCTRLS.HM -
   Help map file that defines the help context IDs for the dialog box
   controls.
</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 1.00 1.50 2.00 2.50<BR>
KBCategory: kbprg kbfile<BR>
KBSubcategory: MfcUI<BR>
Keywords            : kb16bitonly MfcUI kbfile kbprg<BR>
Technology          : kbMfc<BR>
Version             : 1.00 1.50<BR>
Platform            : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 18, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
