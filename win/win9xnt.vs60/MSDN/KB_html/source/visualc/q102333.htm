

<HTML>
<HEAD>
<TITLE>Troubleshooting Visual C++: Setup and Build Process </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q102333">
<META NAME="KBModify" CONTENT="1997/07/17">
<META NAME="KBCreate" CONTENT="1993/08/03">
<META NAME="Keywords" CONTENT="kb16bitonly">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT=" Microsoft Visual C++ (MSVC) version 1.0 installs and runs correctly on most systems without any problems. However, on a small number of systems, serious post-setup problems occur, which may include system crashes or hangs, parity errors, time-out er...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBFY,QDL9,QBWQ,QBWO,QBWN,QAIJ,QABA,QBWS,QA56,QA55,QAKR,QAHE,QAHC,QAKP,QAM9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Troubleshooting Visual C++: Setup and Build Process</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q102333</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
1.00
WINDOWS
kbsetup kbtshoot
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Visual C++ for Windows, version 1.0
</UL> 
<P>
Microsoft Visual C++ (MSVC) version 1.0 installs and runs correctly on
most systems without any problems. However, on a small number of
systems, serious post-setup problems occur, which may include system
crashes or hangs, parity errors, time-out errors, and inability to
complete the build operation. If you experience time-out errors from
WINTEER, please see the following article in the Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../visualc/q112008.htm">Q112008</A></B>
   TITLE     : PRB: Visual Workbench Hang or Time-out Waiting for
               WINTEER.EXE

</PRE>The text below describes a general troubleshooting technique to help
narrow down the cases in which even a simple application cannot be
built in the MSVC environment.
<P>
Visual C++ will most likely detect hardware and software conflicts if
any exist on your system. Some hardware problems, such as a bad memory
chip, a bad motherboard, or a bad disk controller, may cause conflicts
with Visual C++.
<P>
Once you eliminate hardware problems, you need to search for software
conflicts. Some software conflicts, such as third-party device
drivers, Windows device drivers, network drivers, and terminate-and-
stay-resident (TSR) applications may cause problems with Visual C++.
Visual C++ uses memory heavily; running the compiler in Windows may
cause Windows to allocate memory currently in use, such as that used
by a third-party device driver, to Visual C++.
<P>
To narrow the range of possibilities, perform the following tests:

<OL><P><LI>Run the compiler from MS-DOS. This technique has two advantages: it
   eliminates Microsoft Windows-related issues and, in most cases, the
   compiler works without any problems (however, memory issues may
   remain).
<P>
   a. Close Windows. Do not modify AUTOEXEC.BAT or CONFIG.SYS at this
<P><PRE>      time. Shutdown and reboot your system.
</PRE><P>
   b. If you run an MS-DOS shell program, close the shell.
<P>
   c. Verify the MS-DOS environment variable settings. If necessary,
<P><PRE>      run the MSVCVARS.BAT file in the MSVC BIN (by default,
      C:\MSVC\BIN) directory.
</PRE><P>
   d. Make the MSVC HELLO Microsoft Foundation Class sample directory
<P><PRE>      (by default, C:\MSVC\MFC\SAMPLES\HELLO) the current directory.
</PRE><P>
   e. At the MS-DOS prompt, type "cl /c hello.cpp" (without quotation
<P><PRE>      marks) to compile only HELLO.CPP. If this step fails, the
      problem relates either to hardware or to MS-DOS software in the
      AUTOEXEC.BAT or CONFIG.SYS files.
</PRE><P>
   f. If you can build HELLO.CPP, type "nmake /a /f hello.mak"
<P><PRE>      (without quotation marks) to build the entire application. If
      this steps fails, it may be a hardware or MS-DOS problem. Edit
      your AUTOEXEC.BAT and CONFIG.SYS files to remove unnecessary
      device drivers and terminate-and-stay-resident (TSR)
      applications, shutdown and restart your system, and restart this
      procedure at step 1e above.
</PRE>
<P><LI>Run the compiler in an MS-DOS session in Windows. This step
   introduces the Windows settings but eliminates the effects of the
   MSVC build engine and of the WINTEER application.
<P>
   a. Shutdown and reboot your system to restore its original
<P><PRE>      conditions. Then start Windows.
</PRE><P>
   b. Open a full-screen MS-DOS session.
<P>
   c. Repeat steps 1c through 1f above. A failure here indicates an
<P><PRE>      interaction between MS-DOS and Windows or a conflict with the
      Windows settings.
</PRE><P>
   d. Close the full-screen MS-DOS session and open an MS-DOS window.
<P>
   e. Repeat steps 1c through 1f above. If this step fails after step
<P><PRE>      2c above succeeds, most likely a Windows mouse or video conflict
      exists. Edit your AUTOEXEC.BAT and CONFIG.SYS files to remove
      any unnecessary device drivers or TSR programs. Modify your
      Windows installation to use the standard VGA driver and a
      minimal SYSTEM.INI file.
</PRE>
<P><LI>Test the Visual C++ environment.
<P>
   a. Start MSVC with the /V option switch to set the properties. For
<P><PRE>      more information on the /V switch, please refer to the
      README.WRI file in the README viewer.
</PRE><P>
   b. Open the HELLO.MAK project and build it. Open the WINTEER icon.
<P>
   c. If that fails, close MSVC and start it again with the /R and /V
<P><PRE>      switches. At this point, it may be necessary to remove
      unnecessary device drivers or TSR programs from AUTOEXEC.BAT,
      CONFIG.SYS, and SYSTEM.INI. A report from the MSD utility may be
      useful to help identify and resolve conflicts.
</PRE><P>
</OL>When you start Windows, you can specify two switches that sometimes
prevent memory conflicts. If either of these switches eliminates the
problems you encounter, you can edit your SYSTEM.INI file to make them
a part of the Windows start-up process. According to the Windows
online help, the switches are of the form /D:&lt;a&gt;, where &lt;a&gt; is one of
the following:
<P>
<PRE>   F Turns off 32-bit disk access
     Equivalent to the SYSTEM.INI file setting: 32BitDiskAccess=FALSE

   S Specifies that Windows should not use the ROM address space
     between F000:0000 and 1MB as a break point.
     Equivalent to the SYSTEM.INI file setting:
     SystemROMBreakPoint=FALSE

   V Specifies that the ROM routine handles interrupts from the
     hard disk controller.
     Equivalent to SYSTEM.INI file setting: VirtualHDIRQ=FALSE

   X Excludes all of the adapter area from the range of memory that
     Windows scans to find unused space.
     Equivalent to SYSTEM.INI file setting: EMMExclude=A000-FFFF

</PRE></OL>For additional information about creating a SYSTEM.INI file that does not
include third-party device drivers, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE-ID: <B><A href="../visualc/q117674.htm">Q117674</A></B>
   TITLE     : How to Create SYSTEM.INI Without Third-Party Drivers

</PRE>Another good method to test for video driver problems involves
checking if the driver can produce output in a "background MS-DOS
session" while output occurs in the Windows screen. To do so, start an
MS-DOS session and run the following batch file:
<P>
<PRE>   :again
   dir
   goto again

</PRE>Choose Settings from the MS-DOS window system menu and choose
Background.
<P>
While the batch file runs in the background, start an application
developed for the Windows operating system. If a System Integrity
Error occurs, the video driver may conflict with Visual C++.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 1.00<BR>
KBCategory: kbsetup kbtshoot<BR>
KBSubcategory: vc10setup<BR>
Keywords            : kb16bitonly<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
