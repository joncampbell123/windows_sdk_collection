

<HTML>
<HEAD>
<TITLE>PRB: C2065 Error Occurs on GetWrapperWindow or Other Symbols </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q176487">
<META NAME="KBModify" CONTENT="1997/11/17">
<META NAME="KBCreate" CONTENT="1997/11/10">
<META NAME="Keywords" CONTENT="MfcMac VCMac kberrmsg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When using a function or a symbol dependent upon the Macintosh Operating System headers, the following error message may appear:    error C2065: 'GetWrapperWindow' : undeclared identifier  CAUSE =====  The native Macintosh header, MACOS\WINDOWS.H (...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QDL9,QBWQ,QBWO,QBWN,QDO9,QAAP,QAPF,QBVV,QAY5,QAO4,QAF8,QAGQ,QAKP,QAJH V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: C2065 Error Occurs on GetWrapperWindow or Other Symbols</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  November 17, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q176487</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>Microsoft Visual C++, Macintosh Cross-Development Addon, versions 4.0,
   4.0b
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When using a function or a symbol dependent upon the Macintosh Operating
System headers, the following error message may appear:
<P>
<PRE>  error C2065: 'GetWrapperWindow' : undeclared identifier

</PRE><h2>CAUSE</h2>
 
<P>
The native Macintosh header, MACOS\WINDOWS.H (or others), was not included
before the Winwlm.h file.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
Include the required header (macos/windows.h for GetWrapperWindow) before
including Winwlm.h for MFC applications. Winwlm.h is included in the
Afxwin.h file. For example:
<P>
<PRE>  #include &lt;macname1.h&gt;
  #include &lt;macos/windows.h&gt;
  #include &lt;macname2.h&gt;

  #include &lt;afxwin.h&gt;

</PRE><h2>STATUS</h2>
 
<P>
This behavior is by design.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
When targeting applications for the Macintosh platform, the Winwlm.h header
file is pulled in the default WLM libraries and declares many symbols
needed to use Macintosh specific objects from a Windows application. For
example, GetWrapperWindow returns the Macintosh window data structure
WindowRef underlying the given the Windows HWND.
<P>
This header file may be included in applications manually or automatically
pulled in when building MFC applications through the Afxwin.h header file.
For example:
<P>
<PRE>  afxwin.h
    afx.h
      afxver_.h
        afxv_w32.h
          windows.h // for Macintosh targets this is mac/include/windows.h
            winwlm.h // where GetWrapperWindow, and so on, are prototyped
              macname2.h //

</PRE>However, the Winwlm.h file excludes many symbols if certain native
Macintosh header files are not previously included. For example,
GetWrapperWindow is defined if MACOS\Windows.h is included beforehand. This
behavior occurs because GetWrapperWindow, along with other symbols, is in a
section dependent upon __WINDOWS__ being defined. MACOS\Windows.h defines
__WINDOWS__ .
<P>
Below is a list of some of the more commonly-used symbols and the
required header file. The header file must be included before Winwlm.h or
Afxwin.h and surrounded by the inclusion Macname1.h and Macname2.h. For
example:
<P>
<PRE>Symbol                       Include
------                       ----------------
CFragConnectionID            macos/codefrag.h //__CODEFRAGMENTS__
</PRE>CFragInitBlockPtr
WlmInit
WlmTerm
WrapInstance
UnwrapInstance
GetMacInstanceInformation
<PRE>MenuRef                      macos/menus.h //__MENUS__
</PRE>WlmInitEx
CheckoutMenu
WrapMenu
UnwrapMenu
UpdateMenuBar
<PRE>WindowRef                    macos/windows.h //__WINDOWS__
</PRE>ActivateForeignWindow
GetWindowWrapper
GetWrapperWindow
GetWrapperContainerWindow
WrapWindow
WrapWindowMinimal
UnwrapWindow
<PRE>DialogRef                    macos/dialogs.h //__DIALOGS__
AfxGetNextEvent              macos/events.h //__EVENTS__
</PRE>AfxWaitNextEvent
AfxEventAvail
AfxGetOSEvent
AfxOSEventAvail
<PRE>GrafPortToClient             macos/types.h //__TYPES__

</PRE>If these header files are not included, the following error messages are
generated:
<P>
<PRE>    error C2065: 'GetWrapperWindow' : undeclared identifier
    error C2064: term does not evaluate to a function

</PRE>If the following errors occur after including these headers
<P>
<PRE>   warning C4003: not enough actual parameters for macro 'GetItem'
   error C2059: syntax error : ','
   warning C4003: not enough actual parameters for macro 'SetItem'
   error C2059: syntax error : ','
   ...

</PRE>it is because the Afxcmn.h header file was included later. The Afxcmn.h
header file contains GetItem and SetItem member functions of several MFC
classes that conflict with the ones defined in MACOS\Menus.h. For example:
<P>
<PRE>   // macos/Menus.h
   #if OLDROUTINENAMES
   ...
   #define SetItem(theMenu, item, itemString) SetMenuItemText(theMenu,
   item, itemString)
   #define GetItem(theMenu, item, itemString) GetMenuItemText(theMenu,
   item, itemString)
   ...
   #endif // OLDROUTINENAMES

</PRE>The workaround is to define OLDROUTINENAMES as 0. Below is an example
of a typical MFC project's Stdafx.h file. This project uses the common
controls. For example:
<P>
<PRE>   #define VC_EXTRALEAN   // Exclude rarely-used stuff from Windows headers

   #include &lt;macname1.h&gt;
   #define OLDROUTINENAMES 0
   #include &lt;macos/windows.h&gt;
   #include &lt;macname2.h&gt;

   #include &lt;afxwin.h&gt;  // includes Winwlm.h
   #include &lt;afxext.h&gt;
   #include &lt;afxcmn.h&gt;

</PRE><h2>REFERENCES</h2>
 
<P>
Books Online
<P>
(c) Microsoft Corporation 1997, All Rights Reserved.
Contributions by Adam Kim, Microsoft Corporation
 
<PRE>Keywords          : MfcMac VCMac kberrmsg
Version           : MACINTOSH:4.0,4.0b
Platform          : MACINTOSH
Issue type        : kbprb</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  November 17, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
