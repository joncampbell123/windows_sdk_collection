

<HTML>
<HEAD>
<TITLE>FIX: Constructor C4705 Warning from Aggregate Class Member </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q98989 ">
<META NAME="KBModify" CONTENT="1997/09/16">
<META NAME="KBCreate" CONTENT="1993/05/18">
<META NAME="Keywords" CONTENT="CPPIss kbbuglist kbfixlist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When Microsoft C/C++ compiles an application, it generates the following message for each class constructor:     warning C4705: statement has no effect  CAUSE =====  The source code has an embedded aggregate member (class, struct, or union) in a cl...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAB4,QBFY,QAH4,QABO,QAR4,QAOT,QA56,QA55,QAM1,QBWP,QAPN,QAL3,QAOX,QBV8,QAB9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: Constructor C4705 Warning from Aggregate Class Member</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 16, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q98989 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
7.00   | 1.00 1.50 1.51 1.52 | 1.00 2.00 2.10 2.20
<PRE>MS-DOS | WINDOWS             | WINDOWS NT
</PRE>kbtool kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE), included with:
<P>
<P><PRE>    - Microsoft C/C++ for MS-DOS, versions 7.0
    - Microsoft Visual C++ for Windows, versions 1.0, 1.5, 1.51 and
      1.52
    - Microsoft Visual C++, 32-bit Edition, versions 1.0, 2.0, 2.1,
      and 2.2
</UL></PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When Microsoft C/C++ compiles an application, it generates the
following message for each class constructor:
<P>
<PRE>   warning C4705: statement has no effect

</PRE><h2>CAUSE</h2>
 
<P>
The source code has an embedded aggregate member (class, struct, or
union) in a class definition and the compiler command line includes
the /W4 and /f- compiler options. Note that the /f- option is not
supported in the Microsoft Visual C++ 32-bit compiler.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
The C4705 warning is incorrect and can be safely ignored.  If the
embedded aggregate is a class, define a default constructor.  This
will supress the warning.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the products listed at the
beginning of this article. This problem was fixed in Microsoft Visual C++,
version 4.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
The C4705 warning usually indicates a statement does not affect
program execution. Each of the following statements causes this
particular warning:
<P>
<PRE>   num - 1270;
   count != 15;
   42;

</PRE>The code example below demonstrates a structure data member that
generates the C4705 warning for each class constructor. The warning
also occurs if the example used a class or a union instead of a
structure.
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>/* Compile options needed: /W4 /f- (Remove /f- for 32-bit compiler)
*/

#include &lt;iostream.h&gt;

</PRE>struct MyStruct_tag { int i; };
<P>
class CMyClass {
<PRE>   private:
      MyStruct_tag MyStruct;
   public:
      inline CMyClass() { MyStruct.i = 0; };
      inline CMyClass(int init) { MyStruct.i = init; };
      void Print(const char *);
</PRE>};
<P>
<PRE>void CMyClass::Print(const char* string)
</PRE>{
<PRE>   cout &lt;&lt; string &lt;&lt; MyStruct.i &lt;&lt; endl;
</PRE>}
<P>
<PRE>void main(void)
</PRE>{
<PRE>   CMyClass Object1;
   CMyClass Object2(1024);

   Object1.Print("Object1.MyStruct.i = ");
   Object2.Print("Object2.MyStruct.i = ");
</PRE>}
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 7.00 8.00 8.00c 9.00 9.10 1.00 1.50 1.51 2.00<BR>
2.10 2.20<BR>
KBCategory: kbtool kbfixlist kbbuglist<BR>
KBSubcategory: CPPIss<BR>
Keywords          : CPPIss kbbuglist kbfixlist kbtool<BR>
Version           : 7.00   | 1.00 1.50 1.51 1.52 | 1<BR>
Platform          : MS-DOS NT WINDOWS<BR>
Solution Type     : kbfix<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 16, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
