

<HTML>
<HEAD>
<TITLE>PRB: "Warning: Calling DestroyWindow in CWnd::~CWnd" Message </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q105081">
<META NAME="KBModify" CONTENT="1997/05/28">
<META NAME="KBCreate" CONTENT="1993/10/07">
<META NAME="Keywords" CONTENT="MfcMisc kbfasttip kbprb">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The following warnings are displayed when a debug version of a program is executed and TRACE() diagnostics are enabled:     Warning: calling DestroyWindow in CWnd::~CWnd    OnDestroy or PostNcDestroy in derived class will not be called  CAUSE =====...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAGI,QAW6,QAPN,QAB4,QBVV,QAIF,QDL9,QBWQ,QBWO,QBWN,QBFY,QAEV,QBCT,QA56,QA55 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: "Warning: Calling DestroyWindow in CWnd::~CWnd" Message</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  May 28, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q105081</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Microsoft Foundation Classes (MFC) included with:
<P><PRE>    - Microsoft Visual C++ for Windows, versions 1.0, 1.5, 1.51, 1.52
    - Microsoft Visual C++ 32-bit Edition, versions 1.0, 2.0, 2.1, 4.0
</UL></PRE> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The following warnings are displayed when a debug version of a program is
executed and TRACE() diagnostics are enabled:
<P>
<PRE>   Warning: calling DestroyWindow in CWnd::~CWnd
   OnDestroy or PostNcDestroy in derived class will not be called

</PRE><h2>CAUSE</h2>
 
<P>
The above warnings are displayed by the CWnd::~CWnd() destructor.
The warnings indicate the following:

<UL><LI>The programmer has most likely called "delete" on a CWnd object
   rather than DestroyWindow().

<LI>An object derived from CWnd is not performing a DestroyWindow()
   call in its destructor.

<LI>Because the DestroyWindow() call is executed in the destructor
   for CWnd, only the CWnd portion of the CWnd-derived object is
   remaining when the DestroyWindow() is called. Thus, if you have
   a CWnd-derived object and receive this warning, the derived
   object's virtual functions will not exist and the CWnd functions
   will be called instead.
<P>
</UL><h2>RESOLUTION</h2>
 
<P>
MFC Technote #17 contains more information on how to properly destroy a
Window object and states the following cardinal rule:
<P>
<PRE>   To destroy a C++ Windows object, use DestroyWindow, not "delete".

</PRE>Also, examining CWnd::~CWnd() will reveal that the foremost task of the
destructor is to ensure that the associated Windows window object has been
destroyed. If a program calls DestroyWindow() before the CWnd destructor
is called, the m_hWnd data member will be NULL, the TRACE0() messages will
not occur, and DestroyWindow() will not be called in CWnd::~CWnd().
 

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Keywords            : MfcMisc kbfasttip kbprb<BR>
Technology          : kbmfc<BR>
Version             : 1.0 1.5 1.51 1.52 2.0<BR>
Platform            : NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  May 28, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
