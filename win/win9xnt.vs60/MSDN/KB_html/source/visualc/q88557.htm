

<HTML>
<HEAD>
<TITLE>CFrameWnd Objects Can Destroy Themselves </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q88557 ">
<META NAME="KBModify" CONTENT="1997/10/10">
<META NAME="KBCreate" CONTENT="1992/08/27">
<META NAME="Keywords" CONTENT="MfcUI kbfasttip kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  Objects derived from the CFrameWnd class destroy themselves automatically when the Window that is associated with the object processes the WM_NCDESTROY message. Because objects derived from CFrameWnd classes destroy themselves, it is recommended th...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAPN,QAW6,QAY5,QBV8,QAB9,QAGB,QAEF,QABO,QBCT,QAY2,QAGI,QAGC,QBFY,QDKD,QBJQ V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>CFrameWnd Objects Can Destroy Themselves</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  October 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q88557 </B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
7.00   | 1.00 1.50 1.51 1.52 | 1.00 2.00 2.10 4.00
<PRE>MS-DOS | WINDOWS             | WINDOWS NT
</PRE>kbprg
<P>
 
The information in this article applies to:

<UL><LI>The Microsoft Foundation Classes (MFC) included with:
<P>
<P><PRE>    - Microsoft C/C++ version 7.0
    - Microsoft Visual C++ for Windows, versions 1.0, 1.5, 1.51, and 1.52
    - Microsoft Visual C++ 32-bit Edition, versions 1.0, 2.0, 2.1, and 4.0
</UL></PRE> 
<P>
<P><h2>SUMMARY</h2>
 
<P>
Objects derived from the CFrameWnd class destroy themselves automatically
when the Window that is associated with the object processes the
WM_NCDESTROY message. Because objects derived from CFrameWnd classes
destroy themselves, it is recommended that applications use the "new"
operator to create new instances of this class on the heap.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
Objects derived from CFrameWnd are designed to "clean up" after themselves.
The CFrameWnd class overloads the OnNcDestroy() member function that makes
a call to the PostNcDestroy() member function, which in turn does a "delete
this."
<P>
CMDIFrameWnd and CMDIChildWnd, which are derived from CFrameWnd, exhibit
identical behavior.
<P>
The OnNcDestroy() function is called when the window receives the
WM_NCDESTROY message. This is the last message a window receives. As a
result, CFrameWnd objects should be created on the heap using the "new"
operator, and should never be explicitly deleted by the application. If the
application needs to destroy the object, it should use the DestroyWindow()
member function, which destroys both the window and its CFrameWnd object.
<P>
In general, CFrameWnd objects should not be used as local variables in
functions or as embedded objects in other classes. Doing so may cause the
object's destructor to be called twice: once when the user closes the
window, and once when the function containing the local variable goes out
of scope or when the object containing the embedded CFrameWnd object is
deleted. Attempting to delete the object more than once may cause an
unrecoverable application error (UAE).
<P>
You can create a CFrameWnd-derived object on the stack or as a static
object if the application overrides the PostNcDestroy() function for the
derived class. PostNcDestroy() is a virtual member function of the CWnd
class that is called by the OnNcDestroy() function. The overridden
PostNcDestroy() function for the derived class should do nothing, rather
than "delete this." This prevents the object from being destroyed twice.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: kbinf 7.00 1.00 1.50 2.00 2.10 2.50 2.51 2.52<BR>
3.00 3.10 4.00<BR>
KBCategory: kbprg kbfasttip<BR>
KBSubcategory: MfcUI<BR>
Keywords          : MfcUI kbfasttip kbprg<BR>
Technology        : kbMfc<BR>
Version           : 7.00 | 1.00 1.50 1.51 1.52 | 1<BR>
Platform          : MS-DOS NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  October 10, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
