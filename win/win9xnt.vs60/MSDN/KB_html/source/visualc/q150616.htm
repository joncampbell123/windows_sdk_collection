

<HTML>
<HEAD>
<TITLE>BUG: Nmake Does Not Build Subproject of Type Makefile </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150616">
<META NAME="KBModify" CONTENT="1997/08/07">
<META NAME="KBCreate" CONTENT="1996/05/03">
<META NAME="Keywords" CONTENT="VwbIss kbbuglist kbtool">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When you use the nmake utility to build a project containing a subproject of type makefile that does not use nmake as its command, the subproject is not built. However, the subproject can be built from Developer Studio.  RESOLUTION  There are two w...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QAJN,QBXB,QAY2,QATJ,QAFI,QBFY,QAGI,QAP2,QBV8,QAB9,QBWS,QBXT,QBVV,QA5V,QAPF V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>BUG: Nmake Does Not Build Subproject of Type Makefile</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  August 7, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150616</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
4.00 4.10 4.20
WINDOWS NT
kbtool kbbuglist
<P>
 
The information in this article applies to:

<UL><LI>The Development Environment (was Visual Workbench) included with:
   Microsoft Visual C++, 32-bit Edition, versions 4.0, 4.1, 4.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you use the nmake utility to build a project containing a subproject
of type makefile that does not use nmake as its command, the subproject is
not built. However, the subproject can be built from Developer Studio.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
There are two ways to resolve the problem:

<UL><LI>Build the project and sub-project separately. This requires either
   typing in a batch file or makefile that calls nmake once for each
   configuration.
<P>
   -or-

<LI>When you insert a project of type makefile, rather than changing the
   Command line to execute something other than nmake, specify a makefile
   which you create. Then create a makefile that executes the command you
   would use instead of nmake.
<P>
</UL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article. We are researching this problem and will
post new information here in the Microsoft Knowledge Base as it becomes
available.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Steps to Reproduce Problem</h3>
 
<P>
Method 1:

<OL><P><LI>Open the MFC sample DLLHusk.

<P><LI>From Insert menu, choose Project.

<P><LI>Select type Makefile, give it a generic name, and select it as a
   subproject of DLLHusk.

<P><LI>Click the Create button. Remove the line "NMAKE /f" from the general tab
   of subproject generic, and type:
<P>
   c:\msdev\samples\mfc\advanced\dllhusk\generic\generic.bat
<P>
   The batch file generic.bat is executed for the inserted subproject
   build.
<P>
</OL>Method 2:

<OL><P><LI>Create a batch file named Generic.bat in the subproject directory
   generic.

<P><LI>Add some REM lines in the batch file to verify that this file is being
   used in the build process, or you can add commands to build one of your
   other projects by using NMAKE.
<P>
</OL>Method 3:
<P>
From the Build menu of Developer Studio, build or rebuild your toplevel
project DLLHusk. Note that the subprojects TestDll1 and TesDll2 are
built, the generic project is built, and then the toplevel project
DLLHusk is built.
<P>
Method 4:

<OL><P><LI>Go to a Command prompt.

<P><LI>Run Vcvars32.bat from the Msdev\Bin directory.

<P><LI>Move to the DLLHusk project directory, and run this command:
<P>
   NMAKE /A /F  DLLHusk.mak CFG="DLLHusk - Win32 Debug"
<P>
   Note that the subprojects TestDll1 and TesDll2 are built, and the
   toplevel project DLLHusk is also built. However, the generic project
   is not built.
<P>
</OL><h3>Example Resolution</h3>
 
<P>
To implement the first resolution from the Resolution section of this
article, follow these steps:

<OL><P><LI>Create a batch file in the toplevel project directory. In this example,
   the toplevel project directory is the Dllhusk directory.

<P><LI>Add the following lines to the batch file, and name it Dllhusk.bat
   assuming C: as the root directory:
<P>
   call generic\generic.bat
   REM If current directory and environment variables got changed
   call c:\msdev\bin\vcvars32.bat
   cd c:\msdev\samples\mfc\advanced\dllhusk
   nmake %1 /D /F dllhusk.mak CFG=%2

<P><LI>From the Dllhusk directory, run the following command from the Command
   line:
<P>
   dllhusk /A "DLLHusk - Win32 Debug"
<P>
</OL>This command builds all the subprojects and the toplevel project.
<P>
<P><h2>REFERENCES</h2>
 
<P>
For additional information, please see the following article in the
Microsoft Knowledge Base:
<P>
<PRE>   ARTICLE ID: <B><A href="../visualc/q145936.htm">Q145936</A></B>
   TITLE     : How to Insert Existing Projects as Sub-Projects

</PRE></OL>Also see "Creating an External Project" from the Visual C++ online
documentation.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
Additional reference words: 4.00 4.10 4.20 vcbuglist400<BR>
KBCategory: kbtool kbbuglist<BR>
KBSubcategory: VWBIss<BR>
Keywords          : VwbIss kbbuglist kbtool<BR>
Version           : 4.00 4.10 4.20<BR>
Platform          : NT WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  August 7, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
