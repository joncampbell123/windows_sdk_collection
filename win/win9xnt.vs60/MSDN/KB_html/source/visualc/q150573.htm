

<HTML>
<HEAD>
<TITLE>FIX: C2084 When Template Class Constructor Has No Body </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q150573">
<META NAME="KBModify" CONTENT="1997/09/19">
<META NAME="KBCreate" CONTENT="1996/05/03">
<META NAME="Keywords" CONTENT="CPPIss vcbuglist400 vcfixlist500 kbprg">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  The following error occurs when a template class is explicitly instantiated and it has more than one constructor, at least one of which does not have a body defined and at least one of which is defined outside of the class:     error C2084: functio...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QA36,QAB4,QAGI,QABC,QABO,QDKW,QBFY,QAR4,QAGN,QAG4,QAH6,QDKS,QBVV,QAMB,QAJ9 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>FIX: C2084 When Template Class Constructor Has No Body</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 19, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q150573</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The Microsoft C/C++ Compiler (CL.EXE) included with:
   - Microsoft Visual C++, 32-bit Edition, version 4.1, 4.2
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
The following error occurs when a template class is explicitly instantiated
and it has more than one constructor, at least one of which does not have a
body defined and at least one of which is defined outside of the class:
<P>
<PRE>   error C2084: function '&lt;function name&gt;' already has a body

</PRE><h2>WORKAROUND</h2>
 

<UL><LI>This is the preferred workaround. Give every constructor a body. The
   body is defined inside or outside the template class.
<P>
   -or-

<LI>Place all the existing constructor bodies inside the template class
   definition.
<P>
   NOTE: You get the following warning associated with the explicit
   instantiation request:
<P>
<P><PRE>      warning C4661: &lt;symbol&gt; : no suitable definition provided for
      explicit instantiation request
</PRE><P>
   This warning is issued when a template class does not have all its
   members defined and an explicit instantiation request is made. This
   warning also causes the compiler to ignore the instantiation request.
<P>
   -or-

<LI>Instantiate the template class implicitly rather than explicitly. In
   this case, the instantiation occurs when declaring an object using the
   template class, but the C2084 does not.
<P>
</UL>NOTE: the sample code in this article gives examples of explicit versus
implicit template instantiation.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a bug in the Microsoft products listed
at the beginning of this article. This bug was corrected in Visual C++
version 5.0.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
<P><h3>Sample Code</h3>
 
<P>
<PRE>   /* Compile options needed: /c
   */

   template &lt;class T&gt;
   class A {
   public:
       A();             // give this ctor a body for workaround 1
       A(const T&amp;);
   };

   template &lt;class T&gt; A&lt;T&gt;::A(const T&amp;) {}; // move this ctor body
                                            // inside the class
                                            // definition for
                                            // workaround 2

   template A&lt;int&gt;;     // this is an explicit instantiation -
                        // comment this line out and uncomment the
                        // next line for workaround 3
   // A&lt;int&gt; x = 3;     // this is an implicit instantiation

</PRE> 
<PRE>Keywords          : CPPIss vcbuglist400 vcfixlist500 kbprg
Version           : 4.1 4.2
Platform          : NT WINDOWS
Issue type        : kbbug
Solution Type     : kbfix</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 19, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
