

<HTML>
<HEAD>
<TITLE>PRB: Cannot View Unicode Strings in the Watch Window </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q123465">
<META NAME="KBModify" CONTENT="1997/07/25">
<META NAME="KBCreate" CONTENT="1994/12/01">
<META NAME="Keywords" CONTENT="WBDebug kbdisplay">
<META NAME="KBArea" CONTENT="Support; KB; visualc">
<META NAME="Description" CONTENT="  When trying to watch a Unicode string in the Watch window, you see only the first byte, or it is displayed incorrectly.  CAUSE =====  Making the debugger  Unicode aware  at the display level involves the complicated task of setting and using locale...">
<META NAME="Product" CONTENT="Visual C++">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QATK,QATL,QATX,QALG,QAJQ,QALQ,QBW6,QAGQ,QBVV,QBC9,QBC8,QAPF,QANO,QAH4,QABA V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>PRB: Cannot View Unicode Strings in the Watch Window</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  July 25, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q123465</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
 
The information in this article applies to:

<UL><LI>The integrated debugger included with:
   - Microsoft Visual C++, 32-bit Edition, version 2.0
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When trying to watch a Unicode string in the Watch window, you see only the
first byte, or it is displayed incorrectly.
<P>
<P><h2>CAUSE</h2>
 
<P>
Making the debugger "Unicode aware" at the display level involves the
complicated task of setting and using locales and fonts properly. This is
especially difficult if they are not the ones currently in use. This
functionality has not yet been implemented.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
You can use the 'm' format symbol to see the first eight characters of a
string, or you could use the 'ma' format symbol to see the first 32
characters. For example, if you have a declaration in your code like this:
<P>
<PRE>   wchar_t *pStr = L"Some string";

</PRE>Adding the expression "pStr,m" (without the quotation marks) to the Watch
window results in a memory dump of the first 16 bytes, immediately followed
by the ASCII equivalent, similar to this:
<P>
<PRE>   S.o.m.e. .s.t.r.

</PRE>The periods are place holders for null bytes, which show up behind their
corresponding characters because wchar_t's are defined as two-byte unsigned
shorts, whose bytes are thus reversed in memory. (This is why only the
first character 'S' would be displayed by default in the example above. The
debugger sees the null byte following the 'S' and assumes it is the string
terminator.)
<P>
This method will obviously work only with short strings. As an alternative,
you can open up the memory window and point it to the starting address of
your string. Note that dragging or dropping the string's address from the
Watch window to the Memory window makes this much easier.
<P>
<P><h2>MORE INFORMATION</h2>
 
<P>
For future versions, Microsoft is considering ways to allow watching
Unicode strings directly using the current locale.
 
<PRE>Keywords          : WBDebug kbdisplay
Version           : 2.0
Platform          : NT WINDOWS
Issue type        : kbprb
Solution Type     : kbfile</PRE>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
================================================================================<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  July 25, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
