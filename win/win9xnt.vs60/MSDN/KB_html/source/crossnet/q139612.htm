

<HTML>
<HEAD>
<TITLE>TCP/IP-32 3.11b NET LOGON to Domain Fails Across Router </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q139612">
<META NAME="KBModify" CONTENT="1997/09/10">
<META NAME="KBCreate" CONTENT="1995/11/13">
<META NAME="Keywords" CONTENT="ntgeneral kbbug3.11b kbnetwork">
<META NAME="KBArea" CONTENT="Support; KB; crossnet">
<META NAME="Description" CONTENT="  When a Windows for Workgroups 3.11 client running Microsoft TCP/IP-32 3.11b attempts to log on to a Windows NT domain, using NET LOGON command from the command prompt across routers. The attempt fails and the following warning message appears:     ...">
<META NAME="Product" CONTENT="Networking Issues">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWO,QBWP,QAVZ,QBXS,QAI5,QAA1,QAXB,QDIZ,QBWS,QA9A,QDL9,QDI2,QBWQ,QBWN,QBTX V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>TCP/IP-32 3.11b NET LOGON to Domain Fails Across Router</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 10, 1997</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q139612</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
3.11
WINDOWS
kbnetwork kbbug3.11b
<P>
 
The information in this article applies to:

<UL><LI>Microsoft Windows for Workgroups version 3.11
<LI>Microsoft TCP/IP-32 for Windows for Workgroup, version 3.11b
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When a Windows for Workgroups 3.11 client running Microsoft TCP/IP-32 3.11b
attempts to log on to a Windows NT domain, using NET LOGON command from the
command prompt across routers. The attempt fails and the following warning
message appears:
<P>
<PRE>   You are logged on, but have not been validated by a server.

</PRE><h2>CAUSE</h2>
 
<P>
The logon fails because the NET LOGON command attempts to resolve the
domain name by using only b-node broadcasts. A query request for the domain
&lt;1C&gt; SMB  is not sent to the WINS server, nor is the local LMHOSTS file
parsed after the three b-node broadcasts for Logon request SMB fail.
<P>
This problem does not occur when the Windows for Workgroups client logs on
to the domain using the Enterprise logon option under Control Panel
Networks in Windows for Workgroups3.11.
<P>
SOLUTION
 
The above problem is fixed by updating the following WFW
3.11 files from the NT Server 3.51 CD or NT 4.0 Server CD.
<P>
<PRE>   NDIS.386
   NET.EXE 
   NET.MSG 
   NETAPI.DLL 
   NWNBLINK.386 
   VNETSUP.386  
   VREDIR.386   
   VSERVER.386

</PRE>The updated files address specific problems related to Windows for Workgroups version 3.11 and also provide the following:

<UL><LI>Support for inter-network browsing (they allow browsing to   
   Windows NT domains from subnets that have only Windows for 
   Workgroups clients).

<LI>A fix for problems using the NWLink protocol with the 
   Ethernet_II frame type when connecting to a Windows NT 
   Server.
<P>
</UL>Files can be found on \CLIENTS\WFW\UPDATE directory on NT 3.51 Server CD  
and on \CLIENTS\UPDATE.WFW directory on NT 4.0 Server CD.
 
<P>
WHEN USING the NT 3.5 Server CD take the following steps :
<P>
To work around this problem, either use Control Panel Network to log on or
replace Microsoft TCP/IP-32 version 3.11b with version 3.11A.
<P>
NOTE:  The TCP/IP-32 version 3.11A drivers can be found on the Windows NT
3.5 Server CD, in the CLIENTS\TCP32WFW\DISKS directory.

<OL><P><LI>From the Network group, run Network Setup.

<P><LI>Choose the Drivers button.
<P>
   Under Network Drivers, you will see your Network Interface Card (NIC)
   and the network protocols used on that NIC.

<P><LI>Select TCP/IP-32 3.11b.

<P><LI>Choose the Setup button and write down all of your TCP/IP-32 3.11b
   configuration information.

<P><LI>Choose the Cancel button to return to the Network Drivers dialog box.

<P><LI>Choose the Remove button and then the Yes button to confirm.

<P><LI>Choose the Add Protocol button.

<P><LI>Select Unlisted or Updated Protocol and Choose the OK button.

<P><LI>In the Install Driver dialog box, enter the path to the TCP/IP-32 3.11
   files.
<P>
   You should then see Microsoft TCP/IP-32 3.11 in the Unlisted or
   Updated Protocol dialog.

<P><LI>Choose the OK button.
<P>
<P><PRE>    You should then see Microsoft TCP/IP-32 3.11 in the Network Drivers
    dialog box.
</PRE>
<P><LI>Choose the Setup button and configure TCP/IP-32 3.11 based on
<P><PRE>    the information you wrote down in step 4.
</PRE>
<P><LI>Choose the Close button to exit the Network Divers dialog box.

<P><LI>Choose the OK button to exit the Network Setup dialog box.
<P>
<P><PRE>    Setup will modify system files.
</PRE>
<P><LI>Choose the OK button.
<P>
<P><PRE>    Network Setup prompts you to reboot.
</PRE>
<P><LI>Choose the Restart Computer button .
<P>
</OL><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows for Workgroups
version 3.11. We are researching this problem and will post new information
here in  the Microsoft Knowledge Base as it becomes available.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug3.11b<BR>
KBSubcategory: ntgeneral<BR>
Additional reference words: 3.50 3.11 tcpip32 wfw wfwg prodtcp32<BR>
Keywords          : ntgeneral kbbug3.11b kbnetwork<BR>
Version           : 3.11<BR>
Platform          : WINDOWS<BR>

</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 10, 1997</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
