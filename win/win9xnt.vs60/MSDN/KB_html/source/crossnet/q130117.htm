

<HTML>
<HEAD>
<TITLE>Running PKZIP Hangs WFW or Windows NT MS-DOS Command Prompt </TITLE>

<!--STYLE_BEGIN-->
<style>@import url(../../msdn_ie4.css);</style>
	<link disabled rel="stylesheet" href="../../msdn_ie3.css">
<!--STYLE_END-->

<META HTTP-EQUIV="CONTENT-Type" CONTENT="text/html; charset=us-ascii">
<META NAME="ms.locale" CONTENT="EN-US">
<META NAME="Category" CONTENT="Support; KB Article">
<META NAME="KBID" CONTENT="Q130117">
<META NAME="KBModify" CONTENT="1996/09/09">
<META NAME="KBCreate" CONTENT="1995/05/11">
<META NAME="Keywords" CONTENT="kbnetwork kbbug3.50 kbfix3.50.sp2">
<META NAME="KBArea" CONTENT="Support; KB; crossnet">
<META NAME="Description" CONTENT="  When you run MS-DOS Command Prompt on a computer running Windows for Workgroups or Windows NT, and then run PKZIP.EXE from a Windows NT read- only network drive to compress a large file (ten megabytes or larger), your MS-DOS Command Prompt may stop...">
<META NAME="Product" CONTENT="Networking Issues">
<META NAME="Platform" CONTENT="Windows">
<META NAME="Technology" CONTENT=" ">
<META NAME="Premium" CONTENT="support">

<META NAME="nyms" CONTENT="QBWP,QBWO,QANE,QDL9,QBWQ,QBWN,QBW7,QAUD,QAI5,QBWS,QAKP,QACF,QBF0,QAR4,QDO3 V02180118">
</HEAD>

<BODY BGCOLOR="#FFFFFF" LEFTMARGIN="0" RIGHTMARGIN="0" TOPMARGIN="0">


<!--DOCBODY_START-->
<BR>
<CENTER>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" VALIGN="top" WIDTH="90%">
	<TR>
		<TD VALIGN="top">
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<H1>Running PKZIP Hangs WFW or Windows NT MS-DOS Command Prompt</H1>
			</FONT>
			<FONT FACE="verdana,arial,helvetica" SIZE="1">
			Last reviewed:  September 9, 1996</FONT><BR>
			<FONT FACE="verdana,arial,helvetica" SIZE="2">
			<B>Article ID: Q130117</B>
			</FONT>
		</TD>
	</TR>
	<TR>
	<TD>
	<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>



 
The information in this article applies to:

<UL><LI>Microsoft Windows NT Workstation version 3.5
<LI>Microsoft Windows NT Server version 3.5
<LI>Microsoft Windows for Workgroups version 3.11
</UL> 
<P>
<P><h2>SYMPTOMS</h2>
 
<P>
When you run MS-DOS Command Prompt on a computer running Windows for
Workgroups or Windows NT, and then run PKZIP.EXE from a Windows NT read-
only network drive to compress a large file (ten megabytes or larger), your
MS-DOS Command Prompt may stop responding (hang).
<P>
<P><h2>CAUSE</h2>
 
<P>
PKZIP is attempting to create a temporary file. When the MS-DOS create
unique file API is executed at a network drive with read-only privileges,
the Windows NT server service returns SMB access denied. This problem
occurs under Windows for Workgroups because the Windows NT workstation
service does not handle the SMB access denied. This problem occurs under
Windows NT because the Windows NT redirector does not correctly handle the
SMB access denied. Because of these problems, the application does not
terminate, and the API call repeatedly attempts to recreate random file
names. This loop sends request to the server infinitely.
<P>
This problem occurs only when your read-only network drive is on a computer
running Windows NT. For example, if the read-only drive is on a computer
running Windows for workgroups, the server responds in a fashion which
allows the application to return access denied to the user and the
application halts. The Windows for Workgroups server returns SMB access
denied: 2,4.
<P>
<P><h2>RESOLUTION</h2>
 
<P>
To work around this problem, run PKZIP from a local or network drive that
provides both read and write privileges for the temporary files. To correct
this problem under Windows for Workgroups, install the latest US Service
Pack for Windows NT on the computer running Windows NT. To correct this
problem, install the latest US Service Pack for Windows NT.
<P>
NOTE: SRV.SYS and RDR.SYS were changed to handle the SMB access denied
return codes properly.
<P>
<P><h2>STATUS</h2>
 
<P>
Microsoft has confirmed this to be a problem in Windows NT version
3.5. This problem was corrected in the latest US Service Pack for
Windows NT. For information on obtaining this update, query on the
following word in the Microsoft Knowledge Base (without the spaces):
<P>
<PRE>   S E R V P A C K

</PRE>This problem was corrected in Windows NT version 3.51.
<P>
The third-party products discussed here are manufactured by vendors
independent of Microsoft; we make no warranty, implied or otherwise,
regarding these products' performance or reliability.
<P>

	</FONT>
	</TD>
	</TR>
</TABLE>
<P>


<!--DOCBODY_END-->

<!--FOOTER_START-->
<table cellpadding=5 border=0 width="90%">
<tr>
<td>
	<HR WIDTH="90%">

<BLOCKQUOTE>
<FONT FACE="Verdana, Arial, Helvetica" SIZE="1">
<SPAN STYLE="font-family:verdana,arial,helvetica; font-size:8pt">
KBCategory: kbnetwork kbbug3.50 kbfix3.50.sp2 kbfix3.51<BR>
KBSubcategory: ntnetserv<BR>
Additional reference words: prodnt wfw wfwg 3.11 3.50 3.51 share 1,5<BR>
0xc0000022 error code
<P>


</SPAN>
</FONT>
<BR>
<BR>
THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.
</BLOCKQUOTE>
<P>
<center>
	<FONT FACE="Verdana,Arial,Helvetica" SIZE="1">
	Last reviewed:  September 9, 1996</FONT>
	<BR>
	<A href="../cpyright.htm" STYLE="font: bold 7pt Verdana,Arial,Helvetica">&copy; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A><BR>
	
</center>
</td>
</tr>
</table>

<!--FOOTER_END-->
</FONT>
</BODY>
</HTML>
