サンプル: 拡張メタファイル エディタ

要約:

このサンプルは、Win32 拡張メタファイル API 関数のデモを
行います。


詳細:

MFEDIT メタファイル エディタには以下の機能があります。

	GDI 呼び出しの記録と再生
	ビットマップと拡張メタファイルを、変形して他の拡張メタファイルへ
		埋め込む
	拡張メタファイルの記録に対するヒット テスト
	ランダム アクセス再生
	メタファイル レコードをひとつずつ再生
	現存するメタファイル レコードの中から他の新しい拡張メタファイルへの
		選択的な記録
	ペン、テキスト、べジエ、線、楕円、矩形、および埋め込みビットマップと
		拡張メタファイル ツールによる描画


GDI 呼び出しの記録と再生

	現存する拡張メタファイルを再生するには、[ファイル] メニューから 
	[メタファイルの読み込み] を選ぶか、[イジェクト] ボタンをクリック
	して [ファイルを開く] ダイアログを表示し、適当なファイルを
	選択してください。その後、[再生] ボタンをクリックし、描画面で
	再生してください。

	記録するには、[記録] ボタンをクリックし、用意されている
	グラフィック ツールを使って描画面に描画してください。終了したら 
	[停止] ボタンをクリックしてください。

	GDI 呼び出しは c:\metafx.emf として記録されます (ファイル名の 
	x の部分は、0、1、2、3... となります)。違う名前でメタファイルを
	保存したいときは、[ファイル] メニューから 
	[メタファイルを名前を付けて保存] を選んでください。

	新しいファイル名は、その後記録されるすべてのメタファイル名
	の基本となります。この基本の名前に 0、1、2、3... が追加
	されます。

	デフォルトの描画ツールはペンです。別の描画ツールを選択する
	には、コントロール パネル内の選択したいツールのボタンを
	クリックするだけです。


ビットマップと拡張メタファイルを、変形して他の拡張メタファイルへ埋め込む

	[記録] ボタンをクリックしてください。ビットマップまたは
	メタファイル ツールを選択し、現在読み込まれているビットマップ
	またはメタファイルを、下で述べているようにして埋め込んでください。
	終了したら[停止] ボタンをクリックしてください。


拡張メタファイルの記録に対するヒット テスト

	[再生] ボタンをクリックして、拡張メタファイルを再生して
	ください。その後、[編集] メニューから [ヒット テスト] を選択して
	ください。マウス ポインタは描画面の上に来たとき、クロス カーソルに
	変わります。

	そして、描画面内の、再生されたグラフィック オブジェクトを
	クリックしてください。エディタはマウス位置のオブジェクトに
	対応するレコードを見つけ出すために、1 レコードずつメタファイル
	を検索します。この検索は、対応するオブジェクトにヒットする
	まで、グラフィック オブジェクトを赤く変えて、可視的な手がかりを
	用意します。ヒットすれば、コントロール パネルにレコード番号が
	表示され、ビープ音が鳴り、ヒット メッセージが下に表示されます。

	終了したら、[ヒット テスト] メニュー項目のチェックを
	外してください。

ランダム アクセス再生

	指定するレコードを再生するには、コントロール パネル上の
	番号ボタンをクリックしてください。2 桁以上のレコードに
	アクセスするには、[10+] ボタンを適当な回数クリックし、
	その後、適当な番号ボタンをクリックすると、番号の総和で
	レコードを指定できます。

メタファイル レコードをひとつずつ再生

	[早送り] ボタンをクリックすると、メタファイル レコードが
	ひとつずつ再生されます。

現存するメタファイル レコードの中から他の新しい拡張メタファイルへの
選択的な記録

	[記録] ボタンをクリックしてから、適当な番号ボタンを
	クリックし、描画面内で、メタファイル レコードを選んで
	再生してください。プレイバック レコードは新しいメタファイルに
	レコードされます。終了したら [停止] ボタンをクリックして
	ください。

ペン、テキスト、べジエ、線、楕円、矩形、および埋め込みビットマップと
拡張メタファイル ツールによる描画

	デフォルトのペンは黒です。ペンの色を変えるには、
	[オプション] メニューから [ペン] メニュー項目を選び、
	色を選択するだけです。

	矩形の塗りつぶしと楕円の塗りつぶしルーチンに使われる
	デフォルトのブラシは黒です。ブラシの色を変えるには、
	[オプション] メニューから [ブラシ] を選び、色を
	選択するだけです。

	テキスト ツールはデフォルトのシステム フォントを使います。
	フォントを変えるには、[オプション] メニューから [フォント] 
	を選び、使用したいフォントとフォント属性を選択します。

	ベジエ ツールは、最初 4 つの点をとり、その後 3 つの点を
	とります。ベジエ曲線を描くには [ベジエ] ツールを選び、
	描画面を 3 回または 4 回クリックし、制御点を
	置いていきます。

	現在ロードされているピットマップを埋め込むには、
	[ビットマップ] ツールを選び、ビットマップをどこに置くかを
	指定するために、描画面を 3 ヶ所クリックするだけです。
	エディタはビットマップに適当な変形を施し、この
	ビットマップを描画に埋め込みます。

	ビットマップを読み込むには、ファイル メニューから 
	[ビットマップの読み込み] を選び、選択を行います。
	[ビットマップ] ツールはオプションでマスク 
	ビットマップをとります。マスク ビットマップは
	モノクロ ビットマップでなければなりません。

	マスク ビットマップを読み込むには、[ファイル] 
	メニューから [マスク ビットマップの読み込み] を選び、
	選択を行います。カラー ビットマップをマスクとして
	選択すると、マスクをリセットし、マスク無しに設定されます。

	現在読み込まれている拡張メタファイルを埋め込むには、
	[拡張メタファイルの埋め込み] ツールを選択し、拡張
	メタファイルをどこに置くかを指定するために、描画面を 
	3 ヶ所クリックします。エディタはメタファイルに適当な
	変形を施し、メタファイルを描画に埋め込みます。


