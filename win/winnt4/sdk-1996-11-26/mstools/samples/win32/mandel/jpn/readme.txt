サンプル: GDI と USER API 関数のフラクタルを使ったデモ

要約:

この MANDEL サンプルは Win32 GDI と USER API 関数をフラクタル
図形を設定することでデモします。

詳細:

この「マンデルブローの夢」は以下の機能を提供します:

	マンデルブロー セットと対応するジュリア セットの描画
	セットの任意の部分の拡大
	MDI ウィンドウへのフラクタルの描画
	浮動小数点計算と固定小数点計算
	カラー テーブル エントリのシフト
	パレット エントリの変更とパレットのアニメーティング
		(カラー サイクリング)
	特殊効果を施したビットマップの読み込みと保管
	塗り潰しによるビットマップの色の変更
	特殊効果のための境界トレースとクリップ領域の作成
	印刷のためのプリンタの列挙
	ビューワでの再生用の RLE の読み込み 
		(または、.bmp ファイルから RLE への変換)
	メモリ内の RLE のディスクへの保管


	注: このサンプルは、固定小数点計算のために SDK で提供されている
            LARGE_INTEGER ライブラリを使用します。



マンデルブロー セットと対応するジュリア セットの描画

1.	マンデルブロー セットを描画するには、まず MDI 子ウィンドウを
	作成します。MDI 子ウィンドウがまだ作成されていなければ、
	[作成] メニューから [マンデルブロー セット] を選択して
	ください。

2.	その後、浮動小数点計算か固定小数点計算かのどちらかの、希望
	する計算方式を決定するために、[描画」 メニューから [固定小数
	点計算] か [浮動小数点計算] のどちらかを選んでください。
	固定小数点計算のほうが速いですが、拡大したときの分解能は
	低くなります。

3.	[反復] メニューから反復回数を選び、[描画] メニューから
	ステップ数も選んでください。高い反復回数を選ぶと、画像は
	細かく表現されますが、画像の生成が遅くなります。ステップは
	すべての走査線が描画されるどうかを決定します。走査線が
	多ければ画像は良くなりますが、画像の生成が遅くなります。

4.	描画を開始するには、[描画] メニューから [描画] を選んで
	ください。

5.	ジュリア セットを描画するには、マウスの右ボタンでマンデル
	ブロー セット (マンデルブロー ウィンドウの描画面) 内の点を
	選択してください。ジュリア MDI ウィンドウが新たに作成され
	ます。[描画] メニューから [描画] を選ぶと描画が開始
	されます。

6.	マウスの右ボタンで選択した点は、ジュリア セットのために
	使われる複素定数を決定します。


セットの任意の部分の拡大

1.	拡大するには、拡大したい領域を指定してください。マウスの
	左ボタンをクリックし、ドラッグしてボタンを放すことで指定します。

	親ウィンドウ (マンデルブロー ウィンドウまたはジュリア ウィンドウ) 
	と同じタイプの新しい MDI 子ウィンドウが作成されます。

2.	描画を開始するには、[描画] メニューから [描画] を選んでください。

MDI ウィンドウへのフラクタルの描画

	描画のための新しい MDI 子ウィンドウを作成するには、[作成] メニュー
	から [マンデルブロー セット] または [ジュリア セット]を選んでください。

	または、マウスの左ボタンを使って、マンデルブローかジュリアの 
	MDI ウィンドウ内の拡大する領域を指定すると、描画のための新しい 
	MDI 子ウィンドウが作成されます。

	または、マンデルブロー ウィンドウ内で、マウスの右ボタンをクリック
	すると、クリックされた位置に対応するジュリア MDI ウィンドウが
	作成されます。

浮動小数点計算と固定小数点計算

	[描画] メニューから [浮動小数点計算] または [固定小数点計算] の
	メニュー項目を選んでください。固定小数点計算は 20.11 固定小数点
	整数演算を計算に使います。


カラー テーブル エントリのシフト

	[色] メニューから [シフト] を選ぶか F10 を押して、
	カラー テーブル エントリをシフトしてください。アクティブな
	MDI ウィンドウの画像が更新されます。

パレット エントリの変更とパレットのアニメーティング
(カラー サイクリング)

	[色] メニューから [サイクル] を選ぶか F11 を押すと、
	画像のカラー サイクリングが開始されます。

	ディスプレイ デバイスがパレット管理をサポートしていない場合、
	メニューは灰色になっています。現時点では、 MIPs のディスプレイ 
	ドライバだけが、これをサポートしています。

特殊効果を施したビットマップの読み込みと保管

	[ビットマップ] メニューから [ビットマップの読み込み] を選ぶと、
	アクティブな子ウィンドウにビットマップが読み込まれます。また、
	アクティブな MDI 子ウィンドウの画像を保管するには、
	[ビットマップを名前を付けて保存] を選択してください。

塗り潰しによるビットマップの色の変更

	[色] メニューから [カスタム] を選んでください。カーソルが
	アクティブな子ウィンドウ上ではペンキ缶に変わります。画像の上で
	マウスの左ボタンをクリックするとカーソルの下の古い色が新しい色
	に変わります。

特殊効果のための境界トレースとクリップ領域の作成

	マンデルブローのどのアクティブ ウィンドウからでも、[領域] 
	メニューから [マンデルブロー クリップ領域の設定] を選べます。
	エスケープ領域の境界がトレースされます。その後、領域は
	クリップ領域として選択されます。

	表示のためにビットマップをロードした場合は、ビットマップは
	クリップ領域をとおしたものしか表示されません。新しい画像は
	保管することができます。

	クリップ領域を取り除くには、[領域] メニューから [クリップ
	領域の設定解除] を選んでください。

    注:	境界トレースのアルゴリズムは、いくつかのピクセルの小さな島を
	トレースして停止するかも知れません。このような場合は、
	ウィンドウの大きさを変えるか、拡大されたウィンドウを作成して、
	トレースしなおしてください。


印刷のためのプリンタの列挙

	「マンデルブローの夢」は、開始時にプリンタを列挙し、その
	プリンタを [印刷] メニューに挿入します。[印刷] メニューから
	プリンタを選択すると、アクティブな MDI ウィンドウの画像を
	印刷します。

ビューワーでの再生用の RLE の読み込み (または、.bmp ファイルから RLE への変換)

	[作成] メニューから [ビューワー] を選ぶと、ビューワー ウィンドウが
	作成されるか、または既存のビューワー ウィンドウが一番手前に表示
	されます。[ファイル] メニューから [ビットマップの読み込み]を選択
	すると、RLE または bmp ファイルがディスクからメモリに読み込まれ
	ます。表示を行うには、[オプション] メニューから [プレイ] または 
	[連続プレイ] を選択します。

	この機能がどのように働くか見てみましょう。.\rsc\julia.rle 
	ファイルを読み込んで、[連続プレイ] を選択してください。
	Julia.rle は、マンデルブロー セットのエスケープ点や
	非エスケープ点の境界に沿っていろいろなジュリア セットを
	集めたものです。

メモリ内の RLE のディスクへの保管

	[作成] メニューから [ビューワー] を選んで、ビューワー ウィンドウ
	を作成するか、既存のビューワー ウィンドウを一番手前に表示します。
	[ファイル] メニューから [ビットマップを名前を付けて保存] を選択すると、
	RLE がメモリからディスクに保管されます。
