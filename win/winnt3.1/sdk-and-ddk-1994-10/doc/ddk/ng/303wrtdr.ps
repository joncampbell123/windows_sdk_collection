%!PS-Adobe-3.0
%%Creator: Windows PSCRIPT
%%Title: Microsoft Word - 303WRTDR.DOC
%%BoundingBox: 14 9 597 784
%%DocumentNeededResources: (atend)
%%DocumentSuppliedResources: (atend)
%%Pages: (atend)
%%BeginResource: procset Win35Dict 3 1
/Win35Dict 290 dict def Win35Dict begin/bd{bind def}bind def/in{72
mul}bd/ed{exch def}bd/ld{load def}bd/tr/translate ld/gs/gsave ld/gr
/grestore ld/M/moveto ld/L/lineto ld/rmt/rmoveto ld/rlt/rlineto ld
/rct/rcurveto ld/st/stroke ld/n/newpath ld/sm/setmatrix ld/cm/currentmatrix
ld/cp/closepath ld/ARC/arcn ld/TR{65536 div}bd/lj/setlinejoin ld/lc
/setlinecap ld/ml/setmiterlimit ld/sl/setlinewidth ld/scignore false
def/sc{scignore{pop pop pop}{0 index 2 index eq 2 index 4 index eq
and{pop pop 255 div setgray}{3{255 div 3 1 roll}repeat setrgbcolor}ifelse}ifelse}bd
/FC{bR bG bB sc}bd/fC{/bB ed/bG ed/bR ed}bd/HC{hR hG hB sc}bd/hC{
/hB ed/hG ed/hR ed}bd/PC{pR pG pB sc}bd/pC{/pB ed/pG ed/pR ed}bd/sM
matrix def/PenW 1 def/iPen 5 def/mxF matrix def/mxE matrix def/mxUE
matrix def/mxUF matrix def/fBE false def/iDevRes 72 0 matrix defaultmatrix
dtransform dup mul exch dup mul add sqrt def/fPP false def/SS{fPP{
/SV save def}{gs}ifelse}bd/RS{fPP{SV restore}{gr}ifelse}bd/EJ{gsave
showpage grestore}bd/#C{userdict begin/#copies ed end}bd/FEbuf 2 string
def/FEglyph(G  )def/FE{1 exch{dup 16 FEbuf cvrs FEglyph exch 1 exch
putinterval 1 index exch FEglyph cvn put}for}bd/SM{/iRes ed/cyP ed
/cxPg ed/cyM ed/cxM ed 72 100 div dup scale dup 0 ne{90 eq{cyM exch
0 eq{cxM exch tr -90 rotate -1 1 scale}{cxM cxPg add exch tr +90 rotate}ifelse}{cyP
cyM sub exch 0 ne{cxM exch tr -90 rotate}{cxM cxPg add exch tr -90
rotate 1 -1 scale}ifelse}ifelse}{pop cyP cyM sub exch 0 ne{cxM cxPg
add exch tr 180 rotate}{cxM exch tr 1 -1 scale}ifelse}ifelse 100 iRes
div dup scale 0 0 transform .25 add round .25 sub exch .25 add round
.25 sub exch itransform translate}bd/SJ{1 index 0 eq{pop pop/fBE false
def}{1 index/Break ed div/dxBreak ed/fBE true def}ifelse}bd/ANSIVec[
16#0/grave 16#1/acute 16#2/circumflex 16#3/tilde 16#4/macron 16#5/breve
16#6/dotaccent 16#7/dieresis 16#8/ring 16#9/cedilla 16#A/hungarumlaut
16#B/ogonek 16#C/caron 16#D/dotlessi 16#27/quotesingle 16#60/grave
16#7C/bar 16#82/quotesinglbase 16#83/florin 16#84/quotedblbase 16#85
/ellipsis 16#86/dagger 16#87/daggerdbl 16#88/circumflex 16#89/perthousand
16#8A/Scaron 16#8B/guilsinglleft 16#8C/OE 16#91/quoteleft 16#92/quoteright
16#93/quotedblleft 16#94/quotedblright 16#95/bullet 16#96/endash 16#97
/emdash 16#98/tilde 16#99/trademark 16#9A/scaron 16#9B/guilsinglright
16#9C/oe 16#9F/Ydieresis 16#A0/space 16#A1/exclamdown 16#A4/currency
16#A5/yen 16#A6/brokenbar 16#A7/section 16#A8/dieresis 16#A9/copyright
16#AA/ordfeminine 16#AB/guillemotleft 16#AC/logicalnot 16#AD/hyphen
16#AE/registered 16#AF/macron 16#B0/degree 16#B1/plusminus 16#B2/twosuperior
16#B3/threesuperior 16#B4/acute 16#B5/mu 16#B6/paragraph 16#B7/periodcentered
16#B8/cedilla 16#B9/onesuperior 16#BA/ordmasculine 16#BB/guillemotright
16#BC/onequarter 16#BD/onehalf 16#BE/threequarters 16#BF/questiondown
16#C0/Agrave 16#C1/Aacute 16#C2/Acircumflex 16#C3/Atilde 16#C4/Adieresis
16#C5/Aring 16#C6/AE 16#C7/Ccedilla 16#C8/Egrave 16#C9/Eacute 16#CA
/Ecircumflex 16#CB/Edieresis 16#CC/Igrave 16#CD/Iacute 16#CE/Icircumflex
16#CF/Idieresis 16#D0/Eth 16#D1/Ntilde 16#D2/Ograve 16#D3/Oacute 16#D4
/Ocircumflex 16#D5/Otilde 16#D6/Odieresis 16#D7/multiply 16#D8/Oslash
16#D9/Ugrave 16#DA/Uacute 16#DB/Ucircumflex 16#DC/Udieresis 16#DD/Yacute
16#DE/Thorn 16#DF/germandbls 16#E0/agrave 16#E1/aacute 16#E2/acircumflex
16#E3/atilde 16#E4/adieresis 16#E5/aring 16#E6/ae 16#E7/ccedilla 16#E8
/egrave 16#E9/eacute 16#EA/ecircumflex 16#EB/edieresis 16#EC/igrave
16#ED/iacute 16#EE/icircumflex 16#EF/idieresis 16#F0/eth 16#F1/ntilde
16#F2/ograve 16#F3/oacute 16#F4/ocircumflex 16#F5/otilde 16#F6/odieresis
16#F7/divide 16#F8/oslash 16#F9/ugrave 16#FA/uacute 16#FB/ucircumflex
16#FC/udieresis 16#FD/yacute 16#FE/thorn 16#FF/ydieresis ] def/reencdict
12 dict def/IsChar{basefontdict/CharStrings get exch known}bd/MapCh{dup
IsChar not{pop/bullet}if newfont/Encoding get 3 1 roll put}bd/MapDegree{16#b0
/degree IsChar{/degree}{/ring}ifelse MapCh}bd/MapBB{16#a6/brokenbar
IsChar{/brokenbar}{/bar}ifelse MapCh}bd/ANSIFont{reencdict begin/newfontname
ed/basefontname ed FontDirectory newfontname known not{/basefontdict
basefontname findfont def/newfont basefontdict maxlength dict def basefontdict{exch
dup/FID ne{dup/Encoding eq{exch dup length array copy newfont 3 1 roll
put}{exch newfont 3 1 roll put}ifelse}{pop pop}ifelse}forall newfont
/FontName newfontname put 127 1 159{newfont/Encoding get exch/bullet
put}for ANSIVec aload pop ANSIVec length 2 idiv{MapCh}repeat MapDegree
MapBB newfontname newfont definefont pop}if newfontname end}bd/SB{FC
/ULlen ed/str ed str length fBE not{dup 1 gt{1 sub}if}if/cbStr ed
/dxGdi ed/y0 ed/x0 ed str stringwidth dup 0 ne{/y1 ed/x1 ed y1 y1
mul x1 x1 mul add sqrt dxGdi exch div 1 sub dup x1 mul cbStr div exch
y1 mul cbStr div}{exch abs neg dxGdi add cbStr div exch}ifelse/dyExtra
ed/dxExtra ed x0 y0 M fBE{dxBreak 0 BCh dxExtra dyExtra str awidthshow}{dxExtra
dyExtra str ashow}ifelse fUL{x0 y0 M dxUL dyUL rmt ULlen fBE{Break
add}if 0 mxUE transform gs rlt cyUL sl [] 0 setdash st gr}if fSO{x0
y0 M dxSO dySO rmt ULlen fBE{Break add}if 0 mxUE transform gs rlt cyUL
sl [] 0 setdash st gr}if n/fBE false def}bd/font{/name ed/Ascent ed
0 ne/fT3 ed 0 ne/fSO ed 0 ne/fUL ed/Sy ed/Sx ed 10.0 div/ori ed -10.0
div/esc ed/BCh ed name findfont/xAscent 0 def/yAscent Ascent def/ULesc
esc def ULesc mxUE rotate pop fT3{/esc 0 def xAscent yAscent mxUE transform
/yAscent ed/xAscent ed}if [Sx 0 0 Sy neg xAscent yAscent] esc mxE
rotate mxF concatmatrix makefont setfont [Sx 0 0 Sy neg 0 Ascent] mxUE
mxUF concatmatrix pop fUL{currentfont dup/FontInfo get/UnderlinePosition
known not{pop/Courier findfont}if/FontInfo get/UnderlinePosition get
1000 div 0 exch mxUF transform/dyUL ed/dxUL ed}if fSO{0 .3 mxUF transform
/dySO ed/dxSO ed}if fUL fSO or{currentfont dup/FontInfo get/UnderlineThickness
known not{pop/Courier findfont}if/FontInfo get/UnderlineThickness get
1000 div Sy mul/cyUL ed}if}bd/min{2 copy gt{exch}if pop}bd/max{2 copy
lt{exch}if pop}bd/CP{/ft ed{{ft 0 eq{clip}{eoclip}ifelse}stopped{currentflat
1 add setflat}{exit}ifelse}loop}bd/patfont 10 dict def patfont begin
/FontType 3 def/FontMatrix [1 0 0 -1 0 0] def/FontBBox [0 0 16 16]
def/Encoding StandardEncoding def/BuildChar{pop pop 16 0 0 0 16 16
setcachedevice 16 16 false [1 0 0 1 .25 .25]{pat}imagemask}bd end/p{
/pat 32 string def{}forall 0 1 7{dup 2 mul pat exch 3 index put dup
2 mul 1 add pat exch 3 index put dup 2 mul 16 add pat exch 3 index
put 2 mul 17 add pat exch 2 index put pop}for}bd/pfill{/PatFont patfont
definefont setfont/ch(AAAA)def X0 64 X1{Y1 -16 Y0{1 index exch M ch
show}for pop}for}bd/vert{X0 w X1{dup Y0 M Y1 L st}for}bd/horz{Y0 w
Y1{dup X0 exch M X1 exch L st}for}bd/fdiag{X0 w X1{Y0 M X1 X0 sub dup
rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup rlt st}for}bd/bdiag{X0 w
X1{Y1 M X1 X0 sub dup neg rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup
neg rlt st}for}bd/AU{1 add cvi 15 or}bd/AD{1 sub cvi -16 and}bd/SHR{pathbbox
AU/Y1 ed AU/X1 ed AD/Y0 ed AD/X0 ed}bd/hfill{/w iRes 37.5 div round
def 0.1 sl [] 0 setdash n dup 0 eq{horz}if dup 1 eq{vert}if dup 2 eq{fdiag}if
dup 3 eq{bdiag}if dup 4 eq{horz vert}if 5 eq{fdiag bdiag}if}bd/F{/ft
ed fm 256 and 0 ne{gs FC ft 0 eq{fill}{eofill}ifelse gr}if fm 1536
and 0 ne{SHR gs HC ft CP fm 1024 and 0 ne{/Tmp save def pfill Tmp restore}{fm
15 and hfill}ifelse gr}if}bd/S{PenW sl PC st}bd/m matrix def/GW{iRes
12 div PenW add cvi}bd/DoW{iRes 50 div PenW add cvi}bd/DW{iRes 8 div
PenW add cvi}bd/SP{/PenW ed/iPen ed iPen 0 eq iPen 6 eq or{[] 0 setdash}if
iPen 1 eq{[DW GW] 0 setdash}if iPen 2 eq{[DoW GW] 0 setdash}if iPen
3 eq{[DW GW DoW GW] 0 setdash}if iPen 4 eq{[DW GW DoW GW DoW GW] 0
setdash}if}bd/E{m cm pop tr scale 1 0 moveto 0 0 1 0 360 arc cp m sm}bd
/AG{/sy ed/sx ed sx div 4 1 roll sy div 4 1 roll sx div 4 1 roll sy
div 4 1 roll atan/a2 ed atan/a1 ed sx sy scale a1 a2 ARC}def/A{m cm
pop tr AG m sm}def/P{m cm pop tr 0 0 M AG cp m sm}def/RRect{n 4 copy
M 3 1 roll exch L 4 2 roll L L cp}bd/RRCC{/r ed/y1 ed/x1 ed/y0 ed/x0
ed x0 x1 add 2 div y0 M x1 y0 x1 y1 r arcto 4{pop}repeat x1 y1 x0 y1
r arcto 4{pop}repeat x0 y1 x0 y0 r arcto 4{pop}repeat x0 y0 x1 y0 r
arcto 4{pop}repeat cp}bd/RR{2 copy 0 eq exch 0 eq or{pop pop RRect}{2
copy eq{pop RRCC}{m cm pop/y2 ed/x2 ed/ys y2 x2 div 1 max def/xs x2
y2 div 1 max def/y1 exch ys div def/x1 exch xs div def/y0 exch ys div
def/x0 exch xs div def/r2 x2 y2 min def xs ys scale x0 x1 add 2 div
y0 M x1 y0 x1 y1 r2 arcto 4{pop}repeat x1 y1 x0 y1 r2 arcto 4{pop}repeat
x0 y1 x0 y0 r2 arcto 4{pop}repeat x0 y0 x1 y0 r2 arcto 4{pop}repeat
m sm cp}ifelse}ifelse}bd/PP{{rlt}repeat}bd/OB{gs 0 ne{7 3 roll/y ed
/x ed x y translate ULesc rotate x neg y neg translate x y 7 -3 roll}if
sc B fill gr}bd/B{M/dy ed/dx ed dx 0 rlt 0 dy rlt dx neg 0 rlt cp}bd
/CB{B clip n}bd/ErrHandler{errordict dup maxlength exch length gt
dup{errordict begin}if/errhelpdict 12 dict def errhelpdict begin/stackunderflow(operand stack underflow)def
/undefined(this name is not defined in a dictionary)def/VMerror(you have used up all the printer's memory)def
/typecheck(operator was expecting a different type of operand)def
/ioerror(input/output error occured)def end{end}if errordict begin
/handleerror{$error begin newerror{/newerror false def showpage 72
72 scale/x .25 def/y 9.6 def/Helvetica findfont .2 scalefont setfont
x y moveto(Offending Command = )show/command load{dup type/stringtype
ne{(max err string)cvs}if show}exec/y y .2 sub def x y moveto(Error = )show
errorname{dup type dup( max err string )cvs show( : )show/stringtype
ne{( max err string )cvs}if show}exec errordict begin errhelpdict errorname
known{x 1 add y .2 sub moveto errhelpdict errorname get show}if end
/y y .4 sub def x y moveto(Stack =)show ostack{/y y .2 sub def x 1
add y moveto dup type/stringtype ne{( max err string )cvs}if show}forall
showpage}if end}def end}bd end
%%EndResource
/SVDoc save def
%%EndProlog
%%BeginSetup
Win35Dict begin
ErrHandler
statusdict begin 0 setjobtimeout end
statusdict begin statusdict /jobname (Microsoft Word - 303WRTDR.DOC) put end
/oldDictCnt countdictstack def {}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
/oldDictCnt countdictstack def {letter
}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
[{ }
/exec load currenttransfer /exec load] cvx settransfer
%%EndSetup
%%Page: 1 1
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 50 50 0 0 0 45 /Times-Roman /font32 ANSIFont font
0 0 0 fC
346 491 33 (C) 58 SB
404 491 36 (H) 61 SB
465 491 35 (A) 60 SB
525 491 28 (P) 53 SB
578 491 31 (T) 56 SB
634 491 31 (E) 56 SB
690 491 33 (R) 58 SB
748 491 13 ( ) 38 SB
786 491 25 (3) 50 SB
32 0 0 100 100 0 0 0 93 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 1400 513 346 604 CB
346 602 767 (Writing a TDI Driver) 767 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1117 1308 (The DDK contains a sample TDI driver that you can use in developing your) 1308 SB
721 1167 1260 (own driver. Although driver requirements vary depending on the network) 1260 SB
721 1217 1433 (communication protocol, many basic functions \(such as initialization, sending data,) 1433 SB
721 1267 1347 (receiving data, and deactivation\) are common to all drivers. Because writing a) 1347 SB
721 1317 1442 (driver from scratch can be difficult and time-consuming, most driver writers modify) 1442 SB
721 1367 1434 (an existing one whenever possible. By using the sample TDI driver to develop your) 1434 SB
721 1417 1325 (own, you can spend most of your time modifying code instead of in full-scale) 1325 SB
721 1467 229 (development.) 229 SB
721 1550 1423 (This section looks at the sample TDI driver and offers suggestions for adapting the) 1423 SB
721 1600 1280 (code to your network requirements. It includes some general programming) 1280 SB
721 1650 689 (considerations to note before beginning.) 689 SB
721 1733 184 (The DDK ) 184 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
905 1733 249 (Release Notes) 249 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1154 1733 955 ( document provides building and loading instructions to) 955 SB
721 1783 1413 (accompany these details of sample code modification. For more information about) 1413 SB
721 1833 1419 (the functions, types, and IOCTL or request messages described in this chapter, see) 1419 SB
721 1883 441 (Appendixes C through G.) 441 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2003 1094 (3.1  Programming Considerations) 1094 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2142 1679 (3.1.1  Connection-Oriented vs. Connectionless Transmission) 1679 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2238 1349 (TDI provides connection-oriented services at the transport layer to provide the) 1349 SB
721 2288 1325 (highest quality of service at the lowest cost. Depending on the specific driver) 1325 SB
721 2338 1430 (protocol, this may involve packetizing of client data, sequencing, acknowledgment,) 1430 SB
721 2388 809 (retransmission, flow control, or error recovery.) 809 SB
721 2471 1413 (TDI also provides connectionless services for datagrams. However, these services) 1413 SB
721 2521 1441 (are lightweight and do not provide error-free delivery or flow control. The transport) 1441 SB
721 2571 1222 (layer generally does not segment or reassemble datagrams. Delivery of) 1222 SB
721 2621 1428 (connectionless data is best effort only, and a TDI driver may lose or duplicate such) 1428 SB
721 2671 84 (data.) 84 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 1 def
/wp$fpage (1) def
/wp$date (07/18/93) def
/wp$time (04:40 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 2 2
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 18 (2) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 492 1276 (3.1.2  Suggestions for Developing a TDI Driver) 1276 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 588 1434 (Driver development should be done by using a high-level language, such as C. You) 1434 SB
634 638 1435 (can use other languages, but they must allow expression of the exact semantics of a) 1435 SB
634 688 1446 (C interface. The list of semantics is large and, at the very least, includes such basics) 1446 SB
634 738 1323 (as parameter passing conventions, stack cleanup conventions, register saving) 1323 SB
634 788 684 (conventions, and return value locations.) 684 SB
634 871 1397 (Windows NT libraries are not compatible with drivers written in languages other) 1397 SB
634 921 1428 (than C. You can write portions of the driver in another language, but parts that call) 1428 SB
634 971 1445 (library functions must be in C. Do not use assembly language to attempt to mimic C) 1445 SB
634 1021 1288 (calling conventions, because some library functions are actually C macros.) 1288 SB
634 1071 1386 (Furthermore, a library function may easily change to a macro, or vice versa, in a) 1386 SB
634 1121 541 (future version of Windows NT.) 541 SB
634 1204 1387 (Windows NT drivers execute in an interrupt-driven multiprocessor environment.) 1387 SB
634 1254 1409 (Make judicious use of Windows NT spin lock services to ensure data integrity for) 1409 SB
634 1304 454 (re-entrant driver software.) 454 SB
255 255 255 fC
1449 3 634 1404 B
1 F
n
0 0 0 fC
1449 2 634 1408 B
1 F
n
32 0 0 44 44 0 0 0 42 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 144 58 607 1411 CB
634 1417 80 (Note) 80 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
751 1419 1329 (When developing a TDI driver, always start with the simplest possible driver) 1329 SB
634 1469 1416 (that causes a network response. Iteratively refine this into the complete production) 1416 SB
634 1519 1364 (driver, testing every step of the way. This breaks testing down into manageable) 1364 SB
634 1569 94 (units.) 94 SB
255 255 255 fC
1449 3 634 1639 B
1 F
n
0 0 0 fC
1449 2 634 1636 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1717 930 (3.2  About the Sample Driver) 930 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1831 1422 (The files listed in Table 3.1 contain all source code for the sample TDI driver. The) 1422 SB
634 1881 1375 (driver provides a client interface consisting of dispatch functions and associated) 1375 SB
634 1931 1397 (messages. For more information, see Chapter 1. Before registering the driver, the) 1397 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 1980 246 (DriverEntry ) 246 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
880 1981 141 (function) 141 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1021 1980 11 ( ) 11 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1032 1981 998 (places the addresses of the dispatch functions in its device) 998 SB
634 2031 1376 (object. This allows the Windows NT kernel to route client requests to the driver) 1376 SB
634 2081 529 (through the dispatch functions.) 529 SB
634 2164 1427 (Sample TDI driver code interfaces with Ethernet \(802.3\), Token Ring \(802.5\), and) 1427 SB
634 2214 1335 (FDDI netcard drivers through the NDIS interface library wrapper. The driver) 1335 SB
634 2264 1397 (therefore contains all the NDIS 3.0 transport driver lower-edge functions that the) 1397 SB
634 2314 1336 (NDIS interface library requires. For more information, see Part II, Chapter 1.) 1336 SB
634 2397 1431 (To manage activity on the network, the sample TDI driver uses a set of objects that) 1431 SB
634 2447 1354 (define the state of the driver at any given time. The driver includes objects that) 1354 SB
634 2497 1322 (represent the driver itself, client network addresses, address files, connection) 1322 SB
634 2547 1373 (endpoints, client requests, and packets. Each object contains a field that keeps a) 1373 SB
634 2597 1418 (count of open references. This allows the driver to deallocate resources for objects) 1418 SB
634 2647 514 (when it no longer needs them.) 514 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 2 def
/wp$fpage (2) def
/wp$date (07/18/93) def
/wp$time (04:40 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 3 3
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1509 378 133 (Chapter ) 133 SB
1642 378 18 (3) 18 SB
1660 378 342 (    Writing a TDI Driver) 342 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (3) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (3) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1405 (Although the sample driver supports connection-oriented data transfer, it does not) 1405 SB
721 546 1371 (include functions for retransmission and flow control. In other words, the driver) 1371 SB
721 596 1074 (treats the underlying network as reliable to simplify operation.) 1074 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 684 622 (Table 3.1    Sample TDI Driver Files) 622 SB
1461 2 715 742 B
1 F
n
gs 283 63 721 749 CB
721 754 65 (File) 65 SB
gr
gs 1166 63 1005 749 CB
1055 754 168 (Definition) 168 SB
gr
1449 2 721 812 B
1 F
n
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 882 CB
721 886 57 (st.h) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 882 CB
1055 887 1090 (Serves as the header file for all sample TDI driver C language source) 1090 SB
gr
gs 1166 46 1005 932 CB
1055 933 1094 (files. This file includes all other sample driver header files, as well as) 1094 SB
gr
gs 1166 46 1005 978 CB
1055 979 1086 (header files for the NDIS interface library wrapper and the Windows) 1086 SB
gr
gs 1166 59 1005 1024 CB
1055 1025 170 (NT kernel.) 170 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1083 CB
721 1087 127 (stcnfg.h) 127 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 1083 CB
1055 1088 1012 (Defines a data structure the sample TDI driver uses for dynamic) 1012 SB
gr
gs 1166 59 1005 1133 CB
1055 1134 625 (configuration based on Registry values.) 625 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1192 CB
721 1196 142 (stconst.h) 142 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 63 1005 1192 CB
1055 1197 823 (Defines constant values the sample TDI driver uses.) 823 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1255 CB
721 1259 129 (sthdrs.h) 129 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 1255 CB
1055 1260 951 (Defines a structure describing TDI driver frame headers and) 951 SB
gr
gs 1166 59 1005 1305 CB
1055 1306 331 (associated constants.) 331 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1364 CB
721 1368 124 (stmac.h) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 1364 CB
1055 1369 1025 (Defines structures, constants, and macros the TDI driver uses for) 1025 SB
gr
gs 1166 46 1005 1414 CB
1055 1415 1012 (communicating with netcard drivers through the NDIS interface) 1012 SB
gr
gs 1166 46 1005 1460 CB
1055 1461 1036 (library wrapper. This file also contains prototypes for functions in) 1036 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 1166 59 1005 1506 CB
1055 1506 122 (stmac.c) 122 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 59 1005 1506 CB
1177 1507 10 (.) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1565 CB
721 1569 147 (stprocs.h) 147 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 1565 CB
1055 1570 1102 (Defines prototypes for the majority of the functions in the sample TDI) 1102 SB
gr
gs 1166 46 1005 1615 CB
1055 1616 1070 (driver source files. This file also defines some additional macros for) 1070 SB
gr
gs 1166 46 1005 1661 CB
1055 1662 967 (the sample TDI driver and contains mechanisms for enabling) 967 SB
gr
gs 1166 59 1005 1707 CB
1055 1708 703 (diagnostic printout during driver debugging.) 703 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 283 63 721 1766 CB
721 1770 140 (sttypes.h) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1005 1766 CB
1055 1771 1103 (Contains private data types and associated constant definitions for the) 1103 SB
gr
gs 1166 59 1005 1816 CB
1055 1817 979 (sample TDI driver. This file contains the following structures:) 979 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 443 63 1005 1904 CB
1055 1909 162 (Structure) 162 SB
gr
gs 715 63 1449 1904 CB
1499 1909 149 (Meaning) 149 SB
gr
1158 2 1005 1967 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 443 63 1005 1974 CB
1055 1979 350 (DEVICE_CONTEXT) 350 SB
gr
gs 715 63 1449 1974 CB
1499 1979 387 (defines the device object) 387 SB
gr
gs 443 63 1005 2037 CB
1055 2042 247 (TP_ADDRESS) 247 SB
gr
gs 715 63 1449 2037 CB
1499 2042 396 (defines an address object) 396 SB
gr
gs 443 63 1005 2100 CB
1055 2105 349 (TP_ADDRESS_FILE) 349 SB
gr
gs 715 63 1449 2100 CB
1499 2105 644 (defines a file object for an address object) 644 SB
gr
gs 443 63 1005 2163 CB
1055 2168 324 (TP_CONNECTION) 324 SB
gr
gs 715 63 1449 2163 CB
1499 2168 575 (defines a connection endpoint object) 575 SB
gr
gs 443 63 1005 2226 CB
1055 2231 218 (TP_PACKET) 218 SB
gr
gs 715 63 1449 2226 CB
1499 2231 331 (defines packet object) 331 SB
gr
gs 443 63 1005 2289 CB
1055 2294 243 (TP_REQUEST) 243 SB
gr
gs 715 63 1449 2289 CB
1499 2294 342 (defines request object) 342 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 3 def
/wp$fpage (3) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 4 4
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 18 (4) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 501 181 (Table 3.1 \() 181 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
815 500 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
979 501 477 (\)    Sample TDI Driver Files) 477 SB
1461 2 628 559 B
1 F
n
gs 283 63 634 566 CB
634 571 65 (File) 65 SB
gr
gs 1166 63 918 566 CB
968 571 168 (Definition) 168 SB
gr
1449 2 634 629 B
1 F
n
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 636 CB
634 640 154 (address.c) 154 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 636 CB
967 641 994 (Contains functions that manage address objects. Some of these) 994 SB
gr
gs 1166 46 917 686 CB
967 687 1046 (functions create, destroy, register, open, and close address objects.) 1046 SB
gr
gs 1166 46 917 732 CB
967 733 1095 (Additional functions allocate and deallocate resources for the address) 1095 SB
gr
gs 1166 46 917 778 CB
967 779 981 (objects, keep track of client references to the objects, and send) 981 SB
gr
gs 1166 59 917 824 CB
967 825 511 (datagrams from address objects.) 511 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 883 CB
634 887 153 (connect.c) 153 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 883 CB
967 888 1104 (Contains functions that handle local node client requests to connect to) 1104 SB
gr
gs 1166 46 917 933 CB
967 934 1074 (and disconnect from remote node clients during connection-oriented) 1074 SB
gr
gs 1166 59 917 979 CB
967 980 223 (data transfers.) 223 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1038 CB
634 1042 157 (connobj.c) 157 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1038 CB
967 1043 1102 (Contains functions that manage connection endpoint objects. Some of) 1102 SB
gr
gs 1166 46 917 1088 CB
967 1089 1077 (these functions create, destroy, stop, and cancel connection endpoint) 1077 SB
gr
gs 1166 46 917 1134 CB
967 1135 1096 (objects. Additional functions allocate and deallocate resources for the) 1096 SB
gr
gs 1166 59 917 1180 CB
967 1181 798 (objects and keep track of client references to them.) 798 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1239 CB
634 1243 131 (devctx.c) 131 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1239 CB
967 1244 1116 (Contains functions that manage the sample TDI driver object. Some of) 1116 SB
gr
gs 1166 46 917 1289 CB
967 1290 996 (these functions create and destroy the device object. Additional) 996 SB
gr
gs 1166 59 917 1335 CB
967 1336 708 (functions keep track of client references to it.) 708 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1394 CB
634 1398 113 (event.c) 113 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1394 CB
967 1399 1094 (Contains a function that handles kernel-mode client set event handler) 1094 SB
gr
gs 1166 59 917 1444 CB
967 1445 140 (requests.) 140 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1503 CB
634 1507 179 (framesnd.c) 179 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1503 CB
967 1508 1041 (Contains functions that send datagrams, connect-type frames, and) 1041 SB
gr
gs 1166 46 917 1553 CB
967 1554 988 (disconnect-type frames on the network. An additional function) 988 SB
gr
gs 1166 59 917 1599 CB
967 1600 993 (performs postprocessing after the TDI client sends a datagram.) 993 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1658 CB
634 1662 150 (iframes.c) 150 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1658 CB
967 1663 1108 (Contains a function that receives TSDUs from the netcard driver. This) 1108 SB
gr
gs 1166 46 917 1708 CB
967 1709 995 (function does minimal processing and, if necessary, queues the) 995 SB
gr
gs 1166 59 917 1754 CB
967 1755 567 (received data for further processing.) 567 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 1813 CB
634 1817 79 (ind.c) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 1813 CB
967 1818 1104 (Contains the sample TDI driver NDIS 3.0 transport driver lower-edge) 1104 SB
gr
gs 1166 46 917 1863 CB
967 1864 1061 (functions associated with received data. The NDIS interface library) 1061 SB
gr
gs 1166 46 917 1909 CB
967 1910 1067 (wrapper calls these functions to indicate received data and to signal) 1067 SB
gr
gs 1166 59 917 1955 CB
967 1956 807 (that data is ready for sample TDI driver inspection.) 807 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 2014 CB
634 2018 91 (info.c) 91 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 2014 CB
967 2019 996 (Contains functions that handle client query and set information) 996 SB
gr
gs 1166 46 917 2064 CB
967 2065 1114 (requests concerning address, connection endpoint, and control channel) 1114 SB
gr
gs 1166 59 917 2110 CB
967 2111 121 (objects.) 121 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 2169 CB
634 2173 133 (packet.c) 133 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 2169 CB
967 2174 1013 (Contains functions that allocate and deallocate NDIS 3.0 packet) 1013 SB
gr
gs 1166 46 917 2219 CB
967 2220 1090 (descriptors and buffer descriptors that the sample TDI driver uses for) 1090 SB
gr
gs 1166 59 917 2265 CB
967 2266 434 (sending and receiving data.) 434 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 2324 CB
634 2328 80 (rcv.c) 80 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 2324 CB
967 2329 1062 (Contains functions that process client receive and receive datagram) 1062 SB
gr
gs 1166 59 917 2374 CB
967 2375 140 (requests.) 140 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 634 2433 CB
634 2437 138 (rcveng.c) 138 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 917 2433 CB
967 2438 1061 (Contains receive engine functions. Some functions activate, cancel,) 1061 SB
gr
gs 1166 46 917 2483 CB
967 2484 1095 (and complete client receive requests. An additional function awakens) 1095 SB
gr
gs 1166 59 917 2529 CB
967 2530 499 (a sleeping connection endpoint.) 499 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 4 def
/wp$fpage (4) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 5 5
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1509 378 133 (Chapter ) 133 SB
1642 378 18 (3) 18 SB
1660 378 342 (    Writing a TDI Driver) 342 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (3) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (5) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
721 497 181 (Table 3.1 \() 181 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
902 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1066 497 477 (\)    Sample TDI Driver Files) 477 SB
1461 2 715 555 B
1 F
n
gs 283 63 721 562 CB
721 567 65 (File) 65 SB
gr
gs 1166 63 1005 562 CB
1055 567 168 (Definition) 168 SB
gr
1449 2 721 625 B
1 F
n
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 632 CB
721 636 147 (request.c) 147 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 632 CB
1054 637 1103 (Contains functions that manipulate request objects. Specific functions) 1103 SB
gr
gs 1166 46 1004 682 CB
1054 683 1012 (allocate, deallocate, create, destroy, and complete processing for) 1012 SB
gr
gs 1166 46 1004 728 CB
1054 729 1052 (request objects. An additional function keeps track of references to) 1052 SB
gr
gs 1166 59 1004 774 CB
1054 775 212 (these objects.) 212 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 833 CB
721 837 102 (send.c) 102 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 833 CB
1054 838 986 (Contains functions that process client send and send datagram) 986 SB
gr
gs 1166 59 1004 883 CB
1054 884 140 (requests.) 140 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 942 CB
721 946 160 (sendeng.c) 160 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 942 CB
1054 947 1067 (Contains send engine functions that assemble data into TSDUs and) 1067 SB
gr
gs 1166 59 1004 992 CB
1054 993 496 (pass them to the netcard driver.) 496 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 1051 CB
721 1055 125 (stcnfg.c) 125 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1051 CB
1054 1056 1085 (Contains functions that support dynamic configuration of the sample) 1085 SB
gr
gs 1166 46 1004 1101 CB
1054 1102 1072 (TDI driver. These functions open and close keys in the Registry and) 1072 SB
gr
gs 1166 59 1004 1147 CB
1054 1148 495 (read or write associated values.) 495 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 1206 CB
721 1210 125 (stdrvr.c) 125 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1206 CB
1054 1211 210 (Contains the ) 210 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 1166 50 1004 1206 CB
1264 1211 212 (DriverEntry) 212 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1206 CB
1476 1211 78 ( and ) 78 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 1166 50 1004 1206 CB
1554 1211 157 (StUnload) 157 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1206 CB
1711 1211 381 ( functions. This file also) 381 SB
gr
gs 1166 46 1004 1256 CB
1054 1257 1106 (contains the dispatch entry point functions that route client requests to) 1106 SB
gr
gs 1166 46 1004 1302 CB
1054 1303 993 (appropriate internal driver functions for processing. Additional) 993 SB
gr
gs 1166 59 1004 1348 CB
1054 1349 1000 (functions in this file write entries to the Windows NT error log.) 1000 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 1407 CB
721 1411 122 (stmac.c) 122 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1407 CB
1054 1412 1103 (Contains sample TDI driver netcard-specific code. Assorted functions) 1103 SB
gr
gs 1166 46 1004 1457 CB
1054 1458 1107 (fill in a netcard information table, construct packet headers, determine) 1107 SB
gr
gs 1166 59 1004 1503 CB
1054 1504 879 (TSDU data sizes, and set the netcard multicast address.) 879 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 1562 CB
721 1566 122 (stndis.c) 122 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1562 CB
1054 1567 975 (Contains functions that interface to the NDIS interface library) 975 SB
gr
gs 1166 46 1004 1612 CB
1054 1613 1076 (wrapper. This file contains all NDIS 3.0 transport driver lower-edge) 1076 SB
gr
gs 1166 46 1004 1658 CB
1054 1659 1048 (functions except those associated with receiving and sending data.) 1048 SB
gr
gs 1166 46 1004 1704 CB
1054 1705 1046 (Additional functions register and deregister the sample TDI driver) 1046 SB
gr
gs 1166 59 1004 1750 CB
1054 1751 1106 (with the NDIS interface library wrapper, and open and close netcards.) 1106 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 282 63 721 1809 CB
721 1813 159 (uframes.c) 159 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1166 50 1004 1809 CB
1054 1814 1011 (Contains functions that process received datagrams and connect) 1011 SB
gr
gs 1166 59 1004 1859 CB
1054 1860 422 (requests from the network.) 422 SB
gr
255 255 255 fC
1449 3 721 1938 B
1 F
n
0 0 0 fC
1449 2 721 1935 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2034 1356 (3.3  Hints for Modifying the Sample Driver) 1356 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2148 1340 (The following sections suggest modifications to the sample TDI driver files to) 1340 SB
721 2198 1379 (satisfy your driver requirements. The sample TDI driver is a NetBIOS provider,) 1379 SB
721 2248 1450 (and all Windows NT transport drivers should support NetBIOS. If your driver is the) 1450 SB
721 2298 1431 (same type, you can use most of the related code in the sample TDI driver with little) 1431 SB
721 2348 1431 (modification. However, if the driver supports other higher-layer network protocols,) 1431 SB
721 2398 934 (you will need to add code for each protocol supported.) 934 SB
721 2481 1408 (When writing a TDI driver, maintain the basic groups of items in the sample code) 1408 SB
721 2531 1413 (and modify them with specific details to match your requirements. For each driver) 1413 SB
721 2581 1339 (file, be sure to change the names of all identifiers that refer to the sample TDI) 1339 SB
721 2631 1448 (driver as appropriate for your driver. After changes are complete, modify the header) 1448 SB
721 2681 753 (information for the file and all its functions.) 753 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 5 def
/wp$fpage (5) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 6 6
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 18 (6) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 337 (Remember that the ) 337 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
971 496 160 (stprocs.h) 160 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1131 496 933 ( file includes prototypes for most of the functions used) 933 SB
634 546 1385 (in the sample TDI driver, grouped by source file. As you modify the sample TDI) 1385 SB
634 596 114 (driver ) 114 SB
748 596 11 (.) 11 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
759 596 20 (c) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 596 327 ( files, substitute in ) 327 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1106 596 160 (stprocs.h) 160 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1266 596 695 ( the functions and associated parameters) 695 SB
634 646 391 (specific to your driver.) 391 SB
255 255 255 fC
1449 3 634 746 B
1 F
n
0 0 0 fC
1449 2 634 750 B
1 F
n
32 0 0 44 44 0 0 0 42 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 144 58 607 753 CB
634 759 80 (Note) 80 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
751 761 1253 (The names of the files and functions described in this chapter refer to the) 1253 SB
634 811 1379 (sample TDI driver using the letters St. When you modify the code, replace these) 1379 SB
634 861 841 (letters to reflect the name of your specific driver.) 841 SB
255 255 255 fC
1449 3 634 931 B
1 F
n
0 0 0 fC
1449 2 634 928 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1009 796 (3.4  Modification of Files) 796 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1128 108 (Table ) 108 SB
742 1128 20 (3) 20 SB
762 1128 462 (.2    Function Modifications) 462 SB
1448 2 634 1186 B
1 F
n
gs 699 63 634 1193 CB
634 1198 65 (File) 65 SB
gr
gs 749 63 1334 1193 CB
1384 1198 217 (Modification) 217 SB
gr
1448 2 634 1256 B
1 F
n
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 1263 CB
634 1267 57 (st.h) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 1263 CB
1384 1268 595 (Add or remove include statements, as) 595 SB
gr
gs 749 59 1334 1313 CB
1384 1314 162 (necessary.) 162 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 1372 CB
634 1376 127 (stcnfg.h) 127 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 1372 CB
1384 1377 433 (Add or remove fields in the) 433 SB
gr
gs 749 59 1334 1422 CB
1384 1423 652 (CONFIG_DATA structure, as necessary.) 652 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 1481 CB
634 1485 142 (stconst.h) 142 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 1481 CB
1384 1486 625 (Add or remove constant definitions and) 625 SB
gr
gs 749 59 1334 1531 CB
1384 1532 374 (modify constant values.) 374 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 1590 CB
634 1594 129 (sthdrs.h) 129 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 1590 CB
1384 1595 669 (Add or remove fields in the ST_HEADER) 669 SB
gr
gs 749 46 1334 1640 CB
1384 1641 641 (structure or define new headers to match) 641 SB
gr
gs 749 46 1334 1686 CB
1384 1687 633 (your driver. Also, add or delete constant) 633 SB
gr
gs 749 59 1334 1732 CB
1384 1733 620 (definitions and modify constant values.) 620 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 1791 CB
634 1795 124 (stmac.h) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 1791 CB
1384 1796 607 (This file contains macros and constant) 607 SB
gr
gs 749 46 1334 1841 CB
1384 1842 688 (definitions specific to the netcard media the) 688 SB
gr
gs 749 46 1334 1887 CB
1384 1888 664 (sample TDI driver supports. If your driver) 664 SB
gr
gs 749 46 1334 1933 CB
1384 1934 665 (supports the same media, you can use this) 665 SB
gr
gs 749 46 1334 1979 CB
1384 1980 685 (file with little modification. Otherwise, add) 685 SB
gr
gs 749 46 1334 2025 CB
1384 2026 657 (or delete macros and constant definitions,) 657 SB
gr
gs 749 59 1334 2071 CB
1384 2072 234 (as appropriate.) 234 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 2130 CB
634 2134 147 (stprocs.h) 147 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 2130 CB
1384 2135 679 (You can use the macros in this file without) 679 SB
gr
gs 749 46 1334 2180 CB
1384 2181 591 (modification except for making name) 591 SB
gr
gs 749 46 1334 2226 CB
1384 2227 640 (changes when necessary. Add, delete, or) 640 SB
gr
gs 749 46 1334 2272 CB
1384 2273 688 (modify the function prototypes to match the) 688 SB
gr
gs 749 59 1334 2318 CB
1384 2319 606 (functions in the .c files for your driver.) 606 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 699 63 634 2377 CB
634 2381 140 (sttypes.h) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 749 50 1334 2377 CB
1384 2382 616 (You can use most of this file with little) 616 SB
gr
gs 749 46 1334 2427 CB
1384 2428 652 (modification. Examine the structures that) 652 SB
gr
gs 749 46 1334 2473 CB
1384 2474 683 (define the various objects and add or delete) 683 SB
gr
gs 749 59 1334 2519 CB
1384 2520 292 (fields, as required.) 292 SB
gr
255 255 255 fC
1449 3 634 2598 B
1 F
n
0 0 0 fC
1449 2 634 2595 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 6 def
/wp$fpage (6) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 7 7
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1509 378 133 (Chapter ) 133 SB
1642 378 18 (3) 18 SB
1660 378 342 (    Writing a TDI Driver) 342 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (3) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (7) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 492 861 (3.4.1  Modification of address.c) 861 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 588 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 588 168 (address.c) 168 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1586 588 542 (. The file contains the functions) 542 SB
721 638 324 (listed in Table 3.3.) 324 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 726 198 (Table 3.3    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 725 164 (address.c ) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1083 726 165 (Functions) 165 SB
1461 2 715 784 B
1 F
n
gs 568 63 721 791 CB
721 796 149 (Function) 149 SB
gr
gs 880 63 1290 791 CB
1340 796 168 (Definition) 168 SB
gr
1448 2 721 854 B
1 F
n
gs 568 63 721 861 CB
721 866 315 (StAllocateAddress) 315 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 861 CB
1340 866 737 (Allocates and initializes storage for an address) 737 SB
gr
gs 880 59 1290 911 CB
1340 912 105 (object.) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 970 CB
721 975 380 (StAllocateAddressFile) 380 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 970 CB
1340 975 807 (Allocates and initializes storage for a file object for) 807 SB
gr
gs 880 59 1290 1020 CB
1340 1021 283 (an address object.) 283 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1079 CB
721 1084 269 (StCloseAddress) 269 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1079 CB
1340 1084 807 (Processes a client close address object request. The) 807 SB
gr
gs 880 46 1290 1129 CB
1340 1130 760 (sample TDI driver resolves all object-associated) 760 SB
gr
gs 880 59 1290 1175 CB
1340 1176 799 (activity before it actually closes the address object.) 799 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1234 CB
721 1239 292 (StCreateAddress) 292 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1234 CB
1340 1239 806 (Retrieves and initializes an address object from the) 806 SB
gr
gs 880 59 1290 1284 CB
1340 1285 695 (pool in the sample TDI driver device object.) 695 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1343 CB
721 1348 357 (StCreateAddressFile) 357 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1343 CB
1340 1348 809 (Retrieves and initializes an address file object from) 809 SB
gr
gs 880 59 1290 1393 CB
1340 1394 753 (the pool in the sample TDI driver device object.) 753 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1452 CB
721 1457 353 (StDeallocateAddress) 353 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1452 CB
1340 1457 556 (Frees storage for an address object.) 556 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1515 CB
721 1520 418 (StDeallocateAddressFile) 418 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1515 CB
1340 1520 719 (Frees storage for the file object for an address) 719 SB
gr
gs 880 59 1290 1565 CB
1340 1566 105 (object.) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1624 CB
721 1629 273 (StDerefAddress) 273 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1624 CB
1340 1629 828 (Decrements the reference count on an address object) 828 SB
gr
gs 880 46 1290 1674 CB
1340 1675 765 (and destroys the object when the reference count) 765 SB
gr
gs 880 59 1290 1720 CB
1340 1721 204 (reaches zero.) 204 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1779 CB
721 1784 449 (StDereferenceAddressFile) 449 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1779 CB
1340 1784 784 (Decrements the reference count on an address file) 784 SB
gr
gs 880 46 1290 1829 CB
1340 1830 773 (object and destroys the object when the reference) 773 SB
gr
gs 880 59 1290 1875 CB
1340 1876 301 (count reaches zero.) 301 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1934 CB
721 1939 308 (StDestroyAddress) 308 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1934 CB
1340 1939 806 (Returns an address object to the pool in the sample) 806 SB
gr
gs 880 59 1290 1984 CB
1340 1985 394 (TDI driver device object.) 394 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2043 CB
721 2048 373 (StDestroyAddressFile) 373 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2043 CB
1340 2048 744 (Returns an address file object to the pool in the) 744 SB
gr
gs 880 59 1290 2093 CB
1340 2094 517 (sample TDI driver device object.) 517 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2152 CB
721 2157 307 (StLookupAddress) 307 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2152 CB
1340 2157 829 (Determines whether a network name matches any of) 829 SB
gr
gs 880 46 1290 2202 CB
1340 2203 809 (the address objects associated with the sample TDI) 809 SB
gr
gs 880 59 1290 2248 CB
1340 2249 319 (driver device object.) 319 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 7 def
/wp$fpage (7) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 8 8
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 18 (8) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 497 191 (Table 3.3  \() 191 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
825 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
989 497 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1042 496 164 (address.c ) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1206 497 165 (Functions) 165 SB
1461 2 628 555 B
1 F
n
gs 568 63 634 562 CB
634 567 149 (Function) 149 SB
gr
gs 880 63 1203 562 CB
1253 567 168 (Definition) 168 SB
gr
1448 2 634 625 B
1 F
n
gs 568 63 634 632 CB
634 637 398 (StLookupRemoteName) 398 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 632 CB
1253 637 780 (Determines whether a network name matches the) 780 SB
gr
gs 880 46 1203 682 CB
1253 683 743 (remote node address associated with any of the) 743 SB
gr
gs 880 59 1203 728 CB
1253 729 821 (connection endpoints of a local node address object.) 821 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 787 CB
634 792 414 (StMatchNetbiosAddress) 414 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 787 CB
1253 792 822 (Checks to see whether a 16-byte NetBIOS name the) 822 SB
gr
gs 880 46 1203 837 CB
1253 838 776 (sample TDI driver retrieves from a packet header) 776 SB
gr
gs 880 46 1203 883 CB
1253 884 732 (matches the address information in an address) 732 SB
gr
gs 880 59 1203 929 CB
1253 930 105 (object.) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 988 CB
634 993 268 (StOpenAddress) 268 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 988 CB
1253 993 803 (Handles a client open address object request. If the) 803 SB
gr
gs 880 46 1203 1038 CB
1253 1039 820 (address object does not exist, this function creates it) 820 SB
gr
gs 880 59 1203 1084 CB
1253 1085 280 (and then opens it.) 280 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1143 CB
634 1148 237 (StRefAddress) 237 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 1143 CB
1253 1148 825 (Increments the reference count on an address object.) 825 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1206 CB
634 1211 413 (StReferenceAddressFile) 413 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1206 CB
1253 1211 828 (Increments the reference count on a file object for an) 828 SB
gr
gs 880 59 1203 1256 CB
1253 1257 235 (address object.) 235 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1315 CB
634 1320 319 (StRegisterAddress) 319 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1315 CB
1253 1320 700 (Starts the registration process for a transport) 700 SB
gr
gs 880 59 1203 1365 CB
1253 1366 130 (address.) 130 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1424 CB
634 1429 501 (StSendDatagramsOnAddress) 501 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1424 CB
1253 1429 788 (Prepares a datagram for transmission and sends it) 788 SB
gr
gs 880 59 1203 1474 CB
1253 1475 246 (on the network.) 246 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1533 CB
634 1538 252 (StStopAddress) 252 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1533 CB
1253 1538 753 (Terminates all activity on an address object and) 753 SB
gr
gs 880 59 1203 1583 CB
1253 1584 381 (then destroys the object.) 381 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1642 CB
634 1647 317 (StStopAddressFile) 317 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1642 CB
1253 1647 828 (Terminates all activity on a file object for an address) 828 SB
gr
gs 880 59 1203 1692 CB
1253 1693 615 (object and then destroys the file object.) 615 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1751 CB
634 1756 400 (StVerifyAddressObject) 400 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1751 CB
1253 1756 829 (Verifies that an address object and its associated file) 829 SB
gr
gs 880 59 1203 1801 CB
1253 1802 252 (object are valid.) 252 SB
gr
255 255 255 fC
1449 3 634 1880 B
1 F
n
0 0 0 fC
1449 2 634 1877 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1953 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2029 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2035 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2096 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2102 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 2102 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 2102 425 ( concerning the structure) 425 SB
692 2152 528 (definitions for address objects.) 528 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2213 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2219 139 (Modify ) 139 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
831 2218 351 (StRegisterAddress) 351 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1182 2219 743 ( to perform true network name registration.) 743 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 8 def
/wp$fpage (8) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 9 9
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1509 378 133 (Chapter ) 133 SB
1642 378 18 (3) 18 SB
1660 378 342 (    Writing a TDI Driver) 342 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (3) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (9) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 491 998 (3.12  Modification of connect.c) 998 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 605 169 (connect.c) 169 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1587 605 531 ( The file contains the functions) 531 SB
721 655 324 (listed in Table 3.4.) 324 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 743 198 (Table 3.4    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 742 167 (connect.c ) 167 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1086 743 165 (Functions) 165 SB
1461 2 715 801 B
1 F
n
gs 568 63 721 808 CB
721 813 149 (Function) 149 SB
gr
gs 880 63 1290 808 CB
1340 813 168 (Definition) 168 SB
gr
1448 2 721 871 B
1 F
n
gs 568 63 721 878 CB
721 883 318 (StCloseConnection) 318 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 878 CB
1340 883 734 (Processes a close connection endpoint request.) 734 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 941 CB
721 946 317 (StOpenConnection) 317 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 941 CB
1340 946 750 (Processes an open connection endpoint request.) 750 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1004 CB
721 1009 213 (StTdiAccept) 213 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1004 CB
1340 1009 445 (Processes an accept request.) 445 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1067 CB
721 1072 396 (StTdiAssociateAddress) 396 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1067 CB
1340 1072 618 (Processes an associate address request.) 618 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1130 CB
721 1135 234 (StTdiConnect) 234 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1130 CB
1340 1135 446 (Processes a connect request.) 446 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1193 CB
721 1198 443 (StTdiDisassociateAddress) 443 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1193 CB
1340 1198 645 (Processes a disassociate address request.) 645 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1256 CB
721 1261 279 (StTdiDisconnect) 279 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1256 CB
1340 1261 493 (Processes a disconnect request.) 493 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1319 CB
721 1324 201 (StTdiListen) 201 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1319 CB
1340 1324 411 (Processes a listen request.) 411 SB
gr
255 255 255 fC
1449 3 721 1402 B
1 F
n
0 0 0 fC
1449 2 721 1399 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1475 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1551 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1557 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1618 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1624 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 1624 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 1624 425 ( concerning the structure) 425 SB
779 1674 942 (definitions of address and connection endpoint objects.) 942 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1735 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1741 139 (Modify ) 139 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
918 1740 259 (StTdiConnect) 259 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1177 1741 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1261 1740 308 (StTdiDisconnect) 308 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1569 1741 539 ( to perform the correct protocol) 539 SB
779 1791 432 (sequence for your driver.) 432 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1852 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1858 142 (Change ) 142 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
921 1857 235 (StTdiAccept) 235 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1156 1858 1013 ( to send a network response that is suitable for your driver.) 1013 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1979 1002 (3.13  Modification of connobj.c) 1002 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2093 391 (This section describes ) 391 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1112 2093 173 (connobj.c) 173 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1285 2093 11 ( ) 11 SB
1296 2093 734 (modifications. Table 3.5 lists the functions) 734 SB
721 2143 362 (contained in this file.) 362 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 2231 198 (Table 3.5    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 2230 171 (connobj.c ) 171 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1090 2231 165 (Functions) 165 SB
1461 2 715 2289 B
1 F
n
gs 568 63 721 2296 CB
721 2301 149 (Function) 149 SB
gr
gs 880 63 1290 2296 CB
1340 2301 168 (Definition) 168 SB
gr
1448 2 721 2359 B
1 F
n
gs 568 63 721 2366 CB
721 2371 364 (StAllocateConnection) 364 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2366 CB
1340 2371 768 (Allocates and initializes storage for a connection) 768 SB
gr
gs 880 59 1290 2416 CB
1340 2417 253 (endpoint object.) 253 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2475 CB
721 2480 342 (StCancelConnection) 342 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2475 CB
1340 2480 747 (Cancels an active connect or listen request on a) 747 SB
gr
gs 880 59 1290 2525 CB
1340 2526 434 (connection endpoint object.) 434 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2584 CB
721 2589 341 (StCreateConnection) 341 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2584 CB
1340 2589 737 (Retrieves and initializes a connection endpoint) 737 SB
gr
gs 880 46 1290 2634 CB
1340 2635 828 (object from the pool in the sample TDI driver device) 828 SB
gr
gs 880 59 1290 2680 CB
1340 2681 105 (object.) 105 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 9 def
/wp$fpage (9) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 10 10
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (10) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 497 181 (Table 3.5 \() 181 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
815 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
979 497 33 (\)  ) 33 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1012 496 161 (connobj.c) 161 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1173 497 175 ( Functions) 175 SB
1461 2 628 555 B
1 F
n
gs 568 63 634 562 CB
634 567 149 (Function) 149 SB
gr
gs 880 63 1203 562 CB
1253 567 168 (Definition) 168 SB
gr
1448 2 634 625 B
1 F
n
gs 568 63 634 632 CB
634 637 402 (StDeallocateConnection) 402 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 632 CB
1253 637 735 (Frees storage for a connection endpoint object.) 735 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 695 CB
634 700 322 (StDerefConnection) 322 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 695 CB
1253 700 754 (Decrements the reference count on a connection) 754 SB
gr
gs 880 46 1203 745 CB
1253 746 794 (endpoint object. When the reference count reaches) 794 SB
gr
gs 880 46 1203 791 CB
1253 792 804 (zero, this function decrements the special reference) 804 SB
gr
gs 880 59 1203 837 CB
1253 838 797 (count and destroys the connection endpoint object.) 797 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 896 CB
634 901 444 (StDerefConnectionSpecial) 444 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 896 CB
1253 901 693 (Decrements the special reference count on a) 693 SB
gr
gs 880 46 1203 946 CB
1253 947 805 (connection endpoint object, and destroys the object) 805 SB
gr
gs 880 46 1203 992 CB
1253 993 827 (if the reference count and the special reference count) 827 SB
gr
gs 880 59 1203 1038 CB
1253 1039 372 (have both reached zero.) 372 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1097 CB
634 1102 360 (StDestroyAssociation) 360 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1097 CB
1253 1102 740 (Terminates the association between an address) 740 SB
gr
gs 880 59 1203 1147 CB
1253 1148 635 (object and a connection endpoint object.) 635 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1206 CB
634 1211 357 (StDestroyConnection) 357 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1206 CB
1253 1211 827 (Destroys association to a connection endpoint object) 827 SB
gr
gs 880 46 1203 1256 CB
1253 1257 815 (and returns the object to the pool in the sample TDI) 815 SB
gr
gs 880 59 1203 1302 CB
1253 1303 319 (driver device object.) 319 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1361 CB
634 1366 304 (StFindConnection) 304 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1361 CB
1253 1366 797 (Determines whether a connection exists between a) 797 SB
gr
gs 880 46 1203 1411 CB
1253 1412 827 (local node address object and a remote node address) 827 SB
gr
gs 880 59 1203 1457 CB
1253 1458 105 (object.) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1516 CB
634 1521 358 (StIndicateDisconnect) 358 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1516 CB
1253 1521 769 (Indicates a terminated of a connection between a) 769 SB
gr
gs 880 46 1203 1566 CB
1253 1567 759 (local node client and a remote node client. If the) 759 SB
gr
gs 880 46 1203 1612 CB
1253 1613 741 (disconnect request has originated at the remote) 741 SB
gr
gs 880 46 1203 1658 CB
1253 1659 753 (node, this function informs the local node client) 753 SB
gr
gs 880 59 1203 1704 CB
1253 1705 194 (accordingly.) 194 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1763 CB
634 1768 535 (StLookupConnectionByContext) 535 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1763 CB
1253 1768 718 (Locates a connection endpoint object, given a) 718 SB
gr
gs 880 59 1203 1813 CB
1253 1814 475 (context and an address object.) 475 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1872 CB
634 1877 514 (StLookupListeningConnection) 514 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1872 CB
1253 1877 740 (Locates a listening connection endpoint object,) 740 SB
gr
gs 880 59 1203 1922 CB
1253 1923 380 (given an address object.) 380 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1981 CB
634 1986 286 (StRefConnection) 286 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1981 CB
1253 1986 741 (Increments the reference count on a connection) 741 SB
gr
gs 880 59 1203 2031 CB
1253 2032 253 (endpoint object.) 253 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2090 CB
634 2095 301 (StStopConnection) 301 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2090 CB
1253 2095 759 (Terminates all activity on a connection endpoint) 759 SB
gr
gs 880 59 1203 2140 CB
1253 2141 554 (object and then destroys the object.) 554 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2199 CB
634 2204 449 (StVerifyConnectionObject) 449 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 2199 CB
1253 2204 794 (Verifies that a connection endpoint object is valid.) 794 SB
gr
255 255 255 fC
1449 3 634 2282 B
1 F
n
0 0 0 fC
1449 2 634 2279 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 2355 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2431 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2437 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2498 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2504 766 (Reflect any modifications you have made to ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 2504 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 2504 425 ( concerning the structure) 425 SB
692 2554 743 (definitions for connection endpoint objects.) 743 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2615 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2621 139 (Modify ) 139 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
831 2620 336 (StStopConnection) 336 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1167 2621 858 ( to initiate the protocol for the disconnect with the) 858 SB
692 2671 507 (remote node client, if needed.) 507 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 10 def
/wp$fpage (10) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 11 11
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (11) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 491 952 (3.14  Modification of devctx.c) 952 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 605 145 (devctx.c) 145 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1563 605 542 (. The file contains the functions) 542 SB
721 655 324 (listed in Table 3.6.) 324 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 743 198 (Table 3.6    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 742 143 (devctx.c ) 143 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1062 743 165 (Functions) 165 SB
1461 2 715 801 B
1 F
n
gs 568 63 721 808 CB
721 813 149 (Function) 149 SB
gr
gs 880 63 1290 808 CB
1340 813 168 (Definition) 168 SB
gr
1448 2 721 871 B
1 F
n
gs 568 63 721 878 CB
721 883 398 (StCreateDeviceContext) 398 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 878 CB
1340 883 737 (Creates and initializes the device object for the) 737 SB
gr
gs 880 59 1290 928 CB
1340 929 301 (sample TDI driver.) 301 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 987 CB
721 992 379 (StDerefDeviceContext) 379 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 987 CB
1340 992 819 (Decrements the reference count on the device object) 819 SB
gr
gs 880 59 1290 1037 CB
1340 1038 413 (for the sample TDI driver.) 413 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1096 CB
721 1101 414 (StDestroyDeviceContext) 414 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1096 CB
1340 1101 729 (Frees address resources and deletes the device) 729 SB
gr
gs 880 59 1290 1146 CB
1340 1147 518 (object for the sample TDI driver.) 518 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1205 CB
721 1210 343 (StRefDeviceContext) 343 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1205 CB
1340 1210 806 (Increments the reference count on the device object) 806 SB
gr
gs 880 59 1290 1255 CB
1340 1256 413 (for the sample TDI driver.) 413 SB
gr
255 255 255 fC
1449 3 721 1334 B
1 F
n
0 0 0 fC
1449 2 721 1331 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1407 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1483 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1489 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1550 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1556 1055 (Make changes to reflect any modifications you have made to ) 1055 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1834 1556 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1606 980 (concerning the structure definitions for the device object.) 980 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1727 914 (3.15  Modification of event.c) 914 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1841 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 1841 125 (event.c) 125 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1543 1841 579 (. Currently, this file contains only) 579 SB
721 1891 235 (one function, ) 235 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
956 1890 427 (StTdiSetEventHandler) 427 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1383 1891 724 (, which processes a kernel-mode client set) 724 SB
721 1941 379 (event handler request.) 379 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 2038 624 (Recommended Changes:) 624 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2120 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 11 def
/wp$fpage (11) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 12 12
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (12) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 491 1043 (3.16  Modification of framesnd.c) 1043 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 605 195 (framesnd.c) 195 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1526 605 500 (. Table 3.7 lists the functions) 500 SB
634 655 202 (for this file.) 202 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 743 198 (Table 3.7    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
832 742 196 (framesnd.c ) 196 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1028 743 165 (Functions) 165 SB
1461 2 628 801 B
1 F
n
gs 568 63 634 808 CB
634 813 149 (Function) 149 SB
gr
gs 880 63 1203 808 CB
1253 813 168 (Definition) 168 SB
gr
1448 2 634 871 B
1 F
n
gs 568 63 634 878 CB
634 883 374 (StSendAddressFrame) 374 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 878 CB
1253 883 829 (Sends a datagram associated with an address object.) 829 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 941 CB
634 946 257 (StSendConnect) 257 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 941 CB
1253 946 737 (Creates an ST_CMD_CONNECT TSDU for a) 737 SB
gr
gs 880 46 1203 991 CB
1253 992 724 (connection endpoint object and a remote node) 724 SB
gr
gs 880 59 1203 1037 CB
1253 1038 829 (address object, and sends the TSDU on the network.) 829 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1096 CB
634 1101 489 (StSendDatagramCompletion) 489 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1096 CB
1253 1101 744 (Receives indication of a send datagram request) 744 SB
gr
gs 880 46 1203 1146 CB
1253 1147 775 (completion for an address object, reinitializes the) 775 SB
gr
gs 880 46 1203 1192 CB
1253 1193 794 (datagram, and initiates the next datagram send for) 794 SB
gr
gs 880 59 1203 1238 CB
1253 1239 293 (the address object.) 293 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1297 CB
634 1302 302 (StSendDisconnect) 302 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1297 CB
1253 1302 801 (Creates an ST_CMD_DISCONNECT TSDU for a) 801 SB
gr
gs 880 46 1203 1347 CB
1253 1348 724 (connection endpoint object and a remote node) 724 SB
gr
gs 880 59 1203 1393 CB
1253 1394 829 (address object, and sends the TSDU on the network.) 829 SB
gr
255 255 255 fC
1449 3 634 1472 B
1 F
n
0 0 0 fC
1449 2 634 1469 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1545 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1621 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1627 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1688 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1694 766 (Reflect any modifications you have made to ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 1694 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 1694 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1695 1694 140 (sthdrs.h) 140 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1835 1694 200 ( concerning) 200 SB
692 1744 1059 (the structure definitions of packet objects and packet headers.) 1059 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1805 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1811 1295 (Add functions for sending and handling completion of the TSDUs that your) 1295 SB
692 1861 199 (driver uses.) 199 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1982 978 (3.17  Modification of iframes.c) 978 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2096 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 2096 163 (iframes.c) 163 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1494 2096 532 (, which currently contains only) 532 SB
634 2146 235 (one function, ) 235 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
869 2145 334 (StProcessIndicate) 334 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1203 2146 851 (. This function receives a TSDU from the netcard) 851 SB
634 2196 1431 (driver. It does minimal processing and, if necessary, queues the received TSDU for) 1431 SB
634 2246 322 (further processing.) 322 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 2343 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2419 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2425 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2486 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2492 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 2492 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 2492 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1695 2492 140 (sthdrs.h) 140 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1835 2492 200 ( concerning) 200 SB
692 2542 1376 (the structure definitions for address objects, connection endpoint objects, packet) 1376 SB
692 2592 483 (objects, and packet headers.) 483 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2653 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2659 1101 (Add code to support retransmission and flow control of TSDUs.) 1101 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 12 def
/wp$fpage (12) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 13 13
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (13) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 491 838 (3.18  Modification of ind.c) 838 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 605 87 (ind.c) 87 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1505 605 646 (. The file contains the functions listed) 646 SB
721 655 220 (in Table 3.8.) 220 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 743 198 (Table 3.8    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 742 91 (ind.c ) 91 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1010 743 165 (Functions) 165 SB
1461 2 715 801 B
1 F
n
gs 568 63 721 808 CB
721 813 149 (Function) 149 SB
gr
gs 880 63 1290 808 CB
1340 813 168 (Definition) 168 SB
gr
1448 2 721 871 B
1 F
n
gs 568 63 721 878 CB
721 883 445 (StGeneralReceiveHandler) 445 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 878 CB
1340 883 761 (Performs initial processing for a received TSDU) 761 SB
gr
gs 880 46 1290 928 CB
1340 929 734 (and, if necessary, queues the TSDU for further) 734 SB
gr
gs 880 59 1290 974 CB
1340 975 179 (processing.) 179 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1033 CB
721 1038 331 (StReceiveComplete) 331 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1033 CB
1340 1038 752 (Completes processing for a received TSDU and) 752 SB
gr
gs 880 46 1290 1083 CB
1340 1084 745 (indicates the TSDU to appropriate clients. This) 745 SB
gr
gs 880 46 1290 1129 CB
1340 1130 818 (function is an NDIS 3.0 transport driver lower-edge) 818 SB
gr
gs 880 59 1290 1175 CB
1340 1176 140 (function.) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1234 CB
721 1239 339 (StReceiveIndication) 339 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1234 CB
1340 1239 816 (Receives and validates a lookahead TSDU from the) 816 SB
gr
gs 880 46 1290 1284 CB
1340 1285 817 (netcard driver and initiates further processing of the) 817 SB
gr
gs 880 46 1290 1330 CB
1340 1331 732 (TSDU. This function is an NDIS 3.0 transport) 732 SB
gr
gs 880 59 1290 1376 CB
1340 1377 429 (driver lower-edge function.) 429 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1435 CB
721 1440 433 (StTransferDataComplete) 433 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1435 CB
1340 1440 825 (Begins processing a received TSDU that the netcard) 825 SB
gr
gs 880 46 1290 1485 CB
1340 1486 803 (driver has finished transferring. This function is an) 803 SB
gr
gs 880 59 1290 1531 CB
1340 1532 743 (NDIS 3.0 transport driver lower-edge function.) 743 SB
gr
255 255 255 fC
1449 3 721 1610 B
1 F
n
0 0 0 fC
1449 2 721 1607 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1683 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1759 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1765 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1826 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1832 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 1832 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 1832 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1782 1832 140 (sthdrs.h) 140 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1922 1832 200 ( concerning) 200 SB
779 1882 1074 (the structure definitions for packet objects and packet headers.) 1074 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2003 861 (3.19  Modification of info.c) 861 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2117 313 (Modifications for ) 313 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1034 2117 99 (info.c) 99 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1133 2117 11 ( ) 11 SB
1144 2117 968 (are described in this section, with Table 3.9 defining the) 968 SB
721 2167 237 (file functions.) 237 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 2255 198 (Table 3.9    ) 198 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
919 2254 94 (info.c) 94 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1013 2255 175 ( Functions) 175 SB
1461 2 715 2313 B
1 F
n
gs 568 63 721 2320 CB
721 2325 149 (Function) 149 SB
gr
gs 880 63 1290 2320 CB
1340 2325 168 (Definition) 168 SB
gr
1448 2 721 2383 B
1 F
n
gs 568 63 721 2390 CB
721 2395 372 (StStoreAdapterStatus) 372 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2390 CB
1340 2395 820 (Retrieves netcard driver status from the sample TDI) 820 SB
gr
gs 880 59 1290 2440 CB
1340 2441 319 (driver device object.) 319 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2499 CB
721 2504 354 (StStoreNameBuffers) 354 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2499 CB
1340 2504 808 (Retrieves name buffers from the sample TDI driver) 808 SB
gr
gs 880 59 1290 2549 CB
1340 2550 216 (device object.) 216 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2608 CB
721 2613 429 (StStoreProviderStatistics) 429 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2608 CB
1340 2613 740 (Retrieves driver statistics from the sample TDI) 740 SB
gr
gs 880 59 1290 2658 CB
1340 2659 319 (driver device object.) 319 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 13 def
/wp$fpage (13) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 14 14
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (14) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 497 181 (Table 3.9 \() 181 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
815 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
979 497 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1032 496 104 (info.c ) 104 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1136 497 165 (Functions) 165 SB
1461 2 628 555 B
1 F
n
gs 568 63 634 562 CB
634 567 149 (Function) 149 SB
gr
gs 880 63 1203 562 CB
1253 567 168 (Definition) 168 SB
gr
1448 2 634 625 B
1 F
n
gs 568 63 634 632 CB
634 637 408 (StTdiQueryInformation) 408 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 632 CB
1253 637 705 (Processes a client query information request.) 705 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 695 CB
634 700 354 (StTdiSetInformation) 354 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 695 CB
1253 700 661 (Processes a client set information request.) 661 SB
gr
255 255 255 fC
1449 3 634 778 B
1 F
n
0 0 0 fC
1449 2 634 775 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 851 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 927 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 933 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 994 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1000 670 (Examine the query types supported by ) 670 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1362 999 450 (StTdiQueryInformation) 450 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1812 1000 73 ( and) 73 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
692 1049 389 (StTdiSetInformation) 389 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1081 1050 919 (. Add or delete query type processing functionality as) 919 SB
692 1100 1211 (necessary for your driver. Note that the NetBIOS query types are only) 1211 SB
692 1150 537 (applicable to NetBIOS drivers.) 537 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1211 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1217 1237 (Many of the driver statistics are netcard medium-specific. If your driver) 1237 SB
692 1267 1391 (supports the media that the sample TDI driver supports, you can use related code) 1391 SB
692 1317 1357 (with little modification. Otherwise, modify the code as necessary for the media) 1357 SB
692 1367 345 (your driver handles.) 345 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1428 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1434 1387 (For a NetBIOS driver, add support for remote node netcard status and find name) 1387 SB
692 1484 153 (requests.) 153 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1605 952 (3.20  Modification of packet.c) 952 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1719 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 1719 147 (packet.c) 147 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1478 1719 542 (. The file contains the functions) 542 SB
634 1769 346 (listed in Table 3.10.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1857 218 (Table 3.10    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 1856 135 (packet.c) 135 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
987 1857 175 ( Functions) 175 SB
1461 2 628 1915 B
1 F
n
gs 568 63 634 1922 CB
634 1927 149 (Function) 149 SB
gr
gs 880 63 1203 1922 CB
1253 1927 168 (Definition) 168 SB
gr
1448 2 634 1985 B
1 F
n
gs 568 63 634 1992 CB
634 1997 418 (StAllocateReceiveBuffer) 418 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1992 CB
1253 1997 696 (Allocates and initializes an NDIS 3.0 buffer) 696 SB
gr
gs 880 59 1203 2042 CB
1253 2043 735 (descriptor for receiving data from the network.) 735 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2101 CB
634 2106 423 (StAllocateReceivePacket) 423 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2101 CB
1253 2106 705 (Allocates and initializes an NDIS 3.0 packet) 705 SB
gr
gs 880 59 1203 2151 CB
1253 2152 735 (descriptor for receiving data from the network.) 735 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2210 CB
634 2215 374 (StAllocateSendPacket) 374 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2210 CB
1253 2215 705 (Allocates and initializes an NDIS 3.0 packet) 705 SB
gr
gs 880 46 1203 2260 CB
1253 2261 761 (descriptor and an NDIS 3.0 buffer descriptor for) 761 SB
gr
gs 880 59 1203 2306 CB
1253 2307 457 (sending data on the network.) 457 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2365 CB
634 2370 268 (StCreatePacket) 268 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2365 CB
1253 2370 769 (Retrieves and initializes a packet object from the) 769 SB
gr
gs 880 59 1203 2415 CB
1253 2416 695 (pool in the sample TDI driver device object.) 695 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 14 def
/wp$fpage (14) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 15 15
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (15) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
721 497 201 (Table 3.10 \() 201 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
922 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1086 497 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1139 496 135 (packet.c) 135 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1274 497 175 ( Functions) 175 SB
1461 2 715 555 B
1 F
n
gs 568 63 721 562 CB
721 567 149 (Function) 149 SB
gr
gs 880 63 1290 562 CB
1340 567 168 (Definition) 168 SB
gr
1448 2 721 625 B
1 F
n
gs 568 63 721 632 CB
721 637 456 (StDeallocateReceiveBuffer) 456 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 632 CB
1340 637 704 (Frees an NDIS 3.0 buffer descriptor used for) 704 SB
gr
gs 880 59 1290 682 CB
1340 683 514 (receiving data from the network.) 514 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 741 CB
721 746 461 (StDeallocateReceivePacket) 461 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 741 CB
1340 746 713 (Frees an NDIS 3.0 packet descriptor used for) 713 SB
gr
gs 880 59 1290 791 CB
1340 792 514 (receiving data from the network.) 514 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 850 CB
721 855 412 (StDeallocateSendPacket) 412 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 850 CB
1340 855 795 (Frees an NDIS 3.0 packet descriptor and an NDIS) 795 SB
gr
gs 880 46 1290 900 CB
1340 901 776 (3.0 buffer descriptor used for sending data on the) 776 SB
gr
gs 880 59 1290 946 CB
1340 947 139 (network.) 139 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1005 CB
721 1010 284 (StDestroyPacket) 284 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1005 CB
1340 1010 787 (Frees storage associated with a packet object, and) 787 SB
gr
gs 880 46 1290 1055 CB
1340 1056 785 (returns the packet object to the pool in the sample) 785 SB
gr
gs 880 59 1290 1101 CB
1340 1102 394 (TDI driver device object.) 394 SB
gr
255 255 255 fC
1449 3 721 1180 B
1 F
n
0 0 0 fC
1449 2 721 1177 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1253 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1329 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1335 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1396 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1402 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 1402 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 1402 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1782 1402 140 (sthdrs.h) 140 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1922 1402 200 ( concerning) 200 SB
779 1452 1074 (the structure definitions for packet objects and packet headers.) 1074 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1513 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1519 974 (Add functions to support other TSDU types, as required.) 974 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1640 837 (3.21  Modification of rcv.c) 837 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1754 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 1754 88 (rcv.c) 88 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1506 1754 656 (. This file contains the functions listed) 656 SB
721 1804 242 (in Table 3.11.) 242 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 1892 218 (Table 3.11    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
939 1891 90 (rcv.c ) 90 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1029 1892 165 (Functions) 165 SB
1461 2 715 1950 B
1 F
n
gs 568 63 721 1957 CB
721 1962 149 (Function) 149 SB
gr
gs 880 63 1290 1957 CB
1340 1962 168 (Definition) 168 SB
gr
1448 2 721 2020 B
1 F
n
gs 568 63 721 2027 CB
721 2032 227 (StTdiReceive) 227 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2027 CB
1340 2032 741 (Processes a client receive request for normal or) 741 SB
gr
gs 880 59 1290 2077 CB
1340 2078 497 (expedited data on a connection.) 497 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2136 CB
721 2141 401 (StTdiReceiveDatagram) 401 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2136 CB
1340 2141 736 (Processes a client receive datagram request for) 736 SB
gr
gs 880 59 1290 2186 CB
1340 2187 318 (connectionless data.) 318 SB
gr
255 255 255 fC
1449 3 721 2265 B
1 F
n
0 0 0 fC
1449 2 721 2262 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 2338 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2414 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2420 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2481 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2487 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 2487 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 2487 425 ( concerning the structure) 425 SB
779 2537 743 (definitions for connection endpoint objects.) 743 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 15 def
/wp$fpage (15) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 16 16
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (16) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 491 959 (3.22  Modification of rcveng.c) 959 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 605 152 (rcveng.c) 152 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1483 605 522 (. Table 3.12 lists the functions) 522 SB
634 655 362 (contained in this file.) 362 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 743 218 (Table 3.12    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 742 150 (rcveng.c ) 150 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1002 743 165 (Functions) 165 SB
1461 2 628 801 B
1 F
n
gs 568 63 634 808 CB
634 813 149 (Function) 149 SB
gr
gs 880 63 1203 808 CB
1253 813 168 (Definition) 168 SB
gr
1448 2 634 871 B
1 F
n
gs 568 63 634 878 CB
634 883 274 (ActivateReceive) 274 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 878 CB
1253 883 730 (Activates the next receive request queued on a) 730 SB
gr
gs 880 46 1203 928 CB
1253 929 704 (connection endpoint object if no requests are) 704 SB
gr
gs 880 59 1203 974 CB
1253 975 253 (currently active.) 253 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1033 CB
634 1038 272 (AwakenReceive) 272 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1033 CB
1253 1038 821 (Awakens a sleeping connection endpoint object and) 821 SB
gr
gs 880 59 1203 1083 CB
1253 1084 652 (activates the next queued receive request.) 652 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1142 CB
634 1147 296 (CompleteReceive) 296 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1142 CB
1253 1147 746 (Completes the first receive request queued on a) 746 SB
gr
gs 880 59 1203 1192 CB
1253 1193 434 (connection endpoint object.) 434 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 1251 CB
634 1256 284 (StCancelReceive) 284 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1251 CB
1253 1256 145 (Through ) 145 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 880 50 1203 1251 CB
1398 1256 227 (StTdiReceive) 227 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1251 CB
1625 1256 23 ( \() 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 880 50 1203 1251 CB
1648 1255 80 (rcv.c) 80 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 1251 CB
1728 1256 298 (\), cancels a receive) 298 SB
gr
gs 880 59 1203 1301 CB
1253 1302 759 (request queued on a connection endpoint object.) 759 SB
gr
255 255 255 fC
1449 3 634 1380 B
1 F
n
0 0 0 fC
1449 2 634 1377 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1453 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1529 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1535 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1596 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1602 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 1602 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 1602 425 ( concerning the structure) 425 SB
692 1652 743 (definitions for connection endpoint objects.) 743 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1773 982 (3.23  Modification of request.c) 982 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1887 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 1887 161 (request.c) 161 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1492 1887 542 (. The file contains the functions) 542 SB
634 1937 346 (listed in Table 3.13.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 2025 218 (Table 3.13    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 2024 159 (request.c ) 159 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1011 2025 165 (Functions) 165 SB
1461 2 628 2083 B
1 F
n
gs 568 63 634 2090 CB
634 2095 149 (Function) 149 SB
gr
gs 880 63 1203 2090 CB
1253 2095 168 (Definition) 168 SB
gr
1448 2 634 2153 B
1 F
n
gs 568 63 634 2160 CB
634 2165 311 (StAllocateRequest) 311 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 2160 CB
1253 2165 826 (Allocates and initializes storage for a request object.) 826 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2223 CB
634 2228 336 (StCompleteRequest) 336 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2223 CB
1253 2228 818 (Completes a client request. This function fills in the) 818 SB
gr
gs 880 46 1203 2273 CB
1253 2274 754 (IRP that packages the request, stops the request) 754 SB
gr
gs 880 59 1203 2319 CB
1253 2320 543 (timer, and frees the request object.) 543 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2378 CB
634 2383 338 (StCompleteSendIrp) 338 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2378 CB
1253 2383 802 (Completes a client send request. This function fills) 802 SB
gr
gs 880 59 1203 2428 CB
1253 2429 784 (in the associated IRP and frees the request object.) 784 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2487 CB
634 2492 288 (StCreateRequest) 288 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1203 2487 CB
1253 2492 780 (Retrieves and initializes a request object from the) 780 SB
gr
gs 880 46 1203 2537 CB
1253 2538 763 (pool in the sample TDI driver device object, and) 763 SB
gr
gs 880 46 1203 2583 CB
1253 2584 812 (associates the request object with an IRP and client) 812 SB
gr
gs 880 59 1203 2629 CB
1253 2630 124 (context.) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 634 2688 CB
634 2693 349 (StDeallocateRequest) 349 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1203 2688 CB
1253 2693 530 (Frees storage for a request object.) 530 SB
gr
1448 2 634 2751 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 16 def
/wp$fpage (16) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 17 17
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (17) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
721 497 201 (Table 3.13 \() 201 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
922 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1086 497 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1139 496 159 (request.c ) 159 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1298 497 165 (Functions) 165 SB
1461 2 715 555 B
1 F
n
gs 568 63 721 562 CB
721 567 149 (Function) 149 SB
gr
gs 880 63 1290 562 CB
1340 567 168 (Definition) 168 SB
gr
1448 2 721 625 B
1 F
n
gs 568 63 721 632 CB
721 637 269 (StDerefRequest) 269 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 632 CB
1340 637 812 (Decrements the reference count on a request object.) 812 SB
gr
gs 880 46 1290 682 CB
1340 683 825 (When the reference count reaches zero, this function) 825 SB
gr
gs 880 59 1290 728 CB
1340 729 303 (destroys the object.) 303 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 787 CB
721 792 271 (StDerefSendIrp) 271 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 787 CB
1340 792 780 (Decrements the reference count on a send request) 780 SB
gr
gs 880 46 1290 837 CB
1340 838 767 (IRP. When the reference count reaches zero, this) 767 SB
gr
gs 880 59 1290 883 CB
1340 884 807 (function completes processing for the send request.) 807 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 942 CB
721 947 304 (StDestroyRequest) 304 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 942 CB
1340 947 799 (Dereferences the object that owns a request object,) 799 SB
gr
gs 880 46 1290 992 CB
1340 993 741 (and returns the request object to the pool in the) 741 SB
gr
gs 880 59 1290 1038 CB
1340 1039 517 (sample TDI driver device object.) 517 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1097 CB
721 1102 233 (StRefRequest) 233 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 63 1290 1097 CB
1340 1102 799 (Increments the reference count on a request object.) 799 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1160 CB
721 1165 235 (StRefSendIrp) 235 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1160 CB
1340 1165 767 (Increments the reference count on a send request) 767 SB
gr
gs 880 59 1290 1210 CB
1340 1211 72 (IRP.) 72 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 1269 CB
721 1274 516 (StTdiRequestTimeoutHandler) 516 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 1269 CB
1340 1274 788 (Completes processing for a request that has timed) 788 SB
gr
gs 880 46 1290 1319 CB
1340 1320 720 (out. This function is a DPR that the operating) 720 SB
gr
gs 880 59 1290 1365 CB
1340 1366 786 (system calls when a request-related timer expires.) 786 SB
gr
255 255 255 fC
1449 3 721 1444 B
1 F
n
0 0 0 fC
1449 2 721 1441 B
1 F
n
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1497 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1503 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1564 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1570 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 1570 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 1570 425 ( concerning the structure) 425 SB
779 1620 523 (definitions for request objects.) 523 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1681 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1687 1376 (The sample TDI driver supports time-out for only a few types of client requests.) 1376 SB
779 1737 1311 (Examine the code related to time-out support, and add or delete request type) 1311 SB
779 1787 541 (support as your driver requires.) 541 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1908 895 (3.24  Modification of send.c) 895 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2022 313 (Modifications for ) 313 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1034 2022 123 (send.c ) 123 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1157 2022 1002 (are described below. This file contains the functions listed) 1002 SB
721 2072 242 (in Table 3.14.) 242 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 2160 218 (Table 3.14    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
939 2159 114 (send.c ) 114 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1053 2160 165 (Functions) 165 SB
1461 2 715 2218 B
1 F
n
gs 568 63 721 2225 CB
721 2230 149 (Function) 149 SB
gr
gs 880 63 1290 2225 CB
1340 2230 168 (Definition) 168 SB
gr
1448 2 721 2288 B
1 F
n
gs 568 63 721 2295 CB
721 2300 178 (StTdiSend) 178 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2295 CB
1340 2300 733 (Processes a client send request for connection-) 733 SB
gr
gs 880 59 1290 2345 CB
1340 2346 345 (oriented data transfer.) 345 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 568 63 721 2404 CB
721 2409 352 (StTdiSendDatagram) 352 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 880 50 1290 2404 CB
1340 2409 698 (Processes a client send datagram request for) 698 SB
gr
gs 880 59 1290 2454 CB
1340 2455 448 (connectionless data transfer.) 448 SB
gr
255 255 255 fC
1449 3 721 2533 B
1 F
n
0 0 0 fC
1449 2 721 2530 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 17 def
/wp$fpage (17) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 18 18
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (18) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
634 493 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 569 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 575 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 636 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 642 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 642 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1611 642 425 ( concerning the structure) 425 SB
692 692 743 (definitions for connection endpoint objects.) 743 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 813 1017 (3.25  Modification of sendeng.c) 1017 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 927 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 927 176 (sendeng.c) 176 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1507 927 545 (, with Table 3.15 listing the file) 545 SB
634 977 169 (functions.) 169 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1065 218 (Table 3.15    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 1064 167 (sending.c ) 167 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1019 1065 165 (Functions) 165 SB
1461 2 628 1123 B
1 F
n
gs 579 63 634 1130 CB
634 1135 149 (Function) 149 SB
gr
gs 869 63 1214 1130 CB
1264 1135 168 (Definition) 168 SB
gr
1448 2 634 1193 B
1 F
n
gs 579 63 634 1200 CB
634 1205 575 (BuildBufferChainFromMdlChain) 575 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1200 CB
1264 1205 770 (Converts an MDL buffer chain into an NDIS 3.0) 770 SB
gr
gs 869 46 1214 1250 CB
1264 1251 784 (buffer chain in preparation for sending data to the) 784 SB
gr
gs 869 59 1214 1296 CB
1264 1297 229 (netcard driver.) 229 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1355 CB
634 1360 247 (CompleteSend) 247 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1355 CB
1264 1360 756 (Completes send request processing for an entire) 756 SB
gr
gs 869 59 1214 1405 CB
1264 1406 145 (message.) 145 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1464 CB
634 1469 150 (FailSend) 150 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1464 CB
1264 1469 771 (Completes processing for a send request that has) 771 SB
gr
gs 869 46 1214 1514 CB
1264 1515 782 (failed. If necessary, this function stops all activity) 782 SB
gr
gs 869 59 1214 1560 CB
1264 1561 714 (on the associated connection endpoint object.) 714 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1619 CB
634 1624 232 (InitializeSend) 232 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1619 CB
1264 1624 751 (Prepares the next send request IRP queued on a) 751 SB
gr
gs 869 46 1214 1669 CB
1264 1670 797 (connection endpoint object for transmission on the) 797 SB
gr
gs 869 59 1214 1715 CB
1264 1716 139 (network.) 139 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1774 CB
634 1779 369 (PacketizeConnections) 369 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1774 CB
1264 1779 93 (Calls ) 93 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 869 50 1214 1774 CB
1357 1779 246 (PacketizeSend) 246 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1774 CB
1603 1779 465 ( for each connection endpoint) 465 SB
gr
gs 869 46 1214 1824 CB
1264 1825 810 (object queued on the packetize queue of the sample) 810 SB
gr
gs 869 59 1214 1870 CB
1264 1871 394 (TDI driver device object.) 394 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1929 CB
634 1934 246 (PacketizeSend) 246 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1929 CB
1264 1934 704 (Finds the next send request IRP queued on a) 704 SB
gr
gs 869 46 1214 1979 CB
1264 1980 663 (connection endpoint object, and organizes) 663 SB
gr
gs 869 46 1214 2025 CB
1264 2026 786 (associated client data into an NDIS 3.0 packet for) 786 SB
gr
gs 869 59 1214 2071 CB
1264 2072 457 (transfer to the netcard driver.) 457 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 2130 CB
634 2135 473 (StartPacketizingConnection) 473 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 2130 CB
1264 2135 670 (Places a connection endpoint object on the) 670 SB
gr
gs 869 46 1214 2180 CB
1264 2181 763 (packetize queue of the sample TDI driver device) 763 SB
gr
gs 869 46 1214 2226 CB
1264 2227 769 (object. If necessary, this function initiates packet) 769 SB
gr
gs 869 59 1214 2272 CB
1264 2273 204 (construction.) 204 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 18 def
/wp$fpage (18) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 19 19
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (19) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
721 501 201 (Table 3.15 \() 201 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
922 500 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1086 501 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1139 500 167 (sending.c ) 167 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1306 501 165 (Functions) 165 SB
1461 2 715 559 B
1 F
n
gs 579 63 721 566 CB
721 571 149 (Function) 149 SB
gr
gs 869 63 1301 566 CB
1351 571 168 (Definition) 168 SB
gr
1448 2 721 629 B
1 F
n
gs 579 63 721 636 CB
721 641 235 (StCancelSend) 235 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 636 CB
1351 641 145 (Through ) 145 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 869 50 1301 636 CB
1496 641 178 (StTdiSend) 178 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 636 CB
1674 641 23 ( \() 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 869 50 1301 636 CB
1697 640 102 (send.c) 102 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 636 CB
1799 641 298 (\), cancels a receive) 298 SB
gr
gs 869 59 1301 686 CB
1351 687 759 (request queued on a connection endpoint object.) 759 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 745 CB
721 750 196 (StNdisSend) 196 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 63 1301 745 CB
1351 750 756 (Sends an NDIS 3.0 packet to the netcard driver.) 756 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 808 CB
721 813 456 (StSendCompletionHandler) 456 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 808 CB
1351 813 794 (Completes processing for a packet that the sample) 794 SB
gr
gs 869 46 1301 858 CB
1351 859 758 (TDI driver has turned over to the netcard driver.) 758 SB
gr
gs 869 46 1301 904 CB
1351 905 771 (The netcard driver calls this function through the) 771 SB
gr
gs 869 46 1301 950 CB
1351 951 799 (NDIS interface library wrapper after the driver has) 799 SB
gr
gs 869 46 1301 996 CB
1351 997 799 (forwarded the packet to the network. This function) 799 SB
gr
gs 869 46 1301 1042 CB
1351 1043 678 (is an NDIS 3.0 transport driver lower-edge) 678 SB
gr
gs 869 59 1301 1088 CB
1351 1089 140 (function.) 140 SB
gr
255 255 255 fC
1449 3 721 1167 B
1 F
n
0 0 0 fC
1449 2 721 1164 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1240 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1316 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1322 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1383 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1389 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1545 1389 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1698 1389 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1782 1389 140 (sthdrs.h) 140 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1922 1389 200 ( concerning) 200 SB
779 1439 1308 (the structure definitions for connection endpoint objects, packet objects, and) 1308 SB
779 1489 266 (packet headers.) 266 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1550 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1556 527 (Examine the packet types that ) 527 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1306 1555 503 (StSendCompletionHandler) 503 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1809 1556 298 ( supports. Add or) 298 SB
779 1606 1044 (delete packet-type functionality as necessary for your driver.) 1044 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1727 941 (3.26  Modification of stcnfg.c) 941 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1841 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 1841 136 (stcnfg.c) 136 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1554 1841 542 (. The file contains the functions) 542 SB
721 1891 346 (listed in Table 3.16.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 1979 218 (Table 3.16    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
939 1978 138 (stcnfg.c ) 138 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1077 1979 165 (Functions) 165 SB
1461 2 715 2037 B
1 F
n
gs 562 63 721 2044 CB
721 2049 149 (Function) 149 SB
gr
gs 886 63 1284 2044 CB
1334 2049 168 (Definition) 168 SB
gr
1448 2 721 2107 B
1 F
n
gs 562 63 721 2114 CB
721 2119 189 (StAddBind) 189 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1284 2114 CB
1334 2119 804 (Adds a single binding parameter from the Registry) 804 SB
gr
gs 886 46 1284 2164 CB
1334 2165 821 (to the CONFIG_DATA structure. This is a callback) 821 SB
gr
gs 886 59 1284 2210 CB
1334 2211 210 (function that ) 210 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 886 59 1284 2210 CB
1544 2211 418 (RtlQueryRegisterValues) 418 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 59 1284 2210 CB
1962 2211 93 ( calls.) 93 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 721 2269 CB
721 2274 227 (StAddExport) 227 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1284 2269 CB
1334 2274 821 (Adds a single export parameter from the Registry to) 821 SB
gr
gs 886 46 1284 2319 CB
1334 2320 781 (the CONFIG_DATA structure. This is a callback) 781 SB
gr
gs 886 59 1284 2365 CB
1334 2366 210 (function that ) 210 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 886 59 1284 2365 CB
1544 2366 418 (RtlQueryRegisterValues) 418 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 59 1284 2365 CB
1962 2366 93 ( calls.) 93 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 721 2424 CB
721 2429 396 (StCloseParametersKey) 396 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 63 1284 2424 CB
1334 2429 520 (Closes a Registry parameter key.) 520 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 721 2487 CB
721 2492 380 (StConfigureTransport) 380 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1284 2487 CB
1334 2492 776 (Retrieves sample TDI driver binding and linkage) 776 SB
gr
gs 886 59 1284 2537 CB
1334 2538 481 (information from the Registry.) 481 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 19 def
/wp$fpage (19) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 20 20
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (20) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 501 211 (Table 3.16  \() 211 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
845 500 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1009 501 53 (\)    ) 53 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
1062 500 138 (stcnfg.c ) 138 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1200 501 165 (Functions) 165 SB
1461 2 628 559 B
1 F
n
gs 562 63 634 566 CB
634 571 149 (Function) 149 SB
gr
gs 886 63 1197 566 CB
1247 571 168 (Definition) 168 SB
gr
1448 2 634 629 B
1 F
n
gs 562 63 634 636 CB
634 641 262 (StCountEntries) 262 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 636 CB
1247 641 762 (Determines the size required for the sample TDI) 762 SB
gr
gs 886 46 1197 686 CB
1247 687 803 (driver CONFIG_DATA structure and allocates the) 803 SB
gr
gs 886 46 1197 732 CB
1247 733 645 (structure. This is a callback function that) 645 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 886 59 1197 778 CB
1247 779 418 (RtlQueryRegisterValues) 418 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 59 1197 778 CB
1665 779 93 ( calls.) 93 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 837 CB
634 842 421 (StFreeConfigurationInfo) 421 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 837 CB
1247 842 746 (Frees memory allocated for a CONFIG_DATA) 746 SB
gr
gs 886 59 1197 887 CB
1247 888 148 (structure.) 148 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 946 CB
634 951 395 (StOpenParametersKey) 395 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 63 1197 946 CB
1247 951 516 (Opens a Registry parameter key.) 516 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 1009 CB
634 1014 470 (StReadLinkageInformation) 470 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 1009 CB
1247 1014 835 (Reads linkage information from the Registry into the) 835 SB
gr
gs 886 46 1197 1059 CB
1247 1060 821 (sample TDI driver CONFIG_DATA structure. If no) 821 SB
gr
gs 886 46 1197 1105 CB
1247 1106 791 (information is available, this function uses default) 791 SB
gr
gs 886 59 1197 1151 CB
1247 1152 111 (values.) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 1210 CB
634 1215 411 (StReadSingleParameter) 411 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 1210 CB
1247 1215 814 (Reads a single parameter from the Registry into the) 814 SB
gr
gs 886 46 1197 1260 CB
1247 1261 772 (sample TDI driver CONFIG_DATA structure. If) 772 SB
gr
gs 886 46 1197 1306 CB
1247 1307 758 (this function does not find a parameter, it uses a) 758 SB
gr
gs 886 59 1197 1352 CB
1247 1353 214 (default value.) 214 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 1411 CB
634 1416 398 (StReadSizeInformation) 398 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 1411 CB
1247 1416 712 (Reads the size of a single parameter from the) 712 SB
gr
gs 886 46 1197 1461 CB
1247 1462 805 (Registry. If this function cannot read the parameter) 805 SB
gr
gs 886 59 1197 1507 CB
1247 1508 451 (size, it returns a default size.) 451 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 1566 CB
634 1571 410 (StSaveConfigInRegistry) 410 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 50 1197 1566 CB
1247 1571 826 (Writes \223hidden\224 parameters \(which may not exist in) 826 SB
gr
gs 886 46 1197 1616 CB
1247 1617 603 (the Registry\) to the sample TDI driver) 603 SB
gr
gs 886 59 1197 1662 CB
1247 1663 436 (CONFIG_DATA structure.) 436 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 562 63 634 1721 CB
634 1726 422 (StWriteSingleParameter) 422 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 886 63 1197 1721 CB
1247 1726 689 (Writes a single parameter into the Registry.) 689 SB
gr
255 255 255 fC
1449 3 634 1804 B
1 F
n
0 0 0 fC
1449 2 634 1801 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1877 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1953 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1959 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2020 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2026 766 (Reflect any modifications you have made in ) 766 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1458 2026 138 (stcnfg.h) 138 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1596 2026 263 ( concerning the) 263 SB
692 2076 671 (CONFIG_DATA structure definitions.) 671 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2137 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2143 1242 (Add or delete functionality to read or write driver-specific configuration) 1242 SB
692 2193 1309 (parameters from or to the Registry. The installation software for your driver) 1309 SB
692 2243 944 (should make appropriate modifications to the Registry.) 944 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 20 def
/wp$fpage (20) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 21 21
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (21) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 491 928 (3.27  Modification of stdrvr.c) 928 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 605 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1418 605 136 (stdrvr.c) 136 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1554 605 542 (. The file contains the functions) 542 SB
721 655 346 (listed in Table 3.17.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 743 218 (Table 3.17    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
939 742 135 (stdrvr.c ) 135 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1074 743 165 (Functions) 165 SB
1461 2 715 801 B
1 F
n
gs 538 63 721 808 CB
721 813 149 (Function) 149 SB
gr
gs 910 63 1260 808 CB
1310 813 168 (Definition) 168 SB
gr
1448 2 721 871 B
1 F
n
gs 538 63 721 878 CB
721 883 212 (DriverEntry) 212 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 878 CB
1310 883 818 (Creates and initializes device objects for the sample) 818 SB
gr
gs 910 59 1260 928 CB
1310 929 700 (TDI driver and each netcard on the network.) 700 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 987 CB
721 992 279 (StDeviceControl) 279 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 987 CB
1310 992 856 (Converts an IRP so that a driver dispatch function can) 856 SB
gr
gs 910 46 1260 1037 CB
1310 1038 857 (decode it and pass the client request to the appropriate) 857 SB
gr
gs 910 59 1260 1083 CB
1310 1084 680 (internal driver request-processing function.) 680 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 1142 CB
721 1147 185 (StDispatch) 185 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 1142 CB
1310 1147 834 (As a driver dispatch entry point, receives an IRP and) 834 SB
gr
gs 910 46 1260 1192 CB
1310 1193 732 (decodes the major function code. If the code is) 732 SB
gr
gs 910 46 1260 1238 CB
1310 1239 838 (IRP_MJ_DEVICE_CONTROL, this function passes) 838 SB
gr
gs 910 59 1260 1284 CB
1310 1285 170 (the IRP to ) 170 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 910 59 1260 1284 CB
1480 1285 279 (StDeviceControl) 279 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 59 1260 1284 CB
1759 1285 359 ( for further processing.) 359 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 1343 CB
721 1348 323 (StDispatchInternal) 323 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 1343 CB
1310 1348 789 (As a driver dispatch entry point for a kernel-mode) 789 SB
gr
gs 910 46 1260 1393 CB
1310 1394 789 (client, decodes the request message in an IRP and) 789 SB
gr
gs 910 46 1260 1439 CB
1310 1440 801 (passes the client request to the appropriate internal) 801 SB
gr
gs 910 59 1260 1485 CB
1310 1486 549 (driver request-processing function.) 549 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 1544 CB
721 1549 370 (StDispatchOpenClose) 370 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 1544 CB
1310 1549 851 (As a driver dispatch entry point, receives an IRP from) 851 SB
gr
gs 910 46 1260 1594 CB
1310 1595 616 (the Windows NT kernel containing the) 616 SB
gr
gs 910 46 1260 1640 CB
1310 1641 609 (IRP_MJ_OPEN, IRP_MJ_CLOSE, or) 609 SB
gr
gs 910 46 1260 1686 CB
1310 1687 752 (IRP_MJ_CLEANUP major function code. This) 752 SB
gr
gs 910 46 1260 1732 CB
1310 1733 774 (dispatch function passes the client open object or) 774 SB
gr
gs 910 46 1260 1778 CB
1310 1779 831 (close object request to the appropriate internal driver) 831 SB
gr
gs 910 46 1260 1824 CB
1310 1825 720 (request-processing function. It corresponds to) 720 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 910 46 1260 1870 CB
1310 1871 346 (TdiDispatchCreate. ) 346 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 46 1260 1870 CB
1656 1871 409 (For more information, see) 409 SB
gr
gs 910 59 1260 1916 CB
1310 1917 166 (Chapter 1.) 166 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 1975 CB
721 1980 287 (StFreeResources) 287 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 1975 CB
1310 1980 826 (In preparation for unloading the driver, frees storage) 826 SB
gr
gs 910 59 1260 2025 CB
1310 2026 631 (associated with the driver device object.) 631 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 2084 CB
721 2089 157 (StUnload) 157 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 2084 CB
1310 2089 803 (Closes all netcards and deregisters the sample TDI) 803 SB
gr
gs 910 46 1260 2134 CB
1310 2135 621 (driver. This function corresponds to the) 621 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 910 59 1260 2180 CB
1310 2181 236 (DriverUnload) 236 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 59 1260 2180 CB
1546 2181 528 ( function, described in Chapter 1.) 528 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 2239 CB
721 2244 438 (StWriteGeneralErrorLog) 438 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 2239 CB
1310 2244 833 (Allocates and writes an error log entry indicating the) 833 SB
gr
gs 910 46 1260 2289 CB
1310 2290 795 (sample TDI driver has encountered a general error) 795 SB
gr
gs 910 59 1260 2335 CB
1310 2336 158 (condition.) 158 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 538 63 721 2394 CB
721 2399 458 (StWriteResourceErrorLog) 458 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 910 50 1260 2394 CB
1310 2399 833 (Allocates and writes an error log entry indicating the) 833 SB
gr
gs 910 59 1260 2444 CB
1310 2445 699 (sample TDI driver has run out of a resource.) 699 SB
gr
255 255 255 fC
1449 3 721 2523 B
1 F
n
0 0 0 fC
1449 2 721 2520 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 21 def
/wp$fpage (21) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 22 22
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (22) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
634 493 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 569 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 575 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 636 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 642 1097 (Change the object initialization and resource allocation code in ) 1097 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1789 641 235 (DriverEntry) 235 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
2024 642 44 ( to) 44 SB
692 692 752 (reflect any modifications you have made in ) 752 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1444 692 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1597 692 401 ( concerning the various) 401 SB
692 742 462 (sample TDI driver objects.) 462 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 803 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 809 46 (In ) 46 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
738 808 235 (DriverEntry) 235 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
973 809 865 (, change the names of the dispatch functions in the) 865 SB
692 859 1378 (DRIVER_OBJECT structure to the names of dispatch functions for your driver.) 1378 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 920 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 926 715 (Modify the resource deallocation code in ) 715 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1407 925 174 (StUnload) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1581 926 463 ( to reflect any changes that) 463 SB
692 976 313 (you have made in ) 313 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1005 976 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1158 976 874 ( concerning the various sample TDI driver objects.) 874 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1037 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1043 142 (Change ) 142 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
834 1042 408 (StDispatchOpenClose) 408 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1242 1043 796 ( to reflect any modifications you have made in) 796 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
692 1093 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
845 1093 977 ( concerning the address and connection endpoint objects.) 977 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1214 933 (3.28  Modification of stmac.c) 933 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1328 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 1328 134 (stmac.c) 134 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1465 1328 552 (. This file contains the functions) 552 SB
634 1378 346 (listed in Table 3.18.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1466 218 (Table 3.18    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 1465 136 (stmac.c ) 136 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
988 1466 165 (Functions) 165 SB
1461 2 628 1524 B
1 F
n
gs 579 63 634 1531 CB
634 1536 149 (Function) 149 SB
gr
gs 869 63 1214 1531 CB
1264 1536 168 (Definition) 168 SB
gr
1448 2 634 1594 B
1 F
n
gs 579 63 634 1601 CB
634 1606 371 (MacConstructHeader) 371 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1601 CB
1264 1606 796 (Constructs a packet header for a particular netcard) 796 SB
gr
gs 869 59 1214 1651 CB
1264 1652 140 (medium.) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1710 CB
634 1715 371 (MacInitializeMacInfo) 371 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1710 CB
1264 1715 734 (Initializes a netcard information structure with) 734 SB
gr
gs 869 59 1214 1760 CB
1264 1761 477 (netcard medium-specific data.) 477 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1819 CB
634 1824 424 (MacReturnMaxDataSize) 424 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1819 CB
1264 1824 683 (Determines the maximum client data space) 683 SB
gr
gs 869 59 1214 1869 CB
1264 1870 814 (available in a packet for a specific netcard medium.) 814 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1928 CB
634 1933 431 (MacSetMulticastAddress) 431 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1928 CB
1264 1933 789 (Writes the multicast address for a specific netcard) 789 SB
gr
gs 869 59 1214 1978 CB
1264 1979 669 (medium into a TDI driver-supplied buffer.) 669 SB
gr
255 255 255 fC
1449 3 634 2057 B
1 F
n
0 0 0 fC
1449 2 634 2054 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 2130 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2206 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2212 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2273 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2279 1304 (Most of the code in this file is specific to the types of netcard media that the) 1304 SB
692 2329 1384 (sample TDI driver supports. If your driver supports the same media, you can use) 1384 SB
692 2379 1338 (related code with little modification. Otherwise, modify the code as necessary) 1338 SB
692 2429 403 (for your netcard media.) 403 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 22 def
/wp$fpage (22) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 23 23
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1491 378 133 (Chapter ) 133 SB
1624 378 18 (3) 18 SB
1642 378 342 (    Writing a TDI Driver) 342 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (3) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (23) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 491 937 (3.29  Modification of stndis.c) 937 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 605 391 (This section describes ) 391 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1112 605 144 (stndis.c ) 144 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1256 605 890 (modifications. This file contains the functions listed) 890 SB
721 655 242 (in Table 3.19.) 242 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 743 218 (Table 3.19    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
939 742 134 (stndis.c ) 134 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1073 743 165 (Functions) 165 SB
1461 2 715 801 B
1 F
n
gs 579 63 721 808 CB
721 813 149 (Function) 149 SB
gr
gs 869 63 1301 808 CB
1351 813 168 (Definition) 168 SB
gr
1448 2 721 871 B
1 F
n
gs 579 63 721 878 CB
721 883 434 (StCloseAdapterComplete) 434 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 878 CB
1351 883 754 (Completes processing associated with closing a) 754 SB
gr
gs 869 46 1301 928 CB
1351 929 745 (netcard. This function is an NDIS 3.0 transport) 745 SB
gr
gs 869 59 1301 974 CB
1351 975 429 (driver lower-edge function.) 429 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1033 CB
721 1038 206 (StCloseNdis) 206 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 63 1301 1033 CB
1351 1038 754 (Closes a netcard and frees associated resources.) 754 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1096 CB
721 1101 356 (StDeregisterProtocol) 356 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1096 CB
1351 1101 785 (Deregisters the sample TDI driver from the NDIS) 785 SB
gr
gs 869 59 1301 1146 CB
1351 1147 400 (interface library wrapper.) 400 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1205 CB
721 1210 262 (StInitializeNdis) 262 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1205 CB
1351 1210 809 (Opens a netcard and initializes netcard information) 809 SB
gr
gs 869 59 1301 1255 CB
1351 1256 596 (structures with medium-specific data.) 596 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1314 CB
721 1319 433 (StOpenAdapterComplete) 433 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1314 CB
1351 1319 767 (Completes processing associated with opening a) 767 SB
gr
gs 869 46 1301 1364 CB
1351 1365 745 (netcard. This function is an NDIS 3.0 transport) 745 SB
gr
gs 869 59 1301 1410 CB
1351 1411 429 (driver lower-edge function.) 429 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1469 CB
721 1474 320 (StRegisterProtocol) 320 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1469 CB
1351 1474 749 (Registers the sample TDI driver with the NDIS) 749 SB
gr
gs 869 59 1301 1519 CB
1351 1520 400 (interface library wrapper.) 400 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1578 CB
721 1583 336 (StRequestComplete) 336 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1578 CB
1351 1583 793 (Completes processing associated with querying or) 793 SB
gr
gs 869 46 1301 1628 CB
1351 1629 774 (setting information in a netcard driver MIB. This) 774 SB
gr
gs 869 46 1301 1674 CB
1351 1675 818 (function is an NDIS 3.0 transport driver lower-edge) 818 SB
gr
gs 869 59 1301 1720 CB
1351 1721 140 (function.) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1779 CB
721 1784 293 (StResetComplete) 293 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1779 CB
1351 1784 776 (Completes processing associated with resetting a) 776 SB
gr
gs 869 46 1301 1829 CB
1351 1830 697 (netcard driver. This function is an NDIS 3.0) 697 SB
gr
gs 869 59 1301 1875 CB
1351 1876 580 (transport driver lower-edge function.) 580 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 1934 CB
721 1939 304 (StStatusComplete) 304 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 1934 CB
1351 1939 704 (Completes processing associated with status) 704 SB
gr
gs 869 46 1301 1984 CB
1351 1985 720 (indications that the netcard driver sends. This) 720 SB
gr
gs 869 46 1301 2030 CB
1351 2031 818 (function is an NDIS 3.0 transport driver lower-edge) 818 SB
gr
gs 869 59 1301 2076 CB
1351 2077 140 (function.) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 721 2135 CB
721 2140 373 (StSubmitNdisRequest) 373 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1301 2135 CB
1351 2140 814 (Submits a request to a netcard driver to query or set) 814 SB
gr
gs 869 59 1301 2185 CB
1351 2186 369 (information in its MIB.) 369 SB
gr
255 255 255 fC
1449 3 721 2264 B
1 F
n
0 0 0 fC
1449 2 721 2261 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 23 def
/wp$fpage (23) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 24 24
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (3) 18 SB
277 378 11 (-) 11 SB
288 378 36 (24) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 420 (Part III    TDI  Driver Design) 420 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
634 493 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 569 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 575 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 636 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 642 46 (In ) 46 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
738 641 356 (StRegisterProtocol) 356 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1094 642 893 (, change the names of the NDIS 3.0 transport driver) 893 SB
692 692 1250 (lower-edge functions in the NDIS_PROTOCOL_CHARACTERISTICS) 1250 SB
692 742 1118 (structure to the names of the lower-edge functions in your driver.) 1118 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 803 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 809 344 (Most of the code in ) 344 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1036 808 288 (StInitializeNdis) 288 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1324 809 691 ( is specific to the types of netcard media) 691 SB
692 859 1345 (and the object attribute identifiers that the sample TDI driver supports. If your) 1345 SB
692 909 1325 (driver supports the same media and identifiers, you can use related code with) 1325 SB
692 959 1042 (little modification. Otherwise, modify the code as necessary.) 1042 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1080 1001 (3.30  Modification of uframes.c) 1001 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1194 697 (This section describes modifications for ) 697 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1331 1194 173 (uframes.c) 173 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1504 1194 542 (. The file contains the functions) 542 SB
634 1244 346 (listed in Table 3.20.) 346 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1332 218 (Table 3.20    ) 218 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
852 1331 176 (uframes.c ) 176 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
1028 1332 165 (Functions) 165 SB
1461 2 628 1390 B
1 F
n
gs 579 63 634 1397 CB
634 1402 149 (Function) 149 SB
gr
gs 869 63 1214 1397 CB
1264 1402 168 (Definition) 168 SB
gr
1448 2 634 1460 B
1 F
n
gs 579 63 634 1467 CB
634 1472 348 (StIndicateDatagram) 348 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1467 CB
1264 1472 783 (Accepts an incoming datagram and forwards it to) 783 SB
gr
gs 869 59 1214 1517 CB
1264 1518 454 (clients prepared to receive it.) 454 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1576 CB
634 1581 304 (StProcessConnect) 304 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1576 CB
1264 1581 714 (Forwards a connect request to clients that are) 714 SB
gr
gs 869 59 1214 1626 CB
1264 1627 610 (listening on a specified address object.) 610 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 579 63 634 1685 CB
634 1690 416 (StProcessConnectionless) 416 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 869 50 1214 1685 CB
1264 1690 689 (Receives and forwards a datagram from the) 689 SB
gr
gs 869 59 1214 1735 CB
1264 1736 139 (network.) 139 SB
gr
255 255 255 fC
1449 3 634 1814 B
1 F
n
0 0 0 fC
1449 2 634 1811 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1887 624 (Recommended Changes:) 624 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1963 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1969 1295 (Change St in identifier names to a group of letters representing your driver.) 1295 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2030 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2036 769 (Include any modifications you have made in ) 769 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1461 2036 153 (sttypes.h) 153 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1614 2036 425 ( concerning the structure) 425 SB
692 2086 1090 (definitions for address objects and connection endpoint objects.) 1090 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2147 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2153 1217 (Add support for other connectionless TSDUs that your driver receives.) 1217 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 24 def
/wp$fpage (24) def
/wp$date (07/18/93) def
/wp$time (04:41 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman
%%Trailer
SVDoc restore
end
%%Pages: 24
% TrueType font name key:
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT31c1c5 = 1defDTimes New RomanF00000015000001900000
%    MSTT31c1e2 = 1defDTimes New RomanF00000000000001900000
%    MSTT31c1ef = 1defDTimes New RomanF00000026000001900000
%    MSTT31c1fc = 1defDArial NarrowF00000064000002bc0000
%    MSTT31c208 = 1defDArial NarrowF00000032000002bc0000
%    MSTT31c214 = 1defDTimes New RomanF00000019000001900000
%    MSTT31c221 = 1defDTimes New RomanF00000023000001900000
%    MSTT31c22e = 1defDTimes New RomanF0000001d000001900000
%    MSTT31c23b = 1defDArial NarrowF00000028000002bc0000
%    MSTT31c247 = 1defDArial NarrowF0000003f000002bc0000
%    MSTT31c1d2 = 1defDTimes New RomanF00000032000001900000
%    MSTT31c253 = 1defDTimes New RomanF0000002c000001900000
%    MSTT31c260 = 1defDTimes New RomanF0000002c000001900001
%    MSTT31c26d = 1defDArial NarrowF00000053000002bc0000
%    MSTT31c287 = 1defDArialF00000032000001900000
%    MSTT31c292 = 1defDArial NarrowF00000047000002bc0000
%    MSTT31c29e = 1defDTimes New RomanF0000002c000002bc0000
%    MSTT31c2ab = 1defDArial NarrowF0000002c000002bc0000
%    MSTT31c2b7 = 1defDTimes New RomanF00000028000002bc0000
%    MSTT31c2c4 = 1defDTimes New RomanF00000011000001900000
%    MSTT31c2d1 = 1defDTimes New RomanF00000028000001900001
%    MSTT31c2de = 1defDTimes New RomanF00000028000001900000
%    MSTT31c2eb = 1defDTimes New RomanF00000028000002bc0001
%    MSTT31c2f8 = 1defDTimes New RomanF00000021000001900000
%    MSTT31c305 = 1defDArial NarrowF00000053000002bc0001
%    MSTT31c311 = 1defDMSIconsF00000028000001900000
%    MSTT31c31c = 1defDTimes New RomanF00000011000002bc0000
%    MSTT31c329 = 1defDTimes New RomanF0000003f000002bc0000
%    MSTT31c336 = 1defDArial NarrowF0000002c000001900000
%    MSTT31c279 = 1defDArial NarrowF00000021000002bc0000
%    MSTT31c34c = 1defDTimes New RomanF0000003a000001900000
%    MSTT31c359 = 1defDTimes New RomanF0000001e000001900000
%    MSTT31c366 = 1defDTimes New RomanF0000001b000001900000
%%DocumentSuppliedResources: procset Win35Dict 3 1

%%DocumentNeededResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Italic
%%+ font Times-Roman

%%EOF
