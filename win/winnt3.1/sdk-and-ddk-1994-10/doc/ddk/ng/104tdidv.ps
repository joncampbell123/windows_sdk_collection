%!PS-Adobe-3.0
%%Creator: Windows PSCRIPT
%%Title: Microsoft Word - 104TDIDV.DOC
%%BoundingBox: 14 9 597 784
%%DocumentNeededResources: (atend)
%%DocumentSuppliedResources: (atend)
%%Pages: (atend)
%%BeginResource: procset Win35Dict 3 1
/Win35Dict 290 dict def Win35Dict begin/bd{bind def}bind def/in{72
mul}bd/ed{exch def}bd/ld{load def}bd/tr/translate ld/gs/gsave ld/gr
/grestore ld/M/moveto ld/L/lineto ld/rmt/rmoveto ld/rlt/rlineto ld
/rct/rcurveto ld/st/stroke ld/n/newpath ld/sm/setmatrix ld/cm/currentmatrix
ld/cp/closepath ld/ARC/arcn ld/TR{65536 div}bd/lj/setlinejoin ld/lc
/setlinecap ld/ml/setmiterlimit ld/sl/setlinewidth ld/scignore false
def/sc{scignore{pop pop pop}{0 index 2 index eq 2 index 4 index eq
and{pop pop 255 div setgray}{3{255 div 3 1 roll}repeat setrgbcolor}ifelse}ifelse}bd
/FC{bR bG bB sc}bd/fC{/bB ed/bG ed/bR ed}bd/HC{hR hG hB sc}bd/hC{
/hB ed/hG ed/hR ed}bd/PC{pR pG pB sc}bd/pC{/pB ed/pG ed/pR ed}bd/sM
matrix def/PenW 1 def/iPen 5 def/mxF matrix def/mxE matrix def/mxUE
matrix def/mxUF matrix def/fBE false def/iDevRes 72 0 matrix defaultmatrix
dtransform dup mul exch dup mul add sqrt def/fPP false def/SS{fPP{
/SV save def}{gs}ifelse}bd/RS{fPP{SV restore}{gr}ifelse}bd/EJ{gsave
showpage grestore}bd/#C{userdict begin/#copies ed end}bd/FEbuf 2 string
def/FEglyph(G  )def/FE{1 exch{dup 16 FEbuf cvrs FEglyph exch 1 exch
putinterval 1 index exch FEglyph cvn put}for}bd/SM{/iRes ed/cyP ed
/cxPg ed/cyM ed/cxM ed 72 100 div dup scale dup 0 ne{90 eq{cyM exch
0 eq{cxM exch tr -90 rotate -1 1 scale}{cxM cxPg add exch tr +90 rotate}ifelse}{cyP
cyM sub exch 0 ne{cxM exch tr -90 rotate}{cxM cxPg add exch tr -90
rotate 1 -1 scale}ifelse}ifelse}{pop cyP cyM sub exch 0 ne{cxM cxPg
add exch tr 180 rotate}{cxM exch tr 1 -1 scale}ifelse}ifelse 100 iRes
div dup scale 0 0 transform .25 add round .25 sub exch .25 add round
.25 sub exch itransform translate}bd/SJ{1 index 0 eq{pop pop/fBE false
def}{1 index/Break ed div/dxBreak ed/fBE true def}ifelse}bd/ANSIVec[
16#0/grave 16#1/acute 16#2/circumflex 16#3/tilde 16#4/macron 16#5/breve
16#6/dotaccent 16#7/dieresis 16#8/ring 16#9/cedilla 16#A/hungarumlaut
16#B/ogonek 16#C/caron 16#D/dotlessi 16#27/quotesingle 16#60/grave
16#7C/bar 16#82/quotesinglbase 16#83/florin 16#84/quotedblbase 16#85
/ellipsis 16#86/dagger 16#87/daggerdbl 16#88/circumflex 16#89/perthousand
16#8A/Scaron 16#8B/guilsinglleft 16#8C/OE 16#91/quoteleft 16#92/quoteright
16#93/quotedblleft 16#94/quotedblright 16#95/bullet 16#96/endash 16#97
/emdash 16#98/tilde 16#99/trademark 16#9A/scaron 16#9B/guilsinglright
16#9C/oe 16#9F/Ydieresis 16#A0/space 16#A1/exclamdown 16#A4/currency
16#A5/yen 16#A6/brokenbar 16#A7/section 16#A8/dieresis 16#A9/copyright
16#AA/ordfeminine 16#AB/guillemotleft 16#AC/logicalnot 16#AD/hyphen
16#AE/registered 16#AF/macron 16#B0/degree 16#B1/plusminus 16#B2/twosuperior
16#B3/threesuperior 16#B4/acute 16#B5/mu 16#B6/paragraph 16#B7/periodcentered
16#B8/cedilla 16#B9/onesuperior 16#BA/ordmasculine 16#BB/guillemotright
16#BC/onequarter 16#BD/onehalf 16#BE/threequarters 16#BF/questiondown
16#C0/Agrave 16#C1/Aacute 16#C2/Acircumflex 16#C3/Atilde 16#C4/Adieresis
16#C5/Aring 16#C6/AE 16#C7/Ccedilla 16#C8/Egrave 16#C9/Eacute 16#CA
/Ecircumflex 16#CB/Edieresis 16#CC/Igrave 16#CD/Iacute 16#CE/Icircumflex
16#CF/Idieresis 16#D0/Eth 16#D1/Ntilde 16#D2/Ograve 16#D3/Oacute 16#D4
/Ocircumflex 16#D5/Otilde 16#D6/Odieresis 16#D7/multiply 16#D8/Oslash
16#D9/Ugrave 16#DA/Uacute 16#DB/Ucircumflex 16#DC/Udieresis 16#DD/Yacute
16#DE/Thorn 16#DF/germandbls 16#E0/agrave 16#E1/aacute 16#E2/acircumflex
16#E3/atilde 16#E4/adieresis 16#E5/aring 16#E6/ae 16#E7/ccedilla 16#E8
/egrave 16#E9/eacute 16#EA/ecircumflex 16#EB/edieresis 16#EC/igrave
16#ED/iacute 16#EE/icircumflex 16#EF/idieresis 16#F0/eth 16#F1/ntilde
16#F2/ograve 16#F3/oacute 16#F4/ocircumflex 16#F5/otilde 16#F6/odieresis
16#F7/divide 16#F8/oslash 16#F9/ugrave 16#FA/uacute 16#FB/ucircumflex
16#FC/udieresis 16#FD/yacute 16#FE/thorn 16#FF/ydieresis ] def/reencdict
12 dict def/IsChar{basefontdict/CharStrings get exch known}bd/MapCh{dup
IsChar not{pop/bullet}if newfont/Encoding get 3 1 roll put}bd/MapDegree{16#b0
/degree IsChar{/degree}{/ring}ifelse MapCh}bd/MapBB{16#a6/brokenbar
IsChar{/brokenbar}{/bar}ifelse MapCh}bd/ANSIFont{reencdict begin/newfontname
ed/basefontname ed FontDirectory newfontname known not{/basefontdict
basefontname findfont def/newfont basefontdict maxlength dict def basefontdict{exch
dup/FID ne{dup/Encoding eq{exch dup length array copy newfont 3 1 roll
put}{exch newfont 3 1 roll put}ifelse}{pop pop}ifelse}forall newfont
/FontName newfontname put 127 1 159{newfont/Encoding get exch/bullet
put}for ANSIVec aload pop ANSIVec length 2 idiv{MapCh}repeat MapDegree
MapBB newfontname newfont definefont pop}if newfontname end}bd/SB{FC
/ULlen ed/str ed str length fBE not{dup 1 gt{1 sub}if}if/cbStr ed
/dxGdi ed/y0 ed/x0 ed str stringwidth dup 0 ne{/y1 ed/x1 ed y1 y1
mul x1 x1 mul add sqrt dxGdi exch div 1 sub dup x1 mul cbStr div exch
y1 mul cbStr div}{exch abs neg dxGdi add cbStr div exch}ifelse/dyExtra
ed/dxExtra ed x0 y0 M fBE{dxBreak 0 BCh dxExtra dyExtra str awidthshow}{dxExtra
dyExtra str ashow}ifelse fUL{x0 y0 M dxUL dyUL rmt ULlen fBE{Break
add}if 0 mxUE transform gs rlt cyUL sl [] 0 setdash st gr}if fSO{x0
y0 M dxSO dySO rmt ULlen fBE{Break add}if 0 mxUE transform gs rlt cyUL
sl [] 0 setdash st gr}if n/fBE false def}bd/font{/name ed/Ascent ed
0 ne/fT3 ed 0 ne/fSO ed 0 ne/fUL ed/Sy ed/Sx ed 10.0 div/ori ed -10.0
div/esc ed/BCh ed name findfont/xAscent 0 def/yAscent Ascent def/ULesc
esc def ULesc mxUE rotate pop fT3{/esc 0 def xAscent yAscent mxUE transform
/yAscent ed/xAscent ed}if [Sx 0 0 Sy neg xAscent yAscent] esc mxE
rotate mxF concatmatrix makefont setfont [Sx 0 0 Sy neg 0 Ascent] mxUE
mxUF concatmatrix pop fUL{currentfont dup/FontInfo get/UnderlinePosition
known not{pop/Courier findfont}if/FontInfo get/UnderlinePosition get
1000 div 0 exch mxUF transform/dyUL ed/dxUL ed}if fSO{0 .3 mxUF transform
/dySO ed/dxSO ed}if fUL fSO or{currentfont dup/FontInfo get/UnderlineThickness
known not{pop/Courier findfont}if/FontInfo get/UnderlineThickness get
1000 div Sy mul/cyUL ed}if}bd/min{2 copy gt{exch}if pop}bd/max{2 copy
lt{exch}if pop}bd/CP{/ft ed{{ft 0 eq{clip}{eoclip}ifelse}stopped{currentflat
1 add setflat}{exit}ifelse}loop}bd/patfont 10 dict def patfont begin
/FontType 3 def/FontMatrix [1 0 0 -1 0 0] def/FontBBox [0 0 16 16]
def/Encoding StandardEncoding def/BuildChar{pop pop 16 0 0 0 16 16
setcachedevice 16 16 false [1 0 0 1 .25 .25]{pat}imagemask}bd end/p{
/pat 32 string def{}forall 0 1 7{dup 2 mul pat exch 3 index put dup
2 mul 1 add pat exch 3 index put dup 2 mul 16 add pat exch 3 index
put 2 mul 17 add pat exch 2 index put pop}for}bd/pfill{/PatFont patfont
definefont setfont/ch(AAAA)def X0 64 X1{Y1 -16 Y0{1 index exch M ch
show}for pop}for}bd/vert{X0 w X1{dup Y0 M Y1 L st}for}bd/horz{Y0 w
Y1{dup X0 exch M X1 exch L st}for}bd/fdiag{X0 w X1{Y0 M X1 X0 sub dup
rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup rlt st}for}bd/bdiag{X0 w
X1{Y1 M X1 X0 sub dup neg rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup
neg rlt st}for}bd/AU{1 add cvi 15 or}bd/AD{1 sub cvi -16 and}bd/SHR{pathbbox
AU/Y1 ed AU/X1 ed AD/Y0 ed AD/X0 ed}bd/hfill{/w iRes 37.5 div round
def 0.1 sl [] 0 setdash n dup 0 eq{horz}if dup 1 eq{vert}if dup 2 eq{fdiag}if
dup 3 eq{bdiag}if dup 4 eq{horz vert}if 5 eq{fdiag bdiag}if}bd/F{/ft
ed fm 256 and 0 ne{gs FC ft 0 eq{fill}{eofill}ifelse gr}if fm 1536
and 0 ne{SHR gs HC ft CP fm 1024 and 0 ne{/Tmp save def pfill Tmp restore}{fm
15 and hfill}ifelse gr}if}bd/S{PenW sl PC st}bd/m matrix def/GW{iRes
12 div PenW add cvi}bd/DoW{iRes 50 div PenW add cvi}bd/DW{iRes 8 div
PenW add cvi}bd/SP{/PenW ed/iPen ed iPen 0 eq iPen 6 eq or{[] 0 setdash}if
iPen 1 eq{[DW GW] 0 setdash}if iPen 2 eq{[DoW GW] 0 setdash}if iPen
3 eq{[DW GW DoW GW] 0 setdash}if iPen 4 eq{[DW GW DoW GW DoW GW] 0
setdash}if}bd/E{m cm pop tr scale 1 0 moveto 0 0 1 0 360 arc cp m sm}bd
/AG{/sy ed/sx ed sx div 4 1 roll sy div 4 1 roll sx div 4 1 roll sy
div 4 1 roll atan/a2 ed atan/a1 ed sx sy scale a1 a2 ARC}def/A{m cm
pop tr AG m sm}def/P{m cm pop tr 0 0 M AG cp m sm}def/RRect{n 4 copy
M 3 1 roll exch L 4 2 roll L L cp}bd/RRCC{/r ed/y1 ed/x1 ed/y0 ed/x0
ed x0 x1 add 2 div y0 M x1 y0 x1 y1 r arcto 4{pop}repeat x1 y1 x0 y1
r arcto 4{pop}repeat x0 y1 x0 y0 r arcto 4{pop}repeat x0 y0 x1 y0 r
arcto 4{pop}repeat cp}bd/RR{2 copy 0 eq exch 0 eq or{pop pop RRect}{2
copy eq{pop RRCC}{m cm pop/y2 ed/x2 ed/ys y2 x2 div 1 max def/xs x2
y2 div 1 max def/y1 exch ys div def/x1 exch xs div def/y0 exch ys div
def/x0 exch xs div def/r2 x2 y2 min def xs ys scale x0 x1 add 2 div
y0 M x1 y0 x1 y1 r2 arcto 4{pop}repeat x1 y1 x0 y1 r2 arcto 4{pop}repeat
x0 y1 x0 y0 r2 arcto 4{pop}repeat x0 y0 x1 y0 r2 arcto 4{pop}repeat
m sm cp}ifelse}ifelse}bd/PP{{rlt}repeat}bd/OB{gs 0 ne{7 3 roll/y ed
/x ed x y translate ULesc rotate x neg y neg translate x y 7 -3 roll}if
sc B fill gr}bd/B{M/dy ed/dx ed dx 0 rlt 0 dy rlt dx neg 0 rlt cp}bd
/CB{B clip n}bd/ErrHandler{errordict dup maxlength exch length gt
dup{errordict begin}if/errhelpdict 12 dict def errhelpdict begin/stackunderflow(operand stack underflow)def
/undefined(this name is not defined in a dictionary)def/VMerror(you have used up all the printer's memory)def
/typecheck(operator was expecting a different type of operand)def
/ioerror(input/output error occured)def end{end}if errordict begin
/handleerror{$error begin newerror{/newerror false def showpage 72
72 scale/x .25 def/y 9.6 def/Helvetica findfont .2 scalefont setfont
x y moveto(Offending Command = )show/command load{dup type/stringtype
ne{(max err string)cvs}if show}exec/y y .2 sub def x y moveto(Error = )show
errorname{dup type dup( max err string )cvs show( : )show/stringtype
ne{( max err string )cvs}if show}exec errordict begin errhelpdict errorname
known{x 1 add y .2 sub moveto errhelpdict errorname get show}if end
/y y .4 sub def x y moveto(Stack =)show ostack{/y y .2 sub def x 1
add y moveto dup type/stringtype ne{( max err string )cvs}if show}forall
showpage}if end}def end}bd end
%%EndResource
/SVDoc save def
%%EndProlog
%%BeginSetup
Win35Dict begin
ErrHandler
statusdict begin 0 setjobtimeout end
statusdict begin statusdict /jobname (Microsoft Word - 104TDIDV.DOC) put end
/oldDictCnt countdictstack def {}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
/oldDictCnt countdictstack def {letter
}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
[{ }
/exec load currenttransfer /exec load] cvx settransfer
%%EndSetup
%%Page: 1 1
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
0 0 0 fC
/fm 256 def
1824 2 346 391 B
1 F
n
32 0 0 50 50 0 0 0 45 /Times-Roman /font32 ANSIFont font
0 0 0 fC
346 491 33 (C) 58 SB
404 491 36 (H) 61 SB
465 491 35 (A) 60 SB
525 491 28 (P) 53 SB
578 491 31 (T) 56 SB
634 491 31 (E) 56 SB
690 491 33 (R) 58 SB
748 491 13 ( ) 38 SB
786 491 25 (4) 50 SB
32 0 0 100 100 0 0 0 93 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 1400 513 346 604 CB
346 602 393 (TDI Driver) 393 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1117 1431 (The TDI driver is a transport driver that provides network services to user-mode as) 1431 SB
721 1167 1375 (well as kernel-mode clients, for example other drivers. It is generally tailored to) 1375 SB
721 1217 1386 (support an entire netcard driver class, which may service more than one network) 1386 SB
721 1267 1412 (type. The most common networks supported are Ethernet, Token Ring, and FDDI.) 1412 SB
721 1350 1398 (A TDI client uses messages packaged in IRPs to represent its requests to the TDI) 1398 SB
721 1400 1421 (driver. A user-mode client usually uses an IOCTL message to represent its version) 1421 SB
721 1450 1423 (of a request. A kernel-mode client uses a request message, which is very similar to) 1423 SB
721 1500 1077 (an IOCTL message but represented without the IOCTL prefix.) 1077 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1620 914 (4.1  TDI Driver Design Goals) 914 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1734 900 (A TDI driver must meet the following requirements:) 900 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1811 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1817 1362 (Portability. You must write the TDI driver and interface functions entirely in C) 1362 SB
779 1867 1360 (so the software is portable to different hardware platforms with minimal effort.) 1360 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1928 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1934 1360 (Data Path Width. The TDI driver must use a full 32-bit interface containing no) 1360 SB
779 1984 947 (processor-specific interpretation of data and addresses.) 947 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2045 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2051 1372 (Multiprocessor. The TDI driver must support multiprocessor environments with) 1372 SB
779 2101 300 (true concurrency.) 300 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2162 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2168 1378 (Performance. The TDI driver should be well matched to a fast interface that can) 1378 SB
779 2218 647 (handle the granularity of driver tasks.) 647 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2279 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2285 1234 (Functionality. The TDI driver must support fully asynchronous function) 1234 SB
779 2335 173 (operation.) 173 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2396 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2402 1341 (Mappable Interface. For ease of application development, you must be able to) 1341 SB
779 2452 1333 (write emulation libraries for other common interfaces, such as TLI, Windows) 1333 SB
779 2502 1361 (Sockets, and NetBIOS, on top of TDI. Therefore, TDI driver functions must be) 1361 SB
779 2552 1140 (mappable to driver functions of existing transport layer interfaces.) 1140 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 1 def
/wp$fpage (1) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Roman
%%Page: 2 2
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (4) 18 SB
277 378 11 (-) 11 SB
288 378 18 (2) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 816 (Part I    Introduction to Windows NT Network Drivers) 816 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 46 /MSIcons2 font
0 0 0 fC
gs 653 3231 0 0 CB
634 490 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 496 1350 (Network Management. TDI driver design must integrate any required network) 1350 SB
692 546 1291 (management at an early stage. To be really effective, network management) 1291 SB
692 596 1330 (software should enable a client \(either local node or remote node\) to monitor,) 1330 SB
692 646 1196 (diagnose, and even tune an operating TDI driver dynamically without) 1196 SB
692 696 713 (compromising operating system integrity.) 713 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 757 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 763 1380 (Querying and Setting Information. The TDI driver must be able to query and set) 1380 SB
692 813 1329 (information by using a basic TDI mechanism that is pervasive throughout the) 1329 SB
692 863 776 (network, datalink, and physical layers \(OSI\).) 776 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 924 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 930 1374 (Security. The TDI driver must also provide for security. In particular, the driver) 1374 SB
692 980 1311 (should provide some measure of control for transport address access. A TDI) 1311 SB
692 1030 1359 (client creating an address needs to specify any other clients it can use. Also, an) 1359 SB
692 1080 1381 (administrator should be able to restrict the set of clients that can use a particular) 1381 SB
692 1130 141 (address.) 141 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1191 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1197 1301 (Connectivity. The TDI driver requires a flexible addressing system that can) 1301 SB
692 1247 1318 (accommodate a wide variety of protocols. All clients should have concurrent) 1318 SB
692 1297 275 (access to UNIX) 275 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
967 1303 28 (\231) 28 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
995 1297 188 (, MS-DOS) 188 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
1183 1303 28 (\231) 28 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1211 1297 629 (, Windows MS-DOS, and Microsoft) 629 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
1840 1311 22 (\256) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1862 1297 176 ( Windows) 176 SB
692 1347 58 (NT) 58 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
750 1353 28 (\231) 28 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
778 1347 336 ( network resources.) 336 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1408 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1414 1290 (Protocol Support. The TDI driver should be able to exploit all features of a) 1290 SB
692 1464 1360 (particular network protocol if desired. However, you may also need to write an) 1360 SB
692 1514 1376 (application that can run using any type of transport driver. In this case, you may) 1376 SB
692 1564 1092 (have to restrict the application to a subset of available services.) 1092 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1685 1160 (4.2  TDI Driver Software Description) 1160 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1799 1375 (TDI code included in the DDK focuses mainly on the functions of a typical TDI) 1375 SB
634 1849 1401 (driver and the TDI library. It also provides prototypes for event handler functions) 1401 SB
634 1899 1360 (that a kernel-mode client registers with the TDI driver, but includes no specific) 1360 SB
634 1949 1330 (function prototypes for the user-mode client, which must call the Win32 API.) 1330 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
634 2032 91 (Tdi.h) 91 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
725 2032 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
809 2032 150 (tdikrnl.h) 150 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
959 2032 11 ( ) 11 SB
970 2032 1071 (are the main header files for the TDI driver. These files define) 1071 SB
634 2082 1368 (the driver entry point functions, the event handler functions for the kernel-mode) 1368 SB
634 2132 1415 (TDI client, and the request build and utility functions of the TDI library. For more) 1415 SB
634 2182 1176 (information about all the functions and their interaction, see Part III.) 1176 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 2 def
/wp$fpage (2) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 3 3
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1658 378 133 (Chapter ) 133 SB
1791 378 18 (4) 18 SB
1809 378 193 (    TDI Driver) 193 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (4) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (3) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 492 600 (4.2.1  TDI Driver Code) 600 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 588 1336 (All TDI drivers support a common set of functions, along with driver-specific) 1336 SB
721 638 1394 (functions as determined by the developer. If a TDI client calls a function the TDI) 1394 SB
721 688 1388 (driver does not include, the driver returns an error code indicating the function is) 1388 SB
721 738 1377 (invalid. For more information about error codes and messages, see Appendix A.) 1377 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 835 837 (4.2.1.1  Required Driver Functions) 837 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 917 964 (A TDI driver must support the following function types:) 964 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 994 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1000 213 (Driver entry) 213 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1061 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1067 241 (Driver unload) 241 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1128 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1134 1288 (Dispatch device control \(entry point for incoming requests from user-mode) 1288 SB
779 1184 110 (client\)) 110 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1245 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1251 1353 (Dispatch internal device control or dispatch fast device control \(entry point for) 1353 SB
779 1301 336 (kernel-mode client\)) 336 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1362 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1368 1307 (Dispatch create \(entry point for opening an address, connection endpoint, or) 1307 SB
779 1418 396 (control channel object\)) 396 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1479 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1485 1034 (Dispatch close or cleanup \(entry point for closing an object\)) 1034 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1546 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1552 1224 (Lower-edge NDIS 3.0 transport driver functions, see Part II, Chapter 1) 1224 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1613 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1619 1087 (Internal functions to process client IOCTL or request messages) 1087 SB
721 1703 1015 (For more information about the TDI functions, see Part III.) 1015 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 3 def
/wp$fpage (3) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Roman
%%Page: 4 4
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (4) 18 SB
277 378 11 (-) 11 SB
288 378 18 (4) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 816 (Part I    Introduction to Windows NT Network Drivers) 816 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
634 493 642 (4.2.1.2  TDI Driver Options) 642 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 575 1300 (In addition to the functions summarized above, your TDI driver can include) 1300 SB
634 625 1214 (functions reflecting one or more of the features described in Table 4.1.) 1214 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 713 711 (Table 4.1    Optional TDI Driver Features) 711 SB
1461 2 628 771 B
1 F
n
gs 425 63 634 778 CB
634 783 291 (Optional Feature) 291 SB
gr
gs 1023 63 1060 778 CB
1110 783 196 (Description) 196 SB
gr
1448 2 634 841 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 425 63 634 848 CB
634 853 284 (Internal Buffering) 284 SB
gr
gs 1023 50 1060 848 CB
1110 853 943 (Allows the TDI client to set and query driver internal buffer) 943 SB
gr
gs 1023 46 1060 898 CB
1110 899 806 (sizes, request nonblocking send operations, receive) 806 SB
gr
gs 1023 46 1060 944 CB
1110 945 957 (notification of available buffer space, and look at data before) 957 SB
gr
gs 1023 59 1060 990 CB
1110 991 367 (the TDI driver sends it.) 367 SB
gr
gs 425 63 634 1049 CB
634 1054 356 (Network Management) 356 SB
gr
gs 1023 50 1060 1049 CB
1110 1054 853 (Allows the TDI client to invoke network management) 853 SB
gr
gs 1023 46 1060 1099 CB
1110 1100 867 (actions. Some of the actions are general to all transport) 867 SB
gr
gs 1023 46 1060 1145 CB
1110 1146 949 (drivers, while some are TDI driver-specific. Your driver can) 949 SB
gr
gs 1023 46 1060 1191 CB
1110 1192 899 (implement network management actions by including an) 899 SB
gr
gs 1023 59 1060 1237 CB
1110 1238 377 (internal action function.) 377 SB
gr
gs 425 63 634 1296 CB
634 1301 285 (Quality of Service) 285 SB
gr
gs 1023 50 1060 1296 CB
1110 1301 963 (Allows the driver to provide QOS or option negotiation upon) 963 SB
gr
gs 1023 46 1060 1346 CB
1110 1347 963 (establishment of a network connection. To reflect this type of) 963 SB
gr
gs 1023 46 1060 1392 CB
1110 1393 821 (option, driver functions concerned with establishing) 821 SB
gr
gs 1023 46 1060 1438 CB
1110 1439 908 (connections or sending datagrams should accept a driver-) 908 SB
gr
gs 1023 46 1060 1484 CB
1110 1485 897 (specific variable-length counted string specifying service) 897 SB
gr
gs 1023 59 1060 1530 CB
1110 1531 126 (options.) 126 SB
gr
gs 425 63 634 1589 CB
634 1594 129 (Security) 129 SB
gr
gs 1023 50 1060 1589 CB
1110 1594 849 (Allows the TDI client creating an address to specify a) 849 SB
gr
gs 1023 46 1060 1639 CB
1110 1640 952 (security descriptor to control address access by other clients.) 952 SB
gr
gs 1023 46 1060 1685 CB
1110 1686 917 (The client should pass this descriptor as a parameter in an) 917 SB
gr
gs 1023 46 1060 1731 CB
1110 1732 944 (open address object request to the TDI driver. If the address) 944 SB
gr
gs 1023 46 1060 1777 CB
1110 1778 968 (exists, the driver checks the access rights of the caller against) 968 SB
gr
gs 1023 59 1060 1823 CB
1110 1824 493 (the existing security descriptor.) 493 SB
gr
255 255 255 fC
1449 3 634 1902 B
1 F
n
0 0 0 fC
1449 2 634 1899 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1986 666 (4.2.2  TDI Driver Objects) 666 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2082 1332 (The TDI driver uses four types of managed objects in its communication with) 1332 SB
634 2132 1380 (clients:  the TDI driver object, address objects, connection endpoint objects, and) 1380 SB
634 2182 1382 (control channel objects. The driver object is a standard Windows NT object that) 1382 SB
634 2232 733 (contains information about the TDI driver.) 733 SB
634 2315 1431 (Network communication for the TDI driver centers on the address object, an object) 1431 SB
634 2365 1332 (that a TDI client opens before beginning to communicate with the driver. The) 1332 SB
634 2415 1324 (address object represents a local node client transport address consisting of a) 1324 SB
634 2465 1389 (variable-length counted string with a TDI driver-specific sequence of bytes. TDI) 1389 SB
634 2515 1364 (uses a one-to-one mapping between the address object and the local node client) 1364 SB
634 2565 1448 (transport address. A client can open multiple address objects, or multiple clients can) 1448 SB
634 2615 494 (open a single address object.) 494 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 4 def
/wp$fpage (4) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 5 5
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1658 378 133 (Chapter ) 133 SB
1791 378 18 (4) 18 SB
1809 378 193 (    TDI Driver) 193 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (4) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (5) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1376 (Each client can open an address object as shared, if it wants to share a transport) 1376 SB
721 546 1393 (address with another client, or exclusive, if only one client at a time can open the) 1393 SB
721 596 1434 (object. An ACL protects the address object and prevents other clients from opening) 1434 SB
721 646 1299 (it. Protection also allows a system administrator to restrict access to certain) 1299 SB
721 696 713 (transport addresses for security purposes.) 713 SB
721 779 1358 (TDI uses a connection endpoint object for each client to represent a connection) 1358 SB
721 829 1448 (between the local node and the remote node. The driver associates an address object) 1448 SB
721 879 649 (with each connection endpoint object.) 649 SB
721 962 1416 (A control channel object represents a TDI driver control channel, which the driver) 1416 SB
721 1012 1428 (uses to provide global information to a client. The control channel allows the client) 1428 SB
721 1062 1074 (to communicate without opening a connection endpoint object.) 1074 SB
721 1145 1330 (Each object contains several attributes that the TDI driver manages For more) 1330 SB
721 1195 1358 (information about these attributes, see Appendix B. Attributes are classified as) 1358 SB
721 1245 1441 (service, diagnostic, or driver-specific, as defined in Table 4.2. All TDI drivers must) 1441 SB
721 1295 1388 (support some of the attributes, but other attributes are optional. A TDI client can) 1388 SB
721 1345 794 (query all attributes, but cannot set all of them.) 794 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 1433 579 (Table 4.2    TDI Object Attributes) 579 SB
1461 2 715 1491 B
1 F
n
gs 359 63 721 1498 CB
721 1503 254 (Attribute Type) 254 SB
gr
gs 1089 63 1081 1498 CB
1131 1503 196 (Description) 196 SB
gr
1448 2 721 1561 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 359 63 721 1568 CB
721 1573 172 (Diagnostic) 172 SB
gr
gs 1089 50 1081 1568 CB
1131 1573 965 (Tunes performance monitor activity and diagnoses problems.) 965 SB
gr
gs 1089 46 1081 1618 CB
1131 1619 965 (Diagnostic attributes include:  the total number of TDI driver) 965 SB
gr
gs 1089 46 1081 1664 CB
1131 1665 925 (connections that terminate abnormally, the total number of) 925 SB
gr
gs 1089 46 1081 1710 CB
1131 1711 1025 (incoming connections that do not complete for an address object,) 1025 SB
gr
gs 1089 59 1081 1756 CB
1131 1757 904 (and the number of TSDUs retransmitted on a connection.) 904 SB
gr
gs 359 63 721 1815 CB
721 1820 242 (Driver-Specific) 242 SB
gr
gs 1089 50 1081 1815 CB
1131 1820 946 (Applies to a particular TDI driver. Driver-specific attributes) 946 SB
gr
gs 1089 46 1081 1865 CB
1131 1866 904 (include counts of internal resource allocation failures and) 904 SB
gr
gs 1089 59 1081 1911 CB
1131 1912 503 (maximum transmit queue sizes.) 503 SB
gr
gs 359 63 721 1970 CB
721 1975 116 (Service) 116 SB
gr
gs 1089 50 1081 1970 CB
1131 1975 988 (Consists of information that a client can query and set. Service) 988 SB
gr
gs 1089 46 1081 2020 CB
1131 2021 942 (attributes include TDI driver support for expedited data, the) 942 SB
gr
gs 1089 46 1081 2066 CB
1131 2067 1007 (transport address associated with an address object, and the use) 1007 SB
gr
gs 1089 59 1081 2112 CB
1131 2113 622 (of checksums on a network connection.) 622 SB
gr
255 255 255 fC
1449 3 721 2191 B
1 F
n
0 0 0 fC
1449 2 721 2188 B
1 F
n
255 255 255 fC
1449 3 721 2267 B
1 F
n
0 0 0 fC
1449 2 721 2271 B
1 F
n
32 0 0 44 44 0 0 0 42 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 134 58 694 2274 CB
721 2280 80 (Note) 80 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
828 2282 1335 (Service and diagnostic attributes are TDI driver-independent, and apply to all) 1335 SB
721 2332 1425 (Windows NT drivers. Driver-specific attributes depend on a particular TDI driver.) 1425 SB
255 255 255 fC
1449 3 721 2402 B
1 F
n
0 0 0 fC
1449 2 721 2399 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 5 def
/wp$fpage (5) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 6 6
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (4) 18 SB
277 378 11 (-) 11 SB
288 378 18 (6) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 816 (Part I    Introduction to Windows NT Network Drivers) 816 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 492 1033 (4.2.3  TDI Client Event Handling Code) 1033 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 588 1301 (The TDI code included with the DDK provides prototypes for several event) 1301 SB
634 638 1428 (handling functions that a kernel-mode TDI client can include if the TDI driver is to) 1428 SB
634 688 1340 (notify it of network events. Event notification is used when the client wants to) 1340 SB
634 738 1367 (shorten the process of communicating with the driver for a particular operation.) 1367 SB
634 821 1363 (The kernel-mode client registers an event handler with the TDI driver on a per-) 1363 SB
634 871 1401 (address object basis. It can then use this function to receive event notifications on) 1401 SB
634 921 1443 (all connections established through the address object. Multiple kernel-mode clients) 1443 SB
634 971 1310 (can open an address object, and each can specify its own event handlers and) 1310 SB
634 1021 154 (contexts.) 154 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1129 630 (4.2.4  TDI Library Code) 630 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1225 1429 (Along with typical TDI driver code and kernel-mode client event handling function) 1429 SB
634 1275 829 (prototypes, the DDK furnishes the TDI library \() 829 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1463 1275 150 (tdikrnl.h) 150 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1613 1275 366 (\). This DLL provides) 366 SB
634 1325 1037 (request build macros for a kernel-mode client \(for example, ) 1037 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1671 1324 290 (TdiBuildAction) 290 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1961 1325 88 (\) and) 88 SB
634 1375 1212 (several other macros the driver can call when it requires TDI services.) 1212 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1495 1122 (4.3  TDI Driver Operation Overview) 1122 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1609 1334 (As Figure 4.1 shows, TDI clients make all requests through the Windows NT) 1334 SB
634 1659 752 (kernel. A user-mode client calls the Win32 ) 752 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1386 1658 311 (DeviceIoControl) 311 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1697 1659 291 ( function with an) 291 SB
634 1709 1383 (IOCTL, for example, IOCTL_TDI_ACCEPT, that represents its request and the) 1383 SB
634 1759 1390 (Windows NT I/O Manager prepares an IRP to send to the driver. A kernel-mode) 1390 SB
634 1809 1371 (client operates similarly, except that it provides a request message instead of an) 1371 SB
634 1859 1445 (IOCTL message. It then places this message into the minor function code field of its) 1445 SB
634 1909 1283 (own IRP or one obtained from higher network layers. Both types of clients) 1283 SB
634 1959 1431 (accompany their messages with input and output buffers, status blocks, and options) 1431 SB
634 2009 260 (for the request.) 260 SB
634 2092 1425 (The TDI driver provides functions for both connection-oriented and connectionless) 1425 SB
634 2142 1344 (communication. Connection-oriented communication, based on the connection) 1344 SB
634 2192 1426 (endpoint object, allows a TDI client to pass addressing and connection information) 1426 SB
634 2242 958 (to the driver to establish a transport connection. Once it) 958 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 6 def
/wp$fpage (6) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 7 7
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1658 378 133 (Chapter ) 133 SB
1791 378 18 (4) 18 SB
1809 378 193 (    TDI Driver) 193 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (4) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (7) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1381 (establishes the connection, the client does not need to provide further addressing) 1381 SB
721 546 1345 (information. The driver establishes an end-to-end association between the two) 1345 SB
721 596 1402 (endpoints specified by the client-provided addresses, and provides reliable, error-) 1402 SB
721 646 729 (free delivery of TSDUs on the connection.) 729 SB
721 729 1406 (Connectionless communication allows a TDI client to pass addressing and driver-) 1406 SB
721 779 1376 (specific option information to the driver for each TSDU, called a datagram. The) 1376 SB
721 829 1438 (TDI driver generally does not segment or reassemble a datagram. A client can elect) 1438 SB
721 879 1340 (to use connectionless communication when it wants to broadcast a message to) 1340 SB
721 929 1216 (multiple addresses and/or avoid maintaining a connection. This type of) 1216 SB
721 979 1133 (communication is faster than connection-oriented communication.) 1133 SB
721 1062 1374 (As Figure 4.1 shows, either type of TDI client starts its communication with the) 1374 SB
721 1112 1319 (TDI driver by registering an address object. This function packages the open) 1319 SB
721 1162 1309 (address object request into an IRP and passes it to the driver dispatch create) 1309 SB
721 1212 1442 (function. The driver dispatch function then forwards the client request to an internal) 1442 SB
721 1262 1348 (driver open address object function. The internal driver function completes the) 1348 SB
721 1312 1449 (request either synchronously or asynchronously, passing back the IRP indicating the) 1449 SB
721 1362 588 (results of the operation by calling ) 588 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1309 1361 371 (IoCompleteRequest) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1680 1362 11 (.) 11 SB
255 255 255 fC
1449 3 721 1462 B
1 F
n
0 0 0 fC
1449 2 721 1466 B
1 F
n
32 0 0 44 44 0 0 0 42 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 134 58 694 1469 CB
721 1475 80 (Note) 80 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
828 1477 1313 (To open a connection endpoint or control channel object, a TDI client uses a) 1313 SB
721 1527 1382 (similar method as described for opening an address object. Closing any object is) 1382 SB
721 1577 1389 (also very similar to opening an address object. However, in this case, the kernel-) 1389 SB
721 1627 1313 (mode client calls the kernel and indicates the type of object that it is closing.) 1313 SB
255 255 255 fC
1449 3 721 1697 B
1 F
n
0 0 0 fC
1449 2 721 1694 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 7 def
/wp$fpage (7) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 8 8
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (4) 18 SB
277 378 11 (-) 11 SB
288 378 18 (8) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 816 (Part I    Introduction to Windows NT Network Drivers) 816 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 32 32 0 0 0 30 /Helvetica /font12 ANSIFont font
0 0 0 fC
1185 2350 263 (NDIS 3.0 Wrapper) 263 SB
0 lc
0 lj
0 0 0 pC
6 1 SP
509 105 1066 2315 B
S
n
6 7 SP
1359 170 641 1911 B
S
n
32 0 0 35 35 0 0 0 33 /Helvetica-Bold /font13 ANSIFont font
1232 1975 167 (TDI Driver) 167 SB
1 lc
1 lj
6 1 SP
gs 1 235 1194 2082 CB
1194 2082 M 0 234 1 PP
S
n
gr
0 lc
0 lj
6 4 SP
255 255 255 fC
/fm 256 def
211 126 1789 1104 B
1 F
S
n
6 1 SP
254 63 1343 1593 B
S
n
390 63 930 1593 B
S
n
445 147 684 1338 B
S
n
32 0 0 32 32 0 0 0 30 /Helvetica /font12 ANSIFont font
0 0 0 fC
712 1353 238 (DeviceIoControl,) 238 SB
713 1393 158 (CreateFile,) 158 SB
1380 1609 168 (IoCallDriver) 168 SB
967 1609 285 (IoCompleteRequest) 285 SB
32 0 0 35 35 0 0 0 33 /Helvetica-Bold /font13 ANSIFont font
1869 1128 56 (TDI) 56 SB
1842 1175 118 (Library) 118 SB
1 lc
1 lj
gs 1 256 1130 1657 CB
1130 1657 M 0 255 1 PP
S
n
gr
gs 1 256 1470 1657 CB
1470 1657 M 0 255 1 PP
S
n
gr
gs 1 427 896 1486 CB
896 1912 M 0 -426 1 PP
S
n
gr
gs 1 108 1024 1486 CB
1024 1486 M 0 107 1 PP
S
n
gr
gs 1 427 1003 912 CB
1003 1338 M 0 -426 1 PP
S
n
gr
0 lc
0 lj
6 4 SP
255 255 255 fC
/fm 256 def
257 135 638 500 B
1 F
S
n
0 0 0 fC
673 522 179 (User-Mode) 179 SB
715 571 97 (Client) 97 SB
255 255 255 fC
1144 135 856 776 B
1 F
S
n
0 0 0 fC
1269 799 317 (Kernel-Mode Client) 317 SB
2 1 SP
975 424 642 1295 B
S
n
32 0 0 32 32 0 0 0 30 /Helvetica /font12 ANSIFont font
651 1677 123 (Services) 123 SB
1 lc
1 lj
6 1 SP
gs 1 682 1470 912 CB
1470 912 M 0 681 1 PP
S
n
gr
gs 1 682 1236 912 CB
1236 912 M 0 681 1 PP
S
n
gr
gs 1 193 1895 912 CB
1895 1104 M 0 -192 1 PP
S
n
gr
1248 978 53 (IRP) 53 SB
gs 1 703 769 636 CB
769 636 M 0 702 1 PP
S
n
gr
776 978 124 (Function) 124 SB
776 1019 167 (Parameters) 167 SB
1015 978 124 (Function) 124 SB
1015 1019 167 (Parameters) 167 SB
1142 1829 53 (IRP) 53 SB
1487 1829 53 (IRP) 53 SB
914 1829 53 (IRP) 53 SB
1036 1526 53 (IRP) 53 SB
1456 2169 124 (Function) 124 SB
1456 2209 167 (Parameters) 167 SB
gs 12 22 758 1316 CB
769 1337 M -11 -21 1 PP
S
n
gr
gs 12 22 769 1316 CB
769 1337 M 11 -21 1 PP
S
n
gr
gs 12 22 992 1316 CB
1003 1337 M -11 -21 1 PP
S
n
gr
gs 11 22 1003 1316 CB
1003 1337 M 10 -21 1 PP
S
n
gr
gs 12 22 1884 1082 CB
1895 1103 M -11 -21 1 PP
S
n
gr
gs 12 22 1895 1082 CB
1895 1103 M 11 -21 1 PP
S
n
gr
gs 11 22 1120 1656 CB
1130 1656 M -10 21 1 PP
S
n
gr
gs 12 22 1130 1656 CB
1130 1656 M 11 21 1 PP
S
n
gr
gs 1 1001 1661 912 CB
1661 1912 M 0 -1000 1 PP
S
n
gr
1673 978 124 (Function) 124 SB
1673 1019 167 (Parameters) 167 SB
651 1642 182 (Windows NT) 182 SB
2 1 SP
gs 1360 1 642 700 CB
642 700 M 1359 0 1 PP
S
n
gr
1801 659 158 (User Mode) 158 SB
1801 706 183 (Kernel Mode) 183 SB
6 1 SP
gs 12 22 758 636 CB
769 636 M -11 21 1 PP
S
n
gr
gs 12 22 769 636 CB
769 636 M 11 21 1 PP
S
n
gr
gs 12 22 992 912 CB
1003 912 M -11 21 1 PP
S
n
gr
gs 11 22 1003 912 CB
1003 912 M 10 21 1 PP
S
n
gr
gs 11 22 1226 912 CB
1236 912 M -10 21 1 PP
S
n
gr
gs 12 22 1236 912 CB
1236 912 M 11 21 1 PP
S
n
gr
gs 11 22 1460 912 CB
1470 912 M -10 21 1 PP
S
n
gr
gs 12 22 1470 912 CB
1470 912 M 11 21 1 PP
S
n
gr
gs 11 22 1651 912 CB
1661 912 M -10 21 1 PP
S
n
gr
gs 12 22 1661 912 CB
1661 912 M 11 21 1 PP
S
n
gr
gs 12 22 1884 912 CB
1895 912 M -11 21 1 PP
S
n
gr
gs 12 22 1895 912 CB
1895 912 M 11 21 1 PP
S
n
gr
gs 11 22 886 1486 CB
896 1486 M -10 21 1 PP
S
n
gr
gs 12 22 896 1486 CB
896 1486 M 11 21 1 PP
S
n
gr
gs 12 22 1013 1486 CB
1024 1486 M -11 21 1 PP
S
n
gr
gs 12 22 1024 1486 CB
1024 1486 M 11 21 1 PP
S
n
gr
gs 11 22 1460 1656 CB
1470 1656 M -10 21 1 PP
S
n
gr
gs 12 22 1470 1656 CB
1470 1656 M 11 21 1 PP
S
n
gr
gs 11 22 886 1890 CB
896 1911 M -10 -21 1 PP
S
n
gr
gs 12 22 896 1890 CB
896 1911 M 11 -21 1 PP
S
n
gr
gs 11 22 1460 1890 CB
1470 1911 M -10 -21 1 PP
S
n
gr
gs 12 22 1470 1890 CB
1470 1911 M 11 -21 1 PP
S
n
gr
gs 12 22 1183 2294 CB
1194 2315 M -11 -21 1 PP
S
n
gr
gs 12 22 1194 2294 CB
1194 2315 M 11 -21 1 PP
S
n
gr
gs 1 235 1449 2082 CB
1449 2082 M 0 234 1 PP
S
n
gr
gs 12 23 1438 2081 CB
1449 2081 M -11 22 1 PP
S
n
gr
gs 12 23 1449 2081 CB
1449 2081 M 11 22 1 PP
S
n
gr
0 lc
0 lj
296 41 1088 870 B
S
n
1101 872 272 (I/O Event Handlers) 272 SB
296 41 1513 870 B
S
n
1522 872 281 (TDI Event Handlers) 281 SB
1907 978 53 (IRP) 53 SB
1482 978 53 (IRP) 53 SB
1 lc
1 lj
gs 11 22 1460 1571 CB
1470 1592 M -10 -21 1 PP
S
n
gr
gs 12 22 1470 1571 CB
1470 1592 M 11 -21 1 PP
S
n
gr
0 lc
0 lj
296 42 770 1912 B
S
n
782 1914 274 (Dispatch Functions) 274 SB
339 41 1279 2039 B
S
n
1288 2042 323 (Lower-Edge Functions) 323 SB
298 42 1321 1912 B
S
n
1334 1914 274 (Dispatch Functions) 274 SB
1201 2169 124 (Function) 124 SB
1201 2209 167 (Parameters) 167 SB
713 1432 134 (CloseFile) 134 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 2476 635 (Figure 4.1    TDI Driver Architecture) 635 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 8 def
/wp$fpage (8) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%Page: 9 9
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1658 378 133 (Chapter ) 133 SB
1791 378 18 (4) 18 SB
1809 378 193 (    TDI Driver) 193 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (4) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (9) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1334 (When the address object is open, the client is ready for communication on the) 1334 SB
721 546 1445 (network. If it is operating in user mode, all its requests except those for opening and) 1445 SB
721 596 1405 (closing objects require preparation of an IOCTL message and a call to the Win32) 1405 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 645 311 (DeviceIoControl) 311 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1032 646 992 (. This function calls a system service, which packages the) 992 SB
721 696 1424 (message into an IRP, placing it in the IOCTL field and specifying a major function) 1424 SB
721 746 1407 (code of IRP_MJ_DEVICE_CONTROL. The I/O Manager then passes the IRP to) 1407 SB
721 796 374 (the driver entry point ) 374 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1095 795 502 (TdiDispatchDeviceControl) 502 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1597 796 493 (. This driver entry point then) 493 SB
721 846 1378 (routes the request to the appropriate internal driver function for processing. Any) 1378 SB
721 896 1398 (interaction with the netcard takes place between TDI driver lower-edge functions) 1398 SB
721 946 1330 (and the netcard driver, through the NDIS interface library wrapper. For more) 1330 SB
721 996 1233 (information about these functions and the netcard driver, see Chapter 3.) 1233 SB
721 1079 1373 (When the internal driver function has completed the user-mode client request, it) 1373 SB
721 1129 787 (fills in appropriate fields of the IRP and calls ) 787 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1508 1128 371 (IoCompleteRequest) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1879 1129 176 ( in the I/O) 176 SB
721 1179 1313 (subsystem. The I/O Manager makes the actual return the user-mode client is) 1313 SB
721 1229 177 (expecting.) 177 SB
721 1312 1270 (A kernel-mode client and the TDI driver have several options for network) 1270 SB
721 1362 1380 (communication. In normal operation, the client and the driver communicate only) 1380 SB
721 1412 1440 (through request messages \(for example TDI_ACCEPT\) and passed in IRPs through) 1440 SB
721 1462 1414 (the Windows NT kernel. If the client wants to bypass normal operation to quicken) 1414 SB
721 1512 1402 (communications, it has the option of receiving event notification directly from the) 1402 SB
721 1562 1349 (driver. In this case, the client can register event handler functions at startup by) 1349 SB
721 1612 1404 (issuing as many requests as necessary to the internal set event handler function of) 1404 SB
721 1662 177 (the driver.) 177 SB
721 1745 1407 (When a kernel-mode client has opened an address object and registered any event) 1407 SB
721 1795 1420 (handlers it wants to use, it can begin to use the network. The client either calls one) 1420 SB
721 1845 1382 (of the TDI library build functions to create its own IRP or uses an IRP passed in) 1382 SB
721 1895 1396 (from a higher network layer. The request message is placed in the minor function) 1396 SB
721 1945 759 (code field of the IRP and the client specifies) 759 SB
721 1995 1271 (IRP_MJ_INTERNAL_DEVICE_CONTROL as the major function code.) 1271 SB
721 2078 638 (The kernel-mode client can then call ) 638 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1359 2077 243 (IoCallDriver) 243 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1602 2078 504 ( in the I/O subsystem with its) 504 SB
721 2128 1385 (IRP. This function operates either synchronously or asynchronously. If the client) 1385 SB
721 2178 584 (requests synchronous processing, ) 584 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1305 2177 254 (IoCallDriver ) 254 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1559 2178 296 (passes the IRP to) 296 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 2227 654 (TdiDispatchInternalDeviceControl) 654 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1375 2228 790 ( in the driver. This dispatch function forwards) 790 SB
721 2278 1409 (the request to the appropriate internal driver function, which processes it with any) 1409 SB
721 2328 1383 (netcard interaction taking place. When client request processing is complete, the) 1383 SB
721 2378 1436 (internal driver function fills in the IRP accordingly and provides a status code other) 1436 SB
721 2428 1376 (than STATUS_PENDING. Then the driver returns the IRP to the client through) 1376 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 2477 243 (IoCallDriver) 243 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
964 2478 11 (.) 11 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 9 def
/wp$fpage (9) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 10 10
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (4) 18 SB
277 378 11 (-) 11 SB
288 378 36 (10) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 816 (Part I    Introduction to Windows NT Network Drivers) 816 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 499 257 (Asynchronous ) 257 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
891 498 243 (IoCallDriver) 243 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1134 499 921 ( operation is similar to synchronous operation, except) 921 SB
634 552 1436 (the internal driver function returns a pending status code. The TDI driver later calls) 1436 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 605 371 (IoCompleteRequest) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1005 606 1075 ( with the completed IRP to indicate that processing is finished.) 1075 SB
634 660 224 (Accordingly ) 224 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
858 659 371 (IoCompleteRequest) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1229 660 853 ( forwards the IRP to an I/O event handler that the) 853 SB
634 713 659 (client specified in the original request.) 659 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 10 def
/wp$fpage (10) def
/wp$date (07/18/93) def
/wp$time (04:23 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Trailer
SVDoc restore
end
%%Pages: 10
% TrueType font name key:
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT31c1cf = 08bfDTimes New RomanF00000015000001900000
%    MSTT31c1dc = 08bfDTimes New RomanF00000000000001900000
%    MSTT31c1e9 = 08bfDTimes New RomanF00000026000001900000
%    MSTT31c1f6 = 08bfDArial NarrowF00000064000002bc0000
%    MSTT31c202 = 08bfDArial NarrowF00000032000002bc0000
%    MSTT31c20e = 08bfDTimes New RomanF00000023000001900000
%    MSTT31c21b = 08bfDTimes New RomanF0000001d000001900000
%    MSTT31c228 = 08bfDArial NarrowF00000028000002bc0000
%    MSTT31c234 = 08bfDTimes New RomanF00000019000001900000
%    MSTT31c241 = 08bfDArial NarrowF0000003f000002bc0000
%    MSTT31c1c1 = 08bfDTimes New RomanF00000032000001900000
%    MSTT31c24d = 08bfDArial NarrowF0000002c000002bc0000
%    MSTT31c259 = 08bfDArial NarrowF00000021000002bc0000
%    MSTT31c265 = 08bfDTimes New RomanF0000002c000001900000
%    MSTT31c272 = 08bfDTimes New RomanF00000021000001900000
%    MSTT31c27f = 08bfDTimes New RomanF0000003a000001900000
%    MSTT31c29a = 08bfDTimes New RomanF00000028000002bc0000
%    MSTT31c2a7 = 08bfDArialF00000032000001900000
%    MSTT31c2b2 = 08bfDTimes New RomanF0000001b000001900000
%    MSTT31c2bf = 08bfDTimes New RomanF0000002c000001900001
%    MSTT31c28c = 08bfDTimes New RomanF0000002c000002bc0000
%    MSTT31c2da = 08bfDTimes New RomanF0000001e000001900000
%    MSTT31c2cc = 08bfDMSIconsF00000028000001900000
%    MSTT31c2e7 = 08bfDArial NarrowF00000053000002bc0000
%    MSTT31c301 = 08bfDArial NarrowF00000047000002bc0000
%    MSTT31c311 = 08bfDTimes New RomanF00000011000001900000
%    MSTT31c31e = 08bfDTimes New RomanF00000028000001900000
%    MSTT31c32b = 08bfDTimes New RomanF0000001a000001900000
%%DocumentSuppliedResources: procset Win35Dict 3 1

%%DocumentNeededResources: font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman

%%EOF
