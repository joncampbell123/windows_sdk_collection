%!PS-Adobe-3.0
%%Creator: Windows PSCRIPT
%%Title: Microsoft Word - 301TDFUD.DOC
%%BoundingBox: 14 9 597 784
%%DocumentNeededResources: (atend)
%%DocumentSuppliedResources: (atend)
%%Pages: (atend)
%%BeginResource: procset Win35Dict 3 1
/Win35Dict 290 dict def Win35Dict begin/bd{bind def}bind def/in{72
mul}bd/ed{exch def}bd/ld{load def}bd/tr/translate ld/gs/gsave ld/gr
/grestore ld/M/moveto ld/L/lineto ld/rmt/rmoveto ld/rlt/rlineto ld
/rct/rcurveto ld/st/stroke ld/n/newpath ld/sm/setmatrix ld/cm/currentmatrix
ld/cp/closepath ld/ARC/arcn ld/TR{65536 div}bd/lj/setlinejoin ld/lc
/setlinecap ld/ml/setmiterlimit ld/sl/setlinewidth ld/scignore false
def/sc{scignore{pop pop pop}{0 index 2 index eq 2 index 4 index eq
and{pop pop 255 div setgray}{3{255 div 3 1 roll}repeat setrgbcolor}ifelse}ifelse}bd
/FC{bR bG bB sc}bd/fC{/bB ed/bG ed/bR ed}bd/HC{hR hG hB sc}bd/hC{
/hB ed/hG ed/hR ed}bd/PC{pR pG pB sc}bd/pC{/pB ed/pG ed/pR ed}bd/sM
matrix def/PenW 1 def/iPen 5 def/mxF matrix def/mxE matrix def/mxUE
matrix def/mxUF matrix def/fBE false def/iDevRes 72 0 matrix defaultmatrix
dtransform dup mul exch dup mul add sqrt def/fPP false def/SS{fPP{
/SV save def}{gs}ifelse}bd/RS{fPP{SV restore}{gr}ifelse}bd/EJ{gsave
showpage grestore}bd/#C{userdict begin/#copies ed end}bd/FEbuf 2 string
def/FEglyph(G  )def/FE{1 exch{dup 16 FEbuf cvrs FEglyph exch 1 exch
putinterval 1 index exch FEglyph cvn put}for}bd/SM{/iRes ed/cyP ed
/cxPg ed/cyM ed/cxM ed 72 100 div dup scale dup 0 ne{90 eq{cyM exch
0 eq{cxM exch tr -90 rotate -1 1 scale}{cxM cxPg add exch tr +90 rotate}ifelse}{cyP
cyM sub exch 0 ne{cxM exch tr -90 rotate}{cxM cxPg add exch tr -90
rotate 1 -1 scale}ifelse}ifelse}{pop cyP cyM sub exch 0 ne{cxM cxPg
add exch tr 180 rotate}{cxM exch tr 1 -1 scale}ifelse}ifelse 100 iRes
div dup scale 0 0 transform .25 add round .25 sub exch .25 add round
.25 sub exch itransform translate}bd/SJ{1 index 0 eq{pop pop/fBE false
def}{1 index/Break ed div/dxBreak ed/fBE true def}ifelse}bd/ANSIVec[
16#0/grave 16#1/acute 16#2/circumflex 16#3/tilde 16#4/macron 16#5/breve
16#6/dotaccent 16#7/dieresis 16#8/ring 16#9/cedilla 16#A/hungarumlaut
16#B/ogonek 16#C/caron 16#D/dotlessi 16#27/quotesingle 16#60/grave
16#7C/bar 16#82/quotesinglbase 16#83/florin 16#84/quotedblbase 16#85
/ellipsis 16#86/dagger 16#87/daggerdbl 16#88/circumflex 16#89/perthousand
16#8A/Scaron 16#8B/guilsinglleft 16#8C/OE 16#91/quoteleft 16#92/quoteright
16#93/quotedblleft 16#94/quotedblright 16#95/bullet 16#96/endash 16#97
/emdash 16#98/tilde 16#99/trademark 16#9A/scaron 16#9B/guilsinglright
16#9C/oe 16#9F/Ydieresis 16#A0/space 16#A1/exclamdown 16#A4/currency
16#A5/yen 16#A6/brokenbar 16#A7/section 16#A8/dieresis 16#A9/copyright
16#AA/ordfeminine 16#AB/guillemotleft 16#AC/logicalnot 16#AD/hyphen
16#AE/registered 16#AF/macron 16#B0/degree 16#B1/plusminus 16#B2/twosuperior
16#B3/threesuperior 16#B4/acute 16#B5/mu 16#B6/paragraph 16#B7/periodcentered
16#B8/cedilla 16#B9/onesuperior 16#BA/ordmasculine 16#BB/guillemotright
16#BC/onequarter 16#BD/onehalf 16#BE/threequarters 16#BF/questiondown
16#C0/Agrave 16#C1/Aacute 16#C2/Acircumflex 16#C3/Atilde 16#C4/Adieresis
16#C5/Aring 16#C6/AE 16#C7/Ccedilla 16#C8/Egrave 16#C9/Eacute 16#CA
/Ecircumflex 16#CB/Edieresis 16#CC/Igrave 16#CD/Iacute 16#CE/Icircumflex
16#CF/Idieresis 16#D0/Eth 16#D1/Ntilde 16#D2/Ograve 16#D3/Oacute 16#D4
/Ocircumflex 16#D5/Otilde 16#D6/Odieresis 16#D7/multiply 16#D8/Oslash
16#D9/Ugrave 16#DA/Uacute 16#DB/Ucircumflex 16#DC/Udieresis 16#DD/Yacute
16#DE/Thorn 16#DF/germandbls 16#E0/agrave 16#E1/aacute 16#E2/acircumflex
16#E3/atilde 16#E4/adieresis 16#E5/aring 16#E6/ae 16#E7/ccedilla 16#E8
/egrave 16#E9/eacute 16#EA/ecircumflex 16#EB/edieresis 16#EC/igrave
16#ED/iacute 16#EE/icircumflex 16#EF/idieresis 16#F0/eth 16#F1/ntilde
16#F2/ograve 16#F3/oacute 16#F4/ocircumflex 16#F5/otilde 16#F6/odieresis
16#F7/divide 16#F8/oslash 16#F9/ugrave 16#FA/uacute 16#FB/ucircumflex
16#FC/udieresis 16#FD/yacute 16#FE/thorn 16#FF/ydieresis ] def/reencdict
12 dict def/IsChar{basefontdict/CharStrings get exch known}bd/MapCh{dup
IsChar not{pop/bullet}if newfont/Encoding get 3 1 roll put}bd/MapDegree{16#b0
/degree IsChar{/degree}{/ring}ifelse MapCh}bd/MapBB{16#a6/brokenbar
IsChar{/brokenbar}{/bar}ifelse MapCh}bd/ANSIFont{reencdict begin/newfontname
ed/basefontname ed FontDirectory newfontname known not{/basefontdict
basefontname findfont def/newfont basefontdict maxlength dict def basefontdict{exch
dup/FID ne{dup/Encoding eq{exch dup length array copy newfont 3 1 roll
put}{exch newfont 3 1 roll put}ifelse}{pop pop}ifelse}forall newfont
/FontName newfontname put 127 1 159{newfont/Encoding get exch/bullet
put}for ANSIVec aload pop ANSIVec length 2 idiv{MapCh}repeat MapDegree
MapBB newfontname newfont definefont pop}if newfontname end}bd/SB{FC
/ULlen ed/str ed str length fBE not{dup 1 gt{1 sub}if}if/cbStr ed
/dxGdi ed/y0 ed/x0 ed str stringwidth dup 0 ne{/y1 ed/x1 ed y1 y1
mul x1 x1 mul add sqrt dxGdi exch div 1 sub dup x1 mul cbStr div exch
y1 mul cbStr div}{exch abs neg dxGdi add cbStr div exch}ifelse/dyExtra
ed/dxExtra ed x0 y0 M fBE{dxBreak 0 BCh dxExtra dyExtra str awidthshow}{dxExtra
dyExtra str ashow}ifelse fUL{x0 y0 M dxUL dyUL rmt ULlen fBE{Break
add}if 0 mxUE transform gs rlt cyUL sl [] 0 setdash st gr}if fSO{x0
y0 M dxSO dySO rmt ULlen fBE{Break add}if 0 mxUE transform gs rlt cyUL
sl [] 0 setdash st gr}if n/fBE false def}bd/font{/name ed/Ascent ed
0 ne/fT3 ed 0 ne/fSO ed 0 ne/fUL ed/Sy ed/Sx ed 10.0 div/ori ed -10.0
div/esc ed/BCh ed name findfont/xAscent 0 def/yAscent Ascent def/ULesc
esc def ULesc mxUE rotate pop fT3{/esc 0 def xAscent yAscent mxUE transform
/yAscent ed/xAscent ed}if [Sx 0 0 Sy neg xAscent yAscent] esc mxE
rotate mxF concatmatrix makefont setfont [Sx 0 0 Sy neg 0 Ascent] mxUE
mxUF concatmatrix pop fUL{currentfont dup/FontInfo get/UnderlinePosition
known not{pop/Courier findfont}if/FontInfo get/UnderlinePosition get
1000 div 0 exch mxUF transform/dyUL ed/dxUL ed}if fSO{0 .3 mxUF transform
/dySO ed/dxSO ed}if fUL fSO or{currentfont dup/FontInfo get/UnderlineThickness
known not{pop/Courier findfont}if/FontInfo get/UnderlineThickness get
1000 div Sy mul/cyUL ed}if}bd/min{2 copy gt{exch}if pop}bd/max{2 copy
lt{exch}if pop}bd/CP{/ft ed{{ft 0 eq{clip}{eoclip}ifelse}stopped{currentflat
1 add setflat}{exit}ifelse}loop}bd/patfont 10 dict def patfont begin
/FontType 3 def/FontMatrix [1 0 0 -1 0 0] def/FontBBox [0 0 16 16]
def/Encoding StandardEncoding def/BuildChar{pop pop 16 0 0 0 16 16
setcachedevice 16 16 false [1 0 0 1 .25 .25]{pat}imagemask}bd end/p{
/pat 32 string def{}forall 0 1 7{dup 2 mul pat exch 3 index put dup
2 mul 1 add pat exch 3 index put dup 2 mul 16 add pat exch 3 index
put 2 mul 17 add pat exch 2 index put pop}for}bd/pfill{/PatFont patfont
definefont setfont/ch(AAAA)def X0 64 X1{Y1 -16 Y0{1 index exch M ch
show}for pop}for}bd/vert{X0 w X1{dup Y0 M Y1 L st}for}bd/horz{Y0 w
Y1{dup X0 exch M X1 exch L st}for}bd/fdiag{X0 w X1{Y0 M X1 X0 sub dup
rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup rlt st}for}bd/bdiag{X0 w
X1{Y1 M X1 X0 sub dup neg rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup
neg rlt st}for}bd/AU{1 add cvi 15 or}bd/AD{1 sub cvi -16 and}bd/SHR{pathbbox
AU/Y1 ed AU/X1 ed AD/Y0 ed AD/X0 ed}bd/hfill{/w iRes 37.5 div round
def 0.1 sl [] 0 setdash n dup 0 eq{horz}if dup 1 eq{vert}if dup 2 eq{fdiag}if
dup 3 eq{bdiag}if dup 4 eq{horz vert}if 5 eq{fdiag bdiag}if}bd/F{/ft
ed fm 256 and 0 ne{gs FC ft 0 eq{fill}{eofill}ifelse gr}if fm 1536
and 0 ne{SHR gs HC ft CP fm 1024 and 0 ne{/Tmp save def pfill Tmp restore}{fm
15 and hfill}ifelse gr}if}bd/S{PenW sl PC st}bd/m matrix def/GW{iRes
12 div PenW add cvi}bd/DoW{iRes 50 div PenW add cvi}bd/DW{iRes 8 div
PenW add cvi}bd/SP{/PenW ed/iPen ed iPen 0 eq iPen 6 eq or{[] 0 setdash}if
iPen 1 eq{[DW GW] 0 setdash}if iPen 2 eq{[DoW GW] 0 setdash}if iPen
3 eq{[DW GW DoW GW] 0 setdash}if iPen 4 eq{[DW GW DoW GW DoW GW] 0
setdash}if}bd/E{m cm pop tr scale 1 0 moveto 0 0 1 0 360 arc cp m sm}bd
/AG{/sy ed/sx ed sx div 4 1 roll sy div 4 1 roll sx div 4 1 roll sy
div 4 1 roll atan/a2 ed atan/a1 ed sx sy scale a1 a2 ARC}def/A{m cm
pop tr AG m sm}def/P{m cm pop tr 0 0 M AG cp m sm}def/RRect{n 4 copy
M 3 1 roll exch L 4 2 roll L L cp}bd/RRCC{/r ed/y1 ed/x1 ed/y0 ed/x0
ed x0 x1 add 2 div y0 M x1 y0 x1 y1 r arcto 4{pop}repeat x1 y1 x0 y1
r arcto 4{pop}repeat x0 y1 x0 y0 r arcto 4{pop}repeat x0 y0 x1 y0 r
arcto 4{pop}repeat cp}bd/RR{2 copy 0 eq exch 0 eq or{pop pop RRect}{2
copy eq{pop RRCC}{m cm pop/y2 ed/x2 ed/ys y2 x2 div 1 max def/xs x2
y2 div 1 max def/y1 exch ys div def/x1 exch xs div def/y0 exch ys div
def/x0 exch xs div def/r2 x2 y2 min def xs ys scale x0 x1 add 2 div
y0 M x1 y0 x1 y1 r2 arcto 4{pop}repeat x1 y1 x0 y1 r2 arcto 4{pop}repeat
x0 y1 x0 y0 r2 arcto 4{pop}repeat x0 y0 x1 y0 r2 arcto 4{pop}repeat
m sm cp}ifelse}ifelse}bd/PP{{rlt}repeat}bd/OB{gs 0 ne{7 3 roll/y ed
/x ed x y translate ULesc rotate x neg y neg translate x y 7 -3 roll}if
sc B fill gr}bd/B{M/dy ed/dx ed dx 0 rlt 0 dy rlt dx neg 0 rlt cp}bd
/CB{B clip n}bd/ErrHandler{errordict dup maxlength exch length gt
dup{errordict begin}if/errhelpdict 12 dict def errhelpdict begin/stackunderflow(operand stack underflow)def
/undefined(this name is not defined in a dictionary)def/VMerror(you have used up all the printer's memory)def
/typecheck(operator was expecting a different type of operand)def
/ioerror(input/output error occured)def end{end}if errordict begin
/handleerror{$error begin newerror{/newerror false def showpage 72
72 scale/x .25 def/y 9.6 def/Helvetica findfont .2 scalefont setfont
x y moveto(Offending Command = )show/command load{dup type/stringtype
ne{(max err string)cvs}if show}exec/y y .2 sub def x y moveto(Error = )show
errorname{dup type dup( max err string )cvs show( : )show/stringtype
ne{( max err string )cvs}if show}exec errordict begin errhelpdict errorname
known{x 1 add y .2 sub moveto errhelpdict errorname get show}if end
/y y .4 sub def x y moveto(Stack =)show ostack{/y y .2 sub def x 1
add y moveto dup type/stringtype ne{( max err string )cvs}if show}forall
showpage}if end}def end}bd end
%%EndResource
/SVDoc save def
%%EndProlog
%%BeginSetup
Win35Dict begin
ErrHandler
statusdict begin 0 setjobtimeout end
statusdict begin statusdict /jobname (Microsoft Word - 301TDFUD.DOC) put end
/oldDictCnt countdictstack def {}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
/oldDictCnt countdictstack def {letter
}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
[{ }
/exec load currenttransfer /exec load] cvx settransfer
%%EndSetup
%%Page: 1 1
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
0 0 0 fC
/fm 256 def
1824 2 346 436 B
1 F
n
32 0 0 50 50 0 0 0 45 /Times-Roman /font32 ANSIFont font
0 0 0 fC
346 491 33 (C) 58 SB
404 491 36 (H) 61 SB
465 491 35 (A) 60 SB
525 491 28 (P) 53 SB
578 491 31 (T) 56 SB
634 491 31 (E) 56 SB
690 491 33 (R) 58 SB
748 491 13 ( ) 38 SB
786 491 25 (1) 50 SB
32 0 0 100 100 0 0 0 93 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 1400 513 346 604 CB
346 602 1283 (TDI Driver Function Descriptions) 1283 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1117 1407 (This chapter describes the main functions or macros and request messages related) 1407 SB
721 1167 1411 (to the TDI. For more information about these functions and TDI driver interaction) 1411 SB
721 1217 1064 (with user-mode or kernel-mode clients, see Part II, Chapter 1.) 1064 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1337 458 (1.1  TDI Driver) 458 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1451 696 (Your TDI driver must provide at least a ) 696 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1417 1450 235 (DriverEntry) 235 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1652 1451 256 ( function and a) 256 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 1500 261 (DriverUnload) 261 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
982 1501 1157 ( function. It also requires the NDIS 3.0 transport driver lower-edge) 1157 SB
721 1551 1388 (functions defined in Part II, Chapter 1 of this book. In addition, the driver should) 1388 SB
721 1601 1438 (include as many dispatch and internal functions as it needs to satisfy the requests of) 1438 SB
721 1651 639 (its user-mode or kernel-mode clients.) 639 SB
721 1734 1408 (As described in Part I, TDI clients pass IRPs to the TDI driver, using messages to) 1408 SB
721 1784 1343 (indicate specific requests. A kernel-mode client provides a request message to) 1343 SB
721 1834 1420 (define its request \(see Table 1.1\). A user-mode client prepares an IOCTL message) 1420 SB
721 1884 1419 (instead. This message is similar to a request message, except that its nomenclature) 1419 SB
721 1934 1391 (prefixes IOCTL to the request message name. For example, TDI_ACCEPT for a) 1391 SB
721 1984 1441 (kernel-mode client accept request becomes IOCTL_TDI_ACCEPT for a user-mode) 1441 SB
721 2034 363 (client accept request.) 363 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 2122 108 (Table ) 108 SB
829 2122 20 (1) 20 SB
849 2122 10 (.) 10 SB
859 2122 20 (1) 20 SB
879 2122 781 (    TDI Kernel-Mode Client Request Messages) 781 SB
1461 2 715 2180 B
1 F
n
gs 663 63 721 2187 CB
721 2192 149 (Function) 149 SB
gr
gs 785 63 1385 2187 CB
1435 2192 168 (Definition) 168 SB
gr
662 2 721 2250 B
1 F
n
784 2 1385 2250 B
1 F
n
gs 663 63 721 2257 CB
721 2262 258 (TDI_ACCEPT) 258 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1385 2257 CB
1435 2262 640 (Allows the local node client to accept an) 640 SB
gr
gs 785 46 1385 2307 CB
1435 2308 656 (incoming request to connect so that it can) 656 SB
gr
gs 785 59 1385 2353 CB
1435 2354 444 (receive data on the network.) 444 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 721 2412 CB
721 2417 253 (TDI_ACTION) 253 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1385 2412 CB
1435 2417 637 (Initiates client-specific extensions for an) 637 SB
gr
gs 785 59 1385 2462 CB
1435 2463 682 (address, a connection, or a control channel.) 682 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 721 2521 CB
721 2526 531 (TDI_ASSOCIATE_ADDRESS) 531 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1385 2521 CB
1435 2526 656 (Associates a connection endpoint with an) 656 SB
gr
gs 785 46 1385 2571 CB
1435 2572 707 (address object that provides local addressing) 707 SB
gr
gs 785 59 1385 2617 CB
1435 2618 263 (for a connection.) 263 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 1 def
/wp$fpage (1) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 2 2
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 379 29 (1-) 29 SB
288 379 18 (2) 18 SB
306 379 9 ( ) 61 SB
367 379 9 ( ) 61 SB
428 379 411 (Part III    TDI Driver Design) 411 SB
0 0 0 fC
/fm 256 def
1824 2 259 436 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
634 497 108 (Table ) 108 SB
742 497 20 (1) 20 SB
762 497 10 (.) 10 SB
772 497 20 (1) 20 SB
792 497 23 ( \() 23 SB
32 0 0 40 40 0 0 0 37 /Times-BoldItalic /font30 ANSIFont font
815 496 164 (continued) 164 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
979 497 794 (\)    TDI Kernel-Mode Client Request Messages) 794 SB
1448 2 634 555 B
1 F
n
gs 663 63 634 562 CB
634 567 149 (Function) 149 SB
gr
gs 785 63 1298 562 CB
1348 567 168 (Definition) 168 SB
gr
1448 2 634 625 B
1 F
n
gs 663 63 634 632 CB
634 637 293 (TDI_CONNECT) 293 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 632 CB
1348 637 676 (Initiates a connection from one endpoint to) 676 SB
gr
gs 785 59 1298 682 CB
1348 683 128 (another.) 128 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 741 CB
634 746 598 (TDI_DISASSOCIATE_ADDRESS) 598 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 741 CB
1348 746 674 (Disassociates a connection endpoint for an) 674 SB
gr
gs 785 46 1298 791 CB
1348 792 611 (inactive connection from its associated) 611 SB
gr
gs 785 59 1298 837 CB
1348 838 235 (address object.) 235 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 896 CB
634 901 360 (TDI_DISCONNECT) 360 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 896 CB
1348 901 722 (Terminates an established TDI connection for) 722 SB
gr
gs 785 46 1298 946 CB
1348 947 593 (the local node client or acknowledges) 593 SB
gr
gs 785 46 1298 992 CB
1348 993 643 (connection termination by a remote node) 643 SB
gr
gs 785 59 1298 1038 CB
1348 1039 97 (client.) 97 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1097 CB
634 1102 240 (TDI_LISTEN) 240 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1097 CB
1348 1102 702 (Passively listens for an incoming connection) 702 SB
gr
gs 785 59 1298 1147 CB
1348 1148 538 (request from a remote node client.) 538 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1206 CB
634 1211 557 (TDI_QUERY_INFORMATION) 557 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 63 1298 1206 CB
1348 1211 618 (Queries the TDI driver for information.) 618 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1269 CB
634 1274 276 (TDI_RECEIVE) 276 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1269 CB
1348 1274 685 (Receives a normal or expedited TSDU on a) 685 SB
gr
gs 785 59 1298 1319 CB
1348 1320 480 (specified connection endpoint.) 480 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1378 CB
634 1383 537 (TDI_RECEIVE_DATAGRAM) 537 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1378 CB
1348 1383 713 (Receives a special TSDU, called a datagram,) 713 SB
gr
gs 785 59 1298 1428 CB
1348 1429 530 (for connectionless data exchange.) 530 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1487 CB
634 1492 199 (TDI_SEND) 199 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1487 CB
1348 1492 735 (Sends data from a local node client connection) 735 SB
gr
gs 785 46 1298 1537 CB
1348 1538 688 (endpoint to a remote node client connection) 688 SB
gr
gs 785 59 1298 1583 CB
1348 1584 148 (endpoint.) 148 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1642 CB
634 1647 460 (TDI_SEND_DATAGRAM) 460 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1642 CB
1348 1647 732 (Sends a datagram from a local node client to a) 732 SB
gr
gs 785 59 1298 1692 CB
1348 1693 301 (remote node client.) 301 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1751 CB
634 1756 548 (TDI_SET_EVENT_HANDLER) 548 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 50 1298 1751 CB
1348 1756 722 (Registers a client event handler the driver can) 722 SB
gr
gs 785 59 1298 1801 CB
1348 1802 391 (notify of network events.) 391 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 663 63 634 1860 CB
634 1865 488 (TDI_SET_INFORMATION) 488 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 785 63 1298 1860 CB
1348 1865 449 (Sets TDI driver information.) 449 SB
gr
255 255 255 fC
1449 3 634 1943 B
1 F
n
0 0 0 fC
1449 2 634 1940 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2002 1352 (The actual entry points of the TDI driver are one or more of the Windows NT-) 1352 SB
634 2052 1232 (defined dispatch functions described in Table 1.2. Because a TDI client) 1232 SB
634 2102 1404 (communicates with the driver only through messages, the driver requires dispatch) 1404 SB
634 2152 1329 (functions to decipher the messages and pass the client requests to appropriate) 1329 SB
634 2202 681 (internal driver functions for processing.) 681 SB
634 2285 1154 (Because the driver needs to be able to open objects, it must include) 1154 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 2334 359 (TdiDispatchCreate) 359 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
993 2335 1049 (. This function calls associated internal driver open functions) 1049 SB
634 2385 1426 (for address, connection endpoint, and control channel objects. To close objects, the) 1426 SB
634 2435 275 (driver must use ) 275 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
909 2434 333 (TdiDispatchClose) 333 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1242 2435 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1326 2434 386 (TdiDispatchCleanup) 386 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1712 2435 11 (.) 11 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 2 def
/wp$fpage (2) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Roman
%%Page: 3 3
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1313 379 133 (Chapter ) 133 SB
1446 379 18 (1) 18 SB
1464 379 538 (   TDI Driver Function Descriptions) 538 SB
2002 379 9 ( ) 61 SB
2063 379 9 ( ) 61 SB
2124 379 18 (1) 18 SB
2142 379 11 (-) 11 SB
2153 379 18 (3) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 436 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1398 (The Windows NT kernel accesses internal driver functions by passing user-mode) 1398 SB
721 546 303 (client requests to ) 303 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1024 545 502 (TdiDispatchDeviceControl) 502 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1526 546 634 (. To receive and decode kernel-mode) 634 SB
721 596 532 (client requests, the driver uses ) 532 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1253 595 654 (TdiDispatchInternalDeviceControl) 654 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1907 596 47 ( or) 47 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 645 582 (TdiDispatchFastDeviceControl) 582 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1303 646 11 (.) 11 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 734 108 (Table ) 108 SB
829 734 20 (1) 20 SB
849 734 601 (.2    TDI Driver Dispatch Functions) 601 SB
1461 2 715 792 B
1 F
n
gs 625 63 721 799 CB
721 804 149 (Function) 149 SB
gr
gs 823 63 1347 799 CB
1397 804 168 (Definition) 168 SB
gr
624 2 721 862 B
1 F
n
822 2 1347 862 B
1 F
n
gs 625 63 721 869 CB
721 874 352 (TdiDispatchCleanup) 352 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 869 CB
1397 874 675 (Closes an address, connection endpoint, or) 675 SB
gr
gs 823 46 1347 919 CB
1397 920 772 (control channel object if the Windows NT kernel) 772 SB
gr
gs 823 59 1347 965 CB
1397 966 679 (is closing the last handle for the file object.) 679 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 625 63 721 1024 CB
721 1029 303 (TdiDispatchClose) 303 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 1024 CB
1397 1029 675 (Closes an address, connection endpoint, or) 675 SB
gr
gs 823 46 1347 1074 CB
1397 1075 744 (control channel object if the kernel is removing) 744 SB
gr
gs 823 59 1347 1120 CB
1397 1121 647 (its last reference to the file object handle.) 647 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 625 63 721 1179 CB
721 1184 326 (TdiDispatchCreate) 326 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 1179 CB
1397 1184 671 (Opens an address, connection endpoint, or) 671 SB
gr
gs 823 59 1347 1229 CB
1397 1230 358 (control channel object.) 358 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 625 63 721 1288 CB
721 1293 454 (TdiDispatchDeviceControl) 454 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 1288 CB
1397 1293 702 (Interprets user-mode client requests \(IOCTL) 702 SB
gr
gs 823 46 1347 1338 CB
1397 1339 705 (messages\) and calls internal driver functions) 705 SB
gr
gs 823 46 1347 1384 CB
1397 1385 724 (that handle operations other than opening and) 724 SB
gr
gs 823 59 1347 1430 CB
1397 1431 245 (closing objects.) 245 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 625 63 721 1489 CB
721 1494 528 (TdiDispatchFastDeviceControl) 528 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 1489 CB
1397 1494 720 (Under fast driver control, interprets expedited) 720 SB
gr
gs 823 46 1347 1539 CB
1397 1540 746 (kernel-mode client requests \(request messages\)) 746 SB
gr
gs 823 46 1347 1585 CB
1397 1586 717 (and calls internal driver functions that handle) 717 SB
gr
gs 823 46 1347 1631 CB
1397 1632 662 (operations other than opening and closing) 662 SB
gr
gs 823 59 1347 1677 CB
1397 1678 121 (objects.) 121 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 625 63 721 1736 CB
721 1741 592 (TdiDispatchInternalDeviceControl) 592 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 823 50 1347 1736 CB
1397 1741 718 (Interprets normal kernel-mode client requests) 718 SB
gr
gs 823 46 1347 1786 CB
1397 1787 686 (\(request messages\) and calls internal driver) 686 SB
gr
gs 823 46 1347 1832 CB
1397 1833 675 (functions that handle operations other than) 675 SB
gr
gs 823 59 1347 1878 CB
1397 1879 450 (opening and closing objects.) 450 SB
gr
255 255 255 fC
1449 3 721 1957 B
1 F
n
0 0 0 fC
1449 2 721 1954 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 3 def
/wp$fpage (3) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 4 4
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 379 29 (1-) 29 SB
288 379 18 (4) 18 SB
306 379 9 ( ) 61 SB
367 379 9 ( ) 61 SB
428 379 411 (Part III    TDI Driver Design) 411 SB
0 0 0 fC
/fm 256 def
1824 2 259 436 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 491 452 (1.2  TDI Client) 452 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 605 1425 (Most TDI client functions are highly variable and environment-dependent and thus) 1425 SB
634 655 1402 (are not included in the DDK. However, the DDK does include the event handling) 1402 SB
634 705 1156 (functions that a kernel-mode TDI client can use if the TDI driver is) 1156 SB
634 755 1429 (to notify it of network events as an alternative to issuing requests to the driver. The) 1429 SB
634 805 1390 (client can include one or more of the functions defined in Table 1.3, registered at) 1390 SB
634 855 998 (the beginning of network operations by issuing successive) 998 SB
634 905 1341 (IOCTL_TDI_SET_EVENT_HANDLER or TDI_SET_EVENT_HANDLER) 1341 SB
634 955 173 (messages.) 173 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
634 1043 108 (Table ) 108 SB
742 1043 20 (1) 20 SB
762 1043 845 (.3    Kernel-Mode Client Event Handler Functions) 845 SB
1461 2 628 1101 B
1 F
n
gs 623 63 634 1108 CB
634 1113 149 (Function) 149 SB
gr
gs 825 63 1258 1108 CB
1308 1113 168 (Definition) 168 SB
gr
622 2 634 1171 B
1 F
n
824 2 1258 1171 B
1 F
n
gs 623 63 634 1178 CB
634 1183 341 (ClientEventConnect) 341 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1178 CB
1308 1183 768 (Notifies the client of a connection request from a) 768 SB
gr
gs 825 59 1258 1228 CB
1308 1229 301 (remote node client.) 301 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1287 CB
634 1292 386 (ClientEventDisconnect) 386 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1287 CB
1308 1292 725 (Notifies a local node client that a remote node) 725 SB
gr
gs 825 59 1258 1337 CB
1308 1338 536 (client is terminating a connection.) 536 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1396 CB
634 1401 302 (ClientEventError) 302 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1396 CB
1308 1401 755 (Notifies a local node client of an error condition) 755 SB
gr
gs 825 46 1258 1446 CB
1308 1447 671 (in the driver or one of the associated lower) 671 SB
gr
gs 825 59 1258 1492 CB
1308 1493 426 (protocol layers or netcards.) 426 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1551 CB
634 1556 334 (ClientEventReceive) 334 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1551 CB
1308 1556 723 (Notifies a local node client the TDI driver has) 723 SB
gr
gs 825 59 1258 1601 CB
1308 1602 773 (received normal data from a network connection.) 773 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1660 CB
634 1665 508 (ClientEventReceiveDatagram) 508 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1660 CB
1308 1665 723 (Notifies a local node client the TDI driver has) 723 SB
gr
gs 825 46 1258 1710 CB
1308 1711 705 (received a datagram in a connectionless data) 705 SB
gr
gs 825 59 1258 1756 CB
1308 1757 212 (transmission.) 212 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1815 CB
634 1820 507 (ClientEventReceiveExpedited) 507 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1815 CB
1308 1820 723 (Notifies a local node client the TDI driver has) 723 SB
gr
gs 825 46 1258 1865 CB
1308 1866 622 (received expedited data from a network) 622 SB
gr
gs 825 59 1258 1911 CB
1308 1912 181 (connection.) 181 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 623 63 634 1970 CB
634 1975 423 (ClientEventSendPossible) 423 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 825 50 1258 1970 CB
1308 1975 712 (Notifies the client that a buffering TDI driver) 712 SB
gr
gs 825 59 1258 2020 CB
1308 2021 660 (has buffers available for a send operation.) 660 SB
gr
255 255 255 fC
1449 3 634 2099 B
1 F
n
0 0 0 fC
1449 2 634 2096 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 2195 493 (1.3  TDI Library) 493 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2309 1378 (Windows NT furnishes TDI library macros as a DLL the TDI driver and clients) 1378 SB
634 2359 1376 (link against \(see Table 1.4\). A kernel-mode TDI client calls the build macros as) 1376 SB
634 2409 1368 (needed in preparing IRPs to send to the TDI driver. One of these macros fills in) 1368 SB
634 2459 1435 (most fields of an IRP, except for the Status and Information fields, which the driver) 1435 SB
634 2509 1397 (fills in after processing a client request. Before calling an internal driver function) 1397 SB
634 2559 555 (build macro, the client may call ) 555 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1189 2558 651 (TdiBuildInternalDeviceControlIrp) 651 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1840 2559 190 ( to allocate) 190 SB
634 2609 1053 (the IRP if it has not already been allocated by another driver.) 1053 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 4 def
/wp$fpage (4) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 5 5
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1313 379 133 (Chapter ) 133 SB
1446 379 18 (1) 18 SB
1464 379 538 (   TDI Driver Function Descriptions) 538 SB
2002 379 9 ( ) 61 SB
2063 379 9 ( ) 61 SB
2124 379 18 (1) 18 SB
2142 379 11 (-) 11 SB
2153 379 18 (5) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 436 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1105 (As mentioned in Part I, a user-mode TDI client calls the Win32 ) 1105 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1826 495 311 (DeviceIoControl) 311 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
2137 496 11 (.) 11 SB
721 579 1350 (Note that the TDI driver itself does not call the library macros related to client) 1350 SB
721 629 1426 (requests. However, it does make use of the remaining TDI library macros, such as,) 1426 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 678 462 (TdiBuildNetbiosAddress) 462 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1183 679 765 (, for assistance in processing client requests.) 765 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
721 767 108 (Table ) 108 SB
829 767 20 (1) 20 SB
849 767 426 (.4    TDI Library Macros) 426 SB
1461 2 715 825 B
1 F
n
gs 621 63 721 832 CB
721 837 113 (Macro) 113 SB
gr
gs 827 63 1343 832 CB
1393 837 168 (Definition) 168 SB
gr
620 2 721 895 B
1 F
n
826 2 1343 895 B
1 F
n
gs 621 63 721 902 CB
721 907 270 (TdiBuildAccept) 270 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 902 CB
1393 907 570 (Builds an IRP for an accept request.) 570 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 965 CB
721 970 263 (TdiBuildAction) 263 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 965 CB
1393 970 566 (Builds an IRP for an action request.) 566 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1028 CB
721 1033 453 (TdiBuildAssociateAddress) 453 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1028 CB
1393 1033 743 (Builds an IRP for an associate address request.) 743 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1091 CB
721 1096 291 (TdiBuildConnect) 291 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1091 CB
1393 1096 571 (Builds an IRP for a connect request.) 571 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1154 CB
721 1159 500 (TdiBuildDisassociateAddress) 500 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1154 CB
1393 1159 770 (Builds an IRP for a disassociate address request.) 770 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1217 CB
721 1222 590 (TdiBuildInternalDeviceControlIrp) 590 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 50 1343 1217 CB
1393 1222 768 (Allocates an IRP if the client does not receive an) 768 SB
gr
gs 827 59 1343 1267 CB
1393 1268 670 (IRP structure from a higher network layer.) 670 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1326 CB
721 1331 258 (TdiBuildListen) 258 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1326 CB
1393 1331 536 (Builds an IRP for a listen request.) 536 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1389 CB
721 1394 421 (TdiBuildNetbiosAddress) 421 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1389 CB
1393 1394 608 (Builds a NetBIOS address for a client.) 608 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1452 CB
721 1457 465 (TdiBuildQueryInformation) 465 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1452 CB
1393 1457 733 (Builds an IRP for a query information request.) 733 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1515 CB
721 1520 284 (TdiBuildReceive) 284 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1515 CB
1393 1520 561 (Builds an IRP for a receive request.) 561 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1578 CB
721 1583 458 (TdiBuildReceiveDatagram) 458 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1578 CB
1393 1583 720 (Builds an IRP for a receive datagram request.) 720 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1641 CB
721 1646 235 (TdiBuildSend) 235 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1641 CB
1393 1646 523 (Builds an IRP for a send request.) 523 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1704 CB
721 1709 409 (TdiBuildSendDatagram) 409 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1704 CB
1393 1709 682 (Builds an IRP for a send datagram request.) 682 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1767 CB
721 1772 445 (TdiBuildSetEventHandler) 445 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1767 CB
1393 1772 717 (Builds an IRP for a set event handler request.) 717 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1830 CB
721 1835 411 (TdiBuildSetInformation) 411 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1830 CB
1393 1835 689 (Builds an IRP for a set information request.) 689 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1893 CB
721 1898 378 (TdiCopyBufferToMdl) 378 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1893 CB
1393 1898 589 (Copies a specified buffer to an MDL.) 589 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 621 63 721 1956 CB
721 1961 378 (TdiCopyMdlToBuffer) 378 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 827 63 1343 1956 CB
1393 1961 569 (Copies a specified MDL to a buffer.) 569 SB
gr
255 255 255 fC
1449 3 721 2039 B
1 F
n
0 0 0 fC
1449 2 721 2036 B
1 F
n
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 5 def
/wp$fpage (5) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 6 6
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 379 29 (1-) 29 SB
288 379 18 (6) 18 SB
306 379 9 ( ) 61 SB
367 379 9 ( ) 61 SB
428 379 411 (Part III    TDI Driver Design) 411 SB
0 0 0 fC
/fm 256 def
1824 2 259 436 B
1 F
n
32 0 0 63 63 1 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1189 579 339 (BLANK PAGE) 339 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 752 1391 (IMPORTANT: This text will appear on screen, but will not) 1391 SB
634 825 700 (print on a PostScript printer.) 700 SB
634 931 1449 (This page should be the last one in this file; it was inserted) 1449 SB
634 1004 965 (by running the InsertBlankPage macro.) 965 SB
634 1110 1091 (Do not type any additional text on this page!) 1091 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 6 def
/wp$fpage (6) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def
1 setgray 41.5 73 moveto 0 646 rlineto 529 0 rlineto 0 646 neg rlineto closepath fill
 grestore
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 6 def
/wp$fpage (6) def
/wp$date (07/18/93) def
/wp$time (04:39 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%Trailer
SVDoc restore
end
%%Pages: 6
% TrueType font name key:
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT31c1c5 = 1defDTimes New RomanF00000015000001900000
%    MSTT31c1e2 = 1defDTimes New RomanF00000000000001900000
%    MSTT31c1ef = 1defDTimes New RomanF00000026000001900000
%    MSTT31c1fc = 1defDArial NarrowF00000064000002bc0000
%    MSTT31c208 = 1defDArial NarrowF00000032000002bc0000
%    MSTT31c214 = 1defDTimes New RomanF00000019000001900000
%    MSTT31c221 = 1defDTimes New RomanF00000023000001900000
%    MSTT31c22e = 1defDTimes New RomanF0000001d000001900000
%    MSTT31c23b = 1defDArial NarrowF00000028000002bc0000
%    MSTT31c247 = 1defDArial NarrowF0000003f000002bc0000
%    MSTT31c1d2 = 1defDTimes New RomanF00000032000001900000
%    MSTT31c253 = 1defDTimes New RomanF0000002c000001900000
%    MSTT31c260 = 1defDTimes New RomanF0000002c000001900001
%    MSTT31c26d = 1defDArial NarrowF00000053000002bc0000
%    MSTT31c287 = 1defDArialF00000032000001900000
%    MSTT31c292 = 1defDArial NarrowF00000047000002bc0000
%    MSTT31c29e = 1defDTimes New RomanF0000002c000002bc0000
%    MSTT31c2ab = 1defDArial NarrowF0000002c000002bc0000
%    MSTT31c2b7 = 1defDTimes New RomanF00000028000002bc0000
%    MSTT31c2c4 = 1defDTimes New RomanF00000011000001900000
%    MSTT31c2d1 = 1defDTimes New RomanF00000028000001900001
%    MSTT31c2de = 1defDTimes New RomanF00000028000001900000
%    MSTT31c2eb = 1defDTimes New RomanF00000028000002bc0001
%    MSTT31c2f8 = 1defDTimes New RomanF00000021000001900000
%    MSTT31c305 = 1defDArial NarrowF00000053000002bc0001
%    MSTT31c311 = 1defDMSIconsF00000028000001900000
%    MSTT31c31c = 1defDTimes New RomanF00000011000002bc0000
%    MSTT31c329 = 1defDTimes New RomanF0000003f000002bc0000
%    MSTT31c336 = 1defDArial NarrowF0000002c000001900000
%    MSTT31c279 = 1defDArial NarrowF00000021000002bc0000
%%DocumentSuppliedResources: procset Win35Dict 3 1

%%DocumentNeededResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-BoldItalic
%%+ font Times-Roman

%%EOF
