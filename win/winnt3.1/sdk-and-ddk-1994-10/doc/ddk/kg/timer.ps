%!PS-Adobe-2.0 
PSp 15840 SFL 
1920 2440 P 8 18 F B (Chapter) S 100 J ( 14) S E 
1920 2840 P B (IoTimer) S 100 J ( and) S 100 J ( CustomTimerDpc) S 100 J ( Routines) S E 
1920 3600 P 0 12 F 24 12 F (An) S 60 J ( NT) S 60 J ( driver) S 60 J ( can) S 60 J ( have) S 60 J ( as) S 60 J ( many) S 60 J ( IoTimer) S 60 J ( routines) S 60 J ( as) S 60 J ( the) S 60 J ( device) S 60 J ( objects) S 60 J ( it) S 60 J ( creates) S 60 J ( and) S 60 J ( any) S 
1920 3860 P (number) S 60 J ( of) S 60 J ( CustomTimerDpc) S 60 J ( routines.) S 60 J ( NT) S 60 J ( drivers) S 60 J ( can) S 60 J ( use) S 60 J ( these) S 60 J ( routines) S 60 J ( to) S 60 J ( monitor) S 60 J ( whether) S 
1920 4120 P (an) S 60 J ( I/O) S 60 J ( operation) S 60 J ( timed) S 60 J ( out,) S 60 J ( to) S 60 J ( restart) S 60 J ( device) S 60 J ( operations) S 60 J ( that) S 60 J ( have) S 60 J ( timed) S 60 J ( out,) S 60 J ( to) S 60 J ( log) S 60 J ( errors) S 60 J ( when) S 
1920 4380 P (an) S 60 J ( operation) S 60 J ( has) S 60 J ( timed) S 60 J ( out) S 60 J ( or) S 60 J ( a) S 60 J ( device) S 60 J ( error) S 60 J ( has) S 60 J ( occurred,) S 60 J ( or) S 60 J ( for) S 60 J ( any) S 60 J ( other) S 60 J ( purpose) S 60 J ( the) S 60 J ( driver) S 
1920 4640 P (designer) S 60 J ( chooses.) S 
1920 5020 P (This) S 60 J ( chapter) S 60 J ( summarizes) S 60 J ( the) S 60 J ( required) S 60 J ( functionality) S 60 J ( of) S 60 J ( an) S 60 J ( NT) S 60 J ( device) S 60 J ( driver's) S 60 J ( standard) S 60 J ( IoTimer) S 
1920 5280 P (and/or) S 60 J ( CustomTimerDpc) S 60 J ( routines.) S 60 J ( For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( timer) S 60 J ( objects,) S 60 J ( with) S 60 J ( and) S 60 J ( without) S 
1920 5540 P (associated) S 60 J ( DPC) S 60 J ( routines,) S 60 J ( see) S 60 J ( also) S 60 J ( Chapter) S 60 J ( 3.) S 
1920 6340 P 0 12 F 8 14 F B (14.1) S 78 J ( ) S 78 J ( ) S 78 J ( ) S 78 J ( IoTimer) S 78 J ( Routine) S 78 J ( Requirements) S E 
1920 6960 P 0 12 F 24 12 F (An) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( is) S 60 J ( called) S 60 J ( once) S 60 J ( per) S 60 J ( second) S 60 J ( after) S 60 J ( the) S 60 J ( driver) S 60 J ( calls) S 0 12 F 24 12 F B () S 60 J ( IoStartTimer) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 
1920 7220 P (target) S 60 J ( device) S 60 J ( object,) S 60 J ( unless) S 60 J ( the) S 60 J ( driver) S 60 J ( disables) S 60 J ( the) S 60 J ( timer) S 60 J ( with) S 60 J ( a) S 60 J ( call) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (IoStopTimer) S E 0 12 F 24 12 F (.) S 60 J ( The) S 
1920 7480 P (driver) S 60 J ( can) S 60 J ( re-enable) S 60 J ( the) S 60 J ( timer) S 60 J ( with) S 60 J ( another) S 60 J ( call) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (IoStartTimer) S E 0 12 F 24 12 F (,) S 60 J ( so) S 60 J ( that) S 60 J ( its) S 60 J ( IoTimer) S 60 J ( routine) S 
1920 7740 P (again) S 60 J ( will) S 60 J ( be) S 60 J ( called) S 60 J ( automatically) S 60 J ( at) S 60 J ( one-second) S 60 J ( intervals.) S 
1920 8120 P (An) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( is) S 60 J ( run) S 60 J ( in) S 60 J ( an) S 60 J ( arbitrary) S 60 J ( thread) S 60 J ( context) S 60 J ( at) S 60 J ( DISPATCH_LEVEL) S 60 J ( IRQL.) S 
1920 8380 P (Running) S 60 J ( at) S 60 J ( IRQL) S 60 J ( DISPATCH_LEVEL) S 60 J ( restricts) S 60 J ( the) S 60 J ( set) S 60 J ( of) S 60 J ( support) S 60 J ( routines) S 60 J ( an) S 60 J ( IoTimer) S 60 J ( routine) S 
1920 8640 P (can) S 60 J ( call.) S 60 J ( For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( managing) S 60 J ( IRQLs,) S 60 J ( see) S 60 J ( Chapter) S 60 J ( 16.) S 60 J ( For) S 60 J ( specific) S 
1920 8900 P (information) S 60 J ( about) S 60 J ( the) S 60 J ( IRQL\(s\)) S 60 J ( at) S 60 J ( which) S 60 J ( any) S 60 J ( particular) S 60 J ( support) S 60 J ( routine) S 60 J ( can) S 60 J ( be) S 60 J ( called,) S 60 J ( see) S 60 J ( the) S 
1920 9160 P 0 12 F 24 12 F I (Kernel-mode) S 60 J ( Driver) S 60 J ( Reference) S E 0 12 F 24 12 F (.) S 
1920 9540 P (Every) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( is) S 60 J ( associated) S 60 J ( with) S 60 J ( a) S 60 J ( driver-created) S 60 J ( device) S 60 J ( object.) S 60 J ( Consequently,) S 60 J ( an) S 60 J ( NT) S 
1920 9800 P (driver) S 60 J ( can) S 60 J ( have) S 60 J ( a) S 60 J ( single) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( for) S 60 J ( all) S 60 J ( its) S 60 J ( device) S 60 J ( objects,) S 60 J ( a) S 60 J ( separate) S 60 J ( IoTimer) S 60 J ( routine) S 
1920 10060 P (for) S 60 J ( each) S 60 J ( of) S 60 J ( its) S 60 J ( device) S 60 J ( objects,) S 60 J ( or) S 60 J ( some) S 60 J ( number) S 60 J ( of) S 60 J ( IoTimer) S 60 J ( routines) S 60 J ( associated) S 60 J ( with) S 
1920 10320 P (nonintersecting) S 60 J ( subsets) S 60 J ( of) S 60 J ( the) S 60 J ( driver's) S 60 J ( device) S 60 J ( objects,) S 60 J ( at) S 60 J ( the) S 60 J ( discretion) S 60 J ( of) S 60 J ( the) S 60 J ( driver) S 60 J ( designer.) S 0 12 F 
PE 
1200 1220 P 10 12 F B (14-) S E B (2) S E B () S 927 J ( Kernel-mode) S 55 J ( Driver) S 55 J ( Design) S 55 J ( Guide) S E 
1200 2060 P 0 12 F 24 12 F (After) S 60 J ( the) S 60 J ( driver) S 60 J ( has) S 60 J ( created) S 60 J ( its) S 60 J ( device) S 60 J ( objects,) S 60 J ( the) S 60 J ( DriverEntry) S 60 J ( routine) S 60 J ( must) S 60 J ( set) S 60 J ( up) S 60 J ( each) S 
1200 2320 P (IoTimer) S 60 J ( routine) S 60 J ( as) S 60 J ( follows:) S 
1200 2640 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( Call) S 60 J ( ) S 0 12 F 24 12 F B (IoInitializeTimer) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 60 J ( entry) S 60 J ( point) S 60 J ( for) S 60 J ( the) S 60 J ( IoTimer) S 60 J ( routine,) S 60 J ( a) S 60 J ( pointer) S 60 J ( to) S 60 J ( any) S 
1680 2900 P (driver-determined) S 60 J ( context) S 60 J ( the) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( will) S 60 J ( use,) S 60 J ( and) S 60 J ( a) S 60 J ( pointer) S 60 J ( to) S 60 J ( the) S 60 J ( device) S 60 J ( object) S 
1680 3160 P (that) S 60 J ( represents) S 60 J ( the) S 60 J ( device) S 60 J ( on) S 60 J ( which) S 60 J ( an) S 60 J ( operation) S 60 J ( could) S 60 J ( time) S 60 J ( out.) S 
1200 3540 P (Calling) S 60 J ( ) S 0 12 F 24 12 F B (IoInitializeTimer) S E 0 12 F 24 12 F () S 60 J ( registers) S 60 J ( the) S 60 J ( driver's) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( for) S 60 J ( the) S 60 J ( given) S 60 J ( device) S 60 J ( object.) S 
1200 3800 P (For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( creating) S 60 J ( device) S 60 J ( objects) S 60 J ( and) S 60 J ( the) S 60 J ( timer) S 60 J ( object) S 60 J ( associated) S 60 J ( with) S 60 J ( an) S 
1200 4060 P (IoTimer) S 60 J ( routine,) S 60 J ( see) S 60 J ( Chapter) S 60 J ( 3.) S 60 J ( See) S 60 J ( also) S 60 J ( the) S 60 J ( ) S 0 12 F 24 12 F I (Kernel-mode) S 60 J ( Driver) S 60 J ( Reference) S E 0 12 F 24 12 F () S 60 J ( for) S 60 J ( details) S 60 J ( about) S 
1200 4320 P 0 12 F 24 12 F B (IoInitializeTimer) S E 0 12 F 24 12 F (.) S 
1200 4700 P (The) S 60 J ( PVOID-type) S 60 J ( ) S 0 12 F 24 12 F I (Context) S E 0 12 F 24 12 F () S 60 J ( passed) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (IoInitializeTimer) S E 0 12 F 24 12 F () S 60 J ( sets) S 60 J ( up) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( that) S 60 J ( is) S 60 J ( passed) S 60 J ( to) S 
1200 4960 P (the) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( when) S 60 J ( it) S 60 J ( is) S 60 J ( called.) S 60 J ( Such) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( must) S 60 J ( be) S 60 J ( in) S 60 J ( resident) S 60 J ( memory) S 
1200 5220 P (allocated) S 60 J ( by) S 60 J ( the) S 60 J ( driver.) S 60 J ( Usually,) S 60 J ( this) S 60 J ( context) S 60 J ( area) S 60 J ( is) S 60 J ( in) S 60 J ( the) S 60 J ( associated) S 60 J ( device) S 60 J ( object's) S 60 J ( device) S 
1200 5480 P (extension.) S 
1200 5860 P (If) S 60 J ( it) S 60 J ( shares) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( with) S 60 J ( the) S 60 J ( driver's) S 60 J ( ISR,) S 60 J ( the) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( must) S 60 J ( call) S 
1200 6120 P 0 12 F 24 12 F B (KeSynchronizeExecution) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( a) S 60 J ( SynchCritSection) S 60 J ( routine) S 60 J ( \(see) S 60 J ( Chapter) S 60 J ( 10\)) S 60 J ( in) S 60 J ( order) S 60 J ( to) S 
1200 6380 P (access) S 60 J ( the) S 60 J ( shared) S 60 J ( context) S 60 J ( safely.) S 60 J ( If) S 60 J ( the) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( shares) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( with) S 60 J ( another) S 
1200 6640 P (driver) S 60 J ( routine,) S 60 J ( the) S 60 J ( shared) S 60 J ( context) S 60 J ( area) S 60 J ( must) S 60 J ( be) S 60 J ( protected) S 60 J ( by) S 60 J ( an) S 60 J ( executive) S 60 J ( spin) S 60 J ( lock.) S 60 J ( For) S 60 J ( more) S 
1200 6900 P (information) S 60 J ( about) S 60 J ( using) S 60 J ( spin) S 60 J ( locks,) S 60 J ( see) S 60 J ( Chapter) S 60 J ( 16.) S 
1200 7700 P 0 12 F 8 14 F B (14.2) S 78 J ( ) S 78 J ( ) S 78 J ( ) S 78 J ( CustomTimerDpc) S 78 J ( Routine) S 78 J ( Requirements) S E 
1200 8320 P 0 12 F 24 12 F (The) S 60 J ( granularity) S 60 J ( of) S 60 J ( a) S 60 J ( timer) S 60 J ( object) S 60 J ( interval) S 60 J ( is) S 60 J ( 100) S 60 J ( nanoseconds,) S 60 J ( so) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( can) S 60 J ( be) S 
1200 8580 P (called) S 60 J ( at) S 60 J ( driver-determined) S 60 J ( variable) S 60 J ( intervals) S 60 J ( and) S 60 J ( at) S 60 J ( finer-grained) S 60 J ( intervals) S 60 J ( than) S 60 J ( an) S 60 J ( IoTimer) S 
1200 8840 P (routine.) S 60 J ( A) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( is) S 60 J ( called) S 60 J ( once) S 60 J ( after) S 60 J ( the) S 60 J ( \(delta\)) S 60 J ( interval) S 60 J ( that) S 60 J ( was) S 60 J ( specified) S 
1200 9100 P (when) S 60 J ( the) S 60 J ( driver) S 60 J ( called) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( expires.) S 60 J ( In) S 60 J ( other) S 60 J ( words,) S 60 J ( the) S 60 J ( driver) S 60 J ( must) S 60 J ( call) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 
1200 9360 P 0 12 F 24 12 F (each) S 60 J ( time) S 60 J ( its) S 60 J ( CustomTimerDpc) S 60 J ( is) S 60 J ( to) S 60 J ( be) S 60 J ( run,) S 60 J ( because) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( is) S 60 J ( not) S 60 J ( called) S 
1200 9620 P (automatically) S 60 J ( like) S 60 J ( an) S 60 J ( IoTimer) S 60 J ( routine.) S 60 J ( The) S 60 J ( driver) S 60 J ( can) S 60 J ( call) S 60 J ( ) S 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( to) S 60 J ( disable) S 60 J ( an) S 
1200 9880 P (already) S 60 J ( set) S 60 J ( timer) S 60 J ( object) S 60 J ( and) S 60 J ( dequeue) S 60 J ( a) S 60 J ( CustomTimerDpc,) S 60 J ( provided) S 60 J ( its) S 60 J ( call) S 60 J ( occurs) S 60 J ( before) S 60 J ( the) S 
1200 10140 P (expiration) S 60 J ( of) S 60 J ( the) S 60 J ( interval) S 60 J ( it) S 60 J ( passed) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F (.) S 
1200 10520 P (Like) S 60 J ( an) S 60 J ( IoTimer) S 60 J ( routine,) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( is) S 60 J ( run) S 60 J ( in) S 60 J ( an) S 60 J ( arbitrary) S 60 J ( thread) S 60 J ( context) S 60 J ( at) S 
1200 10780 P (DISPATCH_LEVEL) S 60 J ( IRQL.) S 60 J ( Running) S 60 J ( at) S 60 J ( IRQL) S 60 J ( DISPATCH_LEVEL) S 60 J ( restricts) S 60 J ( the) S 60 J ( set) S 60 J ( of) S 
1200 11040 P (support) S 60 J ( routines) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( can) S 60 J ( call.) S 60 J ( For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( managing) S 
1200 11300 P (IRQLs,) S 60 J ( see) S 60 J ( Chapter) S 60 J ( 16.) S 60 J ( For) S 60 J ( specific) S 60 J ( information) S 60 J ( about) S 60 J ( the) S 60 J ( IRQL\(s\)) S 60 J ( at) S 60 J ( which) S 60 J ( any) S 60 J ( particular) S 
1200 11560 P (support) S 60 J ( routine) S 60 J ( can) S 60 J ( be) S 60 J ( called,) S 60 J ( see) S 60 J ( the) S 60 J ( ) S 0 12 F 24 12 F I (Kernel-mode) S 60 J ( Driver) S 60 J ( Reference) S E 0 12 F 24 12 F (.) S 0 12 F 
PE 
1920 1220 P 10 12 F B () S 2895 J ( IoTimer) S 55 J ( and) S 55 J ( CustomTimerDpc) S 55 J ( Routines) S 807 J ( 14-) S E B (3) S E B () S 720 J ( ) S E 
1920 2060 P 0 12 F 24 12 F (A) S 60 J ( driver) S 60 J ( that) S 60 J ( has) S 60 J ( CustomTimerDpc) S 60 J ( routines) S 60 J ( must) S 60 J ( provide) S 60 J ( storage) S 60 J ( for) S 60 J ( both) S 60 J ( a) S 60 J ( timer) S 60 J ( object) S 60 J ( \(of) S 
1920 2320 P (type) S 60 J ( KTIMER\)) S 60 J ( and) S 60 J ( a) S 60 J ( DPC) S 60 J ( object) S 60 J ( \(of) S 60 J ( type) S 60 J ( KDPC\)) S 60 J ( for) S 60 J ( each) S 60 J ( CustomTimerDpc) S 60 J ( it) S 60 J ( has.) S 
1920 2700 P (The) S 60 J ( DriverEntry) S 60 J ( routine) S 60 J ( must) S 60 J ( set) S 60 J ( up) S 60 J ( each) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( as) S 60 J ( follows:) S 
1920 3020 P () S 104 J ( 1) S 256 J ( Call) S 60 J ( ) S 0 12 F 24 12 F B (KeInitializeDpc) S E 0 12 F 24 12 F () S 60 J ( to) S 60 J ( set) S 60 J ( up) S 60 J ( the) S 60 J ( DPC) S 60 J ( object) S 60 J ( with) S 60 J ( the) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( and) S 60 J ( its) S 
2400 3280 P (pointer) S 60 J ( to) S 60 J ( the) S 60 J ( driver-determined) S 60 J ( ) S 0 12 F 24 12 F I (DeferredContext) S E 
1920 3600 P 0 12 F 24 12 F () S 104 J ( 2) S 256 J ( Call) S 60 J ( ) S 0 12 F 24 12 F B (KeInitializeTimer) S E 0 12 F 24 12 F () S 60 J ( to) S 60 J ( set) S 60 J ( up) S 60 J ( the) S 60 J ( timer) S 60 J ( object) S 60 J ( associated) S 60 J ( with) S 60 J ( the) S 60 J ( CustomTimerDpc) S 
2400 3860 P (routine) S 
1920 4240 P (The) S 60 J ( PVOID-type) S 60 J ( ) S 0 12 F 24 12 F I (DeferredContext) S E 0 12 F 24 12 F () S 60 J ( passed) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeInitializeDpc) S E 0 12 F 24 12 F () S 60 J ( sets) S 60 J ( up) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( that) S 60 J ( is) S 
1920 4500 P (passed) S 60 J ( to) S 60 J ( the) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( when) S 60 J ( it) S 60 J ( is) S 60 J ( called.) S 60 J ( Such) S 60 J ( context) S 60 J ( area\(s\)) S 60 J ( must) S 60 J ( be) S 60 J ( in) S 
1920 4760 P (resident) S 60 J ( memory,) S 60 J ( allocated) S 60 J ( by) S 60 J ( the) S 60 J ( driver.) S 60 J ( Usually,) S 60 J ( such) S 60 J ( a) S 60 J ( context) S 60 J ( area) S 60 J ( is) S 60 J ( in) S 60 J ( a) S 60 J ( driver-created) S 
1920 5020 P (device) S 60 J ( object's) S 60 J ( device) S 60 J ( extension.) S 60 J ( For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( setting) S 60 J ( up) S 60 J ( a) S 60 J ( CustomTimerDpc,) S 
1920 5280 P (see) S 60 J ( the) S 60 J ( section) S 60 J ( on) S 60 J ( timer) S 60 J ( objects) S 60 J ( with) S 60 J ( associated) S 60 J ( DPCs) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 3,) S 60 J ( and) S 60 J ( see) S 60 J ( also) S 60 J ( the) S 
1920 5540 P 0 12 F 24 12 F I (Kernel-mode) S 60 J ( Driver) S 60 J ( Reference.) S E 
1920 5920 P 0 12 F 24 12 F (If) S 60 J ( the) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( shares) S 60 J ( context) S 60 J ( information) S 60 J ( with) S 60 J ( the) S 60 J ( driver's) S 60 J ( ISR,) S 60 J ( the) S 
1920 6180 P (CustomTimerDpc) S 60 J ( routine) S 60 J ( must) S 60 J ( call) S 60 J ( ) S 0 12 F 24 12 F B (KeSynchronizeExecution) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( a) S 60 J ( SynchCritSection) S 
1920 6440 P (routine) S 60 J ( \(see) S 60 J ( Chapter) S 60 J ( 10\)) S 60 J ( in) S 60 J ( order) S 60 J ( to) S 60 J ( access) S 60 J ( the) S 60 J ( shared) S 60 J ( context) S 60 J ( safely.) S 60 J ( If) S 60 J ( the) S 60 J ( CustomTimerDpc) S 
1920 6700 P (shares) S 60 J ( the) S 60 J ( context) S 60 J ( with) S 60 J ( another) S 60 J ( driver) S 60 J ( routine,) S 60 J ( its) S 60 J ( context) S 60 J ( area) S 60 J ( must) S 60 J ( be) S 60 J ( protected) S 60 J ( by) S 60 J ( an) S 
1920 6960 P (executive) S 60 J ( spin) S 60 J ( lock.) S 60 J ( For) S 60 J ( more) S 60 J ( information) S 60 J ( about) S 60 J ( using) S 60 J ( spin) S 60 J ( locks,) S 60 J ( see) S 60 J ( Chapter) S 60 J ( 16.) S 
1920 7340 P (As) S 60 J ( shown) S 60 J ( by) S 60 J ( its) S 60 J ( definition) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 4,) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( has) S 60 J ( no) S 60 J ( particular) S 60 J ( associations) S 
1920 7600 P (with) S 60 J ( a) S 60 J ( driver-created) S 60 J ( device) S 60 J ( object.) S 60 J ( However,) S 60 J ( a) S 60 J ( driver) S 60 J ( can) S 60 J ( associate) S 60 J ( a) S 60 J ( CustomTimerDpc) S 
1920 7860 P (routine) S 60 J ( with) S 60 J ( a) S 60 J ( driver-created) S 60 J ( device) S 60 J ( object) S 60 J ( by) S 60 J ( passing) S 60 J ( a) S 60 J ( pointer) S 60 J ( to) S 60 J ( the) S 60 J ( device) S 60 J ( object) S 60 J ( when) S 60 J ( it) S 
1920 8120 P (calls) S 60 J ( ) S 0 12 F 24 12 F B (KeInitializeDpc) S E 0 12 F 24 12 F (.) S 
1920 8920 P 0 12 F 8 14 F B (14.3) S 78 J ( ) S 78 J ( ) S 78 J ( ) S 78 J ( Implementing) S 78 J ( IoTimer) S 78 J ( Routines) S E 
1920 9540 P 0 12 F 24 12 F (The) S 60 J ( "AT") S 60 J ( disk) S 60 J ( driver,) S 60 J ( many) S 60 J ( of) S 60 J ( whose) S 60 J ( standard) S 60 J ( routines) S 60 J ( have) S 60 J ( already) S 60 J ( been) S 60 J ( shown) S 60 J ( in) S 60 J ( preceding) S 
1920 9800 P (chapters,) S 60 J ( has) S 60 J ( an) S 60 J ( IoTimer) S 60 J ( routine) S 60 J ( that) S 60 J ( it) S 60 J ( uses) S 60 J ( to) S 60 J ( determine) S 60 J ( the) S 60 J ( following:) S 
1920 10120 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( Whether) S 60 J ( the) S 60 J ( timer) S 60 J ( counter) S 60 J ( set) S 60 J ( by) S 60 J ( its) S 60 J ( StartIo) S 60 J ( routine) S 60 J ( is) S 60 J ( still) S 60 J ( running) S 
2400 10440 P (If) S 60 J ( so,) S 60 J ( the) S 60 J ( driver) S 60 J ( is) S 60 J ( expecting) S 60 J ( an) S 60 J ( interrupt) S 60 J ( for) S 60 J ( an) S 60 J ( I/O) S 60 J ( operation) S 60 J ( on) S 60 J ( one) S 60 J ( of) S 60 J ( the) S 60 J ( disks) S 60 J ( attached) S 
2400 10700 P (to) S 60 J ( the) S 60 J ( disk) S 60 J ( controller.) S 
2400 11020 P (If) S 60 J ( not,) S 60 J ( an) S 60 J ( operation) S 60 J ( has) S 60 J ( timed) S 60 J ( out) S 60 J ( and) S 60 J ( the) S 60 J ( disk) S 60 J ( controller) S 60 J ( is) S 60 J ( in) S 60 J ( an) S 60 J ( unknown) S 60 J ( state.) S 
2400 11280 P (Therefore,) S 60 J ( the) S 60 J ( driver) S 60 J ( logs) S 60 J ( an) S 60 J ( error) S 60 J ( and) S 60 J ( calls) S 60 J ( a) S 60 J ( SynchCritSection) S 60 J ( routine) S 60 J ( to) S 60 J ( reset) S 60 J ( the) S 60 J ( disk) S 
2400 11540 P (controller.) S 
1920 11860 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( Whether) S 60 J ( a) S 60 J ( reset) S 60 J ( operation) S 60 J ( has) S 60 J ( timed) S 60 J ( out) S 
2400 12180 P (If) S 60 J ( so,) S 60 J ( the) S 60 J ( driver) S 60 J ( fails) S 60 J ( any) S 60 J ( IRP) S 60 J ( that) S 60 J ( it) S 60 J ( is) S 60 J ( currently) S 60 J ( processing) S 60 J ( and) S 60 J ( returns) S 60 J ( an) S 60 J ( error.) S 0 12 F 
PE 
1200 1220 P 10 12 F B (14-) S E B (4) S E B () S 927 J ( Kernel-mode) S 55 J ( Driver) S 55 J ( Design) S 55 J ( Guide) S E 
1200 2060 P 0 12 F 24 12 F (Like) S 60 J ( any) S 60 J ( IoTimer) S 60 J ( routine,) S 60 J ( this) S 60 J ( driver's) S 60 J ( AtDiskCheckTimer) S 60 J ( is) S 60 J ( called) S 60 J ( once) S 60 J ( per) S 60 J ( second) S 60 J ( with) S 
1200 2320 P (pointers) S 60 J ( to) S 60 J ( the) S 60 J ( target) S 60 J ( device) S 60 J ( object) S 60 J ( for) S 60 J ( the) S 60 J ( current) S 60 J ( IRP) S 60 J ( and) S 60 J ( a) S 60 J ( driver-determined) S 60 J ( context) S 
1200 2580 P (pointer,) S 60 J ( as) S 60 J ( follows:) S 
1680 3100 P 0 12 F 0 12 F ({) S 
1680 3360 P () S 480 J ( PCONTROLLER_EXTENSION) S 144 J ( controllerExtension) S 144 J ( =) S 144 J ( Context;) S 
1680 3620 P () S 480 J ( PDISK_EXTENSION) S 144 J ( diskExtension;) S 
1680 3880 P (//) S 
1680 4140 P (//) S 144 J ( If) S 144 J ( the) S 144 J ( device) S 144 J ( is) S 144 J ( already) S 144 J ( busy,) S 144 J ( the) S 144 J ( InterruptTimer) S 144 J ( counter) S 
1680 4400 P (//) S 144 J ( must) S 144 J ( be) S 144 J ( -1.) S 144 J ( Check) S 144 J ( to) S 144 J ( see) S 144 J ( whether) S 144 J ( the) S 144 J ( BusyDevice) S 144 J ( pointer) S 
1680 4660 P (//) S 144 J ( is) S 144 J ( also) S 144 J ( nonNULL.) S 144 J ( If) S 144 J ( so,) S 144 J ( then) S 144 J ( the) S 144 J ( only) S 144 J ( way) S 144 J ( it'll) S 144 J ( be) S 144 J ( reset) S 
1680 4920 P (//) S 144 J ( to) S 144 J ( NULL) S 144 J ( is) S 144 J ( if) S 144 J ( THIS) S 144 J ( routine) S 144 J ( calls) S 144 J ( AtStartDevice) S 144 J ( so) S 144 J ( that) S 
1680 5180 P (//) S 144 J ( routine) S 144 J ( will) S 144 J ( "restart") S 144 J ( the) S 144 J ( I/O) S 144 J ( for) S 144 J ( the) S 144 J ( appropriate) S 144 J ( disk.) S 
1680 5440 P (//) S 144 J ( So,) S 144 J ( nothing) S 144 J ( was) S 144 J ( going) S 144 J ( on) S 144 J ( when) S 144 J ( this) S 144 J ( routine) S 144 J ( is) S 144 J ( called) S 
1680 5700 P (//) S 144 J ( if) S 144 J ( the) S 144 J ( BusyDevice) S 144 J ( pointer) S 144 J ( is) S 144 J ( nonNULL.) S 
1680 5960 P (//) S 
1680 6220 P () S 480 J ( if) S 144 J ( \(controllerExtension->BusyDevice\)) S 144 J ( {) S 
1680 6480 P () S 480 J ( ) S 480 J ( KeSynchronizeExecution\() S 
1680 6740 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->InterruptObject,) S 
1680 7000 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( AtStartDevice,) S 
1680 7260 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->BusyDevice\);) S 
1680 7520 P () S 480 J ( ) S 480 J ( return;) S 
1680 7780 P () S 480 J ( }) S 
1680 8040 P (//) S 
1680 8300 P (//) S 144 J ( When) S 144 J ( InterruptTimer) S 144 J ( is) S 144 J ( -1,) S 144 J ( the) S 144 J ( timer) S 144 J ( is) S 144 J ( "off") S 144 J ( so) S 144 J ( don't) S 
1680 8560 P (//) S 144 J ( do) S 144 J ( anything.) S 144 J ( Otherwise,) S 144 J ( this) S 144 J ( routine) S 144 J ( has) S 144 J ( to) S 144 J ( synchronize) S 
1680 8820 P (//) S 144 J ( with) S 144 J ( other) S 144 J ( routines) S 144 J ( while) S 144 J ( it) S 144 J ( updates) S 144 J ( state) S 144 J ( and,) S 
1680 9080 P (//) S 144 J ( possibly,) S 144 J ( touches) S 144 J ( the) S 144 J ( hardware.) S 
1680 9340 P (//) S 
1680 9600 P () S 480 J ( if) S 144 J ( \(controllerExtension->) S 
1680 9860 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( InterruptTimer) S 144 J ( ==) S 144 J ( CANCEL_TIMER\)) S 144 J ( {) S 
1680 10120 P () S 480 J ( ) S 480 J ( return;) S 
1680 10380 P () S 480 J ( }) S 0 12 F 
PE 
1920 1220 P 10 12 F B () S 2895 J ( IoTimer) S 55 J ( and) S 55 J ( CustomTimerDpc) S 55 J ( Routines) S 807 J ( 14-) S E B (5) S E B () S 720 J ( ) S E 
2400 2060 P 0 12 F 0 12 F (//) S 
2400 2320 P (//) S 144 J ( In) S 144 J ( the) S 144 J ( unlikely) S 144 J ( circumstances) S 144 J ( that) S 144 J ( the) S 144 J ( controller's) S 144 J ( being) S 
2400 2580 P (//) S 144 J ( reset) S 144 J ( due) S 144 J ( to) S 144 J ( a) S 144 J ( timeout) S 144 J ( AND) S 144 J ( that) S 144 J ( reset) S 144 J ( times) S 144 J ( out,) S 144 J ( must) S 
2400 2840 P (//) S 144 J ( fail) S 144 J ( the) S 144 J ( IRP) S 144 J ( that) S 144 J ( was) S 144 J ( in) S 144 J ( progress) S 144 J ( when) S 144 J ( the) S 144 J ( first) S 144 J ( timeout) S 
2400 3100 P (//) S 144 J ( occurred.) S 144 J ( If) S 144 J ( this) S 144 J ( happens,) S 144 J ( WhichDeviceObject) S 144 J ( might) S 144 J ( be) S 
2400 3360 P (//) S 144 J ( different) S 144 J ( when) S 144 J ( the) S 144 J ( second) S 144 J ( timeout) S 144 J ( occurs,) S 144 J ( so) S 144 J ( save) S 144 J ( it.) S 
2400 3620 P (//) S 144 J ( While) S 144 J ( this) S 144 J ( routine) S 144 J ( can't,) S 144 J ( in) S 144 J ( general,) S 144 J ( alter) S 144 J ( state) S 144 J ( in) S 144 J ( the) S 
2400 3880 P (//) S 144 J ( controller) S 144 J ( extension,) S 144 J ( changing) S 144 J ( FirstFailingDeviceObject) S 
2400 4140 P (//) S 144 J ( is) S 144 J ( safe) S 144 J ( because) S 144 J ( this) S 144 J ( is) S 144 J ( the) S 144 J ( only) S 144 J ( routine) S 144 J ( that) S 144 J ( touches) S 144 J ( it.) S 
2400 4400 P (//) S 
2400 4660 P () S 480 J ( if) S 144 J ( \(controllerExtension->ResettingController) S 144 J ( ==) S 
2400 4920 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( RESET_NOT_RESETTING\)) S 144 J ( {) S 
2400 5180 P () S 480 J ( ) S 480 J ( controllerExtension->FirstFailingDeviceObject) S 144 J ( =) S 
2400 5440 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->WhichDeviceObject;) S 
2400 5700 P () S 480 J ( }) S 
2400 5960 P () S 480 J ( if) S 144 J ( \() S 144 J ( !\(KeSynchronizeExecution\() S 
2400 6220 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->InterruptObject,) S 
2400 6480 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( AtCheckTimerSynch,) S 
2400 6740 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension\)\)\)) S 144 J ( {) S 
2400 7000 P () S 480 J ( ) S 480 J ( UCHAR) S 144 J ( MajorFunctionCode) S 144 J ( =) S 144 J ( 0;) S 
2400 7260 P () S 480 J ( ) S 480 J ( diskExtension) S 144 J ( =) S 144 J ( controllerExtension->) S 
2400 7520 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( FirstFailingDeviceObject->) S 
2400 7780 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( DeviceExtension;) S 
2400 8040 P () S 480 J ( ) S 480 J ( if) S 144 J ( \(controllerExtension->) S 
2400 8300 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( FirstFailingDeviceObject->CurrentIrp\)) S 144 J ( {) S 
2400 8560 P () S 480 J ( ) S 480 J ( ) S 480 J ( MajorFunctionCode) S 144 J ( =) S 
2400 8820 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( IoGetCurrentIrpStackLocation\() S 
2400 9080 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->) S 
2400 9340 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( FirstFailingDeviceObject->) S 
2400 9600 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( CurrentIrp\)->MajorFunction;) S 
2400 9860 P () S 480 J ( ) S 480 J ( }) S 0 12 F 
PE 
1200 1220 P 10 12 F B (14-) S E B (6) S E B () S 927 J ( Kernel-mode) S 55 J ( Driver) S 55 J ( Design) S 55 J ( Guide) S E 
1680 2060 P 0 12 F 0 12 F (//) S 
1680 2320 P (//) S 144 J ( AtCheckTimerSynch) S 144 J ( returns) S 144 J ( FALSE) S 144 J ( iff) S 144 J ( there's) S 144 J ( a) S 144 J ( timeout) S 
1680 2580 P (//) S 144 J ( while) S 144 J ( resetting) S 144 J ( the) S 144 J ( controller.) S 144 J ( This) S 144 J ( will) S 144 J ( probably) S 
1680 2840 P (//) S 144 J ( never) S 144 J ( happen,) S 144 J ( but,) S 144 J ( just) S 144 J ( in) S 144 J ( case,) S 144 J ( fail) S 144 J ( the) S 144 J ( current) S 144 J ( IRP.) S 
1680 3100 P (//) S 144 J ( Subsequent) S 144 J ( IRPs) S 144 J ( will) S 144 J ( probably) S 144 J ( be) S 144 J ( failed) S 144 J ( too,) S 144 J ( unless) S 
1680 3360 P (//) S 144 J ( the) S 144 J ( hardware) S 144 J ( suddenly) S 144 J ( straightens) S 144 J ( itself) S 144 J ( out.) S 
1680 3620 P (//) S 
1680 3880 P () S 480 J ( ) S 480 J ( AtLogError\() S 
1680 4140 P () S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->FirstFailingDeviceObject,) S 
1680 4400 P () S 480 J ( ) S 480 J ( ) S 480 J ( diskExtension->SequenceNumber,) S 
1680 4660 P () S 480 J ( ) S 480 J ( ) S 480 J ( MajorFunctionCode,) S 
1680 4920 P () S 480 J ( ) S 480 J ( ) S 480 J ( diskExtension->IrpRetryCount,) S 
1680 5180 P () S 480 J ( ) S 480 J ( ) S 480 J ( 6,) S 
1680 5440 P () S 480 J ( ) S 480 J ( ) S 480 J ( STATUS_DISK_RESET_FAILED,) S 
1680 5700 P () S 480 J ( ) S 480 J ( ) S 480 J ( IO_ERR_TIMEOUT,) S 
1680 5960 P () S 480 J ( ) S 480 J ( ) S 480 J ( ERROR_LOG_TYPE_TIMEOUT_DURING_RESET,) S 
1680 6220 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0,) S 
1680 6480 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0,) S 
1680 6740 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0,) S 
1680 7000 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0,) S 
1680 7260 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0,) S 
1680 7520 P () S 480 J ( ) S 480 J ( ) S 480 J ( 0\);) S 
1680 7780 P (//) S 
1680 8040 P (//) S 144 J ( Done) S 144 J ( with) S 144 J ( the) S 144 J ( reset.) S 144 J ( Return) S 144 J ( the) S 144 J ( IRP) S 144 J ( that) S 144 J ( was) S 
1680 8300 P (//) S 144 J ( being) S 144 J ( processed) S 144 J ( with) S 144 J ( an) S 144 J ( error) S 144 J ( status,) S 144 J ( and) S 144 J ( release) S 
1680 8560 P (//) S 144 J ( the) S 144 J ( controller) S 144 J ( object.) S 
1680 8820 P (//) S 
1680 9080 P () S 480 J ( ) S 480 J ( if) S 144 J ( \(controllerExtension->) S 
1680 9340 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( FirstFailingDeviceObject->) S 
1680 9600 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( CurrentIrp) S 144 J ( !=) S 144 J ( NULL\)) S 144 J ( {) S 
1680 9860 P () S 480 J ( ) S 480 J ( ) S 480 J ( AtFinishPacket\() S 
1680 10120 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( diskExtension,) S 
1680 10380 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( STATUS_DISK_RESET_FAILED\);) S 
1680 10640 P () S 480 J ( ) S 480 J ( }) S 
1680 10900 P () S 480 J ( ) S 480 J ( controllerExtension->ResettingController) S 144 J ( =) S 
1680 11160 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( RESET_NOT_RESETTING;) S 
1680 11420 P () S 480 J ( ) S 480 J ( IoFreeController\() S 
1680 11680 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( controllerExtension->) S 
1680 11940 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ControllerObject\);) S 
1680 12200 P () S 480 J ( }) S 
1680 12460 P (}) S 0 12 F 
PE 
1920 1220 P 10 12 F B () S 2895 J ( IoTimer) S 55 J ( and) S 55 J ( CustomTimerDpc) S 55 J ( Routines) S 807 J ( 14-) S E B (7) S E B () S 720 J ( ) S E 
1920 2060 P 0 12 F 24 12 F (As) S 60 J ( already) S 60 J ( shown) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 10,) S 60 J ( the) S 60 J ( AtCheckTimerSynch) S 60 J ( routine) S 60 J ( usually) S 60 J ( decrements) S 60 J ( the) S 
1920 2320 P (timer) S 60 J ( counter) S 60 J ( that) S 60 J ( this) S 60 J ( driver) S 60 J ( maintains) S 60 J ( in) S 60 J ( the) S 60 J ( controller) S 60 J ( extension.) S 60 J ( Only) S 60 J ( if) S 60 J ( the) S 60 J ( current) S 60 J ( I/O) S 
1920 2580 P (operation) S 60 J ( has) S 60 J ( timed) S 60 J ( out) S 60 J ( does) S 60 J ( this) S 60 J ( routine) S 60 J ( attempt) S 60 J ( to) S 60 J ( reset) S 60 J ( the) S 60 J ( controller.) S 60 J ( Only) S 60 J ( if) S 60 J ( an) S 60 J ( attempt) S 60 J ( to) S 
1920 2840 P (reset) S 60 J ( the) S 60 J ( controller) S 60 J ( has) S 60 J ( already) S 60 J ( failed) S 60 J ( does) S 60 J ( AtCheckTimerSynch) S 60 J ( return) S 60 J ( FALSE) S 60 J ( .) S 
1920 3220 P (Note) S 60 J ( that) S 60 J ( both) S 60 J ( AtDiskCheckTimer) S 60 J ( and) S 60 J ( AtCheckTimerSynch) S 60 J ( take) S 60 J ( very) S 60 J ( little) S 60 J ( time) S 60 J ( to) S 60 J ( execute) S 
1920 3480 P (under) S 60 J ( normal) S 60 J ( circumstances.) S 60 J ( By) S 60 J ( using) S 60 J ( an) S 60 J ( IoTimer) S 60 J ( routine,) S 60 J ( this) S 60 J ( driver) S 60 J ( provides) S 60 J ( insurance) S 60 J ( that) S 
1920 3740 P (each) S 60 J ( valid) S 60 J ( device) S 60 J ( I/O) S 60 J ( request) S 60 J ( can) S 60 J ( be) S 60 J ( retried,) S 60 J ( if) S 60 J ( necessary,) S 60 J ( and) S 60 J ( that) S 60 J ( such) S 60 J ( an) S 60 J ( IRP) S 60 J ( will) S 60 J ( be) S 60 J ( failed) S 
1920 4000 P (only) S 60 J ( if) S 60 J ( an) S 60 J ( uncorrectable) S 60 J ( hardware) S 60 J ( failure) S 60 J ( prevents) S 60 J ( it) S 60 J ( from) S 60 J ( being) S 60 J ( satisfied.) S 60 J ( Moreover,) S 60 J ( the) S 60 J ( driver) S 
1920 4260 P (provides) S 60 J ( this) S 60 J ( functionality) S 60 J ( at) S 60 J ( very) S 60 J ( little) S 60 J ( cost) S 60 J ( in) S 60 J ( execution) S 60 J ( time.) S 
1920 5060 P 0 12 F 8 14 F B (14.4) S 78 J ( ) S 78 J ( ) S 78 J ( ) S 78 J ( Implementing) S 78 J ( CustomTimerDpc) S 78 J ( Routines) S E 
1920 5680 P 0 12 F 24 12 F (As) S 60 J ( first) S 60 J ( mentioned) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 7,) S 60 J ( the) S 60 J ( parallel) S 60 J ( driver) S 60 J ( whose) S 60 J ( ISR) S 60 J ( was) S 60 J ( featured) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 8) S 
1920 5940 P (schedules) S 60 J ( device) S 60 J ( I/O) S 60 J ( operations) S 60 J ( using) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( if) S 60 J ( it) S 60 J ( cannot) S 60 J ( claim) S 60 J ( an) S 
1920 6200 P (interrupt) S 60 J ( vector) S 60 J ( for) S 60 J ( a) S 60 J ( parallel) S 60 J ( port) S 60 J ( or) S 60 J ( if) S 60 J ( the) S 60 J ( driver) S 60 J ( must) S 60 J ( disable) S 60 J ( device) S 60 J ( interrupts) S 60 J ( due) S 60 J ( to) S 
1920 6460 P (interrupt) S 60 J ( storms.) S 
1920 6840 P (As) S 60 J ( shown) S 60 J ( in) S 60 J ( the) S 60 J ( ParStartCriticalFunctions) S 60 J ( routine) S 60 J ( in) S 60 J ( Chapter) S 60 J ( 10,) S 60 J ( if) S 60 J ( the) S 60 J ( driver) S 60 J ( is) S 60 J ( not) S 60 J ( using) S 60 J ( an) S 
1920 7100 P (interrupt,) S 60 J ( it) S 60 J ( sets) S 60 J ( a) S 60 J ( Boolean) S 60 J ( state) S 60 J ( variable) S 60 J ( \() S 0 12 F 0 12 F (UsingATimer) S 0 12 F 24 12 F (\)) S 60 J ( in) S 60 J ( the) S 60 J ( device) S 60 J ( extension) S 60 J ( to) S 60 J ( TRUE.) S 
1920 7360 P (Then,) S 60 J ( the) S 60 J ( ParStartCriticalFunctions) S 60 J ( routine) S 60 J ( calls) S 60 J ( ) S 0 12 F 24 12 F B (KeInsertQueueDpc) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 60 J ( driver-supplied) S 
1920 7620 P (DPC) S 60 J ( routine) S 60 J ( ParPolling.) S 60 J ( In) S 60 J ( turn,) S 60 J ( ParPolling) S 60 J ( causes) S 60 J ( itself) S 60 J ( to) S 60 J ( be) S 60 J ( called) S 60 J ( as) S 60 J ( a) S 60 J ( CustomTimerDpc) S 
1920 7880 P (routine,) S 60 J ( according) S 60 J ( to) S 60 J ( the) S 60 J ( interval\(s\)) S 60 J ( it) S 60 J ( passes) S 60 J ( in) S 60 J ( calls) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F (.) S 0 12 F 
PE 
1200 1220 P 10 12 F B (14-) S E B (8) S E B () S 927 J ( Kernel-mode) S 55 J ( Driver) S 55 J ( Design) S 55 J ( Guide) S E 
1200 2060 P 0 12 F 24 12 F (The) S 60 J ( ParPolling) S 60 J ( DPC) S 60 J ( is) S 60 J ( used) S 60 J ( to) S 60 J ( process) S 60 J ( write) S 60 J ( requests) S 60 J ( through) S 60 J ( a) S 60 J ( parallel) S 60 J ( port) S 60 J ( only) S 60 J ( if) S 60 J ( the) S 60 J ( driver) S 
1200 2320 P (could) S 60 J ( not) S 60 J ( claim) S 60 J ( an) S 60 J ( interrupt) S 60 J ( vector) S 60 J ( for) S 60 J ( that) S 60 J ( port) S 60 J ( or) S 60 J ( if) S 60 J ( interrupt) S 60 J ( storms) S 60 J ( caused) S 60 J ( the) S 60 J ( driver) S 60 J ( to) S 
1200 2580 P (disable) S 60 J ( interrupts) S 60 J ( on) S 60 J ( the) S 60 J ( parallel) S 60 J ( controller.) S 60 J ( Note) S 60 J ( that) S 60 J ( this) S 60 J ( CustomTimerDpc) S 60 J ( calls) S 60 J ( the) S 60 J ( driver's) S 
1200 2840 P (ISR,) S 60 J ( which) S 60 J ( is) S 60 J ( run) S 60 J ( at) S 60 J ( IRQL) S 60 J ( DISPATCH_LEVEL) S 60 J ( as) S 60 J ( an) S 60 J ( internal) S 60 J ( routine) S 60 J ( when) S 60 J ( it) S 60 J ( is) S 60 J ( called) S 60 J ( by) S 
1200 3100 P (ParPolling,) S 60 J ( as) S 60 J ( follows:) S 
1680 3620 P 0 12 F 0 12 F ({) S 
1680 3880 P () S 480 J ( PPAR_DEVICE_EXTENSION) S 144 J ( extension) S 144 J ( =) S 144 J ( Context;) S 
1680 4140 P () S 480 J ( ULONG) S 144 J ( callToIsr;) S 
1680 4400 P () S 480 J ( ULONG) S 144 J ( ticks;) S 
1680 4660 P () S 480 J ( :) S 144 J ( ) S 144 J ( ) S 144 J ( ) S 144 J ( ) S 144 J ( :) S 144 J ( //) S 144 J ( #define) S 144 J ( "polling") S 144 J ( ranges) S 
1680 4920 P () S 480 J ( ULONG) S 144 J ( maxTimesCallToIsr) S 144 J ( =) S 144 J ( MAXTIMESCALLTOISR;) S 
1680 5180 P () S 480 J ( ULONG) S 144 J ( maxTicksToWait) S 144 J ( =) S 144 J ( MAXTICKSTOWAIT;) S 
1680 5440 P (//) S 
1680 5700 P (//) S 144 J ( If) S 144 J ( there's) S 144 J ( no) S 144 J ( current) S 144 J ( IRP) S 144 J ( \(perhaps) S 144 J ( it) S 144 J ( was) S 144 J ( cancelled) S 
1680 5960 P (//) S 144 J ( somehow\),) S 144 J ( then) S 144 J ( simply) S 144 J ( get) S 144 J ( out.) S 
1680 6220 P (//) S 144 J ( This) S 144 J ( routine) S 144 J ( only) S 144 J ( does) S 144 J ( writes) S 144 J ( for) S 144 J ( the) S 144 J ( current) S 144 J ( IRP.) S 
1680 6480 P (//) S 
1680 6740 P () S 480 J ( if) S 144 J ( \(!extension->DeviceObject->CurrentIrp\)) S 144 J ( {) S 
1680 7000 P () S 480 J ( ) S 480 J ( return) S 144 J ( FALSE;) S 
1680 7260 P () S 480 J ( }) S 
1680 7520 P () S 480 J ( for) S 144 J ( \() S 
1680 7780 P () S 480 J ( ) S 480 J ( callToIsr) S 144 J ( =) S 144 J ( 0;) S 
1680 8040 P () S 480 J ( ) S 480 J ( callToIsr) S 144 J ( <) S 144 J ( maxTimesCallToIsr;) S 
1680 8300 P () S 480 J ( ) S 480 J ( callToIsr++\)) S 144 J ( {) S 
1680 8560 P (//) S 
1680 8820 P (//) S 144 J ( Wait) S 144 J ( up) S 144 J ( to) S 144 J ( MAXTICKSTOWAIT) S 144 J ( uS) S 144 J ( "ticks") S 144 J ( for) S 144 J ( each) S 144 J ( call) S 144 J ( to) S 
1680 9080 P (//) S 144 J ( the) S 144 J ( ISR) S 144 J ( for) S 144 J ( it) S 144 J ( to) S 144 J ( accomplish) S 144 J ( something.) S 
1680 9340 P (//) S 
1680 9600 P () S 480 J ( ) S 480 J ( for) S 144 J ( \() S 
1680 9860 P () S 480 J ( ) S 480 J ( ) S 480 J ( ticks) S 144 J ( =) S 144 J ( 0;) S 
1680 10120 P () S 480 J ( ) S 480 J ( ) S 480 J ( ticks) S 144 J ( <) S 144 J ( maxTicksToWait;) S 
1680 10380 P () S 480 J ( ) S 480 J ( ) S 480 J ( ticks++\)) S 144 J ( {) S 
1680 10640 P () S 480 J ( ) S 480 J ( ) S 480 J ( if) S 144 J ( \(ParInterruptServiceRoutine\() S 
1680 10900 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( extension->Interrupt,) S 
1680 11160 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( extension->DeviceObject\)\)) S 144 J ( {) S 0 12 F 
PE 
1920 1220 P 10 12 F B () S 2895 J ( IoTimer) S 55 J ( and) S 55 J ( CustomTimerDpc) S 55 J ( Routines) S 807 J ( 14-) S E B (9) S E B () S 720 J ( ) S E 
2400 2060 P 0 12 F 0 12 F (//) S 
2400 2320 P (//) S 144 J ( Well,) S 144 J ( something) S 144 J ( was) S 144 J ( done.) S 144 J ( If) S 144 J ( the) S 144 J ( timer) S 144 J ( count) S 144 J ( is) S 144 J ( -1,) S 
2400 2580 P (//) S 144 J ( it) S 144 J ( means) S 144 J ( an) S 144 J ( operation) S 144 J ( is) S 144 J ( being) S 144 J ( completed.) S 
2400 2840 P (//) S 144 J ( If) S 144 J ( so,) S 144 J ( just) S 144 J ( let) S 144 J ( the) S 144 J ( normal) S 144 J ( completion) S 144 J ( code) S 144 J ( do) S 144 J ( its) S 144 J ( work.) S 
2400 3100 P (//) S 
2400 3360 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( if) S 144 J ( \(extension->TimerCount) S 144 J ( ==) S 144 J ( -1\)) S 144 J ( {) S 
2400 3620 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( return) S 144 J ( FALSE;) S 
2400 3880 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( }) S 
2400 4140 P (//) S 
2400 4400 P (//) S 144 J ( Did) S 144 J ( something) S 144 J ( useful.) S 144 J ( Go) S 144 J ( for) S 144 J ( more.) S 144 J ( If) S 144 J ( this) S 144 J ( is) S 144 J ( the) S 144 J ( second) S 
2400 4660 P (//) S 144 J ( call) S 144 J ( to) S 144 J ( the) S 144 J ( ISR,) S 144 J ( adjust) S 144 J ( the) S 144 J ( amount) S 144 J ( of) S 144 J ( work) S 144 J ( to) S 144 J ( be) S 144 J ( done) S 
2400 4920 P (//) S 144 J ( in) S 144 J ( this) S 144 J ( routine,) S 144 J ( based) S 144 J ( on) S 144 J ( how) S 144 J ( long) S 144 J ( it) S 144 J ( took) S 144 J ( for) S 144 J ( the) S 
2400 5180 P (//) S 144 J ( second) S 144 J ( call) S 144 J ( to) S 144 J ( the) S 144 J ( ISR.) S 144 J ( Make) S 144 J ( this) S 144 J ( adjustment) S 144 J ( at) S 144 J ( the) S 
2400 5440 P (//) S 144 J ( SECOND) S 144 J ( call) S 144 J ( because) S 144 J ( of) S 144 J ( assumption) S 144 J ( that) S 144 J ( the) S 144 J ( printer) S 
2400 5700 P (//) S 144 J ( had) S 144 J ( some) S 144 J ( "extra") S 144 J ( time) S 144 J ( to) S 144 J ( move) S 144 J ( data) S 144 J ( from) S 144 J ( its) S 144 J ( own) S 144 J ( buffer) S 
2400 5960 P (//) S 144 J ( while) S 144 J ( the) S 144 J ( ParPolling) S 144 J ( timer) S 144 J ( object) S 144 J ( was) S 144 J ( sitting) S 144 J ( in) S 144 J ( the) S 
2400 6220 P (//) S 144 J ( system) S 144 J ( timer) S 144 J ( queue,) S 144 J ( causing) S 144 J ( the) S 144 J ( first) S 144 J ( call) S 144 J ( to) S 144 J ( the) S 144 J ( ISR) S 
2400 6480 P (//) S 144 J ( to) S 144 J ( executed) S 144 J ( unusually) S 144 J ( fast.) S 144 J ( The) S 144 J ( second) S 144 J ( call) S 144 J ( from) S 144 J ( here) S 
2400 6740 P (//) S 144 J ( should) S 144 J ( be) S 144 J ( a) S 144 J ( more) S 144 J ( reliable) S 144 J ( estimate) S 144 J ( of) S 144 J ( how) S 144 J ( much) S 144 J ( work) S 
2400 7000 P (//) S 144 J ( can) S 144 J ( be) S 144 J ( done) S 144 J ( per) S 144 J ( call) S 144 J ( to) S 144 J ( the) S 144 J ( ISR.) S 
2400 7260 P (//) S 
2400 7520 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( if) S 144 J ( \(callToIsr) S 144 J ( ==) S 144 J ( 1\)) S 144 J ( {) S 
2400 7780 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( if) S 144 J ( \(ticks) S 144 J ( <) S 144 J ( MINTICKSTOWAIT\)) S 144 J ( {) S 
2400 8040 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ticks) S 144 J ( =) S 144 J ( MINTICKSTOWAIT;) S 
2400 8300 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( }) S 
2400 8560 P (//) S 
2400 8820 P (//) S 144 J ( The) S 144 J ( maximum) S 144 J ( amount) S 144 J ( of) S 144 J ( time) S 144 J ( to) S 144 J ( spend) S 144 J ( in) S 144 J ( here) S 144 J ( is) S 
2400 9080 P (//) S 144 J ( MAXMIKESINHERE.) S 144 J ( Divide) S 144 J ( it) S 144 J ( by) S 144 J ( the) S 144 J ( number) S 144 J ( of) S 144 J ( ticks) S 
2400 9340 P (//) S 144 J ( it) S 144 J ( took) S 144 J ( for) S 144 J ( the) S 144 J ( second) S 144 J ( call) S 144 J ( to) S 144 J ( the) S 144 J ( ISR.) S 
2400 9600 P (//) S 
2400 9860 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( maxTicksToWait) S 144 J ( =) S 144 J ( ticks;) S 
2400 10120 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( maxTimesCallToIsr) S 144 J ( =) S 144 J ( MAXMIKESINHERE) S 144 J ( /) S 
2400 10380 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( maxTicksToWait;) S 
2400 10640 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( if) S 144 J ( \(maxTimesCallToIsr) S 144 J ( >) S 
2400 10900 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( MAXTIMESCALLTOISR\)) S 144 J ( {) S 0 12 F 
PE 
1200 1220 P 10 12 F B (14-) S E B (10) S E B () S 818 J ( Kernel-mode) S 55 J ( Driver) S 55 J ( Design) S 55 J ( Guide) S E 
1680 2060 P 0 12 F 0 12 F (//) S 
1680 2320 P (//) S 144 J ( If) S 144 J ( on) S 144 J ( a) S 144 J ( really) S 144 J ( fast) S 144 J ( machine,) S 144 J ( on) S 144 J ( a) S 144 J ( really) S 144 J ( fast) S 144 J ( printer,) S 
1680 2580 P (//) S 144 J ( or) S 144 J ( both,) S 144 J ( don't) S 144 J ( use) S 144 J ( up) S 144 J ( the) S 144 J ( full) S 144 J ( "slice.") S 144 J ( Instead,) S 144 J ( get) S 144 J ( out) S 
1680 2840 P (//) S 144 J ( after) S 144 J ( MAXTIMESCALLTOISR.) S 
1680 3100 P (//) S 
1680 3360 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( maxTimesCallToIsr) S 144 J ( =) S 144 J ( MAXTIMESCALLTOISR;) S 
1680 3620 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( }) S 
1680 3880 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( }) S 
1680 4140 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( goto) S 144 J ( doNextCallToIsr;) S 
1680 4400 P () S 480 J ( ) S 480 J ( ) S 480 J ( }) S 144 J ( else) S 144 J ( {) S 
1680 4660 P (//) S 
1680 4920 P (//) S 144 J ( Not) S 144 J ( ready) S 144 J ( yet.) S 144 J ( Stall) S 144 J ( for) S 144 J ( a) S 144 J ( microsecond.) S 
1680 5180 P (//) S 
1680 5440 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( KeStallExecutionProcessor\(1\);) S 
1680 5700 P () S 480 J ( ) S 480 J ( ) S 480 J ( }) S 
1680 5960 P () S 480 J ( ) S 480 J ( }) S 144 J ( //) S 144 J ( end) S 144 J ( for) S 144 J ( \(ticks...) S 
1680 6220 P (//) S 
1680 6480 P (//) S 144 J ( Couldn't) S 144 J ( do) S 144 J ( anything) S 144 J ( within) S 144 J ( the) S 144 J ( amount) S 144 J ( of) S 144 J ( time) S 
1680 6740 P (//) S 144 J ( calculated,) S 144 J ( so) S 144 J ( break) S 144 J ( out) S 144 J ( of) S 144 J ( the) S 144 J ( outer) S 144 J ( loop.) S 
1680 7000 P (//) S 
1680 7260 P () S 480 J ( ) S 480 J ( break;) S 
1680 7780 P () S 480 J ( ) S 480 J ( doNextCallToIsr:) S 144 J ( ;) S 
1680 8040 P () S 480 J ( }) S 144 J ( //) S 144 J ( end) S 144 J ( for) S 144 J ( \(callToIsr...) S 
1680 8300 P (//) S 
1680 8560 P (//) S 144 J ( Done) S 144 J ( trying) S 144 J ( to) S 144 J ( write) S 144 J ( characters) S 144 J ( for) S 144 J ( a) S 144 J ( while.) S 
1680 8820 P (//) S 144 J ( Queue) S 144 J ( a) S 144 J ( timer) S 144 J ( to) S 144 J ( call) S 144 J ( ParPolling) S 144 J ( again) S 144 J ( later.) S 
1680 9080 P (//) S 
1680 9340 P () S 480 J ( KeSetTimer\() S 
1680 9600 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( &extension->PollingTimer,) S 
1680 9860 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( extension->PollingDelayAmount,) S 
1680 10120 P () S 480 J ( ) S 480 J ( ) S 480 J ( ) S 480 J ( &extension->PollingDpc\);) S 
1680 10380 P () S 480 J ( return) S 144 J ( FALSE;) S 
1680 10640 P () S 480 J ( :) S 144 J ( ) S 144 J ( ) S 144 J ( ) S 144 J ( ) S 144 J ( :) S 144 J ( //) S 144 J ( #undef) S 144 J ( "polling") S 144 J ( bounds) S 
1680 10900 P (}) S 
1200 11280 P 0 12 F 24 12 F (Note) S 60 J ( that) S 60 J ( a) S 60 J ( driver) S 60 J ( must) S 60 J ( call) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( to) S 60 J ( set) S 60 J ( the) S 60 J ( driver-supplied) S 60 J ( timer) S 60 J ( object) S 60 J ( with) S 60 J ( a) S 60 J ( delay) S 
1200 11540 P (interval.) S 60 J ( Such) S 60 J ( an) S 60 J ( interval) S 60 J ( is) S 60 J ( in) S 60 J ( units) S 60 J ( of) S 60 J ( 100ns,) S 60 J ( with) S 60 J ( negative) S 60 J ( values) S 60 J ( indicating) S 60 J ( an) S 60 J ( interval) S 
1200 11800 P (relative) S 60 J ( to) S 60 J ( the) S 60 J ( current) S 60 J ( system) S 60 J ( time.) S 60 J ( When) S 60 J ( the) S 60 J ( given) S 60 J ( interval) S 60 J ( expires,) S 60 J ( the) S 60 J ( CustomTimerDpc) S 
1200 12060 P (routine) S 60 J ( can) S 60 J ( be) S 60 J ( called.) S 60 J ( Note) S 60 J ( also) S 60 J ( that) S 60 J ( the) S 60 J ( elapsed) S 60 J ( time) S 60 J ( until) S 60 J ( a) S 60 J ( driver's) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 
1200 12320 P (begins) S 60 J ( execution) S 60 J ( can) S 60 J ( be) S 60 J ( somewhat) S 60 J ( longer) S 60 J ( than) S 60 J ( the) S 60 J ( interval) S 60 J ( specified) S 60 J ( when) S 60 J ( the) S 60 J ( driver) S 60 J ( called) S 
1200 12580 P 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F (.) S 0 12 F 
PE 
1920 1220 P 10 12 F B () S 2895 J ( IoTimer) S 55 J ( and) S 55 J ( CustomTimerDpc) S 55 J ( Routines) S 698 J ( 14-) S E B (11) S E B () S 720 J ( ) S E 
1920 2060 P 0 12 F 24 12 F (Calling) S 60 J ( ) S 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 60 J ( same) S 60 J ( timer) S 60 J ( object) S 60 J ( has) S 60 J ( one) S 60 J ( of) S 60 J ( the) S 60 J ( following) S 60 J ( effects:) S 
1920 2380 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( If) S 60 J ( the) S 60 J ( most) S 60 J ( recently) S 60 J ( specified) S 60 J ( interval) S 60 J ( passed) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( has) S 60 J ( not) S 60 J ( yet) S 60 J ( expired,) S 60 J ( the) S 
2400 2640 P (timer) S 60 J ( object) S 60 J ( and) S 60 J ( the) S 60 J ( DPC) S 60 J ( object) S 60 J ( representing) S 60 J ( the) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( are) S 60 J ( dequeued) S 
2400 2900 P (and) S 60 J ( disabled.) S 60 J ( In) S 60 J ( other) S 60 J ( words,) S 60 J ( the) S 60 J ( call) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( cancels) S 60 J ( the) S 60 J ( call) S 60 J ( to) S 60 J ( the) S 60 J ( driver's) S 
2400 3160 P (CustomTimerDpc) S 60 J ( routine.) S 
1920 3480 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( If) S 60 J ( the) S 60 J ( most) S 60 J ( recently) S 60 J ( specified) S 60 J ( interval) S 60 J ( passed) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( is) S 60 J ( just) S 60 J ( about) S 60 J ( to) S 60 J ( expire) S 60 J ( when) S 
2400 3740 P 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( is) S 60 J ( called,) S 60 J ( the) S 60 J ( CustomTimerDpc) S 60 J ( might) S 60 J ( or) S 60 J ( might) S 60 J ( not) S 60 J ( be) S 60 J ( called,) S 60 J ( depending) S 
2400 4000 P (on) S 60 J ( whether) S 60 J ( a) S 60 J ( system) S 60 J ( clock) S 60 J ( interrupt) S 60 J ( causes) S 60 J ( the) S 60 J ( timer) S 60 J ( object) S 60 J ( to) S 60 J ( be) S 60 J ( removed) S 60 J ( from) S 60 J ( the) S 60 J ( timer) S 
2400 4260 P (queue) S 60 J ( before) S 60 J ( ) S 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( executes.) S 
1920 4640 P (Calling) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 60 J ( same) S 60 J ( timer) S 60 J ( object) S 60 J ( before) S 60 J ( the) S 60 J ( previously) S 60 J ( specified) S 60 J ( interval) S 
1920 4900 P (expires) S 60 J ( has) S 60 J ( all) S 60 J ( of) S 60 J ( the) S 60 J ( following) S 60 J ( effects:) S 
1920 5220 P 0 12 F 60 10 F B () S 72 J ( n) S E 0 12 F 24 12 F () S 256 J ( The) S 60 J ( most) S 60 J ( recent) S 60 J ( call) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F () S 60 J ( implicitly) S 60 J ( cancels) S 60 J ( the) S 60 J ( previously) S 60 J ( specified) S 60 J ( interval) S 
2400 5480 P (for) S 60 J ( the) S 60 J ( already) S 60 J ( queued) S 60 J ( timer) S 60 J ( object.) S 
1920 5800 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( The) S 60 J ( most) S 60 J ( recently) S 60 J ( specified) S 60 J ( interval) S 60 J ( is) S 60 J ( set) S 60 J ( in) S 60 J ( the) S 60 J ( timer) S 60 J ( object.) S 
1920 6120 P () S 72 J ( ) S 0 12 F 60 10 F B (n) S E 0 12 F 24 12 F () S 256 J ( The) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( is) S 60 J ( called) S 60 J ( ) S 0 12 F 24 12 F I (only) S 60 J ( once) S E 0 12 F 24 12 F (,) S 60 J ( after) S 60 J ( the) S 60 J ( most) S 60 J ( recently) S 60 J ( specified) S 
2400 6380 P (interval) S 60 J ( has) S 60 J ( expired.) S 
1920 6760 P (A) S 60 J ( driver) S 60 J ( writer) S 60 J ( who) S 60 J ( uses) S 60 J ( a) S 60 J ( CustomTimerDpc) S 60 J ( routine) S 60 J ( should) S 60 J ( exercise) S 60 J ( care) S 60 J ( in) S 60 J ( choosing) S 60 J ( the) S 
1920 7020 P (interval\(s\)) S 60 J ( the) S 60 J ( driver) S 60 J ( passes) S 60 J ( in) S 60 J ( calls) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeSetTimer) S E 0 12 F 24 12 F (.) S 60 J ( In) S 60 J ( addition,) S 60 J ( the) S 60 J ( driver) S 60 J ( writer) S 60 J ( must) S 
1920 7280 P (consider) S 60 J ( all) S 60 J ( possible) S 60 J ( effects) S 60 J ( of) S 60 J ( a) S 60 J ( call) S 60 J ( to) S 60 J ( ) S 0 12 F 24 12 F B (KeCancelTimer) S E 0 12 F 24 12 F () S 60 J ( with) S 60 J ( the) S 60 J ( same) S 60 J ( timer) S 60 J ( object) S 60 J ( from) S 60 J ( any) S 
1920 7540 P (driver) S 60 J ( routine) S 60 J ( that) S 60 J ( makes) S 60 J ( this) S 60 J ( call.) S 0 12 F 
PE PSe
