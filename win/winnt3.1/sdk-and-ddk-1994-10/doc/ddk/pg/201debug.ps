%!PS-Adobe-3.0
%%Creator: Windows PSCRIPT
%%Title: Microsoft Word - 201DEBUG.DOC
%%BoundingBox: 14 9 597 784
%%DocumentNeededResources: (atend)
%%DocumentSuppliedResources: (atend)
%%Pages: (atend)
%%BeginResource: procset Win35Dict 3 1
/Win35Dict 290 dict def Win35Dict begin/bd{bind def}bind def/in{72
mul}bd/ed{exch def}bd/ld{load def}bd/tr/translate ld/gs/gsave ld/gr
/grestore ld/M/moveto ld/L/lineto ld/rmt/rmoveto ld/rlt/rlineto ld
/rct/rcurveto ld/st/stroke ld/n/newpath ld/sm/setmatrix ld/cm/currentmatrix
ld/cp/closepath ld/ARC/arcn ld/TR{65536 div}bd/lj/setlinejoin ld/lc
/setlinecap ld/ml/setmiterlimit ld/sl/setlinewidth ld/scignore false
def/sc{scignore{pop pop pop}{0 index 2 index eq 2 index 4 index eq
and{pop pop 255 div setgray}{3{255 div 3 1 roll}repeat setrgbcolor}ifelse}ifelse}bd
/FC{bR bG bB sc}bd/fC{/bB ed/bG ed/bR ed}bd/HC{hR hG hB sc}bd/hC{
/hB ed/hG ed/hR ed}bd/PC{pR pG pB sc}bd/pC{/pB ed/pG ed/pR ed}bd/sM
matrix def/PenW 1 def/iPen 5 def/mxF matrix def/mxE matrix def/mxUE
matrix def/mxUF matrix def/fBE false def/iDevRes 72 0 matrix defaultmatrix
dtransform dup mul exch dup mul add sqrt def/fPP false def/SS{fPP{
/SV save def}{gs}ifelse}bd/RS{fPP{SV restore}{gr}ifelse}bd/EJ{gsave
showpage grestore}bd/#C{userdict begin/#copies ed end}bd/FEbuf 2 string
def/FEglyph(G  )def/FE{1 exch{dup 16 FEbuf cvrs FEglyph exch 1 exch
putinterval 1 index exch FEglyph cvn put}for}bd/SM{/iRes ed/cyP ed
/cxPg ed/cyM ed/cxM ed 72 100 div dup scale dup 0 ne{90 eq{cyM exch
0 eq{cxM exch tr -90 rotate -1 1 scale}{cxM cxPg add exch tr +90 rotate}ifelse}{cyP
cyM sub exch 0 ne{cxM exch tr -90 rotate}{cxM cxPg add exch tr -90
rotate 1 -1 scale}ifelse}ifelse}{pop cyP cyM sub exch 0 ne{cxM cxPg
add exch tr 180 rotate}{cxM exch tr 1 -1 scale}ifelse}ifelse 100 iRes
div dup scale 0 0 transform .25 add round .25 sub exch .25 add round
.25 sub exch itransform translate}bd/SJ{1 index 0 eq{pop pop/fBE false
def}{1 index/Break ed div/dxBreak ed/fBE true def}ifelse}bd/ANSIVec[
16#0/grave 16#1/acute 16#2/circumflex 16#3/tilde 16#4/macron 16#5/breve
16#6/dotaccent 16#7/dieresis 16#8/ring 16#9/cedilla 16#A/hungarumlaut
16#B/ogonek 16#C/caron 16#D/dotlessi 16#27/quotesingle 16#60/grave
16#7C/bar 16#82/quotesinglbase 16#83/florin 16#84/quotedblbase 16#85
/ellipsis 16#86/dagger 16#87/daggerdbl 16#88/circumflex 16#89/perthousand
16#8A/Scaron 16#8B/guilsinglleft 16#8C/OE 16#91/quoteleft 16#92/quoteright
16#93/quotedblleft 16#94/quotedblright 16#95/bullet 16#96/endash 16#97
/emdash 16#98/tilde 16#99/trademark 16#9A/scaron 16#9B/guilsinglright
16#9C/oe 16#9F/Ydieresis 16#A0/space 16#A1/exclamdown 16#A4/currency
16#A5/yen 16#A6/brokenbar 16#A7/section 16#A8/dieresis 16#A9/copyright
16#AA/ordfeminine 16#AB/guillemotleft 16#AC/logicalnot 16#AD/hyphen
16#AE/registered 16#AF/macron 16#B0/degree 16#B1/plusminus 16#B2/twosuperior
16#B3/threesuperior 16#B4/acute 16#B5/mu 16#B6/paragraph 16#B7/periodcentered
16#B8/cedilla 16#B9/onesuperior 16#BA/ordmasculine 16#BB/guillemotright
16#BC/onequarter 16#BD/onehalf 16#BE/threequarters 16#BF/questiondown
16#C0/Agrave 16#C1/Aacute 16#C2/Acircumflex 16#C3/Atilde 16#C4/Adieresis
16#C5/Aring 16#C6/AE 16#C7/Ccedilla 16#C8/Egrave 16#C9/Eacute 16#CA
/Ecircumflex 16#CB/Edieresis 16#CC/Igrave 16#CD/Iacute 16#CE/Icircumflex
16#CF/Idieresis 16#D0/Eth 16#D1/Ntilde 16#D2/Ograve 16#D3/Oacute 16#D4
/Ocircumflex 16#D5/Otilde 16#D6/Odieresis 16#D7/multiply 16#D8/Oslash
16#D9/Ugrave 16#DA/Uacute 16#DB/Ucircumflex 16#DC/Udieresis 16#DD/Yacute
16#DE/Thorn 16#DF/germandbls 16#E0/agrave 16#E1/aacute 16#E2/acircumflex
16#E3/atilde 16#E4/adieresis 16#E5/aring 16#E6/ae 16#E7/ccedilla 16#E8
/egrave 16#E9/eacute 16#EA/ecircumflex 16#EB/edieresis 16#EC/igrave
16#ED/iacute 16#EE/icircumflex 16#EF/idieresis 16#F0/eth 16#F1/ntilde
16#F2/ograve 16#F3/oacute 16#F4/ocircumflex 16#F5/otilde 16#F6/odieresis
16#F7/divide 16#F8/oslash 16#F9/ugrave 16#FA/uacute 16#FB/ucircumflex
16#FC/udieresis 16#FD/yacute 16#FE/thorn 16#FF/ydieresis ] def/reencdict
12 dict def/IsChar{basefontdict/CharStrings get exch known}bd/MapCh{dup
IsChar not{pop/bullet}if newfont/Encoding get 3 1 roll put}bd/MapDegree{16#b0
/degree IsChar{/degree}{/ring}ifelse MapCh}bd/MapBB{16#a6/brokenbar
IsChar{/brokenbar}{/bar}ifelse MapCh}bd/ANSIFont{reencdict begin/newfontname
ed/basefontname ed FontDirectory newfontname known not{/basefontdict
basefontname findfont def/newfont basefontdict maxlength dict def basefontdict{exch
dup/FID ne{dup/Encoding eq{exch dup length array copy newfont 3 1 roll
put}{exch newfont 3 1 roll put}ifelse}{pop pop}ifelse}forall newfont
/FontName newfontname put 127 1 159{newfont/Encoding get exch/bullet
put}for ANSIVec aload pop ANSIVec length 2 idiv{MapCh}repeat MapDegree
MapBB newfontname newfont definefont pop}if newfontname end}bd/SB{FC
/ULlen ed/str ed str length fBE not{dup 1 gt{1 sub}if}if/cbStr ed
/dxGdi ed/y0 ed/x0 ed str stringwidth dup 0 ne{/y1 ed/x1 ed y1 y1
mul x1 x1 mul add sqrt dxGdi exch div 1 sub dup x1 mul cbStr div exch
y1 mul cbStr div}{exch abs neg dxGdi add cbStr div exch}ifelse/dyExtra
ed/dxExtra ed x0 y0 M fBE{dxBreak 0 BCh dxExtra dyExtra str awidthshow}{dxExtra
dyExtra str ashow}ifelse fUL{x0 y0 M dxUL dyUL rmt ULlen fBE{Break
add}if 0 mxUE transform gs rlt cyUL sl [] 0 setdash st gr}if fSO{x0
y0 M dxSO dySO rmt ULlen fBE{Break add}if 0 mxUE transform gs rlt cyUL
sl [] 0 setdash st gr}if n/fBE false def}bd/font{/name ed/Ascent ed
0 ne/fT3 ed 0 ne/fSO ed 0 ne/fUL ed/Sy ed/Sx ed 10.0 div/ori ed -10.0
div/esc ed/BCh ed name findfont/xAscent 0 def/yAscent Ascent def/ULesc
esc def ULesc mxUE rotate pop fT3{/esc 0 def xAscent yAscent mxUE transform
/yAscent ed/xAscent ed}if [Sx 0 0 Sy neg xAscent yAscent] esc mxE
rotate mxF concatmatrix makefont setfont [Sx 0 0 Sy neg 0 Ascent] mxUE
mxUF concatmatrix pop fUL{currentfont dup/FontInfo get/UnderlinePosition
known not{pop/Courier findfont}if/FontInfo get/UnderlinePosition get
1000 div 0 exch mxUF transform/dyUL ed/dxUL ed}if fSO{0 .3 mxUF transform
/dySO ed/dxSO ed}if fUL fSO or{currentfont dup/FontInfo get/UnderlineThickness
known not{pop/Courier findfont}if/FontInfo get/UnderlineThickness get
1000 div Sy mul/cyUL ed}if}bd/min{2 copy gt{exch}if pop}bd/max{2 copy
lt{exch}if pop}bd/CP{/ft ed{{ft 0 eq{clip}{eoclip}ifelse}stopped{currentflat
1 add setflat}{exit}ifelse}loop}bd/patfont 10 dict def patfont begin
/FontType 3 def/FontMatrix [1 0 0 -1 0 0] def/FontBBox [0 0 16 16]
def/Encoding StandardEncoding def/BuildChar{pop pop 16 0 0 0 16 16
setcachedevice 16 16 false [1 0 0 1 .25 .25]{pat}imagemask}bd end/p{
/pat 32 string def{}forall 0 1 7{dup 2 mul pat exch 3 index put dup
2 mul 1 add pat exch 3 index put dup 2 mul 16 add pat exch 3 index
put 2 mul 17 add pat exch 2 index put pop}for}bd/pfill{/PatFont patfont
definefont setfont/ch(AAAA)def X0 64 X1{Y1 -16 Y0{1 index exch M ch
show}for pop}for}bd/vert{X0 w X1{dup Y0 M Y1 L st}for}bd/horz{Y0 w
Y1{dup X0 exch M X1 exch L st}for}bd/fdiag{X0 w X1{Y0 M X1 X0 sub dup
rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup rlt st}for}bd/bdiag{X0 w
X1{Y1 M X1 X0 sub dup neg rlt st}for Y0 w Y1{X0 exch M Y1 Y0 sub dup
neg rlt st}for}bd/AU{1 add cvi 15 or}bd/AD{1 sub cvi -16 and}bd/SHR{pathbbox
AU/Y1 ed AU/X1 ed AD/Y0 ed AD/X0 ed}bd/hfill{/w iRes 37.5 div round
def 0.1 sl [] 0 setdash n dup 0 eq{horz}if dup 1 eq{vert}if dup 2 eq{fdiag}if
dup 3 eq{bdiag}if dup 4 eq{horz vert}if 5 eq{fdiag bdiag}if}bd/F{/ft
ed fm 256 and 0 ne{gs FC ft 0 eq{fill}{eofill}ifelse gr}if fm 1536
and 0 ne{SHR gs HC ft CP fm 1024 and 0 ne{/Tmp save def pfill Tmp restore}{fm
15 and hfill}ifelse gr}if}bd/S{PenW sl PC st}bd/m matrix def/GW{iRes
12 div PenW add cvi}bd/DoW{iRes 50 div PenW add cvi}bd/DW{iRes 8 div
PenW add cvi}bd/SP{/PenW ed/iPen ed iPen 0 eq iPen 6 eq or{[] 0 setdash}if
iPen 1 eq{[DW GW] 0 setdash}if iPen 2 eq{[DoW GW] 0 setdash}if iPen
3 eq{[DW GW DoW GW] 0 setdash}if iPen 4 eq{[DW GW DoW GW DoW GW] 0
setdash}if}bd/E{m cm pop tr scale 1 0 moveto 0 0 1 0 360 arc cp m sm}bd
/AG{/sy ed/sx ed sx div 4 1 roll sy div 4 1 roll sx div 4 1 roll sy
div 4 1 roll atan/a2 ed atan/a1 ed sx sy scale a1 a2 ARC}def/A{m cm
pop tr AG m sm}def/P{m cm pop tr 0 0 M AG cp m sm}def/RRect{n 4 copy
M 3 1 roll exch L 4 2 roll L L cp}bd/RRCC{/r ed/y1 ed/x1 ed/y0 ed/x0
ed x0 x1 add 2 div y0 M x1 y0 x1 y1 r arcto 4{pop}repeat x1 y1 x0 y1
r arcto 4{pop}repeat x0 y1 x0 y0 r arcto 4{pop}repeat x0 y0 x1 y0 r
arcto 4{pop}repeat cp}bd/RR{2 copy 0 eq exch 0 eq or{pop pop RRect}{2
copy eq{pop RRCC}{m cm pop/y2 ed/x2 ed/ys y2 x2 div 1 max def/xs x2
y2 div 1 max def/y1 exch ys div def/x1 exch xs div def/y0 exch ys div
def/x0 exch xs div def/r2 x2 y2 min def xs ys scale x0 x1 add 2 div
y0 M x1 y0 x1 y1 r2 arcto 4{pop}repeat x1 y1 x0 y1 r2 arcto 4{pop}repeat
x0 y1 x0 y0 r2 arcto 4{pop}repeat x0 y0 x1 y0 r2 arcto 4{pop}repeat
m sm cp}ifelse}ifelse}bd/PP{{rlt}repeat}bd/OB{gs 0 ne{7 3 roll/y ed
/x ed x y translate ULesc rotate x neg y neg translate x y 7 -3 roll}if
sc B fill gr}bd/B{M/dy ed/dx ed dx 0 rlt 0 dy rlt dx neg 0 rlt cp}bd
/CB{B clip n}bd/ErrHandler{errordict dup maxlength exch length gt
dup{errordict begin}if/errhelpdict 12 dict def errhelpdict begin/stackunderflow(operand stack underflow)def
/undefined(this name is not defined in a dictionary)def/VMerror(you have used up all the printer's memory)def
/typecheck(operator was expecting a different type of operand)def
/ioerror(input/output error occured)def end{end}if errordict begin
/handleerror{$error begin newerror{/newerror false def showpage 72
72 scale/x .25 def/y 9.6 def/Helvetica findfont .2 scalefont setfont
x y moveto(Offending Command = )show/command load{dup type/stringtype
ne{(max err string)cvs}if show}exec/y y .2 sub def x y moveto(Error = )show
errorname{dup type dup( max err string )cvs show( : )show/stringtype
ne{( max err string )cvs}if show}exec errordict begin errhelpdict errorname
known{x 1 add y .2 sub moveto errhelpdict errorname get show}if end
/y y .4 sub def x y moveto(Stack =)show ostack{/y y .2 sub def x 1
add y moveto dup type/stringtype ne{( max err string )cvs}if show}forall
showpage}if end}def end}bd end
%%EndResource
/SVDoc save def
%%EndProlog
%%BeginSetup
Win35Dict begin
ErrHandler
statusdict begin 0 setjobtimeout end
statusdict begin statusdict /jobname (Microsoft Word - 201DEBUG.DOC) put end
/oldDictCnt countdictstack def {}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
/oldDictCnt countdictstack def {letter
}stopped 
{ countdictstack oldDictCnt lt { Win35Dict begin } 
{1 1 countdictstack oldDictCnt sub {pop end } for } ifelse } if 
[{ }
/exec load currenttransfer /exec load] cvx settransfer
%%EndSetup
%%Page: 1 1
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 50 50 0 0 0 45 /Times-Roman /font32 ANSIFont font
0 0 0 fC
346 491 33 (C) 58 SB
404 491 36 (H) 61 SB
465 491 35 (A) 60 SB
525 491 28 (P) 53 SB
578 491 31 (T) 56 SB
634 491 31 (E) 56 SB
690 491 33 (R) 58 SB
748 491 13 ( ) 38 SB
786 491 25 (1) 50 SB
32 0 0 100 100 0 0 0 93 /Helvetica-Narrow-Bold /font16 ANSIFont font
gs 1550 513 346 604 CB
346 602 1250 (Debugging Windows NT Drivers) 1250 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1117 247 (The Microsoft) 247 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
968 1131 22 (\256) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
990 1117 130 ( Win32) 130 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
1120 1123 28 (\231) 28 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1148 1117 859 ( SDK provides the kernel debugger for debugging) 859 SB
721 1167 170 (Microsoft) 170 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
891 1181 22 (\256) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
913 1167 245 ( Windows NT) 245 SB
32 0 0 29 29 0 0 0 26 /Times-Roman /font32 ANSIFont font
1158 1173 28 (\231) 28 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1186 1167 869 ( kernel-mode drivers and the NTSD for debugging) 869 SB
721 1217 1435 (Win32 user-mode drivers. The kernel debugger requires a serial connection to send) 1435 SB
721 1267 1264 (messages between a Windows NT debugger machine, which provides the) 1264 SB
721 1317 1409 (debugger\222s user interface, and a Windows NT target machine, which executes the) 1409 SB
721 1367 1445 (code being debugged. NTSD does not require a separate debugger machine, but one) 1445 SB
721 1417 1405 (is typically used in conjunction with the kernel debugger to allow interaction with) 1405 SB
721 1467 1162 (NTSD from a remote machine during the driver debugging process.) 1162 SB
721 1550 1388 (The command syntax for the kernel debugger and NTSD is described in detail in) 1388 SB
721 1600 1360 (the Win32 SDK documentation. This chapter provides the following additional) 1360 SB
721 1650 595 (information for debugging drivers:) 595 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1727 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1733 1328 (Setting up the serial connection between the debugger machine and the target) 1328 SB
779 1783 144 (machine) 144 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1844 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1850 1310 (Setting up the debugging environments on the target and debugger machines) 1310 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1911 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1917 932 (Writing and compiling a driver to facilitate debugging) 932 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1978 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1984 488 (Starting the kernel debugger) 488 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2045 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2051 920 (Using NTSD in conjunction with the kernel debugger) 920 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2112 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2118 957 (Debugging tips for drivers on MIPS and Intel platforms) 957 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2179 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2185 1184 (Using additional kernel debugger commands not covered in the SDK) 1184 SB
779 2235 252 (documentation) 252 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2296 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2302 975 (Extending the command interface of the kernel debugger) 975 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 1 def
/wp$fpage (1) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Roman
%%Page: 2 2
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 18 (2) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 491 1101 (1.1  Quick Kernel Debugger Setup) 1101 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 605 1388 (This section describes how to quickly set up and use the kernel debugger. It does) 1388 SB
634 655 1444 (not describe all possible options, but provides references to the sections that contain) 1444 SB
634 705 1447 (additional information. The target machine refers to the system running the driver to) 1447 SB
634 755 1403 (be tested; the debugger machine refers to the system running the kernel debugger.) 1403 SB
32 0 0 50 50 0 0 0 48 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 850 313 (Hardware Setup) 313 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 917 33 (1.) 33 SB
692 917 1353 (Connect a null-modem serial cable to the COM1 port of the debugger machine) 1353 SB
692 967 1224 (and to the highest numbered serial port of the target machine. For more) 1224 SB
692 1017 494 (information, see Section 2.1.) 494 SB
32 0 0 50 50 0 0 0 48 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1113 299 (Software Setup) 299 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1180 33 (1.) 33 SB
692 1180 150 (Install a ) 150 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
842 1180 144 (checked) 144 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
986 1180 886 ( build of Windows NT on the target machine and a ) 886 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1872 1180 69 (free) 69 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1941 1180 99 ( build) 99 SB
692 1230 1329 (of Windows NT on the debugger machine. For more information, see Section) 1329 SB
692 1280 99 (2.2.1.) 99 SB
634 1347 33 (2.) 33 SB
692 1347 609 (On the debugger machine, create a ) 609 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1301 1347 120 (\\debug) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1421 1347 662 ( directory. Into this directory, copy the) 662 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
692 1397 215 (ntoskrnl.exe) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
907 1397 22 (, ) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
929 1397 113 (hal.dll) 113 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1042 1397 95 (, and ) 95 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1137 1397 87 (*.sys) 87 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1224 1397 712 ( files from the target machine. The kernel) 712 SB
692 1447 1328 (debugger gets debugging symbols from these files. For more information, see) 1328 SB
692 1497 238 (Section 2.2.3.) 238 SB
634 1564 33 (3.) 33 SB
692 1564 1118 (On the debugger machine, copy the kernel debugger executable \() 1118 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1810 1564 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
2001 1564 47 ( or) 47 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
692 1614 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
888 1614 1179 (, depending on the platform of the target machine\) into a directory in) 1179 SB
692 1664 187 (the PATH.) 187 SB
634 1731 33 (4.) 33 SB
692 1731 957 (On the target machine, enable debugging by modifying ) 957 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1649 1731 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1784 1731 280 (, a hidden, read-) 280 SB
692 1781 1352 (only, system file in the root directory of the disk partition into which Windows) 1352 SB
692 1831 418 (NT is installed. Use the ) 418 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1110 1830 108 (attrib) 108 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1218 1831 571 ( command to enable writing to it:) 571 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
692 1904 480 (attrib -r -h -s boot.ini) 480 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1990 699 (In the [operating systems] section of the ) 699 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1391 1990 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1526 1990 552 ( file, add the /DEBUG option to) 552 SB
692 2040 352 (a Windows NT line:) 352 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
692 2113 380 ([operating systems]) 380 SB
692 2159 1260 (multi\(0\)disk\(0\)rdisk\(0\)partition\(1\)\\WINDOWS="Windows NT" /DEBUG) 1260 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2245 696 (For more information, see Section 2.2.2.) 696 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 2 def
/wp$fpage (2) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 3 3
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1316 378 133 (Chapter ) 133 SB
1449 378 18 (1) 18 SB
1467 378 535 (    Debugging Windows NT Drivers) 535 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (1) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (3) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 50 50 0 0 0 48 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
721 495 570 (Starting the Kernel Debugger) 570 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 562 33 (1.) 33 SB
779 562 156 (Create a ) 156 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
935 562 109 (kd.bat) 109 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1044 562 1070 ( batch file to set up the debugger\222s environment variables. For) 1070 SB
779 612 157 (example:) 157 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
779 685 180 (@echo off) 180 SB
779 731 220 (mode 80,500) 220 SB
779 777 560 (SET _NT_SYMBOL_PATH=c:\\debug) 560 SB
779 823 1040 (SET _NT_DEBUG_LOG_FILE_OPEN=%_NT_SYMBOL_PATH%\\kd.log) 1040 SB
779 869 240 (i386kd -v %1) 240 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 955 630 (For more information, see Section 4.) 630 SB
721 1022 33 (2.) 33 SB
779 1022 1131 (On the debugger machine, run the batch file to start the debugger.) 1131 SB
721 1089 33 (3.) 33 SB
779 1089 1255 (Wait for the \223KD: waiting to connect...\224 string to appear in the debugger) 1255 SB
779 1139 692 (window, then reboot the target machine.) 692 SB
721 1206 33 (4.) 33 SB
779 1206 587 (To break into the debugger, press ) 587 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1366 1214 131 (CTRL+C) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1497 1206 651 ( on the debugger machine or press the) 651 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
779 1264 111 (SYSRQ) 111 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
890 1256 1197 ( key on the target machine. To continue execution, type \221g\222 at the kd>) 1197 SB
779 1306 133 (prompt.) 133 SB
721 1373 33 (5.) 33 SB
779 1373 1386 (For a description of kernel debugger commands, see Section 6, and the debugger) 1386 SB
779 1423 469 (documentation in the SDK.) 469 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1527 683 (1.2  Kernel Debugger) 683 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1641 1340 (The Kernel Debugger has two components: the kernel debugger client and the) 1340 SB
721 1691 1311 (kernel debugger server. The client component is built into all versions of the) 1311 SB
721 1741 1409 (Windows NT operating system kernel. It can be enabled or disabled, and during a) 1409 SB
721 1791 1434 (debugging session, it must be enabled on the target machine. The server component) 1434 SB
721 1841 418 (is a Win32 application \() 418 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1139 1841 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1330 1841 58 ( or ) 58 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1388 1841 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1584 1841 536 (\) that executes on the debugger) 536 SB
721 1891 1397 (machine and provides the debugger\222s user interface. The client sends information) 1397 SB
721 1941 1338 (packets to the server when a debug event occurs on the target machine. It also) 1338 SB
721 1991 1413 (handles requests from the server \(for example, to examine the contents of memory) 1413 SB
721 2041 1360 (on the target machine\). The remainder of this chapter refers to the server as the) 1360 SB
721 2091 1200 (kernel debugger, and refers to the client as the kernel debugger client.) 1200 SB
721 2174 1411 (There are two different versions of the kernel debugger: one for debugging MIPS-) 1411 SB
721 2224 410 (based target platforms \() 410 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1131 2224 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1327 2224 490 (\) and another for debugging ) 490 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1817 2224 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1837 2224 268 (86-based target) 268 SB
721 2274 190 (platforms \() 190 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
911 2274 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1102 2274 1043 (\). For each of these versions, there is an executable that runs) 1043 SB
721 2324 1290 (on MIPS debugger machines and an executable that runs on Intel debugger) 1290 SB
721 2374 1401 (machines. Therefore, you can use a MIPS debugger machine to debug a driver on) 1401 SB
721 2424 675 (an Intel target machine, and vice versa.) 675 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 3 def
/wp$fpage (3) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 4 4
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 18 (4) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 492 603 (1.2.1  Hardware Setup) 603 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 590 1438 (The kernel debugger requires two systems running Windows NT that are connected) 1438 SB
634 643 1421 (by a serial cable. The default setup is to connect the cable to the COM1 serial port) 1421 SB
634 696 1323 (of the debugger machine and to the highest numbered serial port of the target) 1323 SB
634 749 1442 (machine. The kernel debugger automatically sets the communications parameters of) 1442 SB
634 802 462 (the serial ports that it uses.) 462 SB
634 888 1389 (The cable is the same as is used for debugging Windows 3.1 code. The wiring of) 1389 SB
634 941 1314 (the cable connects Transmit to Receive, Receive to Transmit, and Ground to) 1314 SB
634 994 1425 (Ground. For 9-pin and 25-pin D-subminiature connectors, the cable connects pin 2) 1425 SB
634 1047 717 (to pin 3, pin 3 to pin 2, and pin 7 to pin 7.) 717 SB
634 1133 1450 (On the target machine, the kernel debugger uses the highest-numbered serial port by) 1450 SB
634 1186 1336 (default. For example, on a machine with two serial ports, connect the cable to) 1336 SB
634 1239 308 (COM2. On some ) 308 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
942 1239 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
962 1239 692 (86-based machines, you can modify the ) 692 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1654 1239 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1789 1239 266 ( file to override) 266 SB
634 1292 1428 (the default serial port on the target machine. This procedure is described in Section) 1428 SB
634 1345 716 (2.2.2. For MIPS-based platforms and for ) 716 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1350 1345 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1370 1345 658 (86-based platforms that do not use the) 658 SB
634 1398 158 (standard ) 158 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
792 1398 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
812 1398 1222 (86 HAL, there is no way to override the target machine\222s default serial) 1222 SB
634 1451 80 (port.) 80 SB
634 1537 1293 (On the debugger machine, the kernel debugger uses COM1 by default. The) 1293 SB
634 1590 1381 (_NT_DEBUG_PORT environment variable causes the kernel debugger to use a) 1381 SB
634 1643 843 (different serial port, as in the following example:) 843 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1733 460 (set _NT_DEBUG_PORT=COM2) 460 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1844 583 (1.2.2  Software Setup) 583 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1942 1442 (To use the kernel debugger, the target machine must be a Windows NT system with) 1442 SB
634 1995 1389 (the debugger component enabled, and the debugger machine must be a Windows) 1389 SB
634 2048 1030 (NT system running a version of the kernel debugger \(either ) 1030 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1664 2048 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1855 2048 47 ( or) 47 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
634 2101 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
830 2101 1139 (, depending on the platform being debugged\). Typically, the target) 1139 SB
634 2154 1384 (machine runs the checked build of Windows NT, whereas the debugger machine) 1384 SB
634 2207 325 (runs the free build.) 325 SB
634 2293 1005 (This section discusses the following software setup issues:) 1005 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2371 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2377 1082 (Checked versus free versions of Windows NT system software) 1082 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2438 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2444 1344 (Enabling and disabling the kernel debugger client component of Windows NT) 1344 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2505 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2511 1383 (Mirroring the target machine\222s binaries to make debugging symbols available to) 1383 SB
692 2561 377 (the debugger machine) 377 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 4 def
/wp$fpage (4) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font MSIcons2
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 5 5
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1316 378 133 (Chapter ) 133 SB
1449 378 18 (1) 18 SB
1467 378 535 (    Debugging Windows NT Drivers) 535 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (1) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (5) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
721 493 1194 (1.2.2.1  Checked and Free Builds of Windows NT) 1194 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 575 1404 (The CD distributed with the DDK includes two versions, checked and free, of the) 1404 SB
721 625 1408 (binaries that make up the Windows NT operating system. The DDK release notes) 1408 SB
721 675 876 (describe the procedures for installing each version.) 876 SB
721 758 1383 (The free version is shipped as the Windows NT product to be used by end users.) 1383 SB
721 808 1434 (Free binaries contain minimal debugging symbols such as function entry points and) 1434 SB
721 858 288 (global variables.) 288 SB
721 941 1446 (The checked version is shipped only with the DDK for use in debugging drivers and) 1446 SB
721 991 1428 (other system code. Checked binaries contain error checking, argument verification,) 1428 SB
721 1041 1395 (and system debugging code not present in the free version. Checked binaries also) 1395 SB
721 1091 1405 (contain additional symbolic information, such as source code line numbers. Much) 1405 SB
721 1141 1025 (of the additional code in the checked build is in the form of ) 1025 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1746 1140 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1916 1141 211 ( macros that) 211 SB
721 1191 1371 (test an expression. If the expression evaluates to FALSE, the macro generates a) 1371 SB
721 1241 1242 (kernel debugger error message and breaks into the debugger, so you can) 1242 SB
721 1291 1408 (immediately determine the cause and location of the error. For example, recursive) 1408 SB
721 1341 1429 (acquisition of a spin lock \(where a thread tries to acquire a spin lock that it already) 1429 SB
721 1391 1380 (owns\) hangs the system on a free build, but generates a breakpoint on a checked) 1380 SB
721 1441 129 (system.) 129 SB
721 1524 1363 (Both checked and free versions of the operating system include the code for the) 1363 SB
721 1574 1354 (kernel debugger client. This means that you can use either system on the target) 1354 SB
721 1624 1389 (machine during debugging, although the checked version is recommended during) 1389 SB
721 1674 681 (the initial stages of driver development.) 681 SB
721 1757 1418 (The free and checked versions of Windows NT are intended to be used as follows:) 1418 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1834 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1840 1287 (Use the free system to develop and build your driver, because performance) 1287 SB
779 1890 1274 (suffers when running the checked system due to the additional code that is) 1274 SB
779 1940 163 (executed.) 163 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2001 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2007 1252 (Use the free system on the debugger machine \(the one running the kernel) 1252 SB
779 2057 185 (debugger\).) 185 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2118 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2124 1361 (Use the checked system on the target machine for testing and debugging during) 1361 SB
779 2174 673 (the initial phase of driver development.) 673 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2235 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2241 1352 (Use the free system on the target machine for testing and debugging during the) 1352 SB
779 2291 824 (final phase of driver development. Final testing ) 824 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1603 2291 83 (must) 83 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1686 2291 357 ( be done using a free) 357 SB
779 2341 982 (version of the driver on the free version of Windows NT.) 982 SB
721 2441 1433 (The extra protection of the checked build is not without cost. The checked builds of) 1433 SB
721 2491 1325 (Windows NT are larger \(consume more memory and disk space\) because the) 1325 SB
721 2541 1347 (executables contain additional symbolic debugging information and additional) 1347 SB
721 2591 1372 (parameter checking code. Checked builds are also slower \(performance suffers\)) 1372 SB
721 2641 1363 (because of the additional code being executed. The additional code changes the) 1363 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 5 def
/wp$fpage (5) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 6 6
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 18 (6) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 1273 (amount of time required to perform various operations, which can conceal) 1273 SB
634 546 1348 (synchronization problems \(such as race conditions\) that become apparent only) 1348 SB
634 596 446 (when using the free build.) 446 SB
634 679 1446 (Running the checked build of Windows NT with the debugger disabled can result in) 1446 SB
634 729 1317 (an unexpected system shutdown. This is because the additional checks in the) 1317 SB
634 779 1421 (checked build increase the likelihood of encountering a breakpoint. A kernel-mode) 1421 SB
634 829 1402 (breakpoint with the debugger disabled is an unhandled kernel-mode exception, so) 1402 SB
634 879 346 (the system calls the ) 346 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
980 878 249 (KeBugCheck) 249 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1229 879 720 ( function and shuts down. However, if the) 720 SB
634 929 1436 (debugger is enabled, a breakpoint freezes all threads in the target system except for) 1436 SB
634 979 1371 (the debugger component itself, which tries to send debugging information to the) 1371 SB
634 1029 1373 (kernel debugger. If the debugger is enabled on the target machine, you can even) 1373 SB
634 1079 1235 (connect to a kernel debugger after the breakpoint has been encountered.) 1235 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1176 1086 (1.2.2.2  Enabling the Kernel Debugger Client) 1086 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1258 1422 (Both checked and free versions of Windows NT include the kernel debugger client) 1422 SB
634 1308 1282 (component that sends debugging information to the kernel debugger on the) 1282 SB
634 1358 1309 (debugger machine. By default, this component is disabled and no debugging) 1309 SB
634 1408 1231 (information is sent. The procedure for enabling the debugger differs on ) 1231 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1865 1408 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1885 1408 158 (86-based) 158 SB
634 1458 474 (and MIPS-based platforms.) 474 SB
634 1541 1444 (Enable the debugger client only on the target machine. Enabling the debugger client) 1444 SB
634 1591 1430 (on the debugger machine can cause the kernel debugger to fail if it tries to open the) 1430 SB
634 1641 891 (same serial port as that used by the debugger client.) 891 SB
32 0 0 50 50 0 0 0 48 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1736 495 (Intel x86-based platforms) 495 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1803 468 (To enable the debugger on ) 468 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1102 1803 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1122 1803 550 (86-based platforms, modify the ) 550 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1672 1803 146 (boot.ini ) 146 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1818 1803 176 (file. It is a) 176 SB
634 1853 1423 (hidden, read-only, system file located in the root directory of the disk partition into) 1423 SB
634 1903 885 (which Windows NT is installed. Use the following ) 885 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1519 1902 108 (attrib) 108 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1627 1903 345 ( command to enable) 345 SB
634 1953 215 (writing to it:) 215 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 2042 480 (attrib -r -h -s boot.ini) 480 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2128 667 (The [operating systems] section of the ) 667 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1301 2128 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1436 2128 634 ( file lists the various boot options for) 634 SB
634 2178 1284 (the machine. Add the /DEBUG option to a Windows NT line to enable the) 1284 SB
634 2228 754 (debugger. The following example is from a ) 754 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1388 2228 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1523 2228 506 ( file that enables several boot) 506 SB
634 2278 1329 (options, including: Windows NT with debugging enabled, Windows NT with) 1329 SB
634 2328 1430 (debugging disabled, and MS-DOS. At startup, the user can select from a menu that) 1430 SB
634 2378 1362 (displays the various boot options. The string \223[debugger enabled]\224 is appended) 1362 SB
634 2428 1162 (automatically to any boot option for which the debugger is enabled.) 1162 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 2517 380 ([operating systems]) 380 SB
634 2563 1260 (multi\(0\)disk\(0\)rdisk\(0\)partition\(1\)\\WINDOWS="Windows NT" /DEBUG) 1260 SB
634 2609 1300 (multi\(0\)disk\(0\)rdisk\(0\)partition\(1\)\\WINDOWS="Windows NT" /NODEBUG) 1300 SB
634 2655 240 (c:\\="MS-DOS") 240 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 6 def
/wp$fpage (6) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 7 7
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1316 378 133 (Chapter ) 133 SB
1449 378 18 (1) 18 SB
1467 378 535 (    Debugging Windows NT Drivers) 535 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (1) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (7) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 542 164 (On some ) 164 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
885 542 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
905 542 1145 (86-based machines, you can specify three additional Windows NT) 1145 SB
721 592 220 (options on a ) 220 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
941 592 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1076 592 895 ( operating system line. These are supported only on ) 895 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1971 592 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1991 592 158 (86-based) 158 SB
721 642 1419 (platforms that use the standard HAL. If either /DEBUGPORT or /BAUDRATE is) 1419 SB
721 692 1387 (specified, the debugger is enabled even if the /DEBUG option is not specified. If) 1387 SB
721 742 1324 (/NODEBUG is specified, the /DEBUGPORT and /BAUDRATE options are) 1324 SB
721 792 141 (ignored.) 141 SB
721 875 299 (/DEBUGPORT=) 299 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1020 875 77 (Port) 77 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 925 1017 (Specifies the serial port used by the kernel debugger client.) 1017 SB
721 992 273 (/BAUDRATE=) 273 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
994 992 174 (BaudRate) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1042 1003 (Specifies the baud rate used by the kernel debugger client.) 1003 SB
721 1109 244 (/MAXMEM=) 244 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
965 1109 172 (SizeInMB) 172 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1159 1241 (Specifies the amount of memory to be made available to the system. For) 1241 SB
779 1209 1342 (example, this enables simulating an 8-MB environment on a 16-MB machine.) 1342 SB
721 1309 1280 (For example, the following line boots Windows NT in a simulated 10-MB) 1280 SB
721 1359 1011 (environment, with the debugger enabled and using COM1:) 1011 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1448 1140 (c:\\windows\\="Windows NT: 10MB" /DEBUGPORT=COM1 /MAXMEM=10) 1140 SB
32 0 0 50 50 0 0 0 48 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1546 430 (MIPS-based platforms) 430 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1613 1184 (Enabling the debugger on MIPS-based platforms is controlled by the) 1184 SB
721 1663 1424 (OSLOADOPTIONS environment variable. Use the following procedure to modify) 1424 SB
721 1713 36 (it:) 36 SB
721 1796 33 (1.) 33 SB
779 1796 870 (At the ARC firmware prompt, select \223Run Setup\224.) 870 SB
721 1863 33 (2.) 33 SB
779 1863 792 (From the first menu, select \223Manage startup\224.) 792 SB
721 1930 33 (3.) 33 SB
779 1930 972 (From the second menu select \223Change a boot selection\224.) 972 SB
721 1997 33 (4.) 33 SB
779 1997 671 (Edit the OSLOADOPTIONS variable:) 671 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
779 2070 380 (OSLOADOPTIONS=debug) 380 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 2187 1137 (1.2.2.3  Mirroring the Target System\222s Binaries) 1137 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2269 1378 (Symbolic information for debugging is stored in the binary files of the operating) 1378 SB
721 2319 638 (system and drivers, not in a separate ) 638 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1359 2319 80 (.sym) 80 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1439 2319 619 ( file. To make symbolic information) 619 SB
721 2369 1384 (available to the kernel debugger, copies of the target machine\222s binaries must be) 1384 SB
721 2419 1331 (available to the debugger machine. These files can be on a local drive or on a) 1331 SB
721 2469 1440 (network drive accessible to the debugger machine. Use the _NT_SYMBOL_PATH) 1440 SB
721 2519 1379 (environment variable to communicate the location of the symbol directory to the) 1379 SB
721 2569 1430 (kernel debugger. At a minimum, the files available to the debugger machine should) 1430 SB
721 2619 136 (include ) 136 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
857 2619 215 (ntoskrnl.exe) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1072 2619 22 (, ) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1094 2619 113 (hal.dll) 113 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1207 2619 158 (, and the ) 158 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1365 2619 65 (.sys) 65 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1430 2619 676 ( file of the driver being debugged. Also) 676 SB
721 2669 1350 (include the binaries for other drivers with which the debuggee driver interacts.) 1350 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 7 def
/wp$fpage (7) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 8 8
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 18 (8) 18 SB
306 378 9 ( ) 61 SB
367 378 9 ( ) 61 SB
428 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 1082 (For example, the following steps would create the symbol tree:) 1082 SB
634 579 33 (1.) 33 SB
692 579 156 (Create a ) 156 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
848 579 120 (\\debug) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
968 579 979 ( directory on a drive accessible to the debugger machine.) 979 SB
634 646 33 (2.) 33 SB
692 646 431 (Copy files \(for example, ) 431 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1123 646 215 (ntoskrnl.exe) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1338 646 22 (, ) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1360 646 113 (hal.dll) 113 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1473 646 22 (, ) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1495 646 87 (*.sys) 87 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1582 646 480 (\) from the target machine to) 480 SB
692 696 63 (the ) 63 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
755 696 120 (\\debug) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
875 696 618 ( directory on the debugger machine.) 618 SB
634 763 33 (3.) 33 SB
692 763 1310 (Set the _NT_SYMBOL_PATH environment variable to point to the symbol) 1310 SB
692 813 405 (directory. For example:) 405 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
692 886 560 (set _NT_SYMBOL_PATH=c:\\debug) 560 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 963 1147 (1.3  Building Drivers for Debugging) 1147 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1077 1349 (This section describes the methods for writing and building a driver to provide) 1349 SB
634 1127 1351 (debugging information to the kernel debugger. It includes the following topics:) 1351 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1204 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1210 176 (Using the ) 176 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
868 1210 178 (setenv.bat) 178 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1046 1210 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1130 1210 215 (makefile.def) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1345 1210 670 ( files to control the compiler and linker) 670 SB
692 1260 1126 (options and definitions that the build utility uses to build a driver.) 1126 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1321 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1327 1327 (Using debugging functions in your driver code to insert breakpoints and print) 1327 SB
692 1377 568 (messages to the kernel debugger.) 568 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 1438 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1444 1259 (Using the debugging macros and print mechanisms provided in the driver) 1259 SB
692 1494 149 (samples.) 149 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 1586 960 (1.3.1  Compiler and Linker Options) 960 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1682 971 (The DDK\222s build utility uses the settings created by the ) 971 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1605 1682 178 (setenv.bat) 178 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1783 1682 284 ( file to provide a) 284 SB
634 1732 1435 (simple mechanism that can be customized for setting up the build environment. The) 1435 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
634 1782 111 (setenv) 111 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
745 1782 1298 ( batch file sets various environment variables that then control the compiler) 1298 SB
634 1832 1248 (and linker options and definitions used when the build utility invokes the) 1248 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
634 1882 215 (makefile.def) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
849 1882 1207 ( file. This includes the command line switches that determine the level) 1207 SB
634 1932 1343 (of debugging symbols stored in the executable files, and the compiler variable) 1343 SB
634 1982 1278 (definitions that cause optional sections of code to be included or excluded.) 1278 SB
634 2065 1429 (These files determine the way your driver is built. You can use the default versions) 1429 SB
634 2115 1037 (of these files, or modify them according to your preferences.) 1037 SB
634 2198 502 (Specifying \223checked\224 on the ) 502 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1136 2197 117 (setenv) 117 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1253 2198 812 ( command line sets up the build environment to) 812 SB
634 2248 1406 (produce a debugging version of the driver that corresponds to the checked version) 1406 SB
634 2298 1436 (of Windows NT. Similarly, specifying \223free\224 results in a streamlined version of the) 1436 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 8 def
/wp$fpage (8) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 9 9
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1316 378 133 (Chapter ) 133 SB
1449 378 18 (1) 18 SB
1467 378 535 (    Debugging Windows NT Drivers) 535 SB
2002 378 9 ( ) 61 SB
2063 378 9 ( ) 61 SB
2124 378 18 (1) 18 SB
2142 378 11 (-) 11 SB
2153 378 18 (9) 18 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1427 (driver that corresponds to the free version of Windows NT. When you are building) 1427 SB
721 546 1401 (a driver for debugging, build the version \(checked or free\) that corresponds to the) 1401 SB
721 596 1055 (version of the Windows NT system in which it will be tested.) 1055 SB
721 679 1340 (The specific compiler and linker options that are enabled for checked and free) 1340 SB
721 729 1427 (builds vary depending on the platform \(MIPS, Intel\) for which you are building the) 1427 SB
721 779 544 (driver. For example, a checked ) 544 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1265 779 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1285 779 650 (86 build using the default versions of ) 650 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1935 779 178 (setenv.bat) 178 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 829 73 (and ) 73 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
794 829 215 (makefile.def) 215 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1009 829 1116 ( causes the build utility to define the compiler variables DBG=1,) 1116 SB
721 879 424 (and to use the following ) 424 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1145 879 98 (cl386) 98 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1243 879 333 ( compiler switches:) 333 SB
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 133 63 721 962 CB
721 967 55 (/Zd) 55 SB
gr
gs 1315 63 855 962 CB
905 967 1149 (Produces an object file with line-number and public symbol information.) 1149 SB
gr
gs 133 63 721 1025 CB
721 1030 71 (/Oy-) 71 SB
gr
gs 1315 50 855 1025 CB
905 1030 1141 (Disables the compiler optimization that suppresses the creation of frame) 1141 SB
gr
gs 1315 59 855 1075 CB
905 1076 403 (pointers on the call stack.) 403 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1163 120 (A free ) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
841 1163 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
861 1163 1194 (86 build defines DBG=0, omits the /Zd compiler switch to reduce the) 1194 SB
721 1213 1335 (amount of symbolic information in the object files, and uses the /Oy switch to) 1335 SB
721 1263 594 (enable frame pointer optimization.) 594 SB
721 1346 1151 (It is possible to get line#/local information in the image files using ) 1151 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1872 1346 161 (build.exe) 161 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
2033 1346 138 (. This is) 138 SB
721 1396 1340 (not the default, however, because it would have a severe impact on disk space) 1340 SB
721 1446 1376 (requirements needed to build the system. It can be enabled with the NTDEBUG) 1376 SB
721 1496 564 (environment variable as follows.) 564 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1585 320 (set NTDEBUG=ntsd) 320 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1671 1238 (This generates object files and image files with full symbolic debugging) 1238 SB
721 1721 212 (information.) 212 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1829 761 (1.3.2  Debugging Functions) 761 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1925 783 (The DDK\222s master kernel-mode include file, ) 783 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1504 1925 131 (ntddk.h) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1635 1925 470 (, defines a pair of functions) 470 SB
721 1975 935 (that are useful in debugging kernel-mode drivers. The ) 935 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1656 1974 292 (DbgBreakPoint) 292 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1948 1975 152 ( function) 152 SB
721 2025 497 (inserts a breakpoint, and the ) 497 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1218 2024 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1392 2025 685 ( function prints a formatted string to the) 685 SB
721 2075 1443 (kernel debugger. For debugging Win32 user-mode drivers, the Win32 API provides) 1443 SB
721 2125 386 (two similar functions, ) 386 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1107 2124 237 (DebugBreak) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1344 2125 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1428 2124 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1799 2125 315 (, that interact with) 315 SB
721 2175 125 (NTSD.) 125 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 2272 566 (1.3.2.1  Print Functions) 566 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 2353 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
895 2354 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
979 2353 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1350 2354 541 ( enable the DDK\222s version of \223) 541 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1891 2353 108 (printf) 108 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2404 210 (debugging\224.) 210 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 2493 700 (ULONG DbgPrint\(PCH pchFormat, ...\);) 700 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 2578 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
895 2579 1077 ( writes a string to the kernel debugger window. The arguments) 1077 SB
721 2629 44 (to ) 44 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
765 2628 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
939 2629 530 ( are the same as those used by ) 530 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1469 2628 108 (printf) 108 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1577 2629 465 (. Only kernel-mode drivers) 465 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 9 def
/wp$fpage (9) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 10 10
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (10) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 145 (can call ) 145 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
779 495 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
953 496 99 (. The ) 99 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1052 496 131 (ntddk.h) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1183 496 244 ( file defines a ) 244 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1427 495 155 (KdPrint) 155 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1582 496 424 ( macro that is equivalent) 424 SB
634 546 44 (to ) 44 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
678 545 174 (DbgPrint) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
852 546 1143 (, except that it is a no-op in free builds and outputs a string only in) 1143 SB
634 596 909 (checked builds \(for example, when DBG is defined\).) 909 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 685 980 (VOID OutputDebugString\(LPCTSTR lpszOutputString\);) 980 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 770 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1005 771 1025 ( sends a string to the debugger of the calling process. When) 1025 SB
634 821 932 (using NTSD in conjunction with the kernel debugger, ) 932 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1566 820 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 871 878 (displays the string in the kernel debugger window. ) 878 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1512 870 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1883 871 154 ( does not) 154 SB
634 921 620 (support the variable arguments of a ) 620 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1254 920 108 (printf) 108 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1362 921 720 ( formatted string. However, several of the) 720 SB
634 971 1228 (DDK\222s user-mode driver samples have defined their own versions of a ) 1228 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1862 971 207 (DebugPrint) 207 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1021 1209 (function that create a string from a variable argument list and then use) 1209 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 1070 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1005 1071 966 ( to print the string. For example code that illustrates this) 966 SB
634 1121 317 (technique, see the ) 317 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
951 1121 139 (debug.c) 139 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1090 1121 325 ( file in the DDK\222s ) 325 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1415 1121 394 (src\\video\\displays\\vga) 394 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1809 1121 257 ( sample driver.) 257 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1218 763 (1.3.3.2.2  Breakpoint Functions) 763 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1300 1409 (There are several ways to insert a breakpoint into the source code of a driver. The) 1409 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 1349 292 (DbgBreakPoint) 292 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
926 1350 1047 ( function works in user-mode or kernel-mode code, while the) 1047 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 1399 237 (DebugBreak) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
871 1400 691 ( function works only in user-mode code.) 691 SB
634 1483 481 (The function prototypes for ) 481 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1115 1482 292 (DbgBreakPoint) 292 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1407 1483 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1491 1482 237 (DebugBreak) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1728 1483 264 ( are as follows:) 264 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1572 500 (VOID DbgBreakPoint\(VOID\);) 500 SB
634 1618 440 (VOID DebugBreak\(VOID\);) 440 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1704 1370 (Each of these breakpoint functions breaks into the debugger associated with the) 1370 SB
634 1754 1444 (calling process. For example, a breakpoint in a Win32 user-mode driver breaks into) 1444 SB
634 1804 1408 (the kernel debugger if NTSD is not running, but breaks into NTSD if the driver is) 1408 SB
634 1854 461 (being debugged by NTSD.) 461 SB
634 1937 1438 (Calling a breakpoint function on a system that is not connected to a debugger hangs) 1438 SB
634 1987 1398 (the machine. However, it is possible to start and connect the kernel debugger to a) 1398 SB
634 2037 1446 (hung target machine on which the debugger is enabled. The procedure for doing this) 1446 SB
634 2087 432 (is described in Section 4.) 432 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 2195 686 (1.3.3  Debugging Macros) 686 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2291 454 (This section describes the ) 454 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1088 2290 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1258 2291 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1342 2290 136 (PRINT) 136 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1478 2291 565 ( macros provided with the DDK.) 565 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 2388 590 (1.3.3.1  ASSERT Macros) 590 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2470 77 (The ) 77 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
711 2470 131 (ntddk.h) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
842 2470 1083 ( file defines a pair of macros that provide additional debugging) 1083 SB
634 2520 1233 (information when used in a checked build of a kernel-mode driver. The ) 1233 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1867 2519 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2570 73 (and ) 73 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
707 2569 270 (ASSERTMSG) 270 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
977 2570 1071 ( macros are defined as no-ops if the DBG compiler variable is) 1071 SB
634 2620 426 (defined as 0 \(free build\).) 426 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 10 def
/wp$fpage (10) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 11 11
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (11) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1321 (User-mode drivers cannot use these macros. However, several of the DDK\222s) 1321 SB
721 546 1406 (sample user-mode drivers define macros that provide similar functionality. For an) 1406 SB
721 596 296 (example, see the ) 296 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1017 595 267 (ASSERTVGA) 267 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1284 596 483 ( macro in the ddk tree under) 483 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
721 646 613 (src\\video\\displays\\vga256\\debug.h) 613 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1334 646 11 (.) 11 SB
721 729 1204 (For checked builds, the kernel-mode assert macros behave as follows:) 1204 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 818 160 (ASSERT \() 160 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
881 818 200 (Expression) 200 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1081 818 40 (\);) 40 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 904 39 (If ) 39 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
760 904 196 (Expression) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
956 904 1115 ( evaluates to FALSE, the macro displays a message in the kernel) 1115 SB
721 954 1311 (debugger window. The message displays the literal source code string of the) 1311 SB
721 1004 1427 (expression that evaluated to FALSE, as well as the path of the source code file and) 1427 SB
721 1054 1447 (line number in that file of the instruction that called the macro. You can then choose) 1447 SB
721 1104 656 (to break into the debugger, ignore the ) 656 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1377 1103 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1547 1104 600 (, or terminate the process or thread) 600 SB
721 1154 222 (in which the ) 222 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
943 1153 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1113 1154 1024 ( occurred. If you break into the debugger, you will be at the) 1024 SB
721 1204 1425 (kd> prompt, from which you can trace the stack frames, dump or edit memory, and) 1425 SB
721 1254 582 (so on. If you choose to ignore the ) 582 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1303 1253 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1473 1254 594 (, execution continues as if you had) 594 SB
721 1304 200 (entered the ) 200 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
921 1303 22 (g) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
943 1304 188 ( command.) 188 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1393 220 (ASSERTMSG \() 220 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
941 1393 140 (Message) 140 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1081 1393 40 (, ) 40 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1121 1393 200 (Expression) 200 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1321 1393 40 (\);) 40 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1479 511 (This macro is identical to the ) 511 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1232 1478 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1402 1479 339 ( macro, except that ) 339 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1741 1479 155 (Message) 155 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1896 1479 259 ( is displayed in) 259 SB
721 1529 1061 (addition to the expression, path, and line number information.) 1061 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1626 499 (1.3.3.2  Print Macros) 499 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1708 304 (In addition to the ) 304 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1025 1707 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1195 1708 916 ( macros, a number of the sample kernel-mode drivers) 916 SB
721 1758 1426 (define a kernel debugger print macro that uses a global debugging level variable to) 1426 SB
721 1808 1347 (control the level of interaction with the kernel debugger. The macros differ for) 1347 SB
721 1858 1109 (different drivers, but they have a number of features in common.) 1109 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 1935 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 1941 209 (As with the ) 209 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
988 1940 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1158 1941 957 ( macros, these macros are defined as no-ops if DBG=0.) 957 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2002 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2008 1375 (Each macro\222s arguments include the message to print and a level parameter that) 1375 SB
779 2058 579 (indicates the severity of the error.) 579 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 740 3231 0 0 CB
721 2119 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
779 2125 1347 (The level parameter and the global debugging level determine the action taken) 1347 SB
779 2175 1312 (by the macro. The actions range from doing nothing, to printing the message) 1312 SB
779 2225 393 (string, to executing an ) 393 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1172 2224 170 (ASSERT) 170 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1342 2225 129 ( macro.) 129 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 11 def
/wp$fpage (11) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 12 12
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (12) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 771 (For example, the ATDISK driver defines an ) 771 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1405 495 271 (AtDebugLevel) 271 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1676 496 391 ( global variable whose) 391 SB
634 546 612 (default value is 0, and it defines an ) 612 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1246 545 162 (AtDump) 162 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1408 546 317 ( macro as follows:) 317 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 635 140 (#if DBG) 140 SB
634 681 520 (extern ULONG AtDebugLevel;) 520 SB
634 727 860 (#define ATBUGCHECK      \(\(ULONG\)0x80000000\)) 860 SB
634 773 820 (#define ATDIAG1       \(\(ULONG\)0x00000001\)) 820 SB
634 819 820 (#define ATDIAG2       \(\(ULONG\)0x00000002\)) 820 SB
634 865 840 (#define ATERRORS       \(\(ULONG\)0x00000004\)) 840 SB
634 911 820 (#define ATINIT        \(\(ULONG\)0x00000008\)) 820 SB
634 957 600 (#define AtDump\(LEVEL,STRING\) \\) 600 SB
634 1003 160 (  do { \\) 160 SB
634 1049 580 (    ULONG _level = \(LEVEL\); \\) 580 SB
634 1095 680 (    if \(AtDebugLevel & _level\) { \\) 680 SB
634 1141 480 (      DbgPrint STRING; \\) 480 SB
634 1187 140 (    } \\) 140 SB
634 1233 660 (    if \(_level == ATBUGCHECK\) { \\) 660 SB
634 1279 440 (      ASSERT\(FALSE\); \\) 440 SB
634 1325 140 (    } \\) 140 SB
634 1371 260 (  } while \(0\)) 260 SB
634 1417 100 (#else) 100 SB
634 1463 1040 (#define AtDump\(LEVEL,STRING\) do {NOTHING;} while \(0\)) 1040 SB
634 1509 120 (#endif) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1595 1365 (Using this macro, you could insert statements like the following into your code:) 1365 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1684 460 (if \(SomeVariable == -1\)) 460 SB
634 1730 1000 (AtDump\(ATERRORS, \("Bad value for SomeVariable"\) \);) 1000 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1816 39 (If ) 39 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
673 1815 271 (AtDebugLevel) 271 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
944 1816 1020 ( is 0, the message is not displayed. To enable the display of) 1020 SB
634 1866 1202 (certain levels of error messages, you can assign a hard-coded value to) 1202 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
634 1915 271 (AtDebugLevel) 271 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
905 1916 941 ( and recompile. Or, you can use the kernel debugger\222s ) 941 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1846 1915 44 (ed) 44 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1890 1916 177 ( command) 177 SB
634 1966 389 (to modify the value of ) 389 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1023 1965 271 (AtDebugLevel) 271 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1294 1966 447 ( at run time. For example:) 447 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 2055 560 (kd >ed atdisk!atdebuglevel 4) 560 SB
634 2101 100 (kd >g) 100 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 2224 1106 (1.4  Starting a Debugging Session) 1106 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2338 631 (This section describes the following:) 631 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2415 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2421 1327 (Starting the kernel debugger to debug a driver running on the target machine.) 1327 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2482 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2488 1105 (Starting the kernel debugger after a crash on the target machine.) 1105 SB
32 0 0 40 40 0 0 0 46 /MSIcons2 font
gs 653 3231 0 0 CB
634 2549 19 (u) 19 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 2555 1373 (Starting NTSD in conjunction with the kernel debugger to debug a Win32 user-) 1373 SB
692 2605 218 (mode driver.) 218 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 12 def
/wp$fpage (12) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Roman
%%Page: 13 13
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (13) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1445 (Before starting the kernel debugger, you must complete the following steps to set up) 1445 SB
721 546 479 (the debugging environment:) 479 SB
721 629 33 (1.) 33 SB
779 629 1304 (Connect the target machine to the debugger machine using a serial cable, as) 1304 SB
779 679 425 (described in Section 2.1.) 425 SB
721 746 33 (2.) 33 SB
779 746 1364 (Install the checked or free build of Windows NT and the corresponding version) 1364 SB
779 796 1327 (of your driver\222s binary files on the target machine. For more information, see) 1327 SB
779 846 483 (Section 2.2.1 and Section 3.) 483 SB
721 913 33 (3.) 33 SB
779 913 1263 (Enable the debugger on the target machine, as described in Section 2.2.2.) 1263 SB
721 980 33 (4.) 33 SB
779 980 1337 (Make debugging symbols available to the kernel debugger by creating, on the) 1337 SB
779 1030 1388 (debugger machine, a directory tree containing copies of the executable files used) 1388 SB
779 1080 1169 (on the target machine. Be sure that the debugger machine\222s files are) 1169 SB
779 1130 1313 (synchronized with the files on the target machine. For more information, see) 1313 SB
779 1180 238 (Section 2.2.3.) 238 SB
721 1247 33 (5.) 33 SB
779 1247 1357 (Copy the appropriate executable file for the kernel debugger into a directory in) 1357 SB
779 1297 1372 (the PATH on the debugger machine. The file chosen depends on the platform of) 1372 SB
779 1347 340 (the target machine: ) 340 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1119 1347 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1310 1347 72 ( for ) 72 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1382 1347 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1402 1347 253 (86-based, and ) 253 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1655 1347 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1851 1347 287 ( for MIPS-based) 287 SB
779 1397 175 (platforms.) 175 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1506 969 (1.4.1  Starting the Kernel Debugger) 969 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1602 1395 (To enable debugging from a variety of platform combinations, the DDK includes) 1395 SB
721 1652 516 (kernel debugger executables \() 516 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1237 1652 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1428 1652 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1512 1652 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1708 1652 223 (\) that run on ) 223 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1931 1652 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1951 1652 158 (86-based) 158 SB
721 1702 1355 (machines, and executables that run on MIPS-based machines. This enables the) 1355 SB
721 1752 619 (following debugging combinations: ) 619 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1340 1752 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1360 1752 59 (86-) 59 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1419 1752 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1439 1752 66 (86, ) 66 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1505 1752 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1525 1752 573 (86-MIPS, MIPS-MIPS or MIPS-) 573 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
721 1802 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
741 1802 1299 (86. For example, to debug a MIPS R4000 target machine from an Intel 486) 1299 SB
721 1852 467 (debugger machine, run the ) 467 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1188 1852 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1208 1852 360 (86 binary version of ) 360 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1568 1852 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1764 1852 359 ( on the 486 machine.) 359 SB
721 1935 1429 (Starting the kernel debugger requires setting the appropriate environment variables) 1429 SB
721 1985 1197 (and then specifying the necessary flags when launching the debugger.) 1197 SB
721 2068 1431 (You can create a batch file to automate these steps. The following example sets the) 1431 SB
721 2118 1343 (_NT_SYMBOL_PATH and _NT_DEBUG_LOG_FILE_OPEN environment) 1343 SB
721 2168 987 (variables, and then starts the kernel debugger. Setting the) 987 SB
721 2218 1437 (_NT_DEBUG_LOG_FILE_OPEN variable causes the kernel debugger to save the) 1437 SB
721 2268 950 (debugging output in a log file. Note that the example\222s ) 950 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1671 2268 120 (i386kd) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1791 2268 252 ( command line) 252 SB
721 2318 1296 (enables specifying an optional flag. For example, if the batch file is named ) 1296 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
2017 2318 109 (kd.bat) 109 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
2126 2318 11 (,) 11 SB
721 2368 1346 (you could enter \223kd -b\224 to start the debugger with an initial kernel breakpoint.) 1346 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 2457 180 (@echo off) 180 SB
721 2503 220 (mode 80,500) 220 SB
721 2549 560 (SET _NT_SYMBOL_PATH=c:\\debug) 560 SB
721 2595 1040 (SET _NT_DEBUG_LOG_FILE_OPEN=%_NT_SYMBOL_PATH%\\kd.log) 1040 SB
721 2641 240 (i386kd -v %1) 240 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 13 def
/wp$fpage (13) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 14 14
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (14) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 1372 (The normal sequence for starting a debugging session is to begin by starting the) 1372 SB
634 546 1338 (kernel debugger on the debugger machine. When you see the \223KD: waiting to) 1338 SB
634 596 1292 (connect...\224 string in the debugger window, reboot the target machine. After) 1292 SB
634 646 1388 (Windows NT boots on the target machine and the kernel debugger connects, you) 1388 SB
634 696 709 (can break into the debugger by using the ) 709 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1343 704 131 (CTRL+C) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1474 696 510 ( combination on the debugger) 510 SB
634 746 473 (machine or by pressing the ) 473 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1107 754 111 (SYSRQ) 111 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1218 746 464 ( key on the target machine.) 464 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 843 976 (1.4.1.1  Connecting to a Running Target) 976 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 925 1359 (It is also possible to connect the debugger machine to a target machine that has) 1359 SB
634 975 1353 (already booted. This is especially useful when an error or exception causes the) 1353 SB
634 1025 453 (target to crash. To do this:) 453 SB
634 1108 33 (1.) 33 SB
692 1108 823 (Start the kernel debugger in the normal manner.) 823 SB
634 1175 33 (2.) 33 SB
692 1175 1309 (If an error has occurred on the target machine, the kernel debugger connects) 1309 SB
692 1225 1282 (immediately and breaks into the debugger. Otherwise, the kernel debugger) 1282 SB
692 1275 1032 (indicates that it is waiting to connect. In this case, press the ) 1032 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1724 1283 131 (CTRL+C) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1855 1275 224 ( combination) 224 SB
692 1325 1388 (on the debugger machine to establish the connection and break into the debugger) 1388 SB
692 1375 347 (\(at the kd> prompt\).) 347 SB
634 1442 33 (3.) 33 SB
692 1442 725 (When the connection is established, enter ) 725 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1417 1450 131 (CTRL+R) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1548 1442 361 ( at the kd> prompt to) 361 SB
692 1492 731 (resynchronize the target and the debugger.) 731 SB
634 1559 33 (4.) 33 SB
692 1559 293 (Finally, enter the) 293 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
985 1558 146 ( !reload) 146 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1131 1559 826 ( command at the kd> prompt to cause the kernel) 826 SB
692 1609 1326 (debugger to load the symbol files, discarding any previously loaded symbols.) 1326 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1707 1177 (1.4.1.2  Kernel Debugger Command Line Syntax) 1177 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1791 793 (The following is the command line syntax for ) 793 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1427 1791 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1618 1791 12 (:) 12 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1881 1020 (i386kd [-?] [-b] [-c] [-m] [-n] [-r] [-v] [-x] [-l ) 1020 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1654 1881 220 (SymFile ...) 220 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1874 1881 20 (]) 20 SB
634 1927 20 ([) 20 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
654 1927 160 (NTKernel) 160 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
814 1927 20 (]) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2015 793 (The following is the command line syntax for ) 793 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1427 2015 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1623 2015 12 (:) 12 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 2105 1020 (mipskd [-?] [-b] [-c] [-m] [-n] [-r] [-v] [-x] [-l ) 1020 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1654 2105 140 (SymFile) 140 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1794 2105 100 ( ...]) 100 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 299 63 634 2191 CB
634 2196 117 (Option) 117 SB
gr
gs 1141 63 934 2191 CB
984 2196 196 (Description) 196 SB
gr
1440 2 634 2254 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 299 63 634 2261 CB
634 2266 30 (-?) 30 SB
gr
gs 1141 63 934 2261 CB
984 2266 217 (Displays help) 217 SB
gr
gs 299 63 634 2324 CB
634 2329 33 (-b) 33 SB
gr
gs 1141 63 934 2324 CB
984 2329 570 (Causes an initial break in the kernel) 570 SB
gr
gs 299 63 634 2387 CB
634 2392 30 (-c) 30 SB
gr
gs 1141 50 934 2387 CB
984 2392 1038 (Causes the debugger to resynchronize the target and the debugger) 1038 SB
gr
gs 1141 59 934 2437 CB
984 2438 899 (when a connection is established. Equivalent to entering ) 899 SB
gr
32 0 0 31 31 0 0 0 28 /Times-Roman /font32 ANSIFont font
gs 1141 59 934 2437 CB
1883 2446 118 (CTRL+R) 118 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 59 934 2437 CB
2001 2438 10 (.) 10 SB
gr
gs 299 63 634 2496 CB
634 2501 34 (-l ) 34 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 299 63 634 2496 CB
668 2500 170 (SymFile ...) 170 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 63 934 2496 CB
984 2501 751 (Preloads symbols from the specified file or files) 751 SB
gr
gs 299 63 634 2559 CB
634 2564 44 (-m) 44 SB
gr
gs 1141 50 934 2559 CB
984 2564 1065 (Causes the debugger to use modem controls. For more information,) 1065 SB
gr
gs 1141 59 934 2609 CB
984 2610 277 (see Section 4.1.4.) 277 SB
gr
gs 299 63 634 2668 CB
634 2673 33 (-n) 33 SB
gr
gs 1141 63 934 2668 CB
984 2673 466 (Disables lazy symbol loading) 466 SB
gr
gs 299 63 634 2731 CB
634 2736 26 (-r) 26 SB
gr
gs 1141 63 934 2731 CB
984 2736 926 (Dumps register contents when a breakpoint is encountered) 926 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 14 def
/wp$fpage (14) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 15 15
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (15) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
gs 299 63 721 496 CB
721 501 117 (Option) 117 SB
gr
gs 1141 63 1021 496 CB
1071 501 196 (Description) 196 SB
gr
298 2 721 559 B
1 F
n
1140 2 1021 559 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 299 63 721 566 CB
721 571 32 (-v) 32 SB
gr
gs 1141 63 1021 566 CB
1071 571 292 (Verbose messages) 292 SB
gr
gs 299 63 721 629 CB
721 634 32 (-x) 32 SB
gr
gs 1141 50 1021 629 CB
1071 634 1083 (Causes the debugger to break when an exception occurs. The default) 1083 SB
gr
gs 1141 46 1021 679 CB
1071 680 1052 (behavior is to break only on unhandled exceptions. A side effect of) 1052 SB
gr
gs 1141 59 1021 725 CB
1071 726 527 (this flag is to override the -b flag.) 527 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 299 63 721 784 CB
721 788 159 (NTKernel) 159 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 50 1021 784 CB
1071 789 64 (For ) 64 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 1141 50 1021 784 CB
1135 788 109 (i386kd) 109 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 50 1021 784 CB
1244 789 885 ( only, specifies the path of the debugger machine\222s copy) 885 SB
gr
gs 1141 46 1021 834 CB
1071 835 372 (of the target machine\222s ) 372 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 1141 46 1021 834 CB
1443 834 196 (ntoskrnl.exe) 196 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 46 1021 834 CB
1639 835 511 ( \(for kernel symbols\). If the path) 511 SB
gr
gs 1141 46 1021 880 CB
1071 881 1038 (is either unspecified or invalid, the kernel debugger searches for a) 1038 SB
gr
gs 1141 46 1021 926 CB
1071 927 177 (file named ) 177 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 1141 46 1021 926 CB
1248 926 196 (ntoskrnl.exe) 196 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 1141 46 1021 926 CB
1444 927 447 ( in the directory specified by) 447 SB
gr
gs 1141 59 1021 972 CB
1071 973 389 (_NT_SYMBOL_PATH.) 389 SB
gr
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1066 1179 (1.4.1.3  Kernel Debugger Environment Variables) 1179 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1150 1084 (The kernel debugger uses the following environment variables:) 1084 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 758 63 721 1234 CB
721 1239 149 (Variable) 149 SB
gr
gs 690 63 1480 1234 CB
1530 1239 196 (Description) 196 SB
gr
1448 2 721 1297 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 758 63 721 1304 CB
721 1309 415 (_NT_SYMBOL_PATH=[) 415 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 721 1304 CB
1136 1308 83 (drive) 83 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 758 63 721 1304 CB
1219 1309 37 (:][) 37 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 721 1304 CB
1256 1308 71 (path) 71 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 758 63 721 1304 CB
1327 1309 13 (]) 13 SB
gr
gs 690 50 1480 1304 CB
1530 1309 638 (Specifies the root of the directory tree on) 638 SB
gr
gs 690 46 1480 1354 CB
1530 1355 636 (the debugger machine containing copies) 636 SB
gr
gs 690 46 1480 1400 CB
1530 1401 617 (of the target machine\222s symbol files \(x:) 617 SB
gr
gs 690 59 1480 1446 CB
1530 1447 227 (is the default\).) 227 SB
gr
gs 758 63 721 1505 CB
721 1510 577 (_NT_DEBUG_LOG_FILE_OPEN=) 577 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 721 1505 CB
1298 1509 71 (path) 71 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 50 1480 1505 CB
1530 1510 615 (Specifies the path of a file to which the) 615 SB
gr
gs 690 46 1480 1555 CB
1530 1556 604 (kernel debugger copies its output. The) 604 SB
gr
gs 690 46 1480 1601 CB
1530 1602 554 (file is created if it does not exist, or) 554 SB
gr
gs 690 59 1480 1647 CB
1530 1648 337 (overwritten if it does.) 337 SB
gr
gs 758 63 721 1706 CB
721 1711 628 (_NT_DEBUG_LOG_FILE_APPEND=) 628 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 721 1706 CB
1349 1710 71 (path) 71 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 50 1480 1706 CB
1530 1711 615 (Specifies the path of a file to which the) 615 SB
gr
gs 690 46 1480 1756 CB
1530 1757 604 (kernel debugger copies its output. The) 604 SB
gr
gs 690 46 1480 1802 CB
1530 1803 554 (file is created if it does not exist, or) 554 SB
gr
gs 690 59 1480 1848 CB
1530 1849 349 (appended to if it does.) 349 SB
gr
gs 758 63 721 1907 CB
721 1912 576 (_NT_DEBUG_PORT=COM[1|2|...]) 576 SB
gr
gs 690 50 1480 1907 CB
1530 1912 564 (Identifies the serial port used by the) 564 SB
gr
gs 690 59 1480 1957 CB
1530 1958 627 (kernel debugger \(COM1 is the default\).) 627 SB
gr
gs 758 63 721 2016 CB
721 2021 507 (_NT_DEBUG_BAUD_RATE=) 507 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 721 2016 CB
1228 2020 65 (rate) 65 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 50 1480 2016 CB
1530 2021 547 (Specifies the baud rate used by the) 547 SB
gr
gs 690 46 1480 2066 CB
1530 2067 613 (kernel debugger\222s serial port \(19200 is) 613 SB
gr
gs 690 59 1480 2112 CB
1530 2113 190 (the default\).) 190 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 15 def
/wp$fpage (15) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 16 16
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (16) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
gs 758 63 634 496 CB
634 501 149 (Variable) 149 SB
gr
gs 690 63 1393 496 CB
1443 501 196 (Description) 196 SB
gr
757 2 634 559 B
1 F
n
689 2 1393 559 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 758 63 634 566 CB
634 571 509 (_NT_DEBUG_CACHE_SIZE=) 509 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 758 63 634 566 CB
1143 570 246 (size_in_KBytes) 246 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 50 1393 566 CB
1443 571 609 (Specifies the maximum size, in KB, of) 609 SB
gr
gs 690 46 1393 616 CB
1443 617 504 (the virtual memory cache. If not) 504 SB
gr
gs 690 46 1393 662 CB
1443 663 607 (specified, the default is 100K. A value) 607 SB
gr
gs 690 46 1393 708 CB
1443 709 603 (of 0 disables the cache. If enabled, the) 603 SB
gr
gs 690 46 1393 754 CB
1443 755 620 (kernel debugger caches memory values) 620 SB
gr
gs 690 46 1393 800 CB
1443 801 639 (as it sees them. Normal operations, such) 639 SB
gr
gs 690 46 1393 846 CB
1443 847 394 (as single stepping or the ) 394 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 690 46 1393 846 CB
1837 847 20 (g) 20 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 46 1393 846 CB
1857 847 176 ( command,) 176 SB
gr
gs 690 46 1393 892 CB
1443 893 611 (invalidate the cache. However, if some) 611 SB
gr
gs 690 46 1393 938 CB
1443 939 564 (hardware on the target machine can) 564 SB
gr
gs 690 46 1393 984 CB
1443 985 626 (change memory while the target system) 626 SB
gr
gs 690 46 1393 1030 CB
1443 1031 618 (is frozen by the debugger \(for example,) 618 SB
gr
gs 690 46 1393 1076 CB
1443 1077 612 (through shared memory or DMA\), you) 612 SB
gr
gs 690 46 1393 1122 CB
1443 1123 516 (must disable the cache to see the) 516 SB
gr
gs 690 46 1393 1168 CB
1443 1169 417 (memory changes. Use the ) 417 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 690 46 1393 1168 CB
1860 1169 105 (.cache) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 690 46 1393 1214 CB
1443 1215 608 (command from within the debugger to) 608 SB
gr
gs 690 46 1393 1260 CB
1443 1261 553 (examine the current cache settings,) 553 SB
gr
gs 690 46 1393 1306 CB
1443 1307 573 (change the cache size, or disable the) 573 SB
gr
gs 690 59 1393 1352 CB
1443 1353 99 (cache.) 99 SB
gr
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 1454 581 (1.4.1.4  Modem Support) 581 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1536 388 (It is possible to debug ) 388 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1022 1536 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1042 1536 960 (86-based target machines using a modem to connect the) 960 SB
634 1586 1341 (debugger machine and target machine. Modem debugging is not supported for) 1341 SB
634 1636 1447 (MIPS targets because many of the MIPs machines do not support the Ring Indicator) 1447 SB
634 1686 476 (line on the serial connector.) 476 SB
634 1769 983 (On the debugger machine, specify the \221-m\222 option on the ) 983 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1617 1769 120 (i386kd) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1737 1769 296 ( command line to) 296 SB
634 1819 1001 (inform the debugger to use modem controls. Be sure to set) 1001 SB
634 1869 1153 (_NT_DEBUG_BAUD_RATE to match that of the target machine.) 1153 SB
634 1952 1359 (When there is no carrier detect, the debugger enters a line level terminal mode,) 1359 SB
634 2002 490 (enabling commands such as ) 490 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1124 2001 56 (atz) 56 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1180 2002 22 (, ) 22 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1202 2001 76 (atdt) 76 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1278 2002 631 (, and so forth. When carrier detect is) 631 SB
634 2052 1424 (established, the debugger works normally except that it prints a message whenever) 1424 SB
634 2102 1345 (a serial port error occurs \(parity, framing, or overflow\). If you see parity error) 1345 SB
634 2152 1413 (messages and the debugger will not work, there is probably a baud rate mismatch.) 1413 SB
634 2235 1395 (On the target side, use a standard straight-through cable to connect the modem to) 1395 SB
634 2285 1397 (the debugger port. Set the modem in auto-answer mode. When the Ring Indicator) 1397 SB
634 2335 1168 (line toggles, the debugger\222s I/O is subjected to modem flow control.) 1168 SB
634 2418 1413 (You can connect a modem after a fatal crash even if the debugger is disabled. The) 1413 SB
634 2468 1417 (default baud rate in this case is 9600 baud. To use any other baud rate, specify the) 1417 SB
634 2518 273 (/BAUDRATE=) 273 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
907 2518 60 (xxx) 60 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
967 2518 237 ( option in the ) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1204 2518 135 (boot.ini) 135 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1339 2518 79 ( file.) 79 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 16 def
/wp$fpage (16) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 17 17
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (17) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 157 (On most ) 157 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
878 496 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
898 496 1152 (86 platforms, the \221blue screen\222 during the boot sequence displays a) 1152 SB
721 546 1408 (Debugger Status line to aid in setting up the modem/serial connection. The format) 1408 SB
721 596 335 (of the status line is:) 335 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 685 740 (MDM CD RI DSR CTS SND RCV FRM OVL PRT) 740 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 299 63 721 771 CB
721 776 158 (Indicator) 158 SB
gr
gs 1141 63 1021 771 CB
1071 776 149 (Meaning) 149 SB
gr
1440 2 721 834 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 299 63 721 841 CB
721 846 101 (MDM) 101 SB
gr
gs 1141 63 1021 841 CB
1071 846 554 (Debugger is using modem controls) 554 SB
gr
gs 299 63 721 904 CB
721 909 56 (CD) 56 SB
gr
gs 1141 63 1021 904 CB
1071 909 215 (Carrier detect) 215 SB
gr
gs 299 63 721 967 CB
721 972 40 (RI) 40 SB
gr
gs 1141 63 1021 967 CB
1071 972 228 (Ring indicator) 228 SB
gr
gs 299 63 721 1030 CB
721 1035 78 (DSR) 78 SB
gr
gs 1141 63 1021 1030 CB
1071 1035 226 (Data set ready) 226 SB
gr
gs 299 63 721 1093 CB
721 1098 72 (CTS) 72 SB
gr
gs 1141 63 1021 1093 CB
1071 1098 209 (Clear to send) 209 SB
gr
gs 299 63 721 1156 CB
721 1161 80 (SND) 80 SB
gr
gs 1141 63 1021 1156 CB
1071 1161 244 (Byte being sent) 244 SB
gr
gs 299 63 721 1219 CB
721 1224 83 (RCV) 83 SB
gr
gs 1141 63 1021 1219 CB
1071 1224 213 (Byte received) 213 SB
gr
gs 299 63 721 1282 CB
721 1287 85 (FRM) 85 SB
gr
gs 1141 63 1021 1282 CB
1071 1287 220 (Framing error) 220 SB
gr
gs 299 63 721 1345 CB
721 1350 81 (OVL) 81 SB
gr
gs 1141 63 1021 1345 CB
1071 1350 149 (Overflow) 149 SB
gr
gs 299 63 721 1408 CB
721 1413 72 (PRT) 72 SB
gr
gs 1141 63 1021 1408 CB
1071 1413 178 (Parity error) 178 SB
gr
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1500 1373 (When the modem has answered the phone, the \221MDM\222 indicator should appear.) 1373 SB
721 1550 1414 (When this occurs, the debugger waits for \221CD\222, \221CTS\222, and \221DSR\222 before sending) 1414 SB
721 1600 1380 (any data. When a connection is established, the error indicators should go off. If) 1380 SB
721 1650 1427 (not, and debugging does not work, there is probably a baud rate mismatch between) 1427 SB
721 1700 506 (the computer and the modem.) 506 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 1820 1165 (1.5  NTSD with the Kernel Debugger) 1165 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1934 1428 (To debug Win32 user-mode drivers such as display and print drivers, you must use) 1428 SB
721 1984 502 (the NT Symbolic Debugger \() 502 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1223 1984 144 (ntsd.exe) 144 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1367 1984 765 (\). The NTSD debugger is described in detail) 765 SB
721 2034 1450 (in the Windows NT SDK. This section contains additional information that is useful) 1450 SB
721 2084 495 (in debugging Win32 drivers.) 495 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2192 555 (1.5.1  Starting NTSD) 555 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2288 1327 (Unlike the kernel debugger that runs on a separate debugger machine, NTSD) 1327 SB
721 2338 1316 (executes on the target machine. There are two methods for starting NTSD in) 1316 SB
721 2388 649 (conjunction with the kernel debugger.) 649 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 17 def
/wp$fpage (17) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 18 18
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (18) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 1303 (One method is to first connect the kernel debugger to the target machine \(as) 1303 SB
634 546 1425 (described in the previous sections\), and then enter the following command line in a) 1425 SB
634 596 707 (command window on the target machine:) 707 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 685 380 (start ntsd -d -p -1) 380 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 771 1332 (The -d flag causes NTSD to send output to the kernel debugger on the remote) 1332 SB
634 821 1450 (debugger machine. The \223-p -1\224 flag causes NTSD to attach to the Win32 subsystem) 1450 SB
634 871 155 (process \() 155 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
789 871 159 (csrss.exe) 159 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
948 871 1132 (\), and enables debugging of the Win32 user-mode drivers that are) 1132 SB
634 921 1232 (part of this process. For other flags that can be specified, see the NTSD) 1232 SB
634 971 1310 (documentation in the SDK. Using this method to start NTSD works well for) 1310 SB
634 1021 1407 (debugging printer or multimedia drivers, which are not loaded until the first job is) 1407 SB
634 1071 127 (started.) 127 SB
634 1154 1449 (The other method for starting NTSD is useful for debugging drivers, such as display) 1449 SB
634 1204 1439 (drivers, that begin their execution before any command window is available to start) 1439 SB
634 1254 1431 (NTSD. This method involves creating an entry in the registry that causes Windows) 1431 SB
634 1304 806 (NT to start NTSD at the earliest possible time.) 806 SB
634 1387 33 (1.) 33 SB
692 1387 862 (In a command window on the target machine, use ) 862 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1554 1387 157 (regedt32) 157 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1711 1387 337 ( to start the registry) 337 SB
692 1437 111 (editor.) 111 SB
634 1504 33 (2.) 33 SB
692 1504 559 (Open the following registry key:) 559 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
692 1577 1340 (HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager) 1340 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1663 33 (3.) 33 SB
692 1663 1351 (Under this key, edit the Execute value entry, which is a MULTI_SZ value. Set) 1351 SB
692 1713 460 (the last string in the list to:) 460 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
692 1786 560 (ntsd -p -1 -g -G -o winlogon) 560 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
692 1872 1317 (Other NTSD command line options can be specified, but the \223-p -1\224 and \223-o) 1317 SB
692 1922 1033 (winlogon\224 options must be included. The -d flag is optional.) 1033 SB
634 1989 33 (4.) 33 SB
692 1989 1253 (Start the kernel debugger on the debugger machine, and reboot the target) 1253 SB
692 2039 1377 (machine with the debugger enabled. If the debugger is disabled, NTSD will still) 1377 SB
692 2089 1214 (start up, but you will not be able to connect to it. In this case, if NTSD) 1214 SB
692 2139 1352 (encounters a breakpoint, the target machine hangs, necessitating a cold reboot.) 1352 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
259 2248 497 (1.5.2  Using NTSD) 497 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 2344 1442 (When running NTSD on top of the kernel debugger, the NTSD output is sent over a) 1442 SB
634 2394 1212 (serial line to the debugger machine. Break into NTSD by pressing the ) 1212 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1846 2402 55 (F12) 55 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1901 2394 125 ( key on) 125 SB
634 2444 560 (the target machine \(pressing the ) 560 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1194 2452 111 (SYSRQ) 111 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1305 2444 718 ( key on the target machine breaks into the) 718 SB
634 2494 1390 (kernel debugger\). To switch from the NTSD prompt to the kd> prompt, press the) 1390 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
634 2552 131 (CTRL+C) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
765 2544 1272 ( combination at the debugger machine\222s keyboard, and type \221g\222 at the kd>) 1272 SB
634 2594 1411 (prompt to return to the NTSD prompt. When returning to NTSD, you may need to) 1411 SB
634 2644 97 (enter ) 97 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
731 2652 131 (CTRL+R) 131 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
862 2644 307 ( to resynchronize.) 307 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 18 def
/wp$fpage (18) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 19 19
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (19) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 1431 (There are some difficulties in setting breakpoints in Win32 user-mode drivers from) 1431 SB
721 546 1439 (the NTSD command line. For example, a printer driver is dynamically loaded when) 1439 SB
721 596 1387 (the first print job is started, and NTSD cannot set a breakpoint in the driver until) 1387 SB
721 646 1430 (this happens. The driver is not unloaded when the job is finished, so you can start a) 1430 SB
721 696 721 (job, and then break in to NTSD using the ) 721 SB
32 0 0 35 35 0 0 0 32 /Times-Roman /font32 ANSIFont font
1442 704 55 (F12) 55 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1497 696 642 ( key to set a breakpoint on the loaded) 642 SB
721 746 1375 (driver\222s code. To break at the beginning of the code, set the breakpoint and then) 1375 SB
721 796 1414 (start another job. If errors prevent setting breakpoints from the NTSD prompt, use) 1414 SB
721 846 63 (the ) 63 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
784 845 237 (DebugBreak) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1021 846 58 ( or ) 58 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1079 845 292 (DbgBreakPoint) 292 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1371 846 785 ( functions to set a breakpoint at the beginning) 785 SB
721 896 346 (of the driver\222s code.) 346 SB
721 979 1357 (Display drivers initialize during the boot sequence, and there is no way to start) 1357 SB
721 1029 1445 (NTSD at this time. To debug this part of a display driver\222s code \(which is still user-) 1445 SB
721 1079 352 (mode code\), use the ) 352 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1073 1078 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1444 1079 683 ( function to send messages to the kernel) 683 SB
721 1129 877 (debugger. For additional information on the use of ) 877 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1598 1128 371 (OutputDebugString) 371 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1969 1129 11 (,) 11 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
721 1178 237 (DebugBreak) 237 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
958 1179 95 (, and ) 95 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1053 1178 292 (DbgBreakPoint) 292 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1345 1179 260 (, see Section 3.) 260 SB
721 1262 1409 (The kernel debugger can perform limited debugging operations on Win32 drivers,) 1409 SB
721 1312 1404 (because user-mode code can be paged out. This creates problems when the kernel) 1404 SB
721 1362 1432 (debugger tries to set a breakpoint or read memory that has been paged out, because) 1432 SB
721 1412 1408 (the kernel debugger freezes the threads on the target system, making it impossible) 1408 SB
721 1462 912 (to reload the paged-out memory. For this reason, the ) 912 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1633 1461 15 (t) 15 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1648 1462 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1732 1461 24 (p) 24 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1756 1462 381 ( commands to trace or) 381 SB
721 1512 1029 (step through the code also might not work. You can use the ) 1029 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1750 1511 46 (ba) 46 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1796 1512 311 ( command to set a) 311 SB
721 1562 1447 (breakpoint, if you can determine the virtual address at which you want to break. For) 1447 SB
721 1612 157 (example:) 157 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1701 140 (ba e 1 ) 140 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
861 1701 80 (addr) 80 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1787 1444 (sets a breakpoint that causes the kernel debugger to break in if the CPU executes an) 1444 SB
721 1837 744 (instruction from the specified address. The ) 744 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1465 1837 83 (addr) 83 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1548 1837 547 ( argument can specify any valid) 547 SB
721 1887 833 (address, even if the memory has been paged out.) 833 SB
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2007 1075 (1.6  Kernel Debugger Commands) 1075 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2121 1437 (The Windows NT SDK provides a complete description of the command syntax for) 1437 SB
721 2171 1436 (both NTSD and the kernel debugger. This section does not attempt to duplicate that) 1436 SB
721 2221 1398 (information. However, there are a few useful commands and a number of built-in) 1398 SB
721 2271 1377 (kernel debugger extensions that are not described in the SDK documentation. In) 1377 SB
721 2321 1389 (addition, the kernel debugger provides support for developers to create their own) 1389 SB
721 2371 823 (extensions to the kernel debugger command set.) 823 SB
721 2454 141 (Use the ) 141 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
862 2453 22 (?) 22 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
884 2454 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
968 2453 37 (!?) 37 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1005 2454 1086 ( commands at the kd> prompt for a listing of the built-in kernel) 1086 SB
721 2504 944 (debugger commands and built-in command extensions.) 944 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 19 def
/wp$fpage (19) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 20 20
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (20) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 492 1248 (1.6.1  Stack Tracing and Function Arguments) 1248 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 588 1408 (This section discusses the techniques for tracing stack frames and determining the) 1408 SB
634 638 589 (location of function arguments on ) 589 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1223 638 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1243 638 481 (86 and MIPS-based targets.) 481 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
634 735 643 (1.6.1.1  x86-based Targets) 643 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 817 71 (For ) 71 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
705 817 191 (i386kd.exe) 191 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
896 817 474 (, there are two variations\227) 474 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1370 816 48 (kb) 48 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1418 817 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1502 816 46 (kv) 46 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1548 817 153 (\227of the ) 153 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1701 816 24 (k) 24 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1725 817 238 ( command for) 238 SB
634 867 1448 (displaying a backtrace of stack frames. All three commands display the base pointer) 1448 SB
634 917 1417 (\(ChildEBP\) of each function\222s frame on the stack, along with the function\222s return) 1417 SB
634 967 1402 (address, and the module and function name. The following shows a typical output) 1402 SB
634 1017 76 (line:) 76 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1106 100 (kd> k) 100 SB
634 1152 320 (ChildEBP RetAddr) 320 SB
634 1198 840 (ff379bb0 80207b15 ATDISK!_DriverEntry+0x42) 840 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1284 77 (The ) 77 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
711 1283 48 (kb) 48 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
759 1284 494 ( command is identical to the ) 494 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1253 1283 24 (k) 24 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1277 1284 707 ( command except that it also displays the) 707 SB
634 1334 883 (values of the first three arguments to each function.) 883 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 1423 120 (kd> kb) 120 SB
634 1469 600 (ChildEBP RetAddr Args to Child) 600 SB
634 1515 1380 (ff379bb0 80207b15 ff47e9b0 80088998 80088998 ATDISK!_DriverEntry+0x42) 1380 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 1601 77 (The ) 77 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
711 1600 46 (kv) 46 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
757 1601 431 ( command is identical to ) 431 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1188 1600 59 (kb ) 59 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1247 1601 831 (except that it displays additional information for) 831 SB
634 1651 1416 (functions that have been compiled with frame pointer optimization \(the /Oy option) 1416 SB
634 1701 124 (for the ) 124 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
758 1701 98 (cl386) 98 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
856 1701 1134 ( compiler\). This applies only to free builds, because frame pointer) 1134 SB
634 1751 1426 (optimization is disabled on checked builds. If [EBP] appears in the additional FPO) 1426 SB
634 1801 1401 (information, it means that the function uses the EBP register as a general purpose) 1401 SB
634 1851 828 (register. This is likely if the function has nested ) 828 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1462 1850 56 (for) 56 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1518 1851 528 ( loops. The bracketed numbers) 528 SB
634 1901 1037 (in the FPO information indicate respectively: the number of ) 1037 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1671 1900 174 (DWORD) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1845 1901 167 (s used for) 167 SB
634 1951 450 (arguments, the number of ) 450 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1084 1950 174 (DWORD) 174 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1258 1951 765 (s used for local variables, and the number of) 765 SB
634 2001 496 (registers saved in the prolog.) 496 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
634 2090 120 (kd> kv) 120 SB
634 2136 600 (ChildEBP RetAddr Args to Child) 600 SB
634 2182 1380 (ff379bb0 80207b15 ff47e9b0 80088998 80088998 ATDISK!_DriverEntry+0x42) 1380 SB
634 2228 420 (\(FPO: [EBP] [2,25,4]\)) 420 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 20 def
/wp$fpage (20) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 21 21
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (21) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
721 496 934 (If the function has more than three arguments, use the ) 934 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1655 495 59 (dd ) 59 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1714 496 316 (command to dump) 316 SB
721 546 1417 (memory beginning at the ChildEBP address. The function\222s arguments begin eight) 1417 SB
721 596 1390 (bytes after this base address. The following diagram illustrates how the compiler) 1390 SB
721 646 185 (constructs ) 185 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
906 646 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
926 646 284 (86 stack frames:) 284 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 735 120 (arg...) 120 SB
721 781 80 (arg1) 80 SB
721 827 80 (arg0) 80 SB
721 873 540 (return addr <--Original ESP) 540 SB
721 919 540 (caller\222s EBP <--Current EBP) 540 SB
721 965 260 (Local storage) 260 SB
802 1011 20 (.) 20 SB
802 1057 20 (.) 20 SB
802 1103 20 (.) 20 SB
802 1149 20 (.) 20 SB
884 1149 300 ( <--Current ESP) 300 SB
32 0 0 63 63 0 0 0 60 /Helvetica-Narrow-Bold /font16 ANSIFont font
721 1249 513 (1.6.1.2  MIPS Targets) 513 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1331 71 (For ) 71 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
792 1331 196 (mipskd.exe) 196 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
988 1331 153 (, use the ) 153 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1141 1330 24 (k) 24 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1165 1331 929 ( command to display a stack backtrace. The following) 929 SB
721 1381 472 (shows a typical output line:) 472 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1470 100 (kd> k) 100 SB
721 1516 580 (Callee-SP Return-RA Call Site) 580 SB
721 1562 1000 ( ff379bb0 80207b15 : nt!NcrInterruptServiceRoutine) 1000 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1648 1405 (Typically, the first four arguments are passed in the a0..a3 registers, with the first) 1405 SB
721 1698 1377 (argument in a0, and so on. Additional arguments are pushed onto the stack. One) 1377 SB
721 1748 1431 (exception to this occurs if the function\222s return value is a structure. In this case, the) 1431 SB
721 1798 1381 (function\222s caller allocates memory for the result, and a pointer to this memory is) 1381 SB
721 1848 1439 (passed in register a0. The function\222s first three arguments are then passed in a1..a3,) 1439 SB
721 1898 801 (with additional arguments passed on the stack.) 801 SB
721 1981 1351 (The compiler treats the argument registers \(a0..a3\) as temporary registers, and) 1351 SB
721 2031 1445 (consequently, it can be difficult to determine the arguments of the functions listed in) 1445 SB
721 2081 882 (a stack trace. To do this, you might need to use the ) 882 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1603 2080 23 (u) 23 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1626 2081 419 ( command to display the) 419 SB
721 2131 1369 (unassembled instructions for a function. By examining the instructions, you can) 1369 SB
721 2181 1338 (determine whether the function moved its arguments, and if so, to where. \(For) 1338 SB
721 2231 1402 (example, a function might move an argument to a save register or onto the stack\).) 1402 SB
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
346 2339 1172 (1.6.2  Built-in Kernel Debugger Extensions) 1172 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2435 1448 (The kernel debugger has a number of built-in extension commands that are useful in) 1448 SB
721 2485 1388 (debugging drivers. For a complete list of the built-in extension commands, enter ) 1388 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
2109 2484 37 (!?) 37 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2535 1227 (at the kd> prompt. The command line syntax for a built-in extension is:) 1227 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 2624 540 (!extension_name [arguments]) 540 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 21 def
/wp$fpage (21) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 22 22
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (22) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
0 0 0 fC
634 496 1336 (The following table describes some of the built-in extensions for kernel-mode) 1336 SB
634 546 132 (drivers:) 132 SB
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 629 CB
634 634 115 (Syntax) 115 SB
gr
gs 890 63 1193 629 CB
1243 634 196 (Description) 196 SB
gr
1448 2 634 692 B
1 F
n
gs 558 63 634 699 CB
634 704 69 (!cxr) 69 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 699 CB
703 704 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 699 CB
713 703 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1193 699 CB
1243 704 818 (Displays the context record at the specified address.) 818 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 762 CB
634 767 57 (!db) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 762 CB
691 767 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 762 CB
714 766 267 (PhysicalAddress) 267 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 762 CB
981 767 13 (]) 13 SB
gr
gs 890 50 1193 762 CB
1243 767 770 (Displays a hexadecimal and ASCII dump of 128) 770 SB
gr
gs 890 46 1193 812 CB
1243 813 835 (bytes from the specified physical memory address on) 835 SB
gr
gs 890 46 1193 858 CB
1243 859 405 (the target machine. If the ) 405 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 858 CB
1648 858 277 (PhysicalAddress ) 277 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 858 CB
1925 859 150 (argument) 150 SB
gr
gs 890 46 1193 904 CB
1243 905 774 (is omitted, the command dumps beginning at the) 774 SB
gr
gs 890 59 1193 950 CB
1243 951 441 (byte following the previous ) 441 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 59 1193 950 CB
1684 951 57 (!db) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1193 950 CB
1741 951 111 ( dump.) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1009 CB
634 1014 57 (!dd) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1009 CB
691 1014 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1009 CB
714 1013 267 (PhysicalAddress) 267 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1009 CB
981 1014 13 (]) 13 SB
gr
gs 890 50 1193 1009 CB
1243 1014 578 (Displays a hexadecimal dump of 32 ) 578 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 50 1193 1009 CB
1821 1014 147 (ULONG) 147 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1009 CB
1968 1014 101 (s from) 101 SB
gr
gs 890 46 1193 1059 CB
1243 1060 816 (the specified physical memory address on the target) 816 SB
gr
gs 890 46 1193 1105 CB
1243 1106 247 (machine. If the ) 247 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1105 CB
1490 1105 277 (PhysicalAddress ) 277 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1105 CB
1767 1106 187 (argument is) 187 SB
gr
gs 890 46 1193 1151 CB
1243 1152 813 (omitted, the command dumps beginning at the byte) 813 SB
gr
gs 890 59 1193 1197 CB
1243 1198 365 (following the previous ) 365 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 59 1193 1197 CB
1608 1198 57 (!dd) 57 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1193 1197 CB
1665 1198 111 ( dump.) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1256 CB
634 1261 127 (!devobj) 127 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1256 CB
761 1261 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1256 CB
771 1260 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1256 CB
1243 1261 724 (Displays a list containing information about a) 724 SB
gr
gs 890 46 1193 1306 CB
1243 1307 447 (specified device object. The ) 447 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1306 CB
1690 1306 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1306 CB
1816 1307 225 ( argument is a) 225 SB
gr
gs 890 46 1193 1352 CB
1243 1353 761 (pointer to the device object, and can be obtained) 761 SB
gr
gs 890 46 1193 1398 CB
1243 1399 155 (using the ) 155 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 46 1193 1398 CB
1398 1399 127 (!drvobj) 127 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1398 CB
1525 1399 441 ( command. The information) 441 SB
gr
gs 890 46 1193 1444 CB
1243 1445 772 (displayed includes the device name of the object,) 772 SB
gr
gs 890 46 1193 1490 CB
1243 1491 839 (information about the device\222s current IRP, and a list) 839 SB
gr
gs 890 46 1193 1536 CB
1243 1537 766 (of addresses of any pending IRPs in the device\222s) 766 SB
gr
gs 890 59 1193 1582 CB
1243 1583 104 (queue.) 104 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1641 CB
634 1646 127 (!drvobj) 127 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1641 CB
761 1646 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1641 CB
771 1645 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1641 CB
1243 1646 748 (Displays a list of all device objects created by a) 748 SB
gr
gs 890 46 1193 1691 CB
1243 1692 334 (specified driver. The ) 334 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1691 CB
1577 1691 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1691 CB
1703 1692 346 ( argument is a pointer) 346 SB
gr
gs 890 46 1193 1737 CB
1243 1738 680 (to the driver object, and can be obtained by) 680 SB
gr
gs 890 46 1193 1783 CB
1243 1784 748 (examining the arguments passed to the driver\222s) 748 SB
gr
gs 890 59 1193 1829 CB
1243 1830 319 (DriverEntry routine.) 319 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1888 CB
634 1893 136 (!drivers) 136 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1193 1888 CB
1243 1893 726 (Displays information about all loaded drivers.) 726 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 50 634 1951 CB
634 1956 53 (!ed) 53 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 50 634 1951 CB
687 1956 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 50 634 1951 CB
697 1955 267 (PhysicalAddress) 267 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 50 634 1951 CB
964 1956 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 50 634 1951 CB
974 1955 111 (ulong0) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 59 634 2001 CB
634 2002 13 ([) 13 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 59 634 2001 CB
647 2001 111 (ulong1) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 59 634 2001 CB
758 2002 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 59 634 2001 CB
768 2001 111 (ulong2) 111 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 59 634 2001 CB
879 2002 53 ( ...]) 53 SB
gr
gs 890 50 1193 1951 CB
1243 1956 314 (Writes one or more ) 314 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 50 1193 1951 CB
1557 1956 157 (ULONG ) 157 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1951 CB
1714 1956 350 (values to the specified) 350 SB
gr
gs 890 59 1193 2001 CB
1243 2002 761 (physical memory address on the target machine.) 761 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2060 CB
634 2065 117 (!errlog) 117 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 2060 CB
1243 2065 787 (Displays information about any pending events in) 787 SB
gr
gs 890 46 1193 2110 CB
1243 2111 809 (the I/O system\222s error log. These are events queued) 809 SB
gr
gs 890 46 1193 2156 CB
1243 2157 229 (by calls to the ) 229 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 890 46 1193 2156 CB
1472 2157 399 (IoWriteErrorLogEntry) 399 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 2156 CB
1871 2157 180 ( function to) 180 SB
gr
gs 890 46 1193 2202 CB
1243 2203 800 (be written to the system\222s event log for subsequent) 800 SB
gr
gs 890 46 1193 2248 CB
1243 2249 794 (viewing by the Event Viewer. This command only) 794 SB
gr
gs 890 46 1193 2294 CB
1243 2295 803 (displays pending entries that have not been written) 803 SB
gr
gs 890 46 1193 2340 CB
1243 2341 809 (to the event log. If the system crashes, this function) 809 SB
gr
gs 890 46 1193 2386 CB
1243 2387 784 (is useful for viewing events that are not written to) 784 SB
gr
gs 890 59 1193 2432 CB
1243 2433 540 (the event log because of the crash.) 540 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2491 CB
634 2496 69 (!exr) 69 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 2491 CB
703 2496 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 2491 CB
713 2495 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 2491 CB
1243 2496 599 (Displays the formatted contents of the) 599 SB
gr
gs 890 59 1193 2541 CB
1243 2542 629 (EXCEPTION_RECORD pointed to by ) 629 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 59 1193 2541 CB
1872 2541 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1193 2541 CB
1998 2542 10 (.) 10 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2600 CB
634 2605 85 (!frag) 85 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 2600 CB
719 2605 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 2600 CB
742 2604 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 2600 CB
821 2605 13 (]) 13 SB
gr
gs 890 50 1193 2600 CB
1243 2605 762 (Displays information about fragmentation in the) 762 SB
gr
gs 890 46 1193 2650 CB
1243 2651 723 (nonpaged pool. The two low-order bits of the ) 723 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 2650 CB
1966 2650 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1193 2696 CB
1243 2697 724 (argument specify the level of detail displayed.) 724 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 22 def
/wp$fpage (22) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 23 23
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (23) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
gs 558 63 721 496 CB
721 501 115 (Syntax) 115 SB
gr
gs 890 63 1280 496 CB
1330 501 196 (Description) 196 SB
gr
557 2 721 559 B
1 F
n
889 2 1280 559 B
1 F
n
gs 558 63 721 566 CB
721 571 162 (!filecache) 162 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1280 566 CB
1330 571 779 (Displays information about the file system cache.) 779 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 629 CB
721 634 126 (!handle) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 629 CB
847 634 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 629 CB
870 633 109 (handle) 109 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 629 CB
979 634 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 629 CB
1002 633 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 629 CB
1081 634 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 629 CB
1104 633 124 (process) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 629 CB
1228 634 39 (]]]) 39 SB
gr
gs 890 50 1280 629 CB
1330 634 324 (Displays data about ) 324 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 50 1280 629 CB
1654 633 109 (handle) 109 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1280 629 CB
1763 634 380 (, the index of the handle) 380 SB
gr
gs 890 46 1280 679 CB
1330 680 504 (in the process\222s handle table. If ) 504 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 679 CB
1834 679 109 (handle) 109 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 679 CB
1943 680 122 ( is 0 \(or) 122 SB
gr
gs 890 46 1280 725 CB
1330 726 726 (unspecified\), the command dumps data for all) 726 SB
gr
gs 890 46 1280 771 CB
1330 772 612 (handles. The two low-order bits of the ) 612 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 771 CB
1942 771 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 817 CB
1330 818 794 (argument specify the level of detail displayed. The) 794 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 863 CB
1330 863 124 (process) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 863 CB
1454 864 643 ( argument identifies the process to dump) 643 SB
gr
gs 890 46 1280 909 CB
1330 910 728 (handles for, and is either the process ID or the) 728 SB
gr
gs 890 46 1280 955 CB
1330 956 746 (address of a process object. If not specified, the) 746 SB
gr
gs 890 46 1280 1001 CB
1330 1002 815 (current process is used. 0 dumps information for all) 815 SB
gr
gs 890 59 1280 1047 CB
1330 1048 264 (active processes.) 264 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1106 CB
721 1111 94 (!heap) 94 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1106 CB
815 1111 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 1106 CB
838 1110 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1106 CB
964 1111 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 1106 CB
987 1110 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1106 CB
1066 1111 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 1106 CB
1089 1110 124 (process) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1106 CB
1213 1111 39 (]]]) 39 SB
gr
gs 890 63 1280 1106 CB
1330 1111 479 (Dumps the heap for a process.) 479 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1169 CB
721 1174 64 (!irp) 64 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1169 CB
785 1174 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 1169 CB
795 1173 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1280 1169 CB
1330 1174 724 (Displays formatted information about the IRP) 724 SB
gr
gs 890 46 1280 1219 CB
1330 1220 199 (specified by ) 199 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 1219 CB
1529 1219 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 1219 CB
1655 1220 506 (. Note that the function does not) 506 SB
gr
gs 890 46 1280 1265 CB
1330 1266 170 (verify that ) 170 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 1265 CB
1500 1265 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 1265 CB
1626 1266 478 ( is an IRP. This command can) 478 SB
gr
gs 890 46 1280 1311 CB
1330 1312 818 (dump IRPs after they have been freed or completed,) 818 SB
gr
gs 890 59 1280 1357 CB
1330 1358 469 (or in a post-mortem situation.) 469 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1416 CB
721 1421 139 (!irpzone) 139 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1416 CB
860 1421 58 ( [F]) 58 SB
gr
gs 890 50 1280 1416 CB
1330 1421 807 (Displays information about all IRPs allocated from) 807 SB
gr
gs 890 46 1280 1466 CB
1330 1467 728 (zoned pool. If the \221F\222 argument is omitted, the) 728 SB
gr
gs 890 46 1280 1512 CB
1330 1513 762 (command prints only the address of the IRP, the) 762 SB
gr
gs 890 46 1280 1558 CB
1330 1559 827 (address of the thread object associated with the IRP,) 827 SB
gr
gs 890 46 1280 1604 CB
1330 1605 810 (and a pointer to the IRP\222s current device object \(for) 810 SB
gr
gs 890 59 1280 1650 CB
1330 1651 805 (example, the device associated with the last stack\).) 805 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1709 CB
721 1714 58 (!kb) 58 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1280 1709 CB
1330 1714 803 (Displays a stack trace from the last dumped frame.) 803 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1772 CB
721 1777 100 (!locks) 100 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1772 CB
821 1777 91 ( [-v] [) 91 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 1772 CB
912 1776 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 1772 CB
1038 1777 13 (]) 13 SB
gr
gs 890 50 1280 1772 CB
1330 1777 810 (Displays information about a kernel-mode resource) 810 SB
gr
gs 890 46 1280 1822 CB
1330 1823 276 (lock specified by ) 276 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 1822 CB
1606 1822 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 1822 CB
1732 1823 55 (. If ) 55 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 1822 CB
1787 1822 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 1822 CB
1913 1823 235 ( is omitted, the) 235 SB
gr
gs 890 46 1280 1868 CB
1330 1869 775 (command dumps information on all kernel-mode) 775 SB
gr
gs 890 59 1280 1914 CB
1330 1915 809 (resource locks. Use the -v option for verbose mode.) 809 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 1973 CB
721 1978 64 (!lpc) 64 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1280 1973 CB
1330 1978 768 (Displays information about all LPC port objects.) 768 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 2036 CB
721 2041 194 (!memusage) 194 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1280 2036 CB
1330 2041 773 (Displays summary statistics on physical memory) 773 SB
gr
gs 890 59 1280 2086 CB
1330 2087 738 (usage, collected from the page frame database.) 738 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 2145 CB
721 2150 116 (!object) 116 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 2145 CB
837 2150 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 2145 CB
847 2149 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1280 2145 CB
1330 2150 811 (Displays information about the object pointed to by) 811 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 59 1280 2195 CB
1330 2195 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1280 2195 CB
1456 2196 10 (.) 10 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 2254 CB
721 2259 71 (!pcr) 71 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1280 2254 CB
1330 2259 695 (Displays the formatted contents of the PCR.) 695 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 2317 CB
721 2322 70 (!pfn) 70 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 721 2317 CB
791 2322 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 721 2317 CB
801 2321 317 (PageFrameNumber) 317 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1280 2317 CB
1330 2322 709 (Dumps the page frame database entry for the) 709 SB
gr
gs 890 46 1280 2367 CB
1330 2368 434 (physical page identified by ) 434 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1280 2367 CB
1764 2367 317 (PageFrameNumber) 317 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1280 2367 CB
2081 2368 10 (,) 10 SB
gr
gs 890 46 1280 2413 CB
1330 2414 799 (which is the page\222s index in the array of records of) 799 SB
gr
gs 890 59 1280 2459 CB
1330 2460 392 (the page frame database.) 392 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 721 2518 CB
721 2523 84 (!pool) 84 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1280 2518 CB
1330 2523 477 (Dumps the kernel-mode heap.) 477 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 23 def
/wp$fpage (23) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 24 24
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (24) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
0 0 0 fC
gs 558 63 634 496 CB
634 501 115 (Syntax) 115 SB
gr
gs 890 63 1193 496 CB
1243 501 196 (Description) 196 SB
gr
557 2 634 559 B
1 F
n
889 2 1193 559 B
1 F
n
gs 558 63 634 566 CB
634 571 140 (!process) 140 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 566 CB
774 571 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 566 CB
797 570 134 (process ) 134 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 566 CB
931 571 13 ([) 13 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 566 CB
944 570 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 566 CB
1023 571 26 (]]) 26 SB
gr
gs 890 50 1193 566 CB
1243 571 794 (Dumps information about the process specified by) 794 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 616 CB
1243 616 124 (process) 124 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 616 CB
1367 617 591 (, which is either the process ID or the) 591 SB
gr
gs 890 46 1193 662 CB
1243 663 776 (address of the process object. If not specified, the) 776 SB
gr
gs 890 46 1193 708 CB
1243 709 815 (current process is used. 0 dumps information for all) 815 SB
gr
gs 890 46 1193 754 CB
1243 755 753 (active processes. The three low-order bits of the) 753 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 800 CB
1243 800 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 800 CB
1322 801 609 ( argument determine the level of detail) 609 SB
gr
gs 890 59 1193 846 CB
1243 847 161 (displayed.) 161 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 905 CB
634 910 66 (!pte) 66 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 905 CB
700 910 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 905 CB
710 909 193 (VirtualAddr) 193 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 905 CB
1243 910 831 (Displays information about the physical address that) 831 SB
gr
gs 890 46 1193 955 CB
1243 956 809 (corresponds to the specified virtual address. This is) 809 SB
gr
gs 890 46 1193 1001 CB
1243 1002 809 (useful if a driver does a lot of translations back and) 809 SB
gr
gs 890 46 1193 1047 CB
1243 1048 784 (forth from virtual to physical. The PFN address is) 784 SB
gr
gs 890 46 1193 1093 CB
1243 1094 789 (the page frame number of the virtual address. Use) 789 SB
gr
gs 890 46 1193 1139 CB
1243 1140 799 (this as the first 20 bits of the physical address, and) 799 SB
gr
gs 890 46 1193 1185 CB
1243 1186 833 (append the last 12 bits of the virtual address to come) 833 SB
gr
gs 890 59 1193 1231 CB
1243 1232 460 (up with the physical address.) 460 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1290 CB
634 1295 121 (!reload) 121 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1290 CB
1243 1295 825 (Causes the kernel debugger to load the symbol files,) 825 SB
gr
gs 890 59 1193 1340 CB
1243 1341 672 (discarding any previously loaded symbols.) 672 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1399 CB
634 1404 58 (!sel) 58 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1399 CB
692 1404 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1399 CB
715 1403 128 (selector) 128 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1399 CB
843 1404 13 (]) 13 SB
gr
gs 890 63 1193 1399 CB
1243 1404 391 (Displays selector values.) 391 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1462 CB
634 1467 69 (!srb) 69 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1462 CB
703 1467 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1462 CB
713 1466 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1462 CB
1243 1467 599 (Displays the formatted contents of the) 599 SB
gr
gs 890 59 1193 1512 CB
1243 1513 661 (SCSI_REQUEST_BLOCK pointed to by ) 661 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 59 1193 1512 CB
1904 1512 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 59 1193 1512 CB
2030 1513 10 (.) 10 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1571 CB
634 1576 158 (!sympath) 158 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1571 CB
792 1576 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1571 CB
802 1575 192 (SymbolPath) 192 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1571 CB
1243 1576 808 (Resets the path used by the kernel debugger to find) 808 SB
gr
gs 890 59 1193 1621 CB
1243 1622 319 (debugging symbols.) 319 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1680 CB
634 1685 125 (!thread) 125 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1680 CB
759 1685 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1680 CB
782 1684 105 (thread) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1680 CB
887 1685 23 ( [) 23 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 1680 CB
910 1684 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 1680 CB
989 1685 26 (]]) 26 SB
gr
gs 890 50 1193 1680 CB
1243 1685 813 (Dumps information about a specified thread, where) 813 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1730 CB
1243 1730 126 (address) 126 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1730 CB
1369 1731 502 ( points to a thread object. If the ) 502 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1730 CB
1871 1730 105 (thread) 105 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1776 CB
1243 1777 799 (argument is omitted, the command dumps data for) 799 SB
gr
gs 890 46 1193 1822 CB
1243 1823 777 (the current thread. The three low-order bits of the) 777 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 1868 CB
1243 1868 79 (flags) 79 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 1868 CB
1322 1869 609 ( argument determine the level of detail) 609 SB
gr
gs 890 59 1193 1914 CB
1243 1915 161 (displayed.) 161 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 1973 CB
634 1978 89 (!time) 89 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 1973 CB
1243 1978 674 (Displays the PerformanceCounterRate and) 674 SB
gr
gs 890 59 1193 2023 CB
1243 2024 270 (TimerDifference.) 270 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2082 CB
634 2087 86 (!trap) 86 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 558 63 634 2082 CB
720 2087 10 ( ) 10 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 558 63 634 2082 CB
730 2086 264 (TrapFrameAddr) 264 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 2082 CB
1243 2087 728 (Dumps the machine state when the trap frame) 728 SB
gr
gs 890 46 1193 2132 CB
1243 2133 215 (occurred. On ) 215 SB
gr
32 0 0 40 40 0 0 0 37 /Times-Italic /font31 ANSIFont font
gs 890 46 1193 2132 CB
1458 2132 18 (x) 18 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 46 1193 2132 CB
1476 2133 553 (86-based platforms, a trap frame is) 553 SB
gr
gs 890 46 1193 2178 CB
1243 2179 823 (generated whenever there is an interrupt or a system) 823 SB
gr
gs 890 46 1193 2224 CB
1243 2225 763 (call. Identify a trap frame by the value of its first) 763 SB
gr
gs 890 46 1193 2270 CB
1243 2271 805 (argument \(badb0d00\). This is useful if you want to) 805 SB
gr
gs 890 46 1193 2316 CB
1243 2317 771 (see the state of the machine when an access fault) 771 SB
gr
gs 890 59 1193 2362 CB
1243 2363 146 (occurred.) 146 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2421 CB
634 2426 58 (!tss) 58 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1193 2421 CB
1243 2426 771 (Displays the contents of the Task State Segment.) 771 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2484 CB
634 2489 75 (!vad) 75 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 63 1193 2484 CB
1243 2489 239 (Dumps VADs.) 239 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Bold /font29 ANSIFont font
gs 558 63 634 2547 CB
634 2552 67 (!vm) 67 SB
gr
32 0 0 40 40 0 0 0 36 /Times-Roman /font32 ANSIFont font
gs 890 50 1193 2547 CB
1243 2552 794 (Displays summary statistics about virtual memory) 794 SB
gr
gs 890 59 1193 2597 CB
1243 2598 101 (usage.) 101 SB
gr
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 24 def
/wp$fpage (24) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 25 25
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
1298 378 133 (Chapter ) 133 SB
1431 378 18 (1) 18 SB
1449 378 535 (    Debugging Windows NT Drivers) 535 SB
1984 378 9 ( ) 61 SB
2045 378 9 ( ) 61 SB
2106 378 18 (1) 18 SB
2124 378 11 (-) 11 SB
2135 378 36 (25) 36 SB
0 0 0 fC
/fm 256 def
1824 2 346 435 B
1 F
n
32 0 0 71 71 0 0 0 68 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
346 492 1208 (1.6.3  Creating Kernel Debugger Extensions) 1208 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 588 1412 (The kernel debugger supports loadable debugger extension commands, so a driver) 1412 SB
721 638 1408 (developer can create DLLs containing custom routines that can be called from the) 1408 SB
721 688 1321 (kernel debugger prompt. Such extensions are particularly useful for dumping) 1321 SB
721 738 1418 (complex structures in a readable format. The DDK provides source code for a few) 1418 SB
721 788 725 (simple debugger extension samples in the ) 725 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1446 788 326 (src\\krnldbg\\kdexts) 326 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1772 788 382 ( directory of the DDK) 382 SB
721 838 76 (tree.) 76 SB
721 921 1398 (Kernel debugger extensions are implemented as exported DLL functions, and are) 1398 SB
721 971 948 (called from the kd> prompt using the following syntax:) 948 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1060 20 (!) 20 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
741 1060 120 (module) 120 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
861 1060 20 (.) 20 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
881 1060 280 (extension_name) 280 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1161 1060 40 ( [) 40 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1201 1060 180 (arguments) 180 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
1381 1060 20 (]) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1146 467 (The kernel debugger loads ) 467 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1188 1146 187 (module.dll) 187 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1375 1146 243 (, and uses the ) 243 SB
32 0 0 44 44 0 0 0 41 /Times-Bold /font29 ANSIFont font
1618 1145 311 (GetProcAddress) 311 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1929 1146 196 ( function to) 196 SB
721 1196 855 (determine whether the DLL contains an exported ) 855 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1576 1196 285 (extension_name) 285 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1861 1196 258 ( function. Note) 258 SB
721 1246 139 (that the ) 139 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
860 1246 285 (extension_name) 285 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1145 1246 1024 ( is case sensitive. If the function exists, the kernel debugger) 1024 SB
721 1296 1431 (calls it, passing three arguments: the current instruction pointer, a pointer to a table) 1431 SB
721 1346 1097 (of function pointers, and a pointer to the extension\222s arguments.) 1097 SB
721 1429 984 (The prototype of a kernel debugger extension function is:) 984 SB
32 0 0 33 33 0 0 0 31 /LetrGothicMS /font35 ANSIFont font
721 1518 800 (typedef VOID \(*PNTKD_EXTENSION_ROUTINE\)\() 800 SB
721 1564 400 (  DWORD dwCurrentPc,) 400 SB
721 1610 780 (  PNTKD_EXTENSION_APIS lpExtensionApis,) 780 SB
721 1656 480 (  LPSTR lpArgumentString) 480 SB
721 1702 40 (\);) 40 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 1788 485 (The function pointers in the ) 485 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1206 1788 286 (lpExtensionApis) 286 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1492 1788 592 ( table are callbacks into the kernel) 592 SB
721 1838 1387 (debugger. An extension must use them to read and write the address space of the) 1387 SB
721 1888 1432 (target machine. Functions for reading and writing both physical and virtual address) 1432 SB
721 1938 1365 (spaces are available. The kernel debugger also exports functions for looking up) 1365 SB
721 1988 1386 (symbols, parse expressions, and display strings. The prototypes of these routines) 1386 SB
721 2038 310 (are defined in the ) 310 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1031 2038 178 (ntkdexts.h) 178 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1209 2038 186 ( file in the ) 186 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1395 2038 326 (src\\krnldbg\\kdexts) 326 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1721 2038 382 ( directory of the DDK) 382 SB
721 2088 76 (tree.) 76 SB
721 2171 1312 (Most extensions are straightforward. They parse their arguments, read some) 1312 SB
721 2221 1395 (structures out of the target machine\222s memory, and display the structures in some) 1395 SB
721 2271 1025 (readable form. As a result, they are usually portable. Since ) 1025 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1746 2271 120 (i386kd) 120 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1866 2271 84 ( and ) 84 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1950 2271 125 (mipskd) 125 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
721 2321 1440 (expose exactly the same interfaces, one debugger extension will support both MIPS) 1440 SB
721 2371 73 (and ) 73 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
794 2371 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
814 2371 337 (86 target machines.) 337 SB
721 2454 1411 (There are some things debugger extensions cannot do. Because they run as part of) 1411 SB
721 2504 1389 (the kernel debugger, they see the same view of the machine\222s state. Memory that) 1389 SB
721 2554 1310 (has been paged out cannot be read or written nor can the CPU\222s registers be) 1310 SB
721 2604 163 (modified.) 163 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 25 def
/wp$fpage (25) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 188 def
/wp$right 76 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Page: 26 26
%%PageResources: (atend)
SS
0 0 20 11 809 1100 300 SM
32 0 0 40 40 0 0 0 39 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 378 18 (1) 18 SB
277 378 11 (-) 11 SB
288 378 36 (26) 36 SB
324 378 9 ( ) 61 SB
385 378 9 ( ) 61 SB
446 378 692 (Part II    Debugging and Performance Tuning) 692 SB
0 0 0 fC
/fm 256 def
1824 2 259 435 B
1 F
n
32 0 0 83 83 0 0 0 79 /Helvetica-Narrow-Bold /font16 ANSIFont font
0 0 0 fC
259 491 1252 (1.7  Kernel Debugger Protocol and API) 1252 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 605 1380 (Tools vendors interested in developing an alternative to the Windows NT kernel) 1380 SB
634 655 1116 (debugger should refer to the source code provided in the DDK\222s ) 1116 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1750 655 330 (src\\krnldbg\\kdapis) 330 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
634 705 1362 (directory. This code is a functional program that illustrates the kernel debugger) 1362 SB
634 755 1401 (protocol and API. You can build the source to create a binary that can execute on) 1401 SB
634 805 87 (both ) 87 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
721 805 20 (x) 20 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
741 805 643 (86-based and MIPS-based platforms.) 643 SB
634 888 1373 (This sample debugger works similarly to the kernel debuggers in that it uses the) 1373 SB
634 938 1054 (same environment variables and command line switches. It is) 1054 SB
32 0 0 44 44 0 0 0 40 /Times-Italic /font31 ANSIFont font
1688 938 78 ( not ) 78 SB
32 0 0 44 44 0 0 0 40 /Times-Roman /font32 ANSIFont font
1766 938 225 (intended as a) 225 SB
634 988 1392 (functional debugger. This source serves as a reference describing the interface to) 1392 SB
634 1038 1283 (the debug hooks in the Windows NT kernel so that tool vendors can create) 1283 SB
634 1088 1190 (debuggers that run on Windows NT or other operating environments.) 1190 SB
634 1171 1296 (Note that this source documents the interface and mechanisms of the kernel) 1296 SB
634 1221 1417 (debugger for the initial release of Windows NT. The interface is subject to change) 1417 SB
634 1271 1368 (in future releases of the operating system. This source is provided as is, with no) 1368 SB
634 1321 645 (support or obligation from Microsoft.) 645 SB
gsave
initgraphics
/wp$xorig 0 def
/wp$yorig 0 def
/wp$y 792 def
/wp$x 612 def
/wp$page 26 def
/wp$fpage (26) def
/wp$date (07/19/93) def
/wp$time (06:19 PM) def
/wp$box { newpath 0 0 moveto wp$x 0 rlineto 0 wp$y rlineto wp$x neg 0 rlineto closepath } def
wp$box clip newpath
/wp$top 127 def
/wp$bottom 111 def
/wp$left 167 def
/wp$right 97 def
/wp$col 1 def
/wp$colx 348 def
/wp$colxb 0 def

/ndf{1 index where{pop pop pop}{dup xcheck{bind}if def} ifelse}bind def
/ed{exch def}bind def
/SetPageOffset{neg wp$y add/dTop ed/dLeft ed}ndf
/SetPageSize {neg dTop add/dBot ed dLeft add/dRight ed}ndf
/DoCropMarks{gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft 76 sub dTop moveto 72 0 rlineto dLeft 76 sub dBot moveto 72 0 rlineto
  dRight 4 add dTop moveto 72 0 rlineto dRight 4 add dBot moveto 72 0 rlineto
  dLeft dTop 76 add moveto 0 -72 rlineto dRight dTop 76 add moveto 0 -72 rlineto
  dLeft dBot 4 sub moveto 0 -72 rlineto dRight dBot 4 sub moveto 0 -72 rlineto
  stroke grestore}ndf
/DoPageBox {gsave 0 setgray /dopaint true def 0.25 setlinewidth
  dLeft dTop moveto dRight dTop lineto dRight dBot lineto dLeft dBot lineto
  closepath stroke grestore}ndf
40.5 72 SetPageOffset
531 648 SetPageSize
DoCropMarks
DoPageBox
 grestore
1 #C
statusdict begin /manualfeed false store end
EJ RS
%%PageTrailer
%%PageResources: font Helvetica-Narrow-Bold
%%+ font Times-Italic
%%+ font Times-Roman
%%Trailer
SVDoc restore
end
%%Pages: 26
% TrueType font name key:
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT310000 = 
%    MSTT31c1be = 08afDArial NarrowF00000028000002bc0000
%    MSTT31c1ca = 08afDArial NarrowF00000064000002bc0000
%    MSTT31c1d6 = 08afDArial NarrowF00000026000001900000
%    MSTT31c1e2 = 08afDArial NarrowF00000053000002bc0000
%    MSTT31c1ee = 08afDArial NarrowF00000047000002bc0000
%    MSTT31c1fa = 08afDMSIconsF00000028000001900000
%    MSTT31c205 = 08afDArial NarrowF0000003f000002bc0000
%    MSTT31c211 = 08afDArialF00000032000001900000
%    MSTT31c21c = 08afDArial NarrowF0000002c000002bc0000
%    MSTT31c228 = 08afDLucida Sans TypewriterF00000021000001900000
%    MSTT31c237 = 08afDArial NarrowF00000032000002bc0000
%    MSTT31c243 = 08afDTimes New RomanF00000032000001900000
%    MSTT31c250 = 08afDTimes New RomanF0000002c000001900000
%    MSTT31c25d = 08afDTimes New RomanF0000001d000001900000
%    MSTT31c26a = 08afDTimes New RomanF00000019000001900000
%    MSTT31c277 = 08afDTimes New RomanF00000015000001900000
%    MSTT31c284 = 08afDTimes New RomanF0000002c000002bc0000
%    MSTT31c291 = 08afDTimes New RomanF0000002c000001900001
%    MSTT31c29e = 08afDTimes New RomanF00000021000001900000
%    MSTT31c2ab = 08afDTimes New RomanF00000028000002bc0000
%    MSTT31c2b8 = 08afDTimes New RomanF00000011000001900000
%    MSTT31c2c5 = 08afDTimes New RomanF00000028000001900000
%    MSTT31c2d2 = 08afDLucida Sans TypewriterF00000021000002bc0000
%    MSTT31c2e1 = 08afDTimes New RomanF0000003a000001900000
%    MSTT31c2ee = 08afDTimes New RomanF0000001e000001900000
%    MSTT31c2fb = 08afDTimes New RomanF00000028000001900001
%    MSTT31c308 = 08afDTimes New RomanF00000011000001900001
%    MSTT31c315 = 08afDTimes New RomanF00000000000001900000
%    MSTT31c322 = 08afDArial NarrowF00000021000002bc0000
%    MSTT31c32e = 08afDTimes New RomanF00000023000001900000
%    MSTT31c33b = 08afDLucida Sans TypewriterF00000021000001900001
%    MSTT31c34a = 08afDTimes New RomanF0000001f000001900000
%%DocumentSuppliedResources: procset Win35Dict 3 1

%%DocumentNeededResources: font Helvetica-Narrow-Bold
%%+ font LetrGothicMS
%%+ font MSIcons2
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-Roman

%%EOF
