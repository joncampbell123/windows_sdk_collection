<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>DVD Time Stamp Rate Change Property Set</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
function ShowButtons() {
    if (window.top.frames.length!=0 && window.top.frames[0].ShowButtons!=null)
	window.top.frames[0].ShowButtons('/dssd0305.htm','/dssd0000.htm','/dssd0092.htm','/index.htm','/dssd0307.htm');
}
ShowButtons();
//-->
</SCRIPT>
</HEAD>
<BODY onLoad="ShowButtons()" TOPMARGIN=10 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="propset_0001060705000000">DVD Time Stamp Rate Change Property Set</A></H2>
<BR CLEAR=ALL>
<P>The DVD Time Stamp Rate Change property set enables you to change DVD playback rate. DVD playback rates are changed by modifying time stamps between input and output pins on two filters. 

<P>Time stamp remapping is a linear relationship given by the equation y = r(x - x<SUB>i</SUB>), where y is the new time stamp, r is the rate (or slope), x is the original time stamp, and x<SUB>i</SUB> is the x-intercept. This can be represented graphically where the time stamps input to the filter are shown along the x-axis and the output time stamps are shown along the y-axis:

<P><IMG SRC="art/propset1.gif" WIDTH="442" HEIGHT="344" ALT="Graph illustrating time stamp remapping">

<P><B>Variable definitions for the time stamp conversion graph:</B>

<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">x = input time stamp
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">y = output time stamp
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">x<SUB>i</SUB> = current x-axis intercept
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">x<SUB>s</SUB> = start time of the current rate
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">x<SUB>i2</SUB> = x-axis intercept for new rate
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">x<SUB>s2</SUB> = start time of the new rate
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">r = current rate
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">r<SUB>2</SUB> = new rate
</FONT></TD></TR></TABLE>
<P>The decoder filter handles DVD rate changes, by reading the original time stamp on the media sample (x). The remaining variables, r and x<SUB>i</SUB>, must either be supplied or internally calculated to determine the new time stamp for the sample. The Time Stamp Rate Change property set supports two mechanisms for setting these parameters:

<UL><LI>The <A HREF="dssd0306.htm#propset_0001060705000004" TARGET="TEXT">AM_RATE_ExactRateChange</A> property accepts the <I>OutputZeroTime</I> parameter as the x-axis intercept for new rate, and the <I>Rate</I> parameter as the new rate (x<SUB>i2</SUB> and r<SUB>2</SUB>). However, you must supply the upstream filter setting this property with the equation (y = r(x - x<SUB>i</SUB>)) that the downstream filter is using to do the rate change.

<LI>The <A HREF="dssd0306.htm#propset_0001060705000006" TARGET="TEXT">AM_RATE_SimpleRateChange</A> property specifies two parameters that an upstream filter already knows: the new rate (r<SUB>2</SUB>) and the start time of the new rate (x<SUB>s2</SUB>). This requires the filter doing the rate change to calculate the x-axis intercept (x<SUB>i2</SUB>). You can calculate the new x-axis intercept with the following formula: x<SUB>i2</SUB> = (r/r<SUB>2</SUB>)(x<SUB>i</SUB> - x<SUB>s2</SUB>) + x<SUB>s2</SUB>. Now that you have the input time stamp (x), the new rate (r<SUB>2</SUB>), and x-axis intercept (x<SUB>i2</SUB>), you can plug these variables into the original equation y = r<SUB>2</SUB>(x - x<SUB>i2</SUB>) to calculate the new time stamp.
</UL>
<P>Specifiying the <A HREF="dssd0306.htm#propset_0001060705000006" TARGET="TEXT">AM_RATE_SimpleRateChange</A> property is the easiest way to change the rate, but requires the filter to do some additional calculation.

<P>The <A HREF="dssd0306.htm#propset_0001060705000005" TARGET="TEXT">AM_RATE_MaxFullDataRate</A> property enables an upstream filter to query for the maximum rate at which it can process the data. It uses the <B><A NAME="propset_0001060705000001">AM_MaxFullDataRate</A></B> data type, which is a <B>LONG</B> value.

<P>Finally, the <A HREF="dssd0306.htm#propset_0001060705000007" TARGET="TEXT">AM_RATE_Step</A> property enables the filter to step forward one sample at a time. It uses the <B><A NAME="propset_0001060705000002">AM_Step</A></B> data type, which is a <B>DWORD</B> value.

<P>The following information presents the necessary constants and data types to use for this property set in calls to <A HREF="dssd0155.htm" TARGET="TEXT">IKsPropertySet</A> methods. It provides values for the <A HREF="dssd0414.htm#gloss_00010b0108000001" TARGET="TEXT">GUID</A> (<I>guidPropSet</I>), property ID (<I>dwPropID</I>), and property data type (<I>pPropData</I>) parameters.

<P><B>Property Set GUID:</B> <B><A NAME="propset_0001060705000003">AM_TS_RATE_CHANGE</A></B>

<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Property ID </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Data type used by the specified property
 </B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000004" TARGET="TEXT">AM_RATE_ExactRateChange</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000100" TARGET="TEXT">AM_ExactRateChange</A>
 </FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000005" TARGET="TEXT">AM_RATE_MaxFullDataRate</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000001" TARGET="TEXT">AM_MaxFullDataRate</A>
 </FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000006" TARGET="TEXT">AM_RATE_SimpleRateChange</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000200" TARGET="TEXT">AM_SimpleRateChange</A>
 </FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000007" TARGET="TEXT">AM_RATE_Step</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000002" TARGET="TEXT">AM_Step</A>
 </FONT></TD></TR></TABLE>
<P>The following list provides the Time Stamp Rate Change property set IDs and descriptions.
<DL>
<DT><B><A NAME="propset_0001060705000004">AM_RATE_ExactRateChange</A></B>
 </DT><DD>Use the <A HREF="dssd0306.htm#propset_0001060705000100" TARGET="TEXT">AM_ExactRateChange</A> structure to change rate.
</DD><DT><B><A NAME="propset_0001060705000005">AM_RATE_MaxFullDataRate</A></B>
 </DT><DD>Use the <A HREF="dssd0306.htm#propset_0001060705000001" TARGET="TEXT">AM_MaxFullDataRate</A> <B>long</B> value to process at maximum rate.
</DD><DT><B><A NAME="propset_0001060705000006">AM_RATE_SimpleRateChange</A></B>
 </DT><DD>Use the <A HREF="dssd0306.htm#propset_0001060705000200" TARGET="TEXT">AM_SimpleRateChange</A> structure to change rate.
</DD><DT><B><A NAME="propset_0001060705000007">AM_RATE_Step</A></B>
</DT><DD>Indicates the number of frames to step over.
</DD></DL>
<P>Use the <A HREF="dssd0155.htm" TARGET="TEXT">IKsPropertySet</A> interface to set, retrieve, and query for support of these properties.

<P>This property set uses the following data types.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Data type </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000100" TARGET="TEXT">AM_ExactRateChange</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Changes the rate of DVD playback based on the new rate and the time at which the output time stamps are zero.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0306.htm#propset_0001060705000200" TARGET="TEXT">AM_SimpleRateChange</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Changes the rate of DVD playback, based on starting time and the new rate.
</FONT></TD></TR></TABLE>
<H3><HR COLOR="#0000FF"><A NAME="propset_0001060705000100">AM_ExactRateChange</A></H3>
<A HREF="dssd0306.htm" TARGET="TEXT">DVD Time Stamp Rate Change Property Set</A>
<P>Changes the rate of DVD playback based on the new rate and the time at which the output time stamps are zero.

<PRE><FONT FACE="Courier" SIZE="2">typedef struct {
&#009;REFERENCE_TIME  OutputZeroTime;
&#009;LONG&#009;&#009;Rate;
} AM_ExactRateChange;
</FONT></PRE>
<H5>Members</H5>
<DL><DT><B><A NAME="propset_0001060705000101">OutputZeroTime</A></B>
 </DT><DD>Time at which the output time stamps are zero. 
</DD><DT><B>Rate</B>
 </DT><DD>New rate of playback. 
</DD></DL>
<H5>Remarks</H5>
<P>The <B>OutputZeroTime</B> member variable represents the x-intercept in the graph shown in the <A CLASS=TCTOP HREF="dssd0306.htm" TARGET="TEXT">DVD Time Stamp Rate Change Property Set</A> section.

<P>The <I>AM_RATE_ExactRateChange</I> property uses this structure.
<H3><HR COLOR="#0000FF"><A NAME="propset_0001060705000200">AM_SimpleRateChange</A></H3>
<A HREF="dssd0306.htm" TARGET="TEXT">DVD Time Stamp Rate Change Property Set</A>
<P>Changes the rate of DVD playback, based on starting time and the new rate.

<PRE><FONT FACE="Courier" SIZE="2">typedef struct {REFERENCE_TIME&#009;StartTime;
&#009;LONG&#009;&#009;Rate;
} AM_SimpleRateChange;
</FONT></PRE>
<H5>Members</H5>
<DL><DT><B><A NAME="propset_0001060705000201">StartTime</A></B>
 </DT><DD>Time at which the new rate will take effect.
</DD><DT><B>Rate</B>
 </DT><DD>New rate of playback. 
</DD></DL>
<H5>Remarks</H5>
<P>Specify values for <B>Rate</B> member that are multiples of the normal rate, such as 2 for double time or .5 for half time.

<P>The <A HREF="dssd0306.htm#propset_0001060705000006" TARGET="TEXT">AM_RATE_SimpleRateChange</A> property uses this structure.
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="copyrite.htm" TARGET="TEXT">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
</FONT>
<BR CLEAR=ALL><P>
</FONT><P>
</BODY></HTML>
