<HTML>
<HEAD>
<TITLE>DirectX Media SDK DirectAnimation Tutorial</TITLE>
<LINK REL=STYLESHEET HREF="../../../../../webcd/da/tutorial.css">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="noindex">
</HEAD>
<BODY BGCOLOR="WHITE" LINK=#0033CC TOPMARGIN=0 LEFTMARGIN=20>
<!--TOOLBAR_START-->
<!--TOOLBAR_EXEMPT-->
<!--TOOLBAR_END-->

<DIV CLASS="flush">
<TABLE WIDTH=100% BORDER=0 BGCOLOR=#000000>
<TR ALIGN=RIGHT><TD VALIGN=TOP><FONT CLASS=desc1 SIZE=2>
<A HREF="Section1.html" TARGET="_top">
<IMG SRC="../../../../../media/image/u_prev.gif"
 WIDTH=71 HEIGHT=16 BORDER=0 ALT="Previous Topic">
</A><A HREF="../../../../../webcd/da/tutorial_main.htm" TARGET="_top">
<IMG SRC="../../../../../media/image/d_home.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Tutorial Home Page"></A>
<A HREF="Section3.html" TARGET="_top">
<IMG SRC="../../../../../media/image/u_next.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Next Topic">
</A></FONT></TD><TD WIDTH=30></TD></TR></TABLE></DIV>
<FONT CLASS=title><CENTER>Interacting with geoImage</CENTER></FONT>
<BR>
<FONT CLASS=code>
<DIV STYLE="margin-left: 0.0625in"></FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> This class produces a bidirectional counter that cycles in a given range
 upon button presses.</TD></TR></FONT></TABLE>
<FONT CLASS=code>class Counter extends Statics implements UntilNotifier {<BR>
</FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> constructor for a counter object</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">public Counter(NumberBvr limit) {<BR>
</DIV><DIV STYLE="margin-left: 0.25in">_counterLimit = limit;</FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> upon a skip event invoke the notifier</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">_value = (NumberBvr)untilNotify(_initValue, skip, this);<BR>
</DIV><DIV STYLE="margin-left: 0.125in">}<BR>
</DIV><BR>
<DIV STYLE="margin-left: 0.125in">public Behavior notify(Object eventData, Behavior previous, BvrsToRun lst) {</FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> extract the application data (an integer), into a number behavior</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">NumberBvr adjustment = toBvr(((Integer)eventData).intValue());</FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> use it as an inc/decrement</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">NumberBvr value = add((NumberBvr)previous, adjustment);</FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> cycle between 0 and (limit - 1)</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">value = (NumberBvr)cond(eq(value, toBvr(-1)),<BR>
</DIV><DIV STYLE="margin-left: 0.375in">sub(_counterLimit, toBvr(1)),         </FONT><FONT CLASS=desc2> if -1, wrap around</FONT><FONT CLASS=code><BR>
</DIV><DIV STYLE="margin-left: 0.5in">cond(eq(value, _counterLimit), toBvr(0), value)); </FONT><FONT CLASS=desc2> if limit, wrap around</FONT><FONT CLASS=code></FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> repeat with the new value</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.25in">return untilNotify(value, skip, this);<BR>
</DIV><DIV STYLE="margin-left: 0.125in">}<BR>
</DIV><BR>
<DIV STYLE="margin-left: 0.125in">public NumberBvr getBvr () {<BR>
</DIV><DIV STYLE="margin-left: 0.25in">return _value;<BR>
</DIV><DIV STYLE="margin-left: 0.125in">}<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> Key events with corresponding event data.
 For non-ASCII keys use the Java designation for the key.</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">private static final DXMEvent skipForward1 = keyDown(Event.RIGHT).attachData(new Integer(1));<BR>
private static final DXMEvent skipBack1 = keyDown(Event.LEFT).attachData(new Integer(-1));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> For ASCII keys use the ASCII letter between single quotes.</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">private static final DXMEvent skipForward2 = keyDown(' ').attachData(new Integer(1));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> There is also a timeout event for automatically switching between pictures
 if no manual key presses are issued.</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">private static final DXMEvent auto = timer(toBvr(8)).attachData(new Integer(1));<BR>
</DIV></FONT>
<BR>
<TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> Aggregate the four events above into a single event.</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">private static final DXMEvent skip = orEvent(skipForward1,<BR>
</DIV><DIV STYLE="margin-left: 1.5625in">orEvent(skipBack1,<BR>
</DIV><DIV STYLE="margin-left: 1.6875in">orEvent(skipForward2, auto)));</FONT>
<BR>
</DIV><TABLE><TR><TD WIDTH=500><FONT CLASS=desc1> These are aspects of the counter.</TD></TR></FONT></TABLE>
<FONT CLASS=code><DIV STYLE="margin-left: 0.125in">private NumberBvr _counterLimit;<BR>
private NumberBvr _initValue = toBvr(0); </FONT><FONT CLASS=desc2> start counting at 0</FONT><FONT CLASS=code><BR>
private NumberBvr _value;                </FONT><FONT CLASS=desc2> current value of counter</FONT><FONT CLASS=code><BR>
</DIV><BR>
}<BR>
<BR>
</FONT><FONT CLASS=link><A ID=cpslug HREF="../../../../../help/da/dalegal.htm" TARGET="_top">&#169; 1997 Microsoft Corporation. All rights reserved. Terms of Use.</A></FONT>

<BR>
<BR>
<DIV CLASS="flush">
<TABLE WIDTH=100% BORDER=0 BGCOLOR=#000000>
<TR ALIGN=RIGHT><TD VALIGN=TOP><FONT CLASS=desc1 SIZE=2>
<A HREF="Section1.html" TARGET="_top">
<IMG SRC="../../../../../media/image/u_prev.gif"
 WIDTH=71 HEIGHT=16 BORDER=0 ALT="Previous Topic">
</A><A HREF="../../../../../webcd/da/tutorial_main.htm" TARGET="_top">
<IMG SRC="../../../../../media/image/d_home.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Tutorial Home Page"></A>
<A HREF="Section3.html" TARGET="_top">
<IMG SRC="../../../../../media/image/u_next.gif" WIDTH=48 HEIGHT=16 BORDER=0 ALT="Next Topic">
</A></FONT></TD><TR><TD WIDTH=30></TD></TR></TABLE></DIV>

</BODY>
</HTML>
