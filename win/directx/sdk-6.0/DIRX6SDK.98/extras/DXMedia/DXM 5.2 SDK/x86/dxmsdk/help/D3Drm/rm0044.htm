<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>Appendix D: The Conv3ds.exe Utility</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
function ShowButtons() {
    if (window.top.frames.length!=0 && window.top.frames[0].ShowButtons!=null)
	window.top.frames[0].ShowButtons('/rm0043.htm','/rm0000.htm','/rm0039.htm','/index.htm','/rm0045.htm');
}
ShowButtons();
//-->
</SCRIPT>
</HEAD>
<BODY onLoad="ShowButtons()" TOPMARGIN=10 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="dx5_Appendix_D_The_Conv3ds_exe_Utility_d3drm"></A><A NAME="xfilefrm_0001010706000000">Appendix D: The Conv3ds.exe Utility</A></H2>
<BR CLEAR=ALL>
<P>The Conv3ds.exe utility converts 3-D models produced by Autodesk 3-D Studio and other modeling packages into the Microsoft&#174; DirectX&#174; file format. By default, the utility

 produces binary .x files with no templates.

<H3><A NAME="xfilefrm_0001010706010000">Using Conv3ds.exe</A></H3>
<P>You can run Conv3ds.exe with no options, and it will produce an .x file containing a hierarchy of frames. For example, consider the command: 
<PRE><FONT FACE="Courier" SIZE="2">conv3ds File.3ds
</FONT></PRE>
<P>This command will produce an .x file called File.x from the .3ds file. You can use <A HREF="rm0017.htm#rmframe_000101060b002400" TARGET="TEXT">IDirect3DRMFrame::Load</A> to load the frame. 

<H3><A NAME="xfilefrm_0001010706020000">Conv3ds.exe Optional Arguments</A></H3>
<P><B>Conv3ds.exe -A</B>
<P>If the .3ds file contains key frame data, you can use the <B>-A</B> option to produce an .x file that contains an animation set. The command for doing this would be:
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -A File.3ds
</FONT></PRE>
<P>The <I>File.3ds</I> parameter is the name of the file to be converted. You can use <A HREF="rm0013.htm#rmanimst_0001010607000300" TARGET="TEXT">IDirect3DRMAnimationSet::Load</A> to load the animation.
<P><B>Conv3ds.exe -m</B>
<P>Use the <B>-m</B> option to make an .x file that contains a single mesh made from all the objects in the .3ds file. 
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -m File.3ds
</FONT></PRE>
<P>Use <A HREF="rm0023.htm#rmmshbld_0001010611001500" TARGET="TEXT">IDirect3DRMMeshBuilder::Load</A> to load the mesh.
<P><B>Conv3ds.exe -T</B>
<P>Use the<B>-T</B> option to wrap all the objects and frame hierarchies in a single top-level frame. Using this option, all the frames and objects in the .3ds file can be loaded with a single call to <A HREF="rm0017.htm#rmframe_000101060b002400" TARGET="TEXT">IDirect3DRMFrame::Load</A>. The first top-level frame hierarchy in the .x file will be loaded. The frame containing all the other frames and meshes is called "x3ds_filename" (without the .3ds extension). The <B>-T</B> option will have no effect if it is used with the <B>-m</B> option.
<P><B>Conv3ds.exe -s</B>
<P>The <B>-s</B> option allows you to specify a scale factor for all the objects converted in the .3ds file. For example, the following command makes all objects 10 times bigger: 
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -s10 File.3ds
</FONT></PRE>
<P>The following command makes all objects 10 times smaller:
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -s0.1 File.3ds
</FONT></PRE>
<P><B>Conv3ds.exe -r</B>
<P>The <B>-r</B> option reverses the winding order of the faces when the .3ds file is converted. If, after converting the .3ds file and viewing it in Direct3D,

 the object appears inside-out, try converting it with the <B>-r</B> option. All Lightwave models exported as .3ds files need this option. See <A CLASS=tctop HREF="rm0044.htm#xfilefrm_0001010706030000" TARGET="TEXT">3DS Files Produced from Lightwave Objects</A> for details. 
<P><B>Conv3ds.exe -v</B>
<P>The <B>-v</B> option turns on verbose output mode. Specify an integer with it. The following table shows the currently supported integers.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Option </B></FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning 
</B></FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">-v0 </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Default. Verbose mode off. 
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">-v1 </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Prints warnings about bad objects, and prints general information about what the converter is doing. 
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">-v2 </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Prints basic key frame information, the objects being included in the conversion process, and information about the objects being saved.
</FONT></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">-v3 </FONT></TD>
<TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Very verbose. Mostly useful for the debugging information it provides.
</FONT></TD>
</TR>
</TABLE>
<P><B>Conv3ds.exe -e</B>
<P>The -e option allows you to change the extension for texture map files. For example, consider the command: 
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -e"ppm" File.3ds
</FONT></PRE>
<P>If File.3ds contains objects that reference the texture map file Brick.gif, the .x file will reference the texture map file Brick.ppm. The converter does not convert the texture map file. The texture map files must be in the D3DPATH



 when the resulting .x file is loaded. The D3DPath is an environment variable that sets the default search path. 

<P><B>Conv3ds.exe -x</B>
<P>The <B>-x</B> option forces the Conv3ds.exe utility to produce a text .x file, instead of a binary .x file. Text files are larger but can be hand-edited easily. 
<P><B>Conv3ds.exe -X</B>
<P>The <B>-X</B> option forces the Conv3ds.exe utility to include the Direct3D Retained Mode .x file templates in the file. By default, the templates are not included.
<P><B>Conv3ds.exe -t</B>
<P>The <B>-t</B> option specifies that the .x file produced will not contain texture
information.
<P><B>Conv3ds.exe -N</B> 
<P>The <B>-N</B> option specifies that the .x file produced will not contain normal vector information. All the Direct3D Retained Mode load calls will generate normal vectors for objects with no normal vectors in the .x file.
<P><B>Conv3ds.exe -c</B> 
<P>The <B>-c</B> option specifies that the .x file produced should not contain texture coordinates. By default, if you use the <B>-m</B> option, the mesh that is output will contain (0,0) uv texture coordinates if the .3ds object had no texture coordinates.
<P><B>Conv3ds.exe -f</B>
<P>The <B>-f</B> option specifies that the .x file produced should not contain a frame transformation matrix.

<P><B>Conv3ds.exe - z</B> and <B>Conv3ds.exe -Z</B>
<P>The <B>-z</B> and <B>-Z</B> options allow you to adjust the alpha face color value of all the materials referenced by objects in the .x file. For example, the following command causes <B>Conv3ds.exe</B> to add 0.1 to all alpha values under 0.2:
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -z0.1 -Z0.2 File.3ds
</FONT></PRE>
<P>The following command causes Conv3ds.exe to subtract 0.2 from the alpha values for all alphas:
<PRE><FONT FACE="Courier" SIZE="2">conv3ds-z"-0.2" -z1 File.3ds
</FONT></PRE>
<P><B>Conv3ds.exe -o</B>
<P>The <B>-o</B> option allows you to specify the file name for the .x file produced.
<P><B>Conv3ds.exe -h</B>
<P>The <B>-h</B> option tells the converter not to try to resolve any hierarchy information in the .3ds file (usually produced by the key framer). Instead, all the objects are output in top-level frames if the <B>-m</B> option is not used.

<H3><A NAME="xfilefrm_0001010706030000">3DS Files Produced from Lightwave Objects</A></H3>
<P>There are several issues with .3ds files exported by the Trans3d plug-in for Lightwave. These are best handled using the following Conv3ds.exe command:
<PRE><FONT FACE="Courier" SIZE="2">conv3ds -r -N -f -h -T|m trans3dfile.3ds
</FONT></PRE>
<P>All the .3ds objects produced by Trans3d and the Lightwave object editor need their winding order reversed. Otherwise, they appear inside-out when displayed. They contain no surface normal vector information.

<H3><A NAME="xfilefrm_0001010706040000">Hints and Tips</A></H3>
<P>If you cannot see objects produced by Conv3ds.exe after loading them into the Direct3D Retained Mode viewer, use the scale option <B>-s</B> with a scale factor of approximately 100. This will increase the scale of the objects in the .x file.
<P>If, after loading the object into the viewer and switching from flat shading into Gouraud shading, the object turns dark gray, try converting with the <B>-N</B> option. 
<P>If the textures are not loaded after the object is converted, check whether the object is referencing either .ppm or .bmp files by using the <B>-e</B> option. Also check whether the textures' widths and heights are a power of 2. Make sure the textures are stored in one of the directories in your D3DPATH.
<P>Currently, Conv3ds.exe cannot handle dummy frames used in .3ds animations. It ignores them. However, it will convert any child objects.




<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="copyrite.htm" TARGET="TEXT">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of use.</A>
</FONT>
<BR CLEAR=ALL><P>
</FONT><P>
</BODY></HTML>
