<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>Appendix B: Example</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
function ShowButtons() {
    if (window.top.frames.length!=0 && window.top.frames[0].ShowButtons!=null)
	window.top.frames[0].ShowButtons('/rm0041.htm','/rm0000.htm','/rm0039.htm','/index.htm','/rm0043.htm');
}
ShowButtons();
//-->
</SCRIPT>
</HEAD>
<BODY onLoad="ShowButtons()" TOPMARGIN=10 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="dx5_Appendix_B_Example_d3drm"></A><A NAME="xfilefrm_0001010704000000">Appendix B: Example</A></H2>
<BR CLEAR=ALL>
<P>This appendix describes a simple cube and then shows how to add textures, frames, and animations to it.
<UL><LI><A CLASS=tctop HREF="rm0042.htm#xfilefrm_0001010704010000" TARGET="TEXT">A Simple Cube</A>
<LI><A CLASS=tctop HREF="rm0042.htm#xfilefrm_0001010704020000" TARGET="TEXT">Adding Textures</A>
<LI><A CLASS=tctop HREF="rm0042.htm#xfilefrm_0001010704030000" TARGET="TEXT">Frames and Animations</A>
</UL>
<H3><A NAME="xfilefrm_0001010704010000">A Simple Cube</A></H3>
<P>This file defines a simple cube that has four red sides and two green sides. Notice in this file

 that optional information is being used to add information to the data object defined by the Mesh template.
<PRE><FONT FACE="Courier" SIZE="2">Material RedMaterial {
1.000000;0.000000;0.000000;1.000000;;    // R = 1.0, G = 0.0, B = 0.0
0.000000;
0.000000;0.000000;0.000000;;
0.000000;0.000000;0.000000;;
}
Material GreenMaterial {
0.000000;1.000000;0.000000;1.000000;;     // R = 0.0, G = 1.0, B = 0.0
0.000000;
0.000000;0.000000;0.000000;;
0.000000;0.000000;0.000000;;
}
// Define a mesh with 8 vertices and 12 faces (triangles). Use 
// optional data objects in the mesh to specify materials, normals,
// and texture coordinates.
Mesh CubeMesh {
8;                                // 8 vertices
1.000000;1.000000;-1.000000;,     // vertex 0
-1.000000;1.000000;-1.000000;,    // vertex 1
-1.000000;1.000000;1.000000;,     // etc...
1.000000;1.000000;1.000000;,
1.000000;-1.000000;-1.000000;,
-1.000000;-1.000000;-1.000000;,
-1.000000;-1.000000;1.000000;,
1.000000;-1.000000;1.000000;;

12;                      // 12 faces
3;0,1,2;,                // face 0 has 3 vertices
3;0,2,3;,                // etc...
3;0,4,5;,
3;0,5,1;,
3;1,5,6;,
3;1,6,2;,
3;2,6,7;,
3;2,7,3;,
3;3,7,4;,
3;3,4,0;,
3;4,7,6;,
3;4,6,5;;

// All required data has been defined. Now define optional data
// using the hierarchical nature of the file format.
MeshMaterialList {
2;                    // Number of materials used
12;                   // A material for each face
0,                    // face 0 uses the first
0,                    // material
0,
0,
0,
0,
0,
0,
1,                    // face 8 uses the second
1,                    // material
1,
1;;
{RedMaterial}         // References to the definitions
{GreenMaterial}       // of material 0 and 1
}
MeshNormals {
8;                    // define 8 normals
0.333333;0.666667;-0.666667;,
-0.816497;0.408248;-0.408248;,
-0.333333;0.666667;0.666667;,
0.816497;0.408248;0.408248;,
0.666667;-0.666667;-0.333333;,
-0.408248;-0.408248;-0.816497;,
-0.666667;-0.666667;0.333333;,
0.408248;-0.408248;0.816497;;
12;                   // For the 12 faces,
3;0,1,2;,             // define the normals
3;0,2,3;,
3;0,4,5;,
3;0,5,1;,
3;1,5,6;,
3;1,6,2;,
3;2,6,7;,
3;2,7,3;,
3;3,7,4;,
3;3,4,0;,
3;4,7,6;,
3;4,6,5;;
}
MeshTextureCoords {
8;                        // Define texture coords
0.000000;1.000000;        // for each of the vertices
1.000000;1.000000;
0.000000;1.000000;
1.000000;1.000000;
0.000000;0.000000;
1.000000;0.000000;
0.000000;0.000000;
1.000000;0.000000;;
}
}
</FONT></PRE>
<H3><A NAME="xfilefrm_0001010704020000">Adding Textures</A></H3>
<P>To add textures, use the hierarchical nature of the file format and add an optional <B>TextureFilename</B> data object to the <B>Material</B> data objects. So, the Material objects now read as follows:
<PRE><FONT FACE="Courier" SIZE="2">Material RedMaterial {
1.000000;0.000000;0.000000;1.000000;;    // R = 1.0, G = 0.0, B = 0.0
0.000000;
0.000000;0.000000;0.000000;;
0.000000;0.000000;0.000000;;
TextureFilename {
"tex1.ppm";
}
}
Material GreenMaterial {
0.000000;1.000000;0.000000;1.000000;;     // R = 0.0, G = 1.0, B = 0.0
0.000000;
0.000000;0.000000;0.000000;;
0.000000;0.000000;0.000000;;
TextureFilename {
"win95.ppm";
}
}
</FONT></PRE>
<H3><A NAME="xfilefrm_0001010704030000">Frames and Animations</A></H3>
<P>This section shows how to add frames and animations to a simple cube.
<UL><LI><A CLASS=tctop HREF="rm0042.htm#xfilefrm_0001010704030100" TARGET="TEXT">Frames</A>
<LI><A CLASS=tctop HREF="rm0042.htm#xfilefrm_0001010704030200" TARGET="TEXT">AnimationSets and Animations</A>
</UL>
<H4><A NAME="xfilefrm_0001010704030100">Frames</A></H4>
<P>A frame is expected to take the following structure:
<PRE><FONT FACE="Courier" SIZE="2">Frame Aframe {        // The frame name is chosen for convenience.
FrameTransformMatrix {
...transform data...
}
[ Meshes ] and/or [ More frames]
}
</FONT></PRE>
<P>Place the previously defined cube mesh inside a frame with an identity transform. Then apply an animation to this frame.
<PRE><FONT FACE="Courier" SIZE="2">Frame CubeFrame {
FrameTransformMatrix {
1.000000, 0.000000, 0.000000, 0.000000,
0.000000, 1.000000, 0.000000, 0.000000,
0.000000, 0.000000, 1.000000, 0.000000,
0.000000, 0.000000, 0.000000, 1.000000;;
}
{CubeMesh}        // You could have the mesh inline, but this                  // uses an object reference instead.
}
</FONT></PRE>
<H4><A NAME="xfilefrm_0001010704030200">AnimationSets and Animations</A></H4>
<P>Animations and AnimationSets in the DirectX file format

 map directly to the Direct3D Retained Mode animation concepts.
<PRE><FONT FACE="Courier" SIZE="2">Animation Animation0 {        // The name is chosen for convenience.
{ Frame that it applies to&amp;em;normally a reference }
AnimationKey {
...animation key data...
}
{ ...more animation keys... }
}
</FONT></PRE>
<P>Animations are then grouped into AnimationSets:
AnimationSet AnimationSet0 { // The name is chosen for convenience.
{ an animation&#151;could be inline or a reference }
{ ... more animations ... }
}
<P>Now take the cube through an animation.
<PRE><FONT FACE="Courier" SIZE="2">AnimationSet AnimationSet0 {
Animation Animation0 {
{CubeFrame}    // Use the frame containing the cube
AnimationKey {
2;             // Position keys
9;             // 9 keys
10; 3; -100.000000, 0.000000, 0.000000;;,
20; 3; -75.000000, 0.000000, 0.000000;;,
30; 3; -50.000000, 0.000000, 0.000000;;,
40; 3; -25.500000, 0.000000, 0.000000;;,
50; 3; 0.000000, 0.000000, 0.000000;;,
60; 3; 25.500000, 0.000000, 0.000000;;,
70; 3; 50.000000, 0.000000, 0.000000;;,
80; 3; 75.500000, 0.000000, 0.000000;;,
90; 3; 100.000000, 0.000000, 0.000000;;;
}
}
}
</FONT></PRE>
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="copyrite.htm" TARGET="TEXT">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of use.</A>
</FONT>
<BR CLEAR=ALL><P>
</FONT><P>
</BODY></HTML>
