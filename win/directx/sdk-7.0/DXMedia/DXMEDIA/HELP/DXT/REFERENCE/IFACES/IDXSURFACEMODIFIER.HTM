<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>IDXSurfaceModifier Interface</TITLE>
<SCRIPT LANGUAGE="JavaScript"> var sRelPath = '../../' </SCRIPT>


<META NAME="Description" CONTENT="IDXSurfaceModifier">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetBackground">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetCompositeOperation">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetFillColor">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetForeground">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetLookup">
<META NAME="Description" CONTENT="IDXSurfaceModifier::GetOpacity">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetBackground">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetBounds">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetCompositeOperation">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetFillColor">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetForeground">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetLookup">
<META NAME="Description" CONTENT="IDXSurfaceModifier::SetOpacity">
<META NAME="Description" CONTENT="GetBackground (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="GetCompositeOperation (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="GetFillColor (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="GetForeground (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="GetLookup (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="GetOpacity (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetBackground (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetBounds (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetCompositeOperation (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetFillColor (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetForeground (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetLookup (IDXSurfaceModifier)">
<META NAME="Description" CONTENT="SetOpacity (IDXSurfaceModifier)">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">
<!-- SNIFF_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../../ver.js"></SCRIPT>
<SCRIPT SRC="../../gloss.js"></SCRIPT>
<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- STYLE_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
   var sVR = '../../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicSDKIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicSDKIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicSDKNAV';
   }
   else
   {
	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->

</HEAD>


<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="IDXSurfaceModifier"></A>
<!--TOOLBAR_START-->

<!--TOOLBAR_EXEMPT-->

<!--TOOLBAR_END-->



<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectX Transform Animated Header -- Microsoft DirectX Transform SDK"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../../art/hdrdtrns.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Microsoft DirectX Transform SDK"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectX Transform Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectX Transform SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../../contents.htm">Contents</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../../index.htm">Index</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="interface_intro.htm">Topic Contents</A>
</PRE></TD></TR>

<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="IDXSurfaceInit.htm">IDXSurfaceInit Interface</A>
<IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="idxsurfacepick.htm">IDXSurfacePick Interface</A>
</PRE></TD></TR></TABLE>

<!-- NAV_LINKS_END -->





<BLOCKQUOTE class="body">

<!-- CONTENTS_START -->


<H1>IDXSurfaceModifier Interface</H1>

The <b>IDXSurfaceModifier</b> interface is a <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_P.htm#gloss_proceduralsurface')">procedural surface</a> that uses up to two input surfaces. You use its methods to set background colors, background surfaces, and foreground surfaces, which the <B>DXSurfaceModifier</B> (Surface Modifier) will use to create another surface based on the options you set. Because a Surface Modifier is a procedural surface, you don't need to call <a href="idxtransform.htm#Execute">IDXTransform::Execute</a> to produce output. The Surface Modifier exposes an <a href="idxsurface.htm">IDXSurface</a> interface, so you can call the <b>QueryInterface</b> method on the Surface Modifier and use the returned object as a read-only <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_D.htm#gloss_dxsurface')">DXSurface</A>.
<p>
Although the name "Surface Modifier" might imply that use of this interface will make permanent changes to an existing surface, the original input surfaces are not changed. The only way to see the modifications is through the Surface Modifier, itself.
<p>
It is important to understand the relationship between the background surface, foreground surface, fill color, compositing function, and the Surface Modifier's bounds.

If a background surface exists:




<ul>

	<li>And there is no foreground surface, the fill color will fill the area of the Surface Modifier on top of the background surface if the current compositing operation is set to DXSURFMOD_COMP_OVER. But if the compositing operation is set to DXSURFMOD_COMP_ALPHA_MASK, all nonzero alpha pixels in the background will be used to scale the fill color. For example, if the background surface contained a color-keyed picture of a cat on a transparent background, and the fill color was set to blue, the result would be a blue cat.

	<li>And there is a foreground surface, then it will either be tiled or placed at the correct origin, depending on the option specified in the <A HREF="IDXSurfaceModifier.htm#SetForeground">SetForeground</A> method.  If the compositing operation is set to DXSURFMOD_COMP_OVER, the tiled or centered foreground will be composited over the background surface. If the compositing operation is set to DXSURFMOD_COMP_ALPHA_MASK, all nonzero alpha pixels in the background will be used to scale the tiled or placed foreground image.

</ul>
The bounds of the Surface Modifier will always equal the bounds of the background surface.

<p>
If there is no background surface:
<ul>
	<li>And  a fill color is specified, the background will be filled with the fill color.

	<li>If the compositing operation is set to DXSURFMOD_COMP_OVER (the default), the fill color will fill the area of the Surface Modifier and will be seen behind the foreground image. If the compositing operation is set to DXSURFMOD_COMP_ALPHA_MASK, the alpha value of the fill color will be used to scale the pixels of the foreground image.

</ul>
In this case, the bounds of the surface modifer can be set to any valid value.

<p>
The opacity and lookup table operations apply only to the foreground surface. In all cases, the opacity and lookup operations will be performed on the foreground prior to compositing with the background.
<p>
The foreground surface, if there is one, can either be placed within the bounds of the surface (usually used to center an image on a larger virtual surface), or it can be tiled.
<p>
Information such as the fill color or foreground surface set by previous calls to  <b>SetFillColor</b>, <B>SetForeground</B>, and so on, can be cleared (or unset). This done by calling the set method again with either a zero value or NULL pointer.









<p>To use a Surface Modifier, call the COM <B>CoCreateInstance</B> method, requesting a pointer to a Surface Modifier, as shown.

<PRE>
	IDXSurfaceModifier* cpSurfMod;
	hr = CoCreateInstance( CLSID_DXSurfaceModifier, NULL, CLSCTX_INPROC,
                                     IID_IDXSurfaceModifier, (void **)&amp;cpSurfMod );
</PRE>

<P>The background surface, fill color, and foreground surface of a Surface Modifier can be set with the <A HREF="IDXSurfaceModifier.htm#SetBackground">IDXSurfaceModifier::SetBackground</A>, <A HREF="IDXSurfaceModifier.htm#SetFillColor">IDXSurfaceModifier::SetFillColor</A>, and <A HREF="IDXSurfaceModifier.htm#SetForeground">IDXSurfaceModifier::SetForeground</A> methods, respectively. Finally, call the <A HREF="../iunknown.htm#QueryInterface">QueryInterface</A> method on the Surface Modifier to retrieve a pointer to the modified surface. 

<PRE>
       hr = cpSurfMod-&gt;QueryInterface( IID_IDXSurface, (void**)&amp;g_cpInSurf );
</PRE>


<P CLASS="ref">IDXSurfaceModifier Methods</P>
<BLOCKQUOTE>
<TABLE CLASS="ref">
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetBackground">GetBackground</A></TD>
	<TD>Retrieves a pointer to the <B>DXSurface</B> used as a background.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetCompositeOperation">GetCompositeOperation</A></TD>
	<TD>Retrieves the method used for image compositing.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetFillColor">GetFillColor</A></TD>
	<TD>Retrieves the surface's fill color.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetForeground">GetForeground</A></TD>
	<TD>Retrieves a pointer to the <B>DXSurface</B> used as a foreground.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetLookup">GetLookup</A></TD>
	<TD>Retrieves the interface to the currently selected lookup table.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#GetOpacity">GetOpacity</A></TD>
	<TD>Retrieves the opacity of the foreground surface.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetBackground">SetBackground</A></TD>
	<TD>Sets the surface modifer background surface.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetBounds">SetBounds</A></TD>
	<TD>Sets the surface's boundary structure.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetCompositeOperation">SetCompositeOperation</A></TD>
	<TD>Selects the method used for image compositing.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetFillColor">SetFillColor</A></TD>
	<TD>Sets the surface's fill color.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetForeground">SetForeground</A></TD>
	<TD>Selects the <B>DXSurface</B> that will be used as a foreground.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetLookup">SetLookup</A></TD>
	<TD>Sets the interface to use for lookup table operations on the foreground surface.
</TD></TR>
<TR><TD><A HREF="IDXSurfaceModifier.htm#SetOpacity">SetOpacity</A></TD>
	<TD>Sets the opacity of the foreground surface.
</TD></TR>
</TABLE>
</BLOCKQUOTE>


<H1><A NAME="GetBackground">IDXSurfaceModifier::GetBackground</A><HR size=1></H1>
<p>Retrieves a pointer to the <B>DXSurface</B> used as a background.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetBackground(
    IDXSurface **ppSurface
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>ppSurface</I> 


 </DT><DD>[out] Pointer to the interface through which you access the background surface.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If there is currently no background surface, this method will return S_OK, but <i>ppSurface</i> will be set to NULL. When the method is implemented, it will automatically call <b>AddRef</b> on the interface.  The client is responsible for calling <b>Release</b> on the interface when it is no longer needed.


</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxsurfacemodifier.htm#SetBackground">IDXSurfaceModifier::SetBackground</A>
</BLOCKQUOTE>



<H1><A NAME="GetCompositeOperation">IDXSurfaceModifier::GetCompositeOperation</A><HR size=1></H1>
<p>Retrieves the method used for image compositing.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetCompositeOperation(
   DXSURFMODCOMPOP *pCompOp
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pCompOp</I>

 
 </DT><DD>[out] Value that determines the method used for compositing.
</DD></dl>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#SetCompositeOperation">IDXSurfaceModifier::SetCompositeOperation</A>, <A HREF="../enums/DXSURFMODCOMPOP_enum.htm">DXSURFMODCOMPOP enumeration</A>
</BLOCKQUOTE>


<H1><A NAME="GetFillColor">IDXSurfaceModifier::GetFillColor</A><HR size=1></H1>
<p>Retrieves the surface's fill color.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetFillColor(
    DXSAMPLE *pColor
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pColor</I> 
 </DT><DD>[out] Pointer to the <A HREF="../structs/DXSAMPLE_struct.htm">DXSAMPLE</A> structure containing this surface's fill color.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>


<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If the fill color's <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_A.htm#gloss_alpha_channel')">alpha channel</A> value is zero,  no fill color has been set.
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#SetFillColor">IDXSurfaceModifier::SetFillColor</A>
</BLOCKQUOTE>

<H1><A NAME="GetForeground">IDXSurfaceModifier::GetForeground</A><HR size=1></H1>
<p>Retrieves a pointer to the <b>DXSurface</b> used as a foreground.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetForeground(
    IDXSurface **ppSurface,
    BOOL *pbTile,
    POINT * pOrigin
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>ppSurface</I> 


 </DT><DD>[out] Optional address of a pointer to the interface through which you access the foreground surface.
</DD></DL>
<DL><DT><I>pbTile</I> 
 </DT><DD>[out] Optional Boolean indicating whether the foreground surface is currently tiled. TRUE if the surface is currently tiled; otherwise, FALSE.


</DD></DL>
<DL><DT><I>pOrigin</I> 
 </DT><DD>[out] Optional coordinates currently used as the origin.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>All parameters to this method are optional. If you do not need to retrieve a particular piece of data, pass a NULL pointer for that argument.
<p>
If there is currently no foreground surface, this method will return S_OK, but <i>ppSurface</i> will be set to NULL. When a pointer to the interface for the foreground surface is retrieved, the method will automatically call <b>AddRef</b> on the interface. The client is responsible for calling <b>Release</b> on the interface when it is no longer needed.


</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxsurfacemodifier.htm#SetBackground">IDXSurfaceModifier::SetBackground</A>
</BLOCKQUOTE>


<H1><A NAME="GetLookup">IDXSurfaceModifier::GetLookup</A><HR size=1></H1>
<p>Retrieves the interface to the currently selected lookup table.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetLookup(
   IDXLookupTable **ppLookupTable
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>ppLookupTable</I> 
 </DT><DD>[out] Address of a pointer that will be initialized to the current lookup table object of the Surface Modifier. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If there is currently no lookup table operator, this function will return S_OK, but <I>ppLookupTable</I> will be set to NULL.  Otherwise, the returned pointer will point to an <A HREF="idxlookuptable.htm">IDXLookupTable</A> interface. When the method is implemented, it will automatically call <b>AddRef</b> on the interface. The client is responsible for calling <b>Release</b> on the interface when it is no longer needed.



<p>
The lookup table is applied to the foreground surface only.

</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#SetLookup">IDXSurfaceModifier::SetLookup</A>
</BLOCKQUOTE>


<H1><A NAME="GetOpacity">IDXSurfaceModifier::GetOpacity</A><HR size=1></H1>
<p>Retrieves the opacity of the foreground surface.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetOpacity(
   float *pOpacity
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pOpacity</I> 
 </DT><DD>[out] Pointer to a value that indicates the opacity of the foreground surface. Values can range from 0.0 (fully transparent) to 1.0 (fully opaque). 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The opacity value is applied to the foreground surface when it is composited over the background surface.
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#SetOpacity">IDXSurfaceModifier::SetOpacity</A>
</BLOCKQUOTE>



<H1><A NAME="SetBackground">IDXSurfaceModifier::SetBackground</A><HR size=1></H1>
<p>Sets the surface modifer background surface.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetBackground(
    IDXSurface *pSurface
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pSurface</I> 
 </DT><DD>[in] Pointer to the surface to be used as a background surface; this parameter can be NULL to indicate no background surface.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If <i>pSurface</i> is NULL, the current bounds of the surface will not be changed. If there is a fill color, the Surface Modifier will use the fill color as the background color.
<p>
If <i>pSurface</i> is not NULL, the Surface Modifier will use the size of the background surface as its bounds, overriding any previous call to <b>SetBounds</b>. Any subsequent calls to <b>SetBounds</b> must specify a bounds equal to the bounds of the background surface or else an error will result. For more information about the relationship of various properties of Surface Modifiers, see the introduction.
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxsurfacemodifier.htm#GetBackground">IDXSurfaceModifier::GetBackground</A>
</BLOCKQUOTE>

<H1><A NAME="SetBounds">IDXSurfaceModifier::SetBounds</A><HR size=1></H1>
<p>Sets the surface's volume boundary structure.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetBounds(
    const DXBNDS *pBounds
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pBounds</I> 
 </DT><DD>[in] Pointer to the <A HREF="../structs/DXBNDS_struct.htm">DXBNDS</A> boundary structure containing this surface's bounding volume. This pointer can be NULL to clear a previous call to <b>SetBounds</b>.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<p>The <b>SetBounds</b> method is only used to set the height and width of the entire visible surface; it does not specify where the image will be blitted on the output surface. 

<P>If there is a set background surface, this call will fail if the bounds specified are any size other than the bounds of the background surface. If no background surface is set, the bounds can be any valid size.

</BLOCKQUOTE>

<H1><A NAME="SetCompositeOperation">IDXSurfaceModifier::SetCompositeOperation</A><HR size=1></H1>
<p>Selects the method used for image compositing.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetCompositeOperation(
   DXSURFMODCOMPOP CompOp
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>CompOp</I> 
 </DT><DD>[in] A <A HREF="../enums/DXSURFMODCOMPOP_enum.htm">DXSURFMODCOMPOP</A> value that determines the method used for compositing.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>By default, the compositing operation is DXSURFMOD_COMP_OVER.
<p>
When the compositing operation is DXSURFMOD_COMP_OVER, the foreground surface will be composited over the background surface. If there is no background surface, the foreground surface will be composited over the fill color.
<p>
When the compositing operation is DXSURFMOD_COMP_ALPHA_MASK,  the foreground surface will use the alpha values of the background surface to weight the foreground surface pixel values; the colors of the background surface will be ignored.  If there is no background surface, the alpha value of the fill color will be used to weight the foreground surface pixel values. However, this is much less efficient than using the <b>SetOpacity</b> method.


</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#GetCompositeOperation">IDXSurfaceModifier::GetCompositeOperation</A>, <A HREF="IDXSurfaceModifier.htm#SetOpacity">IDXSurfaceModifier::SetOpacity</A>, <A HREF="../enums/DXSURFMODCOMPOP_enum.htm">DXSURFMODCOMPOP enumeration</A>

</BLOCKQUOTE>


<H1><A NAME="SetFillColor">IDXSurfaceModifier::SetFillColor</A><HR size=1></H1>
<p>Sets the surface's fill color.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetFillColor(
    DXSAMPLE Color
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>Color</I> 
 </DT><DD>[in] <A HREF="../structs/DXSAMPLE_struct.htm">DXSAMPLE</A> structure containing the surface's fill color. Sending a value of zero clears the previous color value.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>


<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The alpha value of the fill color is used and must be set to 255 if you want a solid fill color.  Any fill color that has an alpha value of zero will be interpreted without a fill color.

 
<P>Calling <B>SetFillColor</B> before or after <B>SetBackground</B> will have no effect on the resulting image. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#GetFillColor">IDXSurfaceModifier::GetFillColor</A>
</BLOCKQUOTE>

<H1><A NAME="SetForeground">IDXSurfaceModifier::SetForeground</A><HR size=1></H1>
<p>Selects the <B>DXSurface</B> that will be used as a foreground.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetForeground(
    IDXSurface *pSurface,
    BOOL bTile,
    const POINT * pOrigin
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pSurface</I> 
 </DT><DD>[in] Pointer to the interface on the surface you intend to modify. Specifying NULL clears the previous foreground surface selection.
</DD></DL>
<DL><DT><I>bTile</I> 


 </DT><DD>[in] Selects whether the surface should be tiled.
</DD></DL>
<DL><DT><I>pOrigin</I> 


 </DT><DD>[in] Optional: sets the origin at the specified coordinates.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>

<p>
If a non-NULL <i>pSurface</i> is passed to this interface, the Surface Modifier's foreground surface is set to the new <i>pSurface</i>.  If <i>pOrigin</i> is NULL, the origin used is (0,0).  The origin's interpretation is based on the setting of <i>bTile</i>.  If <i>bTile</i> is false, the foreground surface will be placed within the bounds of the Surface Modifier with the upper-left pixel of the surface appearing at the specified origin within the Surface Modifier.  If <i>bTile</i> is TRUE,  the origin specifies the first pixel within the foreground surface to start at when tiling the image.

<p>
When you call the <b>SetForeground</b> method, the bounds of the output surface will match the bounds of the foreground surface, regardless of previous calls to <b>SetBounds</b>. However, calling <b>SetBounds</b> after <b>SetForeground</b> will change the size of the output surface to the specified bounds.

<p>
Tiled images repeat infinitely to the bounds of the surface. Non-tiled foreground surfaces can be used to place the image within a larger virtual space or to clip the image to a smaller size.  Negative origins are valid for images that are not tiled. Setting negative values for the origin on tiled foregrounds will result in an error.

<P>The following code shows an example of this.

<pre>
POINT p;
p.x = p.y = 20;

// The foreground surface positioned at (20,20) within
// the Surface Modifier's virtual surface.
SetForeground(pDXSurface, FALSE, &amp;p);    

// The Surface Modifier's pixel value at (0,0) will be
// the foreground surface's pixel at (20,20).                                     
SetForeground(pDXSurface, TRUE, &amp;p);     


// The left 10 pixels of the foreground surface will be
// clipped, and the first row will appear at row 20 of
// the Surface Modifier.
p.x = -10;
SetForeground(pDXSurface, FALSE, &amp;p)   
                                       
                                       
</pre>
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxsurfacemodifier.htm#GetForeground">IDXSurfaceModifier::GetForeground</A>, <A HREF="idxsurfacemodifier.htm#SetBounds">IDXSurfaceModifier::SetBounds</A>
</BLOCKQUOTE>
<!-- ====================================================================== -->

<H1><A NAME="SetLookup">IDXSurfaceModifier::SetLookup</A><HR size=1></H1>
<p>Sets the interface to use for lookup table operations on the foreground surface.


<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetLookup(
   IDXLookupTable *pLookupTable
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>pLookupTable</I> 
 </DT><DD>[in] Pointer to and <a href="idxlookuptable.htm">IDXLookupTable</a> interface to use for color adjustment to the foreground surface.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>To set a lookup table for a Surface Modifier, you must first build one with the <a href="idxlutbuilder.htm">IDXLUTBuilder</a> interface and get from it a pointer to an <a href="idxlookuptable.htm">IDXLookupTable</a> interface. To clear a previous lookup table selection, call this method with a NULL pointer.

<p>
The lookup table is applied to the foreground surface only.

</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#GetLookup">IDXSurfaceModifier::GetLookup</A>
</BLOCKQUOTE>

<!-- ====================================================================== -->

<H1><A NAME="SetOpacity">IDXSurfaceModifier::SetOpacity</A><HR size=1></H1>
<p>Sets the opacity of the foreground surface.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetOpacity(
   float Opacity
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL>
<DT><I>Opacity</I> 
 </DT><DD>[in] Value that indicates the opacity of the foreground surface. Values can range from 0.0 (fully transparent) to 1.0 (fully opaque). 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
The opacity value is applied to the foreground surface when it is composited over the background surface.
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="IDXSurfaceModifier.htm#GetOpacity">IDXSurfaceModifier::GetOpacity</A>
</BLOCKQUOTE>



<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A CLASS="line" HREF="#pagetop"><IMG src="../../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A CLASS="line" HREF="../../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>
<!-- START POP-UP GLOSSARY -->

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>
<!-- END POP-UP GLOSSARY -->


<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY></HTML>
