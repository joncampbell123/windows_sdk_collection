<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>IDXTaskManager Interface</TITLE>
<SCRIPT LANGUAGE="JavaScript"> var sRelPath = '../../' </SCRIPT>


<META NAME="Description" CONTENT="IDXTaskManager">
<META NAME="Description" CONTENT="IDXTaskManager::GetConcurrencyLimit">
<META NAME="Description" CONTENT="IDXTaskManager::GetThreadPoolSize">
<META NAME="Description" CONTENT="IDXTaskManager::QueryNumProcessors">
<META NAME="Description" CONTENT="IDXTaskManager::ScheduleTasks">
<META NAME="Description" CONTENT="IDXTaskManager::SetConcurrencyLimit">
<META NAME="Description" CONTENT="IDXTaskManager::SetThreadPoolSize">
<META NAME="Description" CONTENT="IDXTaskManager::TerminateRequest">
<META NAME="Description" CONTENT="IDXTaskManager::TerminateTasks">
<META NAME="Description" CONTENT="GetConcurrencyLimit (IDXTaskManager)">
<META NAME="Description" CONTENT="GetThreadPoolSize (IDXTaskManager)">
<META NAME="Description" CONTENT="QueryNumProcessors (IDXTaskManager)">
<META NAME="Description" CONTENT="ScheduleTasks (IDXTaskManager)">
<META NAME="Description" CONTENT="SetConcurrencyLimit (IDXTaskManager)">
<META NAME="Description" CONTENT="SetThreadPoolSize (IDXTaskManager)">
<META NAME="Description" CONTENT="TerminateRequest (IDXTaskManager)">
<META NAME="Description" CONTENT="TerminateTasks (IDXTaskManager)">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../../ver.js"></SCRIPT>
<SCRIPT SRC="../../gloss.js"></SCRIPT>
<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- STYLE_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
   var sVR = '../../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicSDKIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicSDKIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicSDKNAV';
   }
   else
   {
	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>


<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="IDXTaskManager"></A>
<!--TOOLBAR_START-->

<!--TOOLBAR_EXEMPT-->

<!--TOOLBAR_END-->

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectX Transform Animated Header -- Microsoft DirectX Transform SDK"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../../art/hdrdtrns.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Microsoft DirectX Transform SDK"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectX Transform Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectX Transform SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../../contents.htm">Contents</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../../index.htm">Index</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="interface_intro.htm">Topic Contents</A>
</PRE></TD></TR>

<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="idxsurfacepick.htm">IDXSurfacePick Interface</A>
<IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="idxtconvolution.htm">IDXTConvolution Interface</A>
</PRE></TD></TR></TABLE>

<!-- NAV_LINKS_END -->


<BLOCKQUOTE class="body">

<!-- CONTENTS_START -->


<H1>IDXTaskManager Interface</H1>

<p>The task manager is a generic service used to schedule and execute caller-defined tasks. It automatically breaks a transform task into threads and manages their completion, which improves the efficiency of the transform.
<p>
This interface enables you to configure the task manager to specify the thread pool size and the thread concurrency limit. The default thread pool size is two threads per processor, and the default concurrency limit is one thread per processor. The default implementation uses input/output completion ports on Microsoft&reg; Windows&reg; NT to optimize processor utilization.
</P>

<P CLASS="ref">IDXTaskManager Methods</P>
<BLOCKQUOTE><TABLE CLASS="ref">
<TR><TD><A HREF="idxtaskmanager.htm#GetConcurrencyLimit">GetConcurrencyLimit</A></TD>
	<TD>Retrieves the number of threads allowed to execute on a single processor at a given time.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#GetThreadPoolSize">GetThreadPoolSize</A></TD>
	<TD>Retrieves the number of threads in the thread pool.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#QueryNumProcessors">QueryNumProcessors</A></TD>
	<TD>Retrieves the number of processors installed in the system.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#ScheduleTasks">ScheduleTasks</A></TD>
	<TD>Defines a set of tasks to execute.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#SetConcurrencyLimit">SetConcurrencyLimit</A></TD>
	<TD>Defines the number of threads that can execute from a thread pool at a given time.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#SetThreadPoolSize">SetThreadPoolSize</A></TD>
	<TD>Specifies the number of threads that should be created and made available to execute tasks.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#TerminateRequest">TerminateRequest</A></TD>
	<TD>Terminates a task based on its request ID value that was used when it was scheduled.
</TD></TR>
<TR><TD><A HREF="idxtaskmanager.htm#TerminateTasks">TerminateTasks</A></TD>
	<TD>Terminates a set of tasks previously scheduled by the task manager.
</TD></TR>

</TABLE></BLOCKQUOTE>

<H1><A NAME="GetConcurrencyLimit">IDXTaskManager::GetConcurrencyLimit</A><HR size=1></H1>
<P>Retrieves the number of threads allowed to execute on a single processor at a given time.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetConcurrencyLimit(
	ULONG *pulNumThreads
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pulNumThreads</I>
 </DT><DD>[out] Pointer to the number of threads that can concurrently execute.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxtaskmanager.htm#SetConcurrencyLimit">IDXTaskManager::SetConcurrencyLimit</A>
</BLOCKQUOTE>



<H1><A NAME="GetThreadPoolSize">IDXTaskManager::GetThreadPoolSize</A><HR size=1></H1>
<P>Retrieves the number of threads in the thread pool.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT GetThreadPoolSize(
	ULONG *pulNumThreads
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pulNumThreads</I> 
 </DT><DD>[out] Pointer to the current thread pool size.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxtaskmanager.htm#SetThreadPoolSize">IDXTaskManager::SetThreadPoolSize</A>
</BLOCKQUOTE>




<H1><A NAME="QueryNumProcessors">IDXTaskManager::QueryNumProcessors</A><HR size=1></H1>
<P>Retrieves the number of processors installed in the system.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT QueryNumProcessors(
	ULONG *pulNumProc
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pulNumProc</I> 
 </DT><DD>[out] Pointer to the number of processors.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>




<H1><A NAME="ScheduleTasks">IDXTaskManager::ScheduleTasks</A><HR size=1></H1>
<P>Defines a set of tasks to execute.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT ScheduleTasks(
	DXTMTASKINFO TaskInfo[],
	HANDLE Events[],
	DWORD TaskIDs[],
	ULONG ulNumTasks,
	ULONG ulWaitPeriod
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>TaskInfo[]</I> 
 </DT><DD>[in] Array of one or more <A HREF="../structs/DXTMTASKINFO_struct.htm">DXTMTASKINFO</A> structures that define the task to be performed.
</DD></DL>
<DL><DT><I>Events[]</I> 
 </DT><DD>[in] Optional array of event-object handles associated with each of the scheduled tasks.
</DD></DL>
<DL><DT><I>TaskIDs[]</I> 
 </DT><DD>[out] Optional array used to receive the ID of each scheduled task.
</DD></DL>
<DL><DT><I>ulNumTasks</I>
 </DT><DD>[in] Number of tasks to be scheduled. This also defines the size of the arrays associated with the <I>Events</I> and <I>TaskIDs</I> parameters.
</DD></DL>
<DL><DT><I>ulWaitPeriod</I> 
 </DT><DD>[in] Number of milliseconds to wait for each of the scheduled tasks to complete.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<p>This method adds a set of tasks to a FIFO queue for asynchronous execution. All tasks are queued using the calling thread. If the calling thread is supposed to wait and has finished queuing the tasks, it will start to execute tasks on the queue until the queue is empty. This reduces the amount of necessary context switches.

<P>As each task is scheduled, the associated event, as specified by the <I>Events</I> parameter, is reset. As each task completes, the associated event is signaled.

<p>If a nonzero value is supplied for the <I>ulWaitPeriod</I> parameter, the <I>Events</I> array is required and must have a valid event-object handle in each entry. A value of INFINITE can be used.

<p>Each assigned task may use an Asynchronous Procedure Call (APC) or an event, but specifying both IN THE DXTMTASKINFO STRUCTURE will result in the function returning E_INVALIDARG once it attempts to execute that task.

</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxtaskmanager.htm#TerminateTasks">IDXTaskManager::TerminateTasks</A>
</BLOCKQUOTE>




<H1><A NAME="SetConcurrencyLimit">IDXTaskManager::SetConcurrencyLimit</A><HR size=1></H1>
<P>Defines the number of threads that can execute from a thread pool at a given time.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetConcurrencyLimit(
	ULONG ulNumThreads
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>ulNumThreads</I>
 </DT><DD>[in] Number of threads from the thread pool that can concurrently execute. If zero, the number of threads will be set to the number of processors in the system.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The <i>ulNumThreads</i> parameter is ignored on Windows 95 and 98. It is only a suggestion for Windows NT, where it is possible to temporarily exceed the concurrency limit. See the documentation for the <b>IOCompletionPorts</b> interface in the Visual Studio reference for details.
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxtaskmanager.htm#GetConcurrencyLimit">IDXTaskManager::GetConcurrencyLimit</A>
</BLOCKQUOTE>




<H1><A NAME="SetThreadPoolSize">IDXTaskManager::SetThreadPoolSize</A><HR size=1></H1>
<P>Specifies the number of threads that should be created and made available to execute tasks.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT SetThreadPoolSize(
	ULONG ulNumThreads
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>ulNumThreads</I> 
 </DT><DD>[in] Number of threads to make available in the thread pool.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This method is used to define how many threads can be used to process tasks. If set to zero, the thread scheduling the work executes it.
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="idxtaskmanager.htm#GetThreadPoolSize">IDXTaskManager::GetThreadPoolSize</A>
</BLOCKQUOTE>




<H1><A NAME="TerminateRequest">IDXTaskManager::TerminateRequest</A><HR size=1></H1>
<P>Terminates a task based on its request ID value that was used when it was scheduled.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT TerminateRequest(
	REFIID RequestID,
	ULONG ulTimeOut
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>RequestID</I> 
 </DT><DD>[in] ID that was used to schedule the tasks.
</DD></DL>
<DL><DT><I>ulTimeOut</I> 
 </DT><DD>[in] Time, in milliseconds, to wait before terminating the specified task. If this parameter is zero, the task is terminated immediately.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<p>If the specified tasks are not running, they are removed from the queue. If they are running, they are signaled to stop. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="../structs/DXTMTASKINFO_struct.htm">DXTMTASKINFO</A>, <A HREF="idxtaskmanager.htm#ScheduleTasks">IDXTaskManager::ScheduleTasks</A>
</BLOCKQUOTE>




<H1><A NAME="TerminateTasks">IDXTaskManager::TerminateTasks</A><HR size=1></H1>
<P>Terminates a set of tasks previously scheduled by the task manager.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>HRESULT TerminateTasks(
	DWORD TaskIDs[],
	ULONG ulCount,
	ULONG ulTimeOut
);
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>TaskIDs[]</I> 
 </DT><DD>[in] Array of IDs that specifies which tasks to terminate.
</DD></DL>
<DL><DT><I>ulCount</I> 
 </DT><DD>[in] Number of tasks to terminate.
</DD></DL>
<DL><DT><I>ulTimeOut</I> 
 </DT><DD>[in] Time, in milliseconds, to wait before terminating the specified tasks. If this parameter is zero, the tasks are terminated immediately.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<p>If the specified tasks are not running, they are removed from the queue. If they are running, they are signaled to stop. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="../structs/DXTMTASKINFO_struct.htm">DXTMTASKINFO</A>, <A HREF="idxtaskmanager.htm#ScheduleTasks">IDXTaskManager::ScheduleTasks</A>
</BLOCKQUOTE>


<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A CLASS="line" HREF="#pagetop"><IMG src="../../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A CLASS="line" HREF="../../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>
<!-- START POP-UP GLOSSARY -->

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>
<!-- END POP-UP GLOSSARY -->


<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY></HTML>
