<!-- DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN" -->

<HTML>
<HEAD><TITLE>CDXBaseNTo1 Virtual Functions</TITLE>
<SCRIPT LANGUAGE="JavaScript"> var sRelPath =  '../../' </SCRIPT>


<META NAME="Description" CONTENT="CDXBaseNTo1 Virtual Functions">
<META NAME="Description" CONTENT="CDXBaseNTo1::DetermineBnds (2-D)">
<META NAME="Description" CONTENT="CDXBaseNTo1::DetermineBnds (3-D)">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnExecute">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnFreeInstData">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnGetObjectSize">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnGetSurfacePickOrder">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnInitInstData">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnReleaseObjects">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnSetup">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnSurfacePick">
<META NAME="Description" CONTENT="CDXBaseNTo1::OnUpdateGenerationId">
<META NAME="Description" CONTENT="CDXBaseNTo1::WorkProc">
<META NAME="Description" CONTENT="DetermineBnds (2-D) (CDXBaseNTo1)">
<META NAME="Description" CONTENT="DetermineBnds (3-D) (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnExecute (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnFreeInstData (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnGetObjectSize (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnGetSurfacePickOrder (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnInitInstData (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnReleaseObjects (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnSetup (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnSurfacePick (CDXBaseNTo1)">
<META NAME="Description" CONTENT="OnUpdateGenerationId (CDXBaseNTo1)">
<META NAME="Description" CONTENT="WorkProc (CDXBaseNTo1)">

<META NAME="KEYWORDS" CONTENT="CDXBaseNTo1 Virtual Functions">

<META NAME="PRODUCT" CONTENT="DirectX Transform">

<META NAME="CATEGORY" CONTENT="Technical documentation; download">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../../ver.js"></SCRIPT>
<SCRIPT SRC="../../gloss.js"></SCRIPT>
<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- STYLE_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
   var sVR =  '../../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicSDKIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicSDKIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicSDKNAV';
   }
   else
   {
	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="CDXBaseNTo1_virtuals"></A>
<!--TOOLBAR_START-->

<!--TOOLBAR_EXEMPT-->

<!--TOOLBAR_END-->



<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectX Transform Animated Header -- Microsoft DirectX Transform SDK"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../../art/hdrdtrns.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Microsoft DirectX Transform SDK"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="*">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectX Transform SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../../contents.htm">Contents</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../../index.htm">Index</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="CDXBaseNTo1_intro.htm">Topic Contents</A>
</PRE></TD></TR>

<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="CDXBaseNTo1_variables.htm">CDXBaseNTo1 Data Members</A>
<IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="CDXBaseNTo1_helpers.htm">CDXBaseNTo1 Helper Functions</A>
</PRE></TD></TR></TABLE>

<!-- NAV_LINKS_END -->

<BLOCKQUOTE class="body">

<!-- CONTENTS_START -->



<H1>CDXBaseNTo1 Virtual Functions</H1>

<P>This section contains reference material for the <B>CDXBaseNTo1</B> virtual functions that you can override to add functionality to your transform. At a minimum, you will need to override the <b>OnExecute</b> or <b>WorkProc</b> methods, so that your transform can generate its output from the inputs defined by the <a href="../ifaces/idxtransform.htm#Setup">IDXTransform::Setup</a> method.

<p>For an overview of the role of these virtual functions in your transform, see <a href="../../overview/baseclass_basics.htm">How to Use the CDXBaseNTo1 Base Class</a>.

<P CLASS="ref">Member Functions</P>
<BLOCKQUOTE>
<TABLE CLASS="ref">
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#DetermineBnds_D">DetermineBnds (2-D)</A></TD>
	<TD>Called by the base class to determine the output bounds of 2-D transforms.
</TD></TR>

<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#DetermineBnds_C">DetermineBnds (3-D) </A></TD>
	<TD>Called by the base class to determine the output bounds of 3-D transforms.
</TD></TR>

<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnExecute">OnExecute</A></TD>
	<TD>Called by the base class to cause a transform to produce its output.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnFreeInstData">OnFreeInstData</A></TD>
	<TD>Frees resources allocated by the <A HREF="CDXBaseNTo1_virtuals.htm#OnInitInstData">OnInitInstData</A> function.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnGetObjectSize">OnGetObjectSize</A></TD>
	<TD>Called by the base class to determine the amount of data space currently occupied by the transform.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnGetSurfacePickOrder">OnGetSurfacePickOrder</A></TD>
	<TD>Provides the base class with the necessary information to perform surface picking for the transform.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnInitInstData">OnInitInstData</A></TD>
	<TD>Enables the transform to allocate resources or compute data that is to be shared across threads.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnReleaseObjects">OnReleaseObjects</A></TD>
	<TD>Called to release resources when the transform is being set up with NULL inputs or outputs.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnSetup">OnSetup</A></TD>
	<TD>Called after the base class has completed its setup.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnSurfacePick">OnSurfacePick</A></TD>
	<TD>Called by the base class to enable the derived transform to fully implement surface picking.
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#OnUpdateGenerationId">OnUpdateGenerationId</A></TD>
	<TD>Called by the base class to check the input and output data object generation IDs and increment the transform generation ID. 
</TD></TR>
<TR><TD><A HREF="CDXBaseNTo1_virtuals.htm#WorkProc">WorkProc</A></TD>
	<TD>Called in a response to the <A HREF="../Ifaces/idxtransform.htm#Execute">IDXTransform::Execute</A> method to render a portion of the output space to the current output surface.
</TD></TR>
</TABLE>
</BLOCKQUOTE>


<!-- ============================================================== -->

<H1><A NAME="DetermineBnds_D">CDXBaseNTo1::DetermineBnds (2-D)</A><HR size=1></H1>
<p>Called by the base class to determine the output bounds of 2-D transforms.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT DetermineBnds(
	CDXDBnds &amp; Bnds
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>Bnds</I> 
</DT><DD>[in, out] On input, <I>Bnds</I> is equal to the union of the input bounds. On output, the derived method should return the size of the transform's output space. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../../reference/errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If the transform does not alter the dimensions of the input to produce the output, the derived class doesn't need to override this method. 
</BLOCKQUOTE>

<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="../ifaces/idxsurface.htm#GetBounds">IDXSurface::GetBounds</a>
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="DetermineBnds_C">CDXBaseNTo1::DetermineBnds (3-D)</A><HR size=1></H1>
<p>Called by the base class to determine the output bounds of 3-D transforms.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT DetermineBnds(
	CDXCBnds &amp; Bnds
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>Bnds</I> 
</DT><DD>[in, out] On input, <i>Bnds</i> is equal to the union of the input bounds. On output, the derived method should return the size of the transform's output space. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../../reference/errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>A simple implementation for 3-D transforms is to call the Microsoft&reg; Direct3D&reg; Retained Mode <b>IDirect3DRMMeshBuilder3::GetBox</b> method on the output mesh builder. Some transforms might be able to do this more efficiently than going through all the work to compute the result depending on the type of effect. For example, if a transform simply scales a mesh, it could compute the resulting bounds based on the input bounds, which are invariant, and the current scale factor. If the transform does not alter the dimensions of the input to produce the output, the derived class doesn't need to override this method.
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnExecute">CDXBaseNTo1::OnExecute</A><HR size=1></H1>
<p>Called by the base class to cause a transform to produce its output. 

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT OnExecute(
	const GUID *  pRequestID,
	const DXBNDS * pPortionBnds,
	const DXVEC * pPlacement
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pRequestID</I> 
</DT><DD>[in] Pointer to the ID passed into the <a href="../ifaces/idxtransform.htm#Execute">IDXTransform::Execute</a> method by the caller. This ID should be passed to the task manager if <b>OnExecute</b> schedules any asynchronous work through the task manager. Otherwise, this parameter should be ignored. 
</DD></DL>

<DL><DT><I>pPortionBnds</I> 
</DT><DD>[in] Pointer to the portion of the transform output space that should be rendered. If NULL, the entire output space is rendered. If a transform can't produce the specified region of the result, the transform should mask off the DXTMF_BOUNDS_SUPPORTED flag from the <B>m_dwMiscFlags</B> data member in the Active Template Library (ATL) <b>CComObjectRootEx::FinalConstruct</b> constructor method. Image transforms must be able to render regions of their output. Typically, 3-D transforms do not because Direct3D Retained Mode does not provide a convenient way to do this. 
</DD></DL>

<DL><DT><I>pPlacement</I> 
</DT><DD>[in] Pointer to the position to place the result in the output coordinate space. If the transform does not support this capability, it should mask off the DXTMF_PLACEMENT_SUPPORTED flag from the <B>m_dwMiscFlags</B> data member in the <b>FinalConstruct</b> constructor method. 
</DD></DL>

</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns S_OK or an implementation-dependent error code.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Typically, only 3-D transforms override this function. It can also be called for 2-D transforms if the <B>m_ulMaxImageBands</B> data member is set to zero in the <b>FinalConstruct</b> constructor method.
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><a href="../ifaces/idxtaskmanager.htm#ScheduleTasks">IDXTaskManager::ScheduleTasks</a>
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnFreeInstData">CDXBaseNTo1::OnFreeInstData</A><HR size=1></H1>
<p>Frees resources allocated by the <a href="#oninitinstdata">OnInitInstData</a> method.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT OnFreeInstData(
	CDXTWorkInfoNTo1 &amp; WorkInfo
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>WorkInfo</I> 
</DT><DD>[in] Reference to the work procedure information structure.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns S_OK or an implementation-specific error code.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This function will be called once for each call to <a href="../ifaces/idxtransform.htm#Execute">IDXTransform::Execute</a>.
</BLOCKQUOTE>


<!-- ============================================================== -->

<H1><A NAME="OnGetObjectSize">CDXBaseNTo1::OnGetObjectSize</A><HR size=1></H1>
<p>Called by the base class to determine the amount of data space currently occupied by the transform.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual ULONG OnGetObjectSize(void)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns the size of the object and its currently allocated resources, in bytes.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The transform user can use this information to optimize memory usage in the system.
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnGetSurfacePickOrder">CDXBaseNTo1::OnGetSurfacePickOrder</A><HR size=1></H1>
<p>Provides the base class with the necessary information to perform surface picking for the transform.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual void OnGetSurfacePickOrder(
	const CDXDBnds &amp; OutPoint,
	ULONG &amp; ulInToTest,
	ULONG aInIndex[],
	BYTE aWeight[]
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>OutPoint</I> 
</DT><DD>[in] Point in the transform output space coordinates to use for surface picking.


</DD></DL>
<DL><DT><I>ulInToTest</I> 
</DT><DD>[out] Number of inputs to be tested by the transform.
</DD></DL>
<DL><DT><I>aInIndex[]</I> 
</DT><DD>[out] Array of input surface indices to test, in top to bottom order. The number of elements in the array is equal to <B>m_ulMaxInputs</B>. Any input whose bounds intersect <i>OutPoint</i> should be added to the list. 
</DD></DL>
<DL><DT><I>aWeight[]</I> 
</DT><DD>[out] Overall weight that should be attributed to each input listed by <i>aInIndex</i>. The number of elements in the array is equal to <B>m_ulMaxInputs</B>. The weight of an input will be used in conjunction with the alpha weight of the corresponding hit pixel on the input. These weights are typically computed based on the progress of the current effect. For example, an alpha fade transition at 40 percent progress might attribute 60 percent of the result to input Image A, and 40 percent to input Image B. The weight values would be 153 and 102, respectively. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This function is intended to simplify the picking implementation for the majority of surface transforms. The information passed back to the base class will be used to lock down the appropriate input surfaces in order, retrieve the correct sample, weight it based on the current effect progress, and return the correct pick information to the container. The base class will map the <i>OutPoint</i> to the input space coordinates by using the <A HREF="../Ifaces/idxtransform.htm#MapBoundsOut2In">IDXTransform::MapBoundsOut2In</A> method after this function returns. If the transform has multiple inputs whose coordinate spaces are not aligned at zero, the <a href="#onsurfacepick">CDXBaseNTo1::OnSurfacePick</a> function should be overridden instead.
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnInitInstData">CDXBaseNTo1::OnInitInstData</A><HR size=1></H1>
<p>Enables the transform to allocate resources or compute any data that is to be shared across threads.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT OnInitInstData(
	CDXTWorkInfoNTo1&amp; WorkInfo,
	ULONG&amp; ulNumBandsToDo
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>WorkInfo</I> 
</DT><DD>[in] <A HREF="../CDXTWorkInfoNTo1/CDXTWorkInfoNTo1.htm">CDXTWorkInfoNTo1</A> object that contains all the information needed by the work procedure to perform the rendering request. 
</DD></DL>
<DL><DT><I>ulNumBandsToDo</I> 
</DT><DD>[in] Number of threads to use for the rendering request. The default is equal to the number of processors in the system. Ignore this parameter for optimal default behavior. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../../reference/errorandsuccess.htm">HRESULT</A> value that depends on the implementation of the interface. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>If the transform does not set the <B>m_ulMaxImageBands</B> data member, or if it sets it to a value greater than one, this function should be used for one-time initialization. Each thread will then execute a portion of the render request on each of the available processors. When all the bands have completed, the <a href="cdxbasento1_virtuals.htm#OnFreeInstData">OnFreeInstData</a> function is called to allow for any necessary cleanup.
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><a href="cdxbasento1_virtuals.htm#WorkProc">CDXBaseNTo1::WorkProc</a>
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnReleaseObjects">CDXBaseNTo1::OnReleaseObjects</A><HR size=1></H1>
<p>Called to release resources when the transform is being set up with NULL inputs or outputs.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual void OnReleaseObjects()
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Override this method to be notified when the transform is being set up with NULL inputs or outputs. This enables you to free memory allocated by transform from previous calls to the <a href="../ifaces/idxtransform.htm#Setup">IDXTransform::Setup</a> method.
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnSetup">CDXBaseNTo1::OnSetup</A><HR size=1></H1>
<p>Called after the base class has completed its setup.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT OnSetup(
	DWORD  dwFlags
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>dwFlags</I> 
</DT><DD>[in] Flags that are passed in by the container through the <a href="../ifaces/idxtransform.htm#Setup">IDXTransform::Setup</a> method.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns S_OK if successful, or an implementation-specific error code on failure. This value will be passed back to the transform user as the <A HREF="../errorandsuccess.htm">HRESULT</A> return value for <B>IDXTransform::Setup</B>.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The transform might need to override this function to obtain information about the input and output data objects if the transform needs that information to generate the output.
</BLOCKQUOTE>


<!-- ============================================================== -->

<H1><A NAME="OnSurfacePick">CDXBaseNTo1::OnSurfacePick</A><HR size=1></H1>
<p>Called by the base class to enable the derived transform to fully implement surface picking.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT OnSurfacePick(
	const CDXDBnds &amp; OutPoint,
	ULONG &amp; ulInputIndex,
	CDXDVec &amp; InVec
)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>OutPoint</I> 
</DT><DD>[in] Coordinates of the point in the transform output space to use for surface picking.
</DD></DL>
<DL><DT><I>ulInputIndex</I> 
</DT><DD>[out] Index of the input that was hit.
</DD></DL>
<DL><DT><I>InVec</I> 
</DT><DD>[out] Point on the input that was hit, in terms of the input coordinate space.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns one of the following <A HREF="../errorandsuccess.htm">HRESULT</A> values.
<TABLE>
<TR><TD>
S_FALSE</TD><TD>No inputs were at the indicated <i>OutPoint</i>. Hitting a sample with an alpha value of zero is considered a miss.
</TD></TR>
<TR><TD>
S_OK</TD><TD>One of the inputs was chosen, so the returned information is valid.
</TD></TR><TR><TD>
DXT_S_HITOUTPUT</TD><TD>The output surface was hit at the indicated <i>pPoint</i>, but it was not one of the input surfaces. Procedural surfaces, which have no input surface, can only return this value and not a surface index.
</TD></TR>
</TABLE>
</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><a href="cdxbasento1_virtuals.htm#OnGetSurfacePickOrder">CDXBaseNTo1::OnGetSurfacePickOrder</a>, <a href="../ifaces/IDXSurfacePick.htm">IDXSurfacePick</a>
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="OnUpdateGenerationId">CDXBaseNTo1::OnUpdateGenerationId</A><HR size=1></H1>
<p>Called by the base class to check the input and output data object generation IDs and increment the transform generation ID. 

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual void OnUpdateGenerationId(void)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Derived classes typically don't have to override this method.






</BLOCKQUOTE>


<P CLASS="ref">See Also</P>
<BLOCKQUOTE>
<P><A HREF="CDXBaseNTo1_helpers.htm#IsInputDirty">CDXBaseNTo1::IsInputDirty</a>, <A HREF="CDXBaseNTo1_helpers.htm#IsOutputDirty">CDXBaseNTo1::IsOutputDirty</a>, <A HREF="CDXBaseNTo1_helpers.htm#IsTransformDirty">CDXBaseNTo1::IsTransformDirty</a>
</BLOCKQUOTE>

<!-- ============================================================== -->

<H1><A NAME="WorkProc">CDXBaseNTo1::WorkProc</A><HR size=1></H1>
<p>Called in a response to the <A HREF="../Ifaces/idxtransform.htm#Execute">IDXTransform::Execute</A> method to render a portion of the output space to the current output surface.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE>
<PRE>virtual HRESULT WorkProc(
	const CDXTWorkInfoNTo1 &amp; WorkInfo,
	BOOL* pbContinueProcessing)
</PRE>
</BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>WorkInfo</I> 
</DT><DD>[in] <a href="../cdxtworkinfonto1/cdxtworkinfonto1.htm">CDXTWorkInfoNTo1</a> object used to describe the rendering request.
</DD></DL>
<DL><DT><I>pbContinueProcessing</I> 
</DT><DD>[in] Pointer to a Boolean value that is managed externally by the <a href="../ifaces/idxtaskmanager.htm">IDXTaskManager</a> interface to control execution of this function. At the start of the method, you should check this value to determine if execution is being prematurely canceled. If TRUE, the work procedure should clean up and exit immediately. 
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns S_OK if succeeded, or an implementation-specific error code on failure. 
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This function can be called simultaneously on multiple threads for a given data request. The base class can divide a data request into multiple pieces to be executed on all available processors. If this function is not reentrant, the <B>m_ulMaxImageBands</B> data member must be set to 1 in the <b>FinalConstruct</b> constructor method to assure that this function is called only once per execution request on a single thread. Because the work procedure must be able to render any region of the output space, parallelization on multiprocessor machines is automatic for to the developer, as long as the work procedure is reentrant.
</BLOCKQUOTE>


<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A CLASS="line" HREF="#pagetop"><IMG SRC="../../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A CLASS="line" HREF="../../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>
<!-- START POP-UP GLOSSARY -->

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>
<!-- END POP-UP GLOSSARY -->


<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY></HTML>
