<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>How Transforms Work</TITLE>
<SCRIPT LANGUAGE="JavaScript"> var sRelPath = '../' </SCRIPT>

<META NAME="Description" CONTENT="How Transforms Work">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->


<SCRIPT LANGUAGE="JAVASCRIPT">

//<!--

var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";

// -->


</SCRIPT>

<SCRIPT SRC="../ver.js"></SCRIPT>
<SCRIPT SRC="../gloss.js"></SCRIPT>





<SCRIPT DEFER SRC="../common.js"></SCRIPT>

<SCRIPT DEFER>

//<!--

function InitPage()

{

	if (g_isIE && g_iMaj >= 4)	

	{



		SetTOC();

	}

}

//-->


</SCRIPT>



<!-- STYLE_START -->


<SCRIPT LANGUAGE="JAVASCRIPT">

//<!--

   var sVR = '../'	// Set root for the style sheet

   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;



   if(g_isIE)

   {

	   if (g_iMaj >= 4) // For MSIE 4.0 or later

	   {

		   sCSS += 'dxm_basicSDKIE4';

		   if (g_sPlat == "Win") // Windows only for now

		   {

			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');

		   }

	   }

	   else // For MSIE 3.0 or earlier

	   {

		   sCSS += 'dxm_basicSDKIE3';

	   }

   }

   else if (g_isNav) // For all Nav versions

   {

	   sCSS += 'dxm_basicSDKNAV';

   }

   else

   {

	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet

   }



   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');



   document.write(sCSS);

//-->


</SCRIPT>

<!-- STYLE_END -->




</HEAD>

<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">

<A NAME="pagetop"></A>



<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectX Transform Animated Header -- Microsoft DirectX Transform SDK"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../art/hdrdtrns.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Microsoft DirectX Transform SDK"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectX Transform Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectX Transform SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../contents.htm">Contents</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../index.htm">Index</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../default.htm">Topic Contents</A>
</PRE></TD></TR>

<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="intro.htm">What is DirectX Transform?</A>
<IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="dxt_objects.htm">Architecture</A>
</PRE></TD></TR></TABLE>

<!-- NAV_LINKS_END -->









<BLOCKQUOTE class="body">

<!-- CONTENTS_START -->


<H1>How Transforms Work</H1>
<P>In a general sense, each transform is a set of rules for how to produce one graphic output. The design of a generic transform is shown in the following illustration.
<p>

<center>
<IMG SRC="../art/dxt_concept1.gif" WIDTH="282" HEIGHT="121" BORDER=0 alt="Transform Flowchart">

</center>


<P>Typically, a transform has one or several inputs that are used to produce the output graphics. Some transforms even have optional inputs and produce different effects based on how many inputs are defined. It is also possible for a transform to have no inputs.
<p>
Transforms can have a number of properties that determine how to process the inputs. In many cases, changing the values of these properties enables you to produce drastically different output with the same input.

<p>
Transforms are categorized by the following two types of output.
<ul>
	<li>Image transforms: The transform output is an image stored in a <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_D.htm#gloss_dxsurface')">DXSurface</A> object.
	<li>Three-dimensional (3-D) transforms: The transform output is a <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_D.htm#gloss_d3drmmeshbuilder')">Direct3DRMMeshBuilder3</A> object defined in Microsoft&reg; Direct3D&reg; Retained Mode.
</ul>

<P>For more information, see the following sections.
			<ul>
				<li><a href="#howtheywork_properties">Transform Properties</A></LI>
				<li><a href="#howtheywork_examples">Transform Examples</A></LI>
				<li><a href="#howtheywork_using">How to Use Transforms</A></LI>
			</ul>

<h2><a name="howtheywork_properties" IDX_CONCEPT="Transform Custom Properties">Transform Properties</a></h2>

<P>Each transform has a number of properties that control how the output is produced. The effect of each property on the output is controlled by changing a value associated with the property. Some are generic properties for all transforms, which are part of the Microsoft DirectX&reg; Transform code framework. The rest are referred to as &quot;custom properties,&quot; which are specific to a particular transform. 

<p>
The most commonly used generic property is <i>Progress</i>. It is used for all transforms that make smooth transitions from one state to another. The value for <i>Progress</i> can range from 0.0 to 1.0, determining what fraction of the transition should be reflected in the transform output. By looping over steadily changing values for <i>Progress</i> and producing output at each step, the transition can appear to be a repeating animation.

<p>
There are a number of other generic properties that can control transform output. The <i>Duration</i> property stores how long a transition from <i>Progress</i> = 0.0 to <i>Progress</i> = 1.0 should take. Some transforms support the <i>Quality</i> property, which determines quality or resolution of the output. Note that though these generic properties are available for all transforms, not all transforms make use of them.

<p>
The custom properties of a transform depend on the type of effect a transform produces. These are listed for each transform in the <a href="../reference/effects/effects.htm">Transform Reference</a> section. Examples of transform custom properties are shown in the following section.

<h2><a name="howtheywork_examples">Transform Examples</a></h2>







<P>The following are some examples of transforms included with this Software Development Kit (SDK), their custom properties, and the output they produce. To see what these and other transforms look like, see the <A HREF="../reference/effects/effect_entry.htm">Transform Demos</A>. For reference information about these and other included transforms, see the <A HREF="../reference/effects/effects.htm">Transform Reference</A>.

<h3>Pixelate Transform</h3>
<img align=right src="../art/pixelate.gif" WIDTH=153 HEIGHT=252 alt="Pixelate Example" border=0>
The <A HREF="../reference/effects/pixelate.htm">Pixelate</A> transform is an image transform that uses one image as an input. It takes the input image, divides it into a smaller number of large pixels, and places the result into an output image. Each of the output pixel colors is an average of all the pixel colors contained in a region of the original image.
<p>
At  <I>Progress</I> = 0.0, the input and output images are the same. By increasing the value of <i>Progress</i>, you can reduce the number of output pixels until the original image is barely recognizable. By looping over this variable


over time, you can create an animation of the transition from an unaltered image to a highly pixelated one.
<p>
This transform supports one custom property, <i>MaxBoxSize</i>, which determines the size of the largest pixel
at <I>Progress</I> = 1.0, measured in pixels of the input image. You can set this property's value from 2 through 50. A large <i>MaxBoxSize</i> (50) produces only a few pixels of output at <I>Progress</I> = 1.0, while a small <i>MaxBoxSize</i> (2) produces only a slight change from the input image.
<p>
The <B>Pixelate</B> transform  can optionally take two input images. In this case, the result at  <I>Progress</I> = 0.0 is Image A, and the result at <i>Progress</i> = 1.0 is Image B. At <i>Progress</i> = 0.5, the pixelated version of Image A changes to the pixelated version of Image B, producing a smooth transition between the images as <i>Progress</i> increases.
<br clear=right>

<h3>Explode Transform</h3>
<img align=right src="../art/explode.gif" WIDTH=135 HEIGHT=300 alt="Explode Example" border=0>
<P>The <A HREF="../reference/effects/explode.htm">Explode</A> transform is an example of a 3-D transform that uses a mesh input to produce a mesh output. Once again, the <i>Progress</i> property controls the development of the output.
<p>
This transform simulates an explosion by breaking the input mesh into polygons and moving each polygon away from the center of the object. At <I>Progress</I> = 0.0, the output mesh and input mesh are the same. At <I>Progress</I> = 1.0, the polygons are spread all over the 3-D volume,


each with a different orientation than before.
<p>
<B>Explode</B> has five custom properties. <i>PositionJump</i> controls how quickly each polygon jumps out from the center. The <i>FinalVelocity</i> specifies how quickly the polygons are moving immediately after the explosion. For larger values, the polygons will be farther apart at <I>Progress</I> = 1.0. The <I>DecayTime</I> determines how long it takes after the explosion for the moving polygons to slow down to the <i>FinalVelocity</i>. A Boolean <i>Tumble</i> variable controls whether the polygons tumble as they move. If TRUE, the <I>MaxRotations</I> controls the number of times each polygon rotates from the start of the explosion to <I>Progress</I> = 1.0.
<br clear=right>

<h3>HeightField Transform</h3>
<img align=right src="../art/heightfield.gif" WIDTH=137 HEIGHT=309 alt="HeightField Example" border=0>
<P>The <A HREF="../reference/effects/htfield.htm">HeightField</A> transform is an example of how a two-dimensional (2-D) image can be turned into a 3-D mesh. It takes an image as an input and uses it as a texture for a 3-D rectangular plane. It then adds vertices to this plane that form the terrain of the output surface. The transform determines the height of each vertex from the plane by averaging the three RGB color values of the pixel corresponding to that vertex and mapping that brightness to the height. This makes brighter colors appear higher above the plane than darker ones. All heights are scaled by the <I>Progress</I> value, so in an animation, the surface can seem to grow out of the image.
<p>
The <B>HeightField</B> transform has two custom properties. The <i>Depth</i> controls how high above the plane the surface can be displaced. <i>Depth</i> accepts negative values, which produce depressions instead of spikes. The <i>Samples</i> property
specifies the number of vertices to use for each row and column of the resulting surface. The higher the value of <i>Samples</i>, the more jagged the surface will appear.
<br clear=right>

<h3>Gradient Transform</h3>
<P>The <A HREF="../reference/effects/gradient.htm">Gradient</A> transform has no inputs and one output. The result is an image that gradually transitions from one color to another. For this transform, the output image is determined solely from the custom properties set by the user.
<p>
<img align=right src="../art/gradient.gif" WIDTH=126 HEIGHT=122 alt="Gradient Example" border=0>

You can set the <i>StartColor</i> and <i>EndColor</i> properties, as well as a <i>GradientType</i> that is either horizontal or vertical. The <i>GradientWidth</i> and <i>GradientHeight</i> specify the surface dimensions in pixels. 
<p>
Note that this transform does not have a <i>Progress</i> property; the output is produced in a single step by the call to <b>Execute</b>.
<br clear=right>

<h2><a name="howtheywork_using" IDX_CONCEPT="How to Use Transforms, An Introduction">How to Use Transforms</a></h2>


<P>You typically follow four steps in the process of using a transform.
<ol>
	<li>Create the transform: Use C++ with a Component Object Model (COM) interface called a <a href="../reference/ifaces/idxtransformfactory.htm">IDXTransformFactory</a>.
	<li>Define inputs and outputs: Load into memory or create input images or meshes, if the transform uses them. After creating an output object of the correct type, pass pointers to these objects to the <b>Setup</b> method.


	<li>Set the values for transform properties. This is done with two implied access methods for each property: <b>put_</b><I>Property</I> and <b>get_</b><I>Property</I>. For example, a custom property named <i>MyProperty</i> could be set with <b>put_MyProperty</b> and retrieved with <b>get_MyProperty</b>. There are also  <b>put_Progress</b> and <b>get_Progress</b> methods for transforms that support <a href="../reference/ifaces/idxeffect.htm">IDXEffect</a>.
	<li>Call the <b>Execute</b> method:


Processes the inputs according to the transform properties and produces the output.
</ol>


After the call to <b>Execute</b>, the output object is typically drawn to the screen. For transforms that support the <i>Progress</i> property, you can create animated effects. This is typically done by creating a loop that, for each iteration, sets a new value for <I>Progress</I> and calls <b>Execute</b>.
<p>
These steps are covered in more detail in the <a href="users_implement.htm">Using Transforms in C++</a> article. 

<!-- CONTENTS_END -->


<!-- START_PAGE_FOOTER -->




<H5><HR size=1></H5>

<P><A CLASS="line" HREF="#pagetop"><IMG src="../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>

<BR><A CLASS="line" HREF="../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>

<!-- END_PAGE_FOOTER -->


</BLOCKQUOTE>




<!-- START POP-UP GLOSSARY -->

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>
<!-- END POP-UP GLOSSARY -->


<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY></HTML>
