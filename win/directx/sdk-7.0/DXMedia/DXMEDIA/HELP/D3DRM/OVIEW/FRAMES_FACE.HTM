<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>Frames</TITLE>
<SCRIPT LANGUAGE="JAVASCRIPT"> var sRelPath = '../' </SCRIPT>


<META NAME="Description" CONTENT="Frames">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../ver.js"></SCRIPT>
<SCRIPT SRC="../gloss.js"></SCRIPT>


<SCRIPT DEFER SRC="../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
   var sVR = '../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicSDKIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicSDKIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicSDKNAV';
   }
   else
   {
	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="rmobject_IDirect3DRMFrame3_Int"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="Direct3D Retained Mode Animated Header --Frames"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217">
<IMG SRC="../art/HDRd3drm.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Direct3D Retained Mode Animated Header --Frames"></TD><TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="Direct3D Retained Mode Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft Direct3D Retained Mode SDK"></TD></TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../contents.htm">Contents</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../index.htm">Index</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="Oview_face.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="eliminating_redundant.htm">Eliminating Redundant State Changes</A>
<IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="Interpolators_face.htm">Interpolators</A>
</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->

<BLOCKQUOTE CLASS="body">

<!-- CONTENTS_START -->

<H1><A NAME="frames">Frames</A></H1>

<P>The term <I>frame</I> is derived from an object's physical frame of reference. The frame's role in Retained Mode is similar to a window's role in a windowing system. Objects can be placed in a scene by stating their spatial relationship to a relevant reference frame; they are not simply placed in world space. A frame is used to position objects in a scene, and visuals take their positions and orientation from frames. 
<P>A <I>scene</I> in Retained Mode is defined by a frame that has no parent frame; that is, a frame at the top of the hierarchy of frames. This frame is also sometimes called a <I><A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_r.htm#root_frame')">root frame</A></I> or <I>master frame</I>. The scene defines the frame of reference for all of the other objects. You can create a scene by calling the <A HREF="../ref/IDirect3DRM3.htm#CreateFrame">IDirect3DRM3::CreateFrame</A> method and specifying NULL for the first parameter.
<P>The <A HREF="../ref/Frame3Oview.htm#IDirect3DRMFrame3">IDirect3DRMFrame3</A> interface is an extension of the <B>IDirect3DRMFrame2</B> interface. <B>IDirect3DRMFrame2</B> has methods that enable using materials, bounding boxes, and axes with frames. <B>IDirect3DRMFrame2</B> also supports ray picking. 
<P>By using the <A HREF="../ref/Frame3NtoZ.htm#SetAxes">IDirect3DRMFrame3::SetAxes</A> method and using the right-handed projection types in the <A HREF="../ref/Enums.htm#D3DRMPROJECTIONTYPE">D3DRMPROJECTIONTYPE</A> structure with the <A HREF="../ref/Viewport2.htm#SetProjection">IDirect3DRMViewport2::SetProjection</A> method, you can enable right-handed projection. 

<P>For related information, see <A HREF="../ref/Frame3Oview.htm#IDirect3DRMFrame3">IDirect3DRMFrame3</A>.
<P>This section describes frames and how your application can use them.
<BLOCKQUOTE>
<UL><LI><A HREF="Frames_face.htm#sec_Hierarchies">Hierarchies</A>
<LI><A HREF="Frames_face.htm#sec_Transformations">Transformations</A>
<LI><A HREF="Frames_face.htm#sec_Motion">Motion</A>
<LI><A HREF="Frames_face.htm#Callback_Functions">Callback Functions</A>
</UL>
</BLOCKQUOTE>
<H2><A NAME="sec_Hierarchies" IDX_CONCEPT="Frame Hierarchies">Hierarchies</A></H2>
<P>The frames in a scene are arranged in a tree structure. Frames can have a parent frame and child frames. Remember, a frame that has no parent frame defines a scene and is called a <I>root frame</I>. 

<P>Child frames have positions and orientations relative to their parent frames. If the parent frame moves, the child frames also move.

<P>An application can set the position and orientation of a frame relative to any other frame in the scene, including the root frame if it needs to set an absolute position. 


You can also remove frames from one parent frame and add them to another at any time by using the <A HREF="../ref/Frame3AtoM.htm#AddChild">IDirect3DRMFrame3::AddChild</A> method. To remove a child frame entirely, use the <A HREF="../ref/Frame3AtoM.htm#DeleteChild">IDirect3DRMFrame3::DeleteChild</A> method. To retrieve a frame's child and parent frames, use the <A HREF="../ref/Frame3AtoM.htm#GetChildren">IDirect3DRMFrame3::GetChildren</A> and <A HREF="../ref/Frame3AtoM.htm#GetParent">IDirect3DRMFrame3::GetParent</A> methods. 

<P>You can add frames as visuals to other frames, allowing you to use a given hierarchy many times throughout a scene. The new hierarchies are referred to as <I>instances</I>. Be careful to avoid instancing a parent frame into its children because that will degrade performance. Retained Mode does no run-time checking for cyclic hierarchies. You cannot create a cyclic hierarchy by using the methods of the <A HREF="../ref/Frame3Oview.htm#IDirect3DRMFrame3">IDirect3DRMFrame3</A> interface; instead, this is possible only when you add a frame as a visual.


<H2><A NAME="sec_Transformations" IDX_CONCEPT="Frame Transformations">Transformations</A></H2>
<P>You can think of the position and orientation of a frame relative to its parent frame as a linear transformation. This transformation takes vectors defined relative to the child frame and changes them to equivalent vectors defined relative to the parent. 
<P>Transformations can be represented by 4&#215;4 matrices, and coordinates can be represented by four-element row vectors, [<I>x, y, z,</I>1].
<P>If <I>v</I><SUB>child</SUB> is a coordinate in the child frame, then <I>v</I><SUB>parent</SUB>, the equivalent coordinate in the parent frame, is defined as:

<P><IMG SRC="../art/parenteq.gif" WIDTH="150" HEIGHT="24" ALT="Definition of the parent frame">

<P> <I>T</I><SUB>child</SUB> is the child frame's transformation matrix.

<P>The transformations of all the parent frames above a child frame up to the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_R.htm#root_frame')">root frame</A> are concatenated with the transformation of that child to produce a world transformation. This world transformation is then applied to the visuals on the child frame before rendering. Coordinates relative to the child frame are sometimes called <I><A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_m.htm#model_coordinates')">model coordinates</A></I>. After the world transformation is applied, coordinates are called <I><A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_w.htm#world_coordinates')">world coordinates</A></I>.

<P>The transformation of a frame can be modified directly by using the <A HREF="../ref/Frame3AtoM.htm#AddTransform">IDirect3DRMFrame3::AddTransform</A>, <A HREF="../ref/Frame3AtoM.htm#AddScale">IDirect3DRMFrame3::AddScale</A>, <A HREF="../ref/Frame3AtoM.htm#AddRotation">IDirect3DRMFrame3::AddRotation</A>, and <A HREF="../ref/Frame3AtoM.htm#AddTranslation">IDirect3DRMFrame3::AddTranslation</A> methods. Each of these methods specifies a member of the <A HREF="../ref/Enums.htm#D3DRMCOMBINETYPE">D3DRMCOMBINETYPE</A> enumerated type, which specifies how the matrix supplied by the application should be combined with the current frame's matrix.

<P>The <A HREF="../ref/Frame3AtoM.htm#GetRotation">IDirect3DRMFrame3::GetRotation</A> and <A HREF="../ref/Frame3AtoM.htm#GetTransform">IDirect3DRMFrame3::GetTransform</A> methods allow you to retrieve a frame's rotation axis and transformation matrix. To change the rotation of a frame, use the <A HREF="../ref/Frame3NtoZ.htm#SetRotation">IDirect3DRMFrame3::SetRotation</A> method.

<P>Use the <A HREF="../ref/Frame3NtoZ.htm#Transform">IDirect3DRMFrame3::Transform</A> and <A HREF="../ref/Frame3AtoM.htm#InverseTransform">IDirect3DRMFrame3::InverseTransform</A> methods to change between world coordinates and model coordinates.

<P>You can find a more general discussion of transformations in the <A HREF="Viewports_face.htm#rmobject_Transformations">Transformations</A> section devoted to viewports. For an overview of the mathematics of transformations, see <A HREF="TechBackgrnd.htm#rmmath_3D_Transformati">3-D Transformations</A>.

<H2><A NAME="sec_Motion" IDX_CONCEPT="Frame Motion">Motion</A></H2>
<P>Every frame has an intrinsic rotation and velocity. Frames that are neither rotating nor translating simply have zero values for these attributes. These attributes are used before each scene is rendered to move objects in the scene, and they can also be used to create simple animations.


<H2><A NAME="Callback_Functions" IDX_CONCEPT="Frame Callback Functions">Callback Functions</A></H2>
<P>Frames support a callback function that you can use to support more complex animations. The application registers a function that the frame calls before the motion attributes are applied. When there are multiple frames in a hierarchy, each with associated callback functions, the parent frames are called before the child frames. For a given hierarchy, rendering does not take place until all of the required callback functions have been invoked.
<P>To add this callback function, use the <A HREF="../ref/Frame3AtoM.htm#AddMoveCallback">IDirect3DRMFrame3::AddMoveCallback</A> method; to remove it, use the <A HREF="../ref/Frame3AtoM.htm#DeleteMoveCallback">IDirect3DRMFrame3::DeleteMoveCallback</A> method.
<P>You can use these callback functions to provide new positions and orientations from a preprogrammed animation sequence or to implement dynamic motion in which the activities of visuals depend upon the positions of other objects in the scene.


<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H5><HR size=1></H5>
<P><A class="line" HREF="#pagetop"><IMG src="../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A Class="line" HREF="../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
