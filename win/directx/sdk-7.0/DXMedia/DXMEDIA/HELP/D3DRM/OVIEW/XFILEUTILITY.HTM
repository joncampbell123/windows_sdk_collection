<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>DirectX File Conv3ds.exe Utility</TITLE>
<SCRIPT LANGUAGE="JAVASCRIPT"> var sRelPath = '../' </SCRIPT>


<META NAME="Description" CONTENT="DirectX File Conv3ds.exe Utility">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../ver.js"></SCRIPT>
<SCRIPT SRC="../gloss.js"></SCRIPT>


<SCRIPT DEFER SRC="../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
   var sVR = '../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicSDKIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicSDKIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicSDKNAV';
   }
   else
   {
	   sCSS += 'dxm_basicSDKIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="Direct3D Retained Mode Animated Header --Appendix D: The Conv3ds.exe Utility"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217">
<IMG SRC="../art/HDRd3drm.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="Direct3D Retained Mode Animated Header --Appendix D: The Conv3ds.exe Utility"></TD><TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="Direct3D Retained Mode Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft Direct3D Retained Mode SDK"></TD></TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../contents.htm">Contents</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../index.htm">Index</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="xfileFormat.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="xfileBinaryFormat.htm">DirectX File Binary Format</A>
<IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="xfileSamples.htm">DirectX File Samples</A>

</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->

<BLOCKQUOTE CLASS="body">

<!-- CONTENTS_START -->

<H1><A NAME="conv3ds" IDX_CONCEPT="Conv3ds Utility">DirectX File Conv3ds.exe Utility</A></H1>

<P>The Conv3ds.exe utility converts three-dimensional (3-D) models produced by Autodesk 3-D Studio and other modeling packages into the Microsoft&#174; DirectX&#174; file format. By default, the utility
 produces binary .x files with no templates.

<P>This article contains the following sections.
<ul>
<li><A HREF="#xfilefrm_Using_Conv3ds_exe">Using Conv3ds.exe</A>
<li><A HREF="#xfilefrm_Conv3ds_exe_Optional_Arguments">Conv3ds.exe Optional Arguments</A>
<li><A HREF="#xfilefrm_3DS_Files_Produced_from_Lightwave_Objects">3DS Files Produced from Lightwave Objects</A>
<li><A HREF="#xfilefrm_Hints_and_Tips">Hints and Tips</A>
</ul>

<H2><A NAME="xfilefrm_Using_Conv3ds_exe" IDX_CONCEPT="noindex">Using Conv3ds.exe</A></H2>
<P>You can run Conv3ds.exe with no options, and it will produce an .x file containing a hierarchy of frames. For example, consider the command: 
<PRE>conv3ds File.3ds
</PRE>
<P>This command will produce an .x file called File.x from the .3ds file. You can use <A HREF="../ref/Frame3AtoM.htm#Load">IDirect3DRMFrame3::Load</A> to load the frame. 

<H2><A NAME="xfilefrm_Conv3ds_exe_Optional_Arguments" IDX_CONCEPT="noindex">Conv3ds.exe Optional Arguments</A></H2>
<P><B>Conv3ds.exe -A</B>
<P>If the .3ds file contains key frame data, you can use the <B>-A</B> option to produce an .x file that contains an animation set. The command for doing this would be:
<PRE>conv3ds -A File.3ds
</PRE>
<P>The <I>File.3ds</I> parameter is the name of the file to be converted. You can use <A HREF="../ref/AnimationSet2.htm#IDirect3DRMAnimationSet2_Load">IDirect3DRMAnimationSet2::Load</A> to load the animation.
<P><B>Conv3ds.exe -m</B>
<P>Use the <B>-m</B> option to make an .x file that contains a single mesh made from all the objects in the .3ds file. 
<PRE>conv3ds -m File.3ds
</PRE>
<P>Use <A HREF="../ref/MeshBuilder3.htm#Load">IDirect3DRMMeshBuilder3::Load</A> to load the mesh.
<P><B>Conv3ds.exe -T</B>
<P>Use the<B>-T</B> option to wrap all the objects and frame hierarchies in a single top-level frame. Using this option, all the frames and objects in the .3ds file can be loaded with a single call to <A HREF="../ref/Frame3AtoM.htm#Load">IDirect3DRMFrame3::Load</A>. The first top-level frame hierarchy in the .x file will be loaded. The frame containing all the other frames and meshes is called "x3ds_filename" (without the .3ds extension). The <B>-T</B> option will have no effect if it is used with the <B>-m</B> option.
<P><B>Conv3ds.exe -s</B>
<P>The <B>-s</B> option allows you to specify a scale factor for all the objects converted in the .3ds file. For example, the following command makes all objects 10 times bigger: 
<PRE>conv3ds -s10 File.3ds
</PRE>
<P>The following command makes all objects 10 times smaller:
<PRE>conv3ds -s0.1 File.3ds
</PRE>
<P><B>Conv3ds.exe -r</B>
<P>The <B>-r</B> option reverses the winding order of the faces when the .3ds file is converted. If, after converting the .3ds file and viewing it in Direct3D, the object appears inside-out, try converting it with the <B>-r</B> option. All Lightwave models exported as .3ds files need this option. See <A HREF="xfileUtility.htm#xfilefrm_3DS_Files_Produced_from_Lightwave_Objects">3DS Files Produced from Lightwave Objects</A> for details. 
<P><B>Conv3ds.exe -v</B>
<P>The <B>-v</B> option turns on verbose output mode. Specify an integer with it. The following table shows the currently supported integers.
<TABLE CLASS="main" BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><B>Option </B></TD>
<TD ALIGN=LEFT VALIGN=TOP><B>Meaning 
</B></TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP>-v0 </TD>
<TD ALIGN=LEFT VALIGN=TOP>Default. Verbose mode off. 
</TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP>-v1 </TD>
<TD ALIGN=LEFT VALIGN=TOP>Prints warnings about bad objects, and prints general information about what the converter is doing. 
</TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP>-v2 </TD>
<TD ALIGN=LEFT VALIGN=TOP>Prints basic key frame information, the objects being included in the conversion process, and information about the objects being saved.
</TD>
</TR>
<TR><TD ALIGN=LEFT VALIGN=TOP>-v3 </TD>
<TD ALIGN=LEFT VALIGN=TOP>Very verbose. Mostly useful for the debugging information it provides.
</TD>
</TR>
</TABLE>
<P><B>Conv3ds.exe -e</B>
<P>The -e option allows you to change the extension for texture map files. For example, consider the command: 
<PRE>conv3ds -e"ppm" File.3ds
</PRE>
<P>If File.3ds contains objects that reference the texture map file Brick.gif, the .x file will reference the texture map file Brick.ppm. The converter does not convert the texture map file. The texture map files must be in the D3DPATH

 when the resulting .x file is loaded. The D3DPath is an environment variable that sets the default search path. 

<P><B>Conv3ds.exe -x</B>
<P>The <B>-x</B> option forces the Conv3ds.exe utility to produce a text .x file, instead of a binary .x file. Text files are larger but can be hand-edited easily. 
<P><B>Conv3ds.exe -X</B>
<P>The <B>-X</B> option forces the Conv3ds.exe utility to include the Direct3D Retained Mode .x file templates in the file. By default, the templates are not included.
<P><B>Conv3ds.exe -t</B>
<P>The <B>-t</B> option specifies that the .x file produced will not contain texture
information.
<P><B>Conv3ds.exe -N</B> 
<P>The <B>-N</B> option specifies that the .x file produced will not contain <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_n.htm#normal_vector')">normal vector</A> information. All the Direct3D Retained Mode load calls will generate normal vectors for objects with no normal vectors in the .x file.
<P><B>Conv3ds.exe -c</B> 
<P>The <B>-c</B> option specifies that the .x file produced should not contain texture coordinates. By default, if you use the <B>-m</B> option, the mesh that is output will contain (0,0) uv 

texture coordinates if the .3ds object had no texture coordinates.
<P><B>Conv3ds.exe -f</B>
<P>The <B>-f</B> option specifies that the .x file produced should not contain a frame transformation matrix.
<P><B>Conv3ds.exe - z</B> and <B>Conv3ds.exe -Z</B>
<P>The <B>-z</B> and <B>-Z</B> options allow you to adjust the alpha face color value of all the materials referenced by objects in the .x file. For example, the following command causes <B>Conv3ds.exe</B> to add 0.1 to all alpha values under 0.2:
<PRE>conv3ds -z0.1 -Z0.2 File.3ds
</PRE>
<P>The following command causes Conv3ds.exe to subtract 0.2 from the alpha values for all alphas:
<PRE>conv3ds-z"-0.2" -z1 File.3ds
</PRE>
<P><B>Conv3ds.exe -o</B>
<P>The <B>-o</B> option allows you to specify the file name for the .x file produced.
<P><B>Conv3ds.exe -h</B>
<P>The <B>-h</B> option tells the converter not to try to resolve any hierarchy information in the .3ds file (usually produced by the key framer). Instead, all the objects are output in top-level frames if the <B>-m</B> option is not used.

<H2><A NAME="xfilefrm_3DS_Files_Produced_from_Lightwave_Objects" IDX_CONCEPT="noindex">3DS Files Produced from Lightwave Objects</A></H2>
<P>There are several issues with .3ds files exported by the Trans3d plug-in for Lightwave.

 These are best handled using the following Conv3ds.exe command:
<PRE>conv3ds -r -N -f -h -T|m trans3dfile.3ds
</PRE>
<P>All the .3ds objects produced by Trans3d and the Lightwave object editor need their winding order reversed. Otherwise, they appear inside-out when displayed. They contain no surface normal vector information.

<H2><A NAME="xfilefrm_Hints_and_Tips" IDX_CONCEPT="noindex">Hints and Tips</A></H2>
<P>If you cannot see objects produced by Conv3ds.exe after loading them into the Direct3D Retained Mode viewer, use the scale option <B>-s</B> with a scale factor of approximately 100. This will increase the scale of the objects in the .x file.
<P>If, after loading the object into the viewer and switching from flat shading into Gouraud shading, the object turns dark gray, try converting with the <B>-N</B> option. 
<P>If the textures are not loaded after the object is converted, check whether the object is referencing either .ppm or .bmp files by using the <B>-e</B> option. Also check whether the textures' widths and heights are a power of 2. Make sure the textures are stored in one of the directories in your D3DPATH.
<P>Currently, Conv3ds.exe cannot handle dummy frames used in .3ds animations. It ignores them. However, it will convert any child objects.




<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H5><HR size=1></H5>
<P><A class="line" HREF="#pagetop"><IMG src="../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A Class="line" HREF="../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT LANGUAGE="JAVASCRIPT">if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
