<!-- DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN" -->

<HTML>
<HEAD><TITLE>Filters and Pins</TITLE>
<SCRIPT> var sRelPath = '../' </SCRIPT>


<META NAME="Description" CONTENT="Filters and Pins">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT>
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../ver.js"></SCRIPT>
<SCRIPT SRC="../gloss.js"></SCRIPT>

<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT>
//<!--
   var sVR = '../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicsdkIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicsdkIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicsdkNAV';
   }
   else
   {
	   sCSS += 'dxm_basicsdkIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="arch_9"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- Filters and Pins"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../art/hdrdshow.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- Filters and Pins"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectShow Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../contents.htm">Contents</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../index.htm">Index</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="Basics_Intro.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="Filter_Graph_Manager.htm">Filter Graph Manager and Filter Graphs</A>
<IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="Stream_Control_Arch.htm">Stream Control Architecture</A>
</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->


<BLOCKQUOTE CLASS="body">
<!-- CONTENTS_START -->

<H1>Filters and Pins</H1>

<P>The two basic components used in the stream architecture are filters and pins. A <I>filter</I> is 
a COM object that performs a specific task, such as reading data from a disk. For each stream it 
handles, it exposes at least one pin. A <I>pin</I> is a COM object created by the filter, that represents a point of connection for a unidirectional data stream on the filter, as shown in the following illustration.

<P><IMG SRC="../art/arch3.gif" WIDTH="544" HEIGHT="44" ALT="Pin illustration">

<P><I>Input pins</I> accept data into the filter, and <I>output pins</I> provide data to other filters. A <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_S.htm#source_filter')">source filter</A> provides one output pin for each stream of data in the file. A typical <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_T.htm#transform_filter')">transform filter</A>, such as a compression/decompression (<A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_C.htm#codec')">codec</A>) filter, provides one input pin and one output pin, while an audio output filter typically exposes only one input pin. More complex arrangements are also possible.

<P>You can name pins anything you want. If your <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_P.htm#pin')">pin</A> name begins with the tilde (~) character, the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_F.htm#filter_graph')">filter graph</A> will not automatically render that pin when an application calls <A HREF="../ref/iface/IGraphBuilder.htm#RenderFile">IGraphBuilder::RenderFile</A>. This can apply to pins that are just informational and are not meant to be rendered, or need to be enumerated so that their properties can be set. The tilde (~) prefix only affects the behavior of <A HREF="../ref/iface/IGraphBuilder.htm#RenderFile">RenderFile</A> and intelligent connect (<A HREF="../ref/iface/IGraphBuilder.htm#Connect">IGraphBuilder::Connect</A>). Note that intelligent connect can still be used to connect pins with this property if they implement the <A HREF="../ref/iface/IPin.htm#Connect">IPin::Connect</A> method. However, output pins of intermediate filters which are being used to complete the connection which have the tilde at the start of their name will not be connected as part of the intelligent connection attempt.

<P>At a minimum, a filter exposes the <A HREF="../ref/iface/IBaseFilter.htm#IBaseFilter">IBaseFilter</A> interface. This interface provides methods that allow the enumeration of the pins on the filter and return 
filter information. It also provides the inherited methods from <A HREF="../ref/iface/IMediaFilter.htm#IMediaFilter">IMediaFilter</A>; these methods 
allow control of state processing (for example running, pausing, and stopping) and
synchronization, and are called primarily by the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_F.htm#filter_graph_manager')">filter graph manager</A>.

<P>In addition, a filter might expose several other interfaces, depending on the media types 
supported and tasks performed. For example, a filter can expose the <A HREF="../appendixes/Further_Reading.htm#ISpecifyPropertyPage">ISpecifyPropertyPages</A> 
interface to support a property page.

<P>Pins are responsible for providing interfaces to connect with other pins and for transporting 
the data. The pin interfaces support the following:
<UL>
<LI>The transfer of time-stamped data using shared memory or other resource.
<LI>Negotiation of data formats at each pin-to-pin connection.
<LI>Buffer management and buffer allocation negotiation designed to minimize data copying and 
maximize throughput.
</UL>

<P>Pin interfaces differ slightly, depending on whether they are output pins or input pins.

<P>An output pin typically exposes the following interfaces.
<UL>
<LI><A HREF="../ref/iface/IPin.htm#IPin">IPin</A> methods are called to allow the pin to be queried for pin, connection, and 
data type information, and to send flush notifications downstream when the filter graph stops.
<LI><A HREF="../ref/iface/IMediaSeeking.htm#IMediaSeeking">IMediaSeeking</A> allows information about the stream's duration, start time, and stop 
time to be relayed from the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_R.htm#renderer')">renderer</A>.
The renderer passes the media position information upstream to the filter (typically the source filter) responsible for queuing the stream to the appropriate position.
<LI><A HREF="../ref/iface/IQualityControl.htm#IQualityControl">IQualityControl</A> passes quality-control messages upstream from the renderer 
to the filter that is responsible for increasing or decreasing the media supply.
</UL>

<P>An input pin typically exposes the following interfaces.
<UL>
<LI><A HREF="../ref/iface/IPin.htm#IPin">IPin</A> allows the pin to connect to an output pin and provides information about 
the pin and its internal connections.
<LI><A HREF="../ref/iface/IMemInputPin.htm#IMemInputPin">IMemInputPin</A> allows the pin to propose its own <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_T.htm#transport')">transport</A> memory allocator, to 
be notified of the allocator that an output pin is supplying, to receive media samples through the 
established allocator, and to flush the buffer. This interface can create a shared memory 
allocator object if the connected pin does not supply a transport memory allocator.
</UL>

<P>The standard transport interface, <A HREF="../ref/iface/IMemInputPin.htm#IMemInputPin">IMemInputPin</A>, provides data transfer through shared memory buffers, although other transport interfaces can be used. For example, where two 
components are connected directly in hardware, they can connect to each other by using the 
<A HREF="../ref/iface/IPin.htm#IPin">IPin</A> interface, and then seek a private interface that can manage the transfer of data directly between the two components. 

<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A Class="line" HREF="#pagetop"><IMG src="../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A HREF="../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
