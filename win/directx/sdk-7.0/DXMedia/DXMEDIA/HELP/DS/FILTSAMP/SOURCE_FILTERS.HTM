<!-- DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN" -->

<HTML>
<HEAD><TITLE>Source Filters</TITLE>
<SCRIPT> var sRelPath = '../' </SCRIPT>


<META NAME="Description" CONTENT="Source Filters">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT>
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../ver.js"></SCRIPT>
<SCRIPT SRC="../gloss.js"></SCRIPT>

<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT>
//<!--
   var sVR = '../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicsdkIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicsdkIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicsdkNAV';
   }
   else
   {
	   sCSS += 'dxm_basicsdkIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="SourceFilters"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- Source Filters"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../art/hdrdshow.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- Source Filters"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectShow Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../contents.htm">Contents</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../index.htm">Index</A>  <IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="ds_Samples_intro.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="ds_samples_intro.htm">DirectShow Samples</A>
<IMG SRC="../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="Transform_Filters.htm">Transform Filters</A>
</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->


<BLOCKQUOTE CLASS="body">


<!-- CONTENTS_START -->

<H1>Source Filters</H1>

<P>This article details sample <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_S.htm#source_filter')">source filter</A>s. By definition, each of these source filter samples provides at least one <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_O.htm#output_pin')">output pin</A>. (That is part of what makes them source filters as opposed to other kinds of filters.)

<P><B>Contents of this article:</B>
<UL><LI><A HREF="Source_Filters.htm#AsyncSample">Async Sample (Asynchronous Reader Filter)</A>
<LI><A HREF="Source_Filters.htm#BouncingBall">Ball Sample (Bouncing Ball Filter)</A>
<LI><A HREF="Source_Filters.htm#SampleSynth">Synth Sample (Audio Synthesizer Filter)</A>
<LI><A HREF="Source_Filters.htm#MultiFile_Source_Filter">Mult Sample (MultiFile Source Filter)</A>
<LI><A HREF="Source_Filters.htm#VidCap">VidCap Sample (Video Capture Filter)</A>
</UL>
<H2><A NAME="AsyncSample">Async Sample (Asynchronous Reader Filter)</A></H2>
<P>The asynchronous reader sample filter, Async, shows how to implement "progressive download" in the DirectShow environment. Async implements the <A HREF="../ref/iface/IAsyncReader.htm">IAsyncReader</A> interface, which is perhaps the most important aspect of asynchronous processing. It also implements the <A HREF="../ref/iface/IFileSourceFilter.htm">IFileSourceFilter</A> interface and defines some helper classes to create filters that conform to the <B>IAsyncReader</B> interface.

<P>The Memfile.exe application uses part of the Async sample code. This program reads a file into memory at a given rate (in kilobytes per second) and plays that file as it comes in.

<P>This filter is not installed in the DirectShow <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_R.htm#run_time')">run time</A> and is not included in the list of DirectShow filters in the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_F.htm#Filter_Graph_Editor')">Filter Graph Editor</A>. To use this filter, you must build and register it.

<P><A HREF="DS_Samples_intro.htm#sample_locations">Sample Locations</A>



<H2><A NAME="BouncingBall">Ball Sample (Bouncing Ball Filter)</A></H2>
<P>The bouncing ball sample source filter, Ball, illustrates format negotiation. Ball also illustrates the use of the source filter base classes <A HREF="../ref/class/CSource.htm">CSource</A> and <A HREF="../ref/class/CSourceStream.htm">CSourceStream</A>.

<P>The code in Fball.h and Fball.cpp manages the filter interfaces. Those two files contain approximately the minimum code required for a source filter. The Ball.h and Ball.cpp files contain the code that bounces the ball. 

<P>This filter has a single output pin, which provides a video stream that shows a ball bouncing around in the frame. The Ball filter also accepts quality-management requests from the downstream graph, which illustrates a simple quality-management strategy. This filter implements the <A HREF="../ref/iface/IQualityControl.htm">IQualityControl</A> interface for that purpose.

<P>This filter is installed with the DirectShow run time and is available through the Filter Graph Editor when you choose <B>Insert Filters</B> from the <B>Graph</B> menu, and select the DirectShow Filters category.
 
<P><A HREF="DS_Samples_intro.htm#sample_locations">Sample Locations</A>


<H2><A NAME="SampleSynth">Synth Sample (Audio Synthesizer Filter)</A></H2>
<P>The audio synthesizer sample filter, Synth, demonstrates use of the <A HREF="../ref/class/CSource.htm">CSource</A> and <A HREF="../ref/class/CSourceStream.htm">CSourceStream</A> classes in an environment that derives its source from audio. You can use the Synth filter as a source filter to synthesize audio waveforms such as sine waveforms, square waveforms, sawtooth waveforms, and swept frequency waveforms.

<P>The Synth source filter enables the user to set the waveform, frequency, number of channels, and other properties through the radio buttons, text boxes, sliders, and other controls on a property page. To set either the upper or lower endpoint of the swept frequency range, hold down <SMALL>SHIFT</SMALL> while adjusting the frequency slider. The property page enables only the controls that affect the audio format&#151;for example, channels, bits per sample, and sampling frequency&#151;while the filter is in a stopped state.

<P>This filter is installed with the DirectShow run time and is available through the Filter Graph Editor when you choose <B>Insert Filters</B> from the <B>Graph</B> menu, and select the DirectShow Filters category. 
 
<P><A HREF="DS_Samples_intro.htm#sample_locations">Sample Locations</A>


<H2><A NAME="MultiFile_Source_Filter">Mult Sample (MultiFile Source Filter)</A></H2>

<P>The Mult sample contains code that supports the MultiFile source filter. The DirectShow Mult sample contains three subdirectories:
<ul>
<li>Filter&#151;builds the MultiFile <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_S.htm#source_filter')">source filter</A>
<li>Auto&#151;builds an object that supports the 'DirectShow MultiFile 1.0 Type Library'
<li>VB&#151;a sample application in Microsoft Visual Basic&reg; that uses the 'DirectShow MultiFile 1.0' object to implement a simple <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_C.htm#cutlist')">cutlist</A> playback viewer.
</ul>
<P><A HREF="DS_Samples_intro.htm#sample_locations">Sample Locations</A>


<H2><A NAME="VidCap">VidCap Sample (Video Capture Filter)</A></H2>
<P>The VidCap sample video capture filter shows you how to handle special category filters, how to implement the COM interfaces for video capture, and how to implement miscellaneous other requirements for video capture.

<P>The VidCap sample filter is not installed with the DirectShow run time. You must install it by calling Regsvr32.exe for VidCap.ax. The sample video capture filter is not part of the run time, but is part of the SDK.
 
<P>A <A HREF="VFW_Video_Capture.htm">video capture filter</A> with the same capability as VidCap is installed with the DirectShow run time and can be seen in the Filter Graph Editor when you choose <B>Insert Filters</B> from the <B>Graph</B> menu, under the Video Capture Sources category. The VidCap sample is included so that you can view the source code for a video capture filter and see how to write capture filters.

<P>Unlike ordinary DirectShow filters, special category filters, such as Video Capture Source filters, can work with more than one device. 

<p>This sample demonstrates the use of <A HREF="../ref/iface/IFilterMapper2.htm">IFilterMapper2</A>, <A HREF="../ref/iface/IAMVfwCaptureDialogs.htm">IAMVfwCaptureDialogs</A>, <A HREF="../ref/iface/IAMStreamControl.htm">IAMStreamControl</A>, <A HREF="../ref/iface/IAMStreamConfig.htm">IAMStreamConfig</A>, <A HREF="../ref/iface/IAMVideoCompression.htm">IAMVideoCompression</A>, <A HREF="../ref/iface/IAMDroppedFrames.htm">IAMDroppedFrames</A>, <A HREF="../ref/iface/IAMBufferNegotiation.htm">IAMBufferNegotiation</A>, and <A HREF="../ref/iface/IKsPropertySet.htm">IKsPropertySet</A>.

<P><A HREF="DS_Samples_intro.htm#sample_locations">Sample Locations</A>




<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A Class="line" HREF="#pagetop"><IMG src="../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A HREF="../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
