<!-- DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN" -->

<HTML>
<HEAD><TITLE>CImageDisplay Class</TITLE>
<SCRIPT> var sRelPath = '../../' </SCRIPT>


<META NAME="Description" CONTENT="CImageDisplay Class">
<META NAME="Description" CONTENT="CheckBitFields (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CheckBitFields">
<META NAME="Description" CONTENT="CheckHeaderValidity (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CheckHeaderValidity">
<META NAME="Description" CONTENT="CheckMediaType (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CheckMediaType">
<META NAME="Description" CONTENT="CheckPaletteHeader (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CheckPaletteHeader">
<META NAME="Description" CONTENT="CheckVideoType (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CheckVideoType">
<META NAME="Description" CONTENT="CImageDisplay (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CImageDisplay">
<META NAME="Description" CONTENT="CountPrefixBits (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CountPrefixBits">
<META NAME="Description" CONTENT="CountSetBits (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::CountSetBits">
<META NAME="Description" CONTENT="GetBitMasks (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::GetBitMasks">
<META NAME="Description" CONTENT="GetColourMask (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::GetColourMask">
<META NAME="Description" CONTENT="GetDisplayDepth (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::GetDisplayDepth">
<META NAME="Description" CONTENT="GetDisplayFormat (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::GetDisplayFormat">
<META NAME="Description" CONTENT="IsPalettized (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::IsPalettized">
<META NAME="Description" CONTENT="RefreshDisplayType (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::RefreshDisplayType">
<META NAME="Description" CONTENT="UpdateFormat (CImageDisplay)">
<META NAME="Description" CONTENT="CImageDisplay::UpdateFormat">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT>
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../../ver.js"></SCRIPT>
<SCRIPT SRC="../../gloss.js"></SCRIPT>

<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT>
//<!--
   var sVR = '../../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicsdkIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicsdkIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicsdkNAV';
   }
   else
   {
	   sCSS += 'dxm_basicsdkIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="CImageDisplay"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageDisplay Class"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../../art/hdrdshow.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageDisplay Class"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectShow Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../../contents.htm">Contents</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../../index.htm">Index</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="Classes_intro.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="CImageAllocator.htm">CImageAllocator Class</A>
<IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="CImagePalette.htm">CImagePalette Class</A>
</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->


<BLOCKQUOTE CLASS="body">


<!-- CONTENTS_START -->

<H1>CImageDisplay Class</H1>

<P><IMG SRC="../../art/wutil06.gif" WIDTH="205" HEIGHT="56" ALT="CImageDisplay class hierarchy">

<P>This class initializes itself with a display format so that other objects can
query or reset the display type. It also provides member functions to check display formats
and accept only those video formats that can be efficiently rendered by using GDI calls.

<A NAME="Protected_Data_Membe"></A><P CLASS="ref">Protected Data Members</P>
<TABLE><TR><TD><B><A NAME="m_Display">m_Display</A></B>
 </TD><TD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure corresponding to the current device display type.
</TD></TR></TABLE>
<A NAME="Member_Functions"></A><P CLASS="ref">Member Functions</P>

<TABLE><TR><TD><A HREF="CImageDisplay.htm#CheckBitFields">CheckBitFields</A>
 </TD><TD>Checks that the bit <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_f.htm#field')">fields</A> on a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure are correct.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CheckHeaderValidity">CheckHeaderValidity</A>
 </TD><TD>Determines if a <A HREF="../../filtdev/DV_Data_AVI_File_Format.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure is valid.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CheckMediaType">CheckMediaType</A>
 </TD><TD>Determines if the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_f.htm#filter')">filter</A> can support the media type proposed by the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_O.htm#output_pin')">output pin</A>.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CheckPaletteHeader">CheckPaletteHeader</A>
 </TD><TD>Determines if the palette on a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure is correct.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CheckVideoType">CheckVideoType</A>
 </TD><TD>Compares a video type to determine if it is compatible with the current display mode.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CImageDisplay_CImageDisplay">CImageDisplay</A>
 </TD><TD>Constructs a <A HREF="CImageDisplay.htm">CImageDisplay</A> object.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CountPrefixBits">CountPrefixBits</A>
 </TD><TD>Counts the number of prefix bits.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#CountSetBits">CountSetBits</A>
 </TD><TD>Counts the total number of bits set in a field.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#GetBitMasks">GetBitMasks</A>
 </TD><TD>Retrieves a set of color element bitmasks for the supplied <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A>
structure.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#GetColourMask">GetColourMask</A>
 </TD><TD>Retrieves a set of individual color element masks.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#GetDisplayDepth">GetDisplayDepth</A>
 </TD><TD>Retrieves the bit depth of the current display mode.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#GetDisplayFormat">GetDisplayFormat</A>
 </TD><TD>Retrieves a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the current display mode.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#IsPalettized">IsPalettized</A>
 </TD><TD>Determines if the display uses a palette.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#RefreshDisplayType">RefreshDisplayType</A>
 </TD><TD>Updates the <A HREF="CImageDisplay.htm">CImageDisplay</A> object with the current display type.
</TD></TR><TR><TD><A HREF="CImageDisplay.htm#UpdateFormat">UpdateFormat</A>
 </TD><TD>Updates the <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to remove implicit assumptions.
</TD></TR></TABLE>



<H1><A NAME="CheckBitFields">CImageDisplay::CheckBitFields</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Checks that the bit fields in the <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure are correct.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>BOOL</B> <B>CheckBitFields</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to check.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns one of the following values.
<TABLE>
<TR><TD>TRUE </TD><TD>Bit fields are correct.
</TD></TR><TR><TD>FALSE </TD><TD>Bit fields contain an error.
</TD></TR></TABLE>

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The assumption throughout the object is that any bitmasks are allowed no
more than 8 bits to store a color component. This member function checks that the
bit count assumption is enforced, and also ensures that all the bits set are contiguous.

<P>This is a protected member function.
</BLOCKQUOTE>


<H1><A NAME="CheckHeaderValidity">CImageDisplay::CheckHeaderValidity</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Determines if a <A HREF="../../filtdev/DV_Data_AVI_File_Format.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure is valid.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>BOOL</B> <B>CheckHeaderValidity</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure that contains the bitmap details.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns one of the following values.
<TABLE>
<TR><TD>TRUE </TD><TD>Format is valid.
</TD></TR><TR><TD>FALSE </TD><TD>Format contains an error.
</TD></TR></TABLE>

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The <A HREF="../../filtdev/DV_Data_AVI_File_Format.htm#BITMAPINFOHEADER_AVI">BITMAPINFOHEADER</A> structure might be rejected for a number of reasons.
These might include a number-of-planes entry greater or less than one, the size of the
structure not being equal to the size of <B>BITMAPINFOHEADER</B>, 
or, perhaps, being asked to validate a YUV format (this member function only
validates RGB formats; it will always return FALSE for YUV types).

</BLOCKQUOTE>


<H1><A NAME="CheckMediaType">CImageDisplay::CheckMediaType</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Determines if the filter can support the media type proposed by the output pin.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>HRESULT</B> <B>CheckMediaType</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>CMediaType</B> <I>*pmtIn</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pmtIn</I>
 </DT><DD>Media type to check.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../Error_Success_Codes.htm#HRESULT">HRESULT</A> value.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This helper member function can be used to validate a video media type. It
examines the major and <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_M.htm#minor_type')">minor type</A> <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_G.htm#GUID')">GUIDs</A> and verifies that the format <B>GUID</B> defines a
<A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure.
</BLOCKQUOTE>


<H1><A NAME="CheckPaletteHeader">CImageDisplay::CheckPaletteHeader</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Determines if the palette on a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure is correct.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>BOOL</B> <B>CheckPaletteHeader</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to validate.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns one of the following values.
<TABLE>
<TR><TD>TRUE </TD><TD>Palette is correct.
</TD></TR><TR><TD>FALSE </TD><TD>No valid palette.
</TD></TR></TABLE>

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This member function returns FALSE if the format specifies that no palette is
available (it might be a true-color format). It also returns FALSE if the
number of palette colors used (or those that are important) exceeds the number
specified for the video format.
</BLOCKQUOTE>


<H1><A NAME="CheckVideoType">CImageDisplay::CheckVideoType</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Compares a video type to determine if it is compatible with the current display mode.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>HRESULT</B> <B>CheckVideoType</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pInput</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pInput</I>
 </DT><DD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to validate.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns NOERROR if successful or E_INVALIDARG if unsuccessful.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Many video rendering filters want a function to determine if proposed
formats are okay. This member function checks the <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure
passed as a media type and returns NOERROR if the media type is valid; otherwise,
it returns E_INVALIDARG434. Note, however, that only formats that can be
easily displayed on the current display device are accepted; so, for example, a 16-bit device
will not accept 24-bit images. Because most displays draw 8-bit palettized images efficiently,
this format is always accepted unless the display is 16-color VGA.

</BLOCKQUOTE>


<H1><A NAME="CImageDisplay_CImageDisplay">CImageDisplay::CImageDisplay</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Constructs a <A HREF="CImageDisplay.htm">CImageDisplay</A> object.
<P CLASS="ref">Syntax</P><BLOCKQUOTE><PRE>
<P><B>CImageDisplay</B><B>(</B> <B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The <A HREF="CImageDisplay.htm">CImageDisplay</A> class helps <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_R.htm#renderer')">renderers</A> that want to determine the format of the
current display mode. This member function retrieves the display mode and creates a
<A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure that represents its format. The class supplies that format
for clients through member functions such as <A HREF="CImageDisplay.htm#IsPalettized">IsPalettized</A>
and <A HREF="CImageDisplay.htm#GetDisplayFormat">GetDisplayFormat</A>.
If a client detects the display format has changed (perhaps it receives a
WM_DISPLAYCHANGED message), it should call
<A HREF="CImageDisplay.htm#RefreshDisplayType">RefreshDisplayType</A>.
</BLOCKQUOTE>


<H1><A NAME="CountPrefixBits">CImageDisplay::CountPrefixBits</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Helper member function to count the number of prefix bits.
<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>DWORD</B> <B>CountPrefixBits</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>DWORD</B> <I>Field</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>Field</I>
 </DT><DD>Input bitmask field.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Given a bitmask, this member function counts the number of zero bits up to the least
significant set bit. So, for a binary number 00000100, the member function returns
2 (decimal). The member function does, however, work on <A HREF="../../appendixes/Further_Reading.htm#DWORD">DWORD</A> values, so it counts from
the least significant bit up through the <B>DWORD</B> to the last bit (0x80000000). If no
bits are found, this will return the (impossible) value 32 (decimal).

<P>This is a protected member function.
</BLOCKQUOTE>


<H1><A NAME="CountSetBits">CImageDisplay::CountSetBits</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Counts the number of bit sets in the <I>Field</I> parameter.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>DWORD</B> <B>CountSetBits</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>DWORD</B> <I>Field</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>Field</I>
 </DT><DD>Field in which to count bit sets.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns the number of bit sets.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This is a protected member function.
</BLOCKQUOTE>


<H1><A NAME="GetBitMasks">CImageDisplay::GetBitMasks</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Retrieves a set of color element bitmasks for the supplied <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A>
structure.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>const</B> <B>DWORD</B> <B>*GetBitMasks</B><B>(</B><BR>&nbsp;&nbsp;<B>const</B> <B>VIDEOINFO</B> <I>*pVideoInfo</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pVideoInfo</I>
 </DT><DD>Input <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure format.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This member function should be called only with RGB formats. If the RGB format has a
bit depth of 16/32 bits per pixel, it will return the bitmasks for
the individual red, green, and blue color elements (for example, RGB565
is 0xF800, 0x07E0, and 0x001F). For RGB24, this will return 0xFF0000, 0xFF00,
and 0xFF. For palettized formats, this will return all zeros.
</BLOCKQUOTE>


<H1><A NAME="GetColourMask">CImageDisplay::GetColourMask</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Retrieves a set of individual color element masks.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>BOOL</B> <B>GetColourMask</B><B>(</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskRed</I><B>,</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskGreen</I><B>,</B><BR>&nbsp;&nbsp;<B>DWORD</B> <I>*pMaskBlue</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pMaskRed</I>
 </DT><DD>Holds red mask.
</DD><DT><I>pMaskGreen</I>
 </DT><DD>Holds green mask.
</DD><DT><I>pMaskBlue</I>
 </DT><DD>Holds blue mask.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns one of the following values.
<TABLE>
<TR><TD>TRUE </TD><TD>Masks were filled out correctly.
</TD></TR><TR><TD>FALSE </TD><TD>No masks were available for the display.
</TD></TR></TABLE>

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>Given a video format described by a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure,
this member function returns the mask
that is used to obtain the range of acceptable colors for this type (for
example, the mask for a 24-bit true color format is 0xFF in all cases). A
16-bit 5:6:5 display format uses 0xF8, 0xFC, and 0xF8. Therefore, given any
RGB triplets, this member function can find one that is
compatible with the display format by using a bitwise-AND operation.

</BLOCKQUOTE>


<H1><A NAME="GetDisplayDepth">CImageDisplay::GetDisplayDepth</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Retrieves the bit depth of the current display mode.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>WORD</B> <B>GetDisplayDepth</B><B>(</B> <B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns the number of bits per pixel used on the display.

</BLOCKQUOTE>


<H1><A NAME="GetDisplayFormat">CImageDisplay::GetDisplayFormat</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Retrieves a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the current display mode.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>const</B> <B>VIDEOINFO</B> <B>*GetDisplayFormat</B><B>(</B> <B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns a <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure representing the display format.

</BLOCKQUOTE>


<H1><A NAME="IsPalettized">CImageDisplay::IsPalettized</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Determines if the display uses a palette.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>BOOL</B> <B>IsPalettized</B><B>(</B> <B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns TRUE if the display uses a palette; otherwise, returns FALSE.

</BLOCKQUOTE>


<H1><A NAME="RefreshDisplayType">CImageDisplay::RefreshDisplayType</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Updates the <A HREF="CImageDisplay.htm">CImageDisplay</A> object with the current display type.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>HRESULT</B> <B>RefreshDisplayType</B><B>(</B><BR>&nbsp;&nbsp;<B>LPSTR</B> <I>szDeviceName</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>szDeviceName</I>
 </DT><DD><A HREF="../../appendixes/Further_Reading.htm#LPSTR">LPSTR</A> value that contains the name of the device to update. If omitted, this parameter defaults to the main device.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns NOERROR if successful; E_FAIL if unsuccessful.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This member function should be called when a WM_DISPLAYCHANGED message is received.
</BLOCKQUOTE>


<H1><A NAME="UpdateFormat">CImageDisplay::UpdateFormat</A><HR size=1></H1>
<A HREF="CImageDisplay.htm">CImageDisplay Class</A>
<P>Updates the <A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to remove implicit assumptions.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>HRESULT</B> <B>UpdateFormat</B><B>(</B><BR>&nbsp;&nbsp;<B>VIDEOINFO</B> <I>*pVideoInfo</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pVideoInfo</I>
 </DT><DD><A HREF="../structs.htm#VIDEOINFOHEADER">VIDEOINFOHEADER</A> structure to update.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>Returns an <A HREF="../Error_Success_Codes.htm#HRESULT">HRESULT</A> value. Current implementation returns NOERROR.

</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>This member function is probably suitable only for specific filters to use.
The <A HREF="../../filtdev/DV_Data_AVI_File_Format.htm#BITMAPINFO">BITMAPINFO</A> structure has certain fields that are not well
specified. In particular, the number of colors specified for a palette can be zero,
in which case it is defined to be the maximum for that <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_F.htm#format_type')">format type</A>.
This member function updates these fields so that their contents are explicit.

</BLOCKQUOTE>
<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A Class="line" HREF="#pagetop"><IMG src="../../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A Class="line" HREF="../../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
