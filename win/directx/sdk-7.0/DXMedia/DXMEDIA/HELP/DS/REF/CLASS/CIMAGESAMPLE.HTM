<!-- DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN" -->

<HTML>
<HEAD><TITLE>CImageSample Class</TITLE>
<SCRIPT> var sRelPath = '../../' </SCRIPT>


<META NAME="Description" CONTENT="CImageSample Class">
<META NAME="Description" CONTENT="CImageSample (CImageSample)">
<META NAME="Description" CONTENT="CImageSample::CImageSample">
<META NAME="Description" CONTENT="GetDIBData (CImageSample)">
<META NAME="Description" CONTENT="CImageSample::GetDIBData">
<META NAME="Description" CONTENT="SetDIBData (CImageSample)">
<META NAME="Description" CONTENT="CImageSample::SetDIBData">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=iso8859-1">
<META NAME="MS.LOCALE" CONTENT="EN-US">
<META NAME="ROBOTS" CONTENT="all">

<!-- SNIFF_START -->

<SCRIPT>
//<!--
var g_isIE = false, g_isNav = false, g_iMaj = 0, g_sPlat = "";
// -->

</SCRIPT>
<SCRIPT SRC="../../ver.js"></SCRIPT>
<SCRIPT SRC="../../gloss.js"></SCRIPT>

<!-- SNIFF_END -->


<SCRIPT DEFER SRC="../../common.js"></SCRIPT>
<SCRIPT DEFER>
//<!--
function InitPage()
{
	if (g_isIE && g_iMaj >= 4)	
	{

		SetTOC();
	}
}
//-->

</SCRIPT>

<!-- SNIFF_END -->


<!-- STYLE_START -->

<SCRIPT>
//<!--
   var sVR = '../../'	// Set root for the style sheet
   var sCSS = '<LINK REL="stylesheet" HREF="' + sVR;

   if(g_isIE)
   {
	   if (g_iMaj >= 4) // For MSIE 4.0 or later
	   {
		   sCSS += 'dxm_basicsdkIE4';
		   if (g_sPlat == "Win") // Windows only for now
		   {
			   document.createStyleSheet(sVR + 'dxm_advSDKIE4.css');
		   }
	   }
	   else // For MSIE 3.0 or earlier
	   {
		   sCSS += 'dxm_basicsdkIE3';
	   }
   }
   else if (g_isNav) // For all Nav versions
   {
	   sCSS += 'dxm_basicsdkNAV';
   }
   else
   {
	   sCSS += 'dxm_basicsdkIE3'; // default to IE3 sheet
   }

   sCSS += (sCSS == '' ? '' : '.css" TYPE="text/css">');

   document.write(sCSS);
//-->

</SCRIPT>
<!-- STYLE_END -->


</HEAD>
<BODY onload="InitPage(); if (g_isIE && g_iMaj >= 4){HdgrphControl()}" BGCOLOR="#FFFFFF">
<A NAME="pagetop"></A><A NAME="CImageSample"></A>

<!-- HEADGRAPH_START -->

<TABLE CLASS="main" BORDER=0 CELLSPACING="0" CELLPADDING="0" WIDTH="*">
<TR>
<TD ROWSPAN="3" VALIGN="TOP" WIDTH="*">
<IMG SRC="../../art/header1.gif" WIDTH="107" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageSample Class"></TD>
<TD ROWSPAN="2" VALIGN="TOP" WIDTH="217"><IMG SRC="../../art/hdrdshow.gif" WIDTH="217" HEIGHT="110" BORDER=0 ALT="DirectShow Animated Header -- CImageSample Class"></TD>
<TD VALIGN="TOP" WIDTH="383">
<IMG SRC="../../art/header3.gif" WIDTH="383" HEIGHT="95" BORDER=0 ALT="DirectShow Animated Header">
</TD>
<TD VALIGN="TOP" WIDTH="100%">
<IMG SRC="../../art/spacer1.gif" WIDTH="100%" HEIGHT="94" BORDER=0 ALT="Microsoft DirectShow SDK">
</TD>
</TR>
<!-- HEADGRAPH_END -->

<!-- NAV_LINKS_START -->

<TR><TD VALIGN="TOP"><PRE><IMG ID="TOC_" SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" ID="TOC" HREF="../../contents.htm">Contents</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="../../index.htm">Index</A>  <IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><A STYLE="color:black;font-weight:bold" HREF="Classes_intro.htm">Topic Contents</A>
</PRE></TD></TR>
<TR><TD COLSPAN="2" VALIGN="TOP"><PRE><IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Previous Topic:</B> <A STYLE="color:black" HREF="CImagePalette.htm">CImagePalette Class</A>
<IMG SRC="../../art/yelbtn.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="*"><B>Next Topic:</B> <A  STYLE="color:black" HREF="CLoadDirectDraw.htm">CLoadDirectDraw Class</A>
</PRE></TD></TR></TABLE>
<!-- NAV_LINKS_END -->


<BLOCKQUOTE CLASS="body">


<!-- CONTENTS_START -->

<H1>CImageSample Class</H1>

<P><IMG SRC="../../art/wutil03.gif" WIDTH="219" HEIGHT="83" ALT="CImageSample class hierarchy">

<P>This class inherits from <A HREF="CMediaSample.htm">CMediaSample</A> and overrides the constructor to initialize itself with the <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure. When the <A CLASS="Glossary" HREF="javascript:Glossary(sRelPath + 'gloss/gloss_R.htm#renderer')">renderer</A> is using its own allocator, it will use this class for its
samples. It can therefore obtain the <A HREF="../../appendixes/Further_Reading.htm#DIBSECTION">DIBSECTION</A> structure information it requires to obtain the <A HREF="../../appendixes/Further_Reading.htm#HBITMAP">HBITMAP</A> data it renders.

<A NAME="Protected_Data_Membe"></A><P CLASS="ref">Protected Data Members</P>
<TABLE><TR><TD><B><A NAME="m_bInit">m_bInit</A></B>
</TD><TD>Flag to determine if the <A HREF="../../appendixes/Further_Reading.htm#DIBSECTION">DIBSECTION</A> structure information is initialized.
</TD></TR><TR><TD><B><A NAME="m_DibData">m_DibData</A></B>
</TD><TD>Information about the sample's <A HREF="../../appendixes/Further_Reading.htm#DIBSECTION">DIBSECTION</A> structure.
</TD></TR></TABLE>
<A NAME="Member_Functions"></A><P CLASS="ref">Member Functions</P>

<TABLE><TR><TD><A HREF="CImageSample.htm#CImageSample_CImageSample">CImageSample</A>
 </TD><TD>Constructs a <A HREF="CImageSample.htm">CImageSample</A> object.
</TD></TR><TR><TD><A HREF="CImageSample.htm#GetDIBData">GetDIBData</A>
 </TD><TD>Retrieves the <A HREF="../../appendixes/Further_Reading.htm#DIBSECTION">DIBSECTION</A> structure information stored for the sample.
</TD></TR><TR><TD><A HREF="CImageSample.htm#SetDIBData">SetDIBData</A>
 </TD><TD>Sets the <A HREF="../../appendixes/Further_Reading.htm#DIBSECTION">DIBSECTION</A> information stored for the sample.
</TD></TR></TABLE>



<H1><A NAME="CImageSample_CImageSample">CImageSample::CImageSample</A><HR size=1></H1>
<A HREF="CImageSample.htm">CImageSample Class</A>
<P>Constructs a <A HREF="CImageSample.htm">CImageSample</A> object.
<P CLASS="ref">Syntax</P><BLOCKQUOTE><PRE>
<P><B>CImageSample</B><B>(</B><BR>&nbsp;&nbsp;<B>CBaseAllocator</B> <I>*pAllocator</I><B>,</B><BR>&nbsp;&nbsp;<B>TCHAR</B> <I>*pName</I><B>,</B><BR>&nbsp;&nbsp;<B>HRESULT</B> <I>*phr</I><B>,</B><BR>&nbsp;&nbsp;<B>LPBYTE</B> <I>pBuffer</I><B>,</B><BR>&nbsp;&nbsp;<B>LONG</B> <I>length</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pAllocator</I>
 </DT><DD>Base allocator to which the sample belongs.
</DD><DT><I>pName</I>
 </DT><DD>Debug-only string description.
</DD><DT><I>phr</I>
 </DT><DD>COM return code.
</DD><DT><I>pBuffer</I>
 </DT><DD>Pointer to the image buffer.
</DD><DT><I>length</I>
 </DT><DD>Length of the image buffer.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.
</BLOCKQUOTE>

<P CLASS="ref">Remarks</P>
<BLOCKQUOTE>
<P>The <A HREF="CImageAllocator.htm">CImageAllocator</A>, <A HREF="CImageSample.htm">CImageSample</A>, and
<A HREF="CDrawImage.htm">CDrawImage</A> classes are all tightly associated. The buffers that the image
allocator creates are made by using the Microsoft&#174; Win32&#174; <A HREF="../../appendixes/Further_Reading.htm#CreateDIBSection">CreateDIBSection</A> function.
The allocator then creates its own samples (based on the <B>CImageSample</B> class).
The image samples are initialized with the buffer pointer and its length. The sample is also
passed in a structure (a <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure) that holds a number of pieces of information
obtained from the <B>CreateDIBSection</B> call.

<P>These samples can then be passed to the draw object. The draw object knows
the private format of the samples and how to get back the <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure
from them. Once it has obtained that information, it can pass a bitmap handle,
which is stored in the <B>DIBDATA</B> structure, down into GDI when it draws the image that
the sample contains. By using the bitmap handle from the sample in the
drawing, rather than just the buffer pointer (which is the alternative if
the sample is not a <A HREF="CImageSample.htm">CImageSample</A>), it achieves a modest performance improvement.
</BLOCKQUOTE>


<H1><A NAME="GetDIBData">CImageSample::GetDIBData</A><HR size=1></H1>
<A HREF="CImageSample.htm">CImageSample Class</A>
<P>Retrieves the <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure held by the sample.


<P CLASS="ref">Syntax</P><BLOCKQUOTE><PRE><P><B>DIBDATA</B> <B>*GetDIBData</B><B>(</B> <B>)</B><B>;</B></PRE></BLOCKQUOTE>



<H1><A NAME="SetDIBData">CImageSample::SetDIBData</A><HR size=1></H1>
<A HREF="CImageSample.htm">CImageSample Class</A>
<P>Sets the <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure that the sample should hold.

<P CLASS="ref">Syntax</P>
<BLOCKQUOTE><PRE>
<P><B>void</B> <B>SetDIBData</B><B>(</B><BR>&nbsp;&nbsp;<B>DIBDATA</B> <I>*pDibData</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B>
</PRE></BLOCKQUOTE>

<P CLASS="ref">Parameters</P>
<BLOCKQUOTE>
<DL><DT><I>pDibData</I>
 </DT><DD>New <A HREF="../structs.htm#DIBDATA">DIBDATA</A> structure.
</DD></DL>
</BLOCKQUOTE>

<P CLASS="ref">Return Value</P>
<BLOCKQUOTE>
<P>No return value.

</BLOCKQUOTE>
<!-- CONTENTS_END -->

<!-- START_PAGE_FOOTER -->


<H6><HR size=1></H6>
<P><A Class="line" HREF="#pagetop"><IMG src="../../art/arrowup1.gif" WIDTH="11" HEIGHT="11" ALIGN="MIDDLE" BORDER=0 ALT="Top of Page">&nbsp;Top of Page</A>
<BR><A Class="line" HREF="../../../cpyright.htm">&#169; 1998 Microsoft Corporation. All rights reserved. Terms of Use.</A>
<!-- END_PAGE_FOOTER -->

</BLOCKQUOTE>

<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../tip2.js"></SCR' + 'IPT><IFRAME ID="G_L_S" NAME="SecretBuffer" STYLE="display: none" SRC=""></IFRAME>')}</SCRIPT>

<!-- DACONTROL_START -->

	<DIV ID="HeadGraphAnim"></DIV>
	<SCRIPT>if((g_isIE == true) && (g_iMaj > 3)) {window.self.document.writeln('<SCR' + 'IPT SRC="../../anim.js"></SCR' + 'IPT>')}</SCRIPT>
<!-- DACONTROL_END -->

</BODY>
</HTML>
