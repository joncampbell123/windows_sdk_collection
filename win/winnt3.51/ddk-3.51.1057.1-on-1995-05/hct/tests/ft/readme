------------------------------------------------------------------------------

  Readme for the FT tests.

  This document quickly describes how to install and run these tests.

  Also, it contains a quick reference of things that need to be testing
  as part of certifying ftdisk.sys.

  History:

    03/30/93 - Steveko - written
    08/18/93 - Steveko - add couple of comments about badsect.in, and
                         add Appendix A
    08/31/93 - t-kenp - Localization comments added.
    08/02/94 - kpeery - Updated to current status of FTtests 
------------------------------------------------------------------------------

1. Hardware Requirements to run the FT tests

   You MUST have a machine with 3 disk drives with no less than
   300 Megabytes of unpartitioned free space on each disk.

2. Software Requirements to run the FT tests

   You MUST be running Windows NT Advanced Server.

3. Installing the FT tests

   Installing off the HCT/CD.
     To install these tests, use the provided install.cmd.  Run it directly
     from the tests\ft subdirectory.  Simply type install for a usage message.

   Installing internal propgation point:
     You will need access to an IDW build in order to collect all required 
     binaries.  The internal distribution point is:
       \\scotland\nttests\###\rats\XXX\kernel\ntft\fttest.

     Connect and cd down to fttest subdirectory.  There is an install.cmd 
     there.  Simply type install for a usage message. 

   If you are a test developer, and wish to install directly from your
   build machine, you are on your own.  Dissect the propogation/install
   procedures.  

4. Setting up to run the FT tests

   The FT tests will on ocassion reboot the machine after altering the
   disk configuration, or to enable the simbad driver. 

   In order for the tests to work correctly they must be able to autologon
   into an administrative account after the reboot.

   To facilitate autologon you must remove the password from the account
   you launch the tests under.  In addition the account must have 
   administrative privaliges to run windisk.  Finally, be sure that auto
   boot is enabled and the default boot selection is the build you wish
   to test.  Auto boot and the default build can be configured under
   the control panel/systems applet. 
   
   Before starting the tests, you must have at least one unpartitioned 
   Free Space region on at least two disks, and a Free Extended Space region 
   or a Free Space region on one disk.  Use windisk to delete partitions. 

           * Warning: deleting partitions permanetly destroyes 
           * the data on those partitions.  

   Each free space region should be at least 300 Megabytes in size.  
   

5. Running the tests.

   Finally, go to the directory you have installed the tests to and issue 
   the following command:

     fttest  

   This will bring up the fttest configuration gui.  
   To configure and start FTtest.

   1. select Configuration menu
   2. select Open

   This should give you a Load Config File dialog with the file .\hct.run
   highlighted.  At this point you could optionaly change this to .\badsect.run
   to load and auto configure the badsector tests.
   
   3. click OK
   
   This should auto config the tests and move them over to the Run List.

   4. click Run

   This will bring up an Config Options dialog.  

   5. (optional) Specify the Language File you need to run the test with.
                 By default this file is .\english.lan.

   6. (optional) You can also choose addtional options such as using quick
                 format or placing the tests in a infinit loop (Run Forever).
                 
   7. click OK.
  
   This will give you the "Last Chance" dialog.  If you click cancel then
   you will be returned to the gui just as if you never hit the "Run"
   button.  

   8. click OK.

   This will start the tests.  If there is a error a dialog will popup
   with a message containing the type of failure.  If the tests pass you
   will get a popup saying.

   "FTtests Complete.  Run getstats to see your results."

   At this point you can click OK in the FTtest - Message dialog to dismiss it.
   Status Monitor can be exited by hitting the "Exit" button.


6. Getting the results from the run.

   The resulting log files (when using hct.run) are as follows:

     mirror.log  - results of mirror runs
     cpbtmir.log - results of copy on boot mirror runs
     strwp.log   - results of stripe with parity runs
     strwop.log  - results of stripe without parity runs
     volset.log  - results of volume set runs
     part.log    - results of simple partition runs
     extvol.log  - results of extended volum set runs

   If you are running the badsector.run variations, the log files are:

     mirror.log  - results of mirror runs
     strwp.log   - results of stripe with parity runs

   To extract statistics from these logs, issue the following cmd:

     getstats ### 

   Expected results when using the hct.run file is:


                Total Vars  Vars  Vars   Vars     Total Tests Tests Tests
File     Build  Vars  PASS  FAIL  NotRun Rate     Tests PASS  FAIL  Rate
-------- -----  ----- ----- ----- ------ -------  ----- ----- ----- -------
frshm.lo   ###      9     9     0      0 100.00%    108   108     0 100.00%
cpbtm.lo   ###      9     9     0      0 100.00%    117   117     0 100.00%
strwp.lo   ###      9     9     0      0 100.00%     54    54     0 100.00%
strwop.l   ###      9     9     0      0 100.00%     45    45     0 100.00%
volset.l   ###      9     9     0      0 100.00%     45    45     0 100.00%
extvol.l   ###      6     6     0      0 100.00%     60    60     0 100.00%
part.log   ###      9     9     0      0 100.00%     45    45     0 100.00%



   Expected results when using the badsect.run file is:

                Total Vars  Vars  Vars  Vars     Total Tests Tests Tests
File     Build  Vars  PASS  FAIL  NotRun Rate     Tests PASS  FAIL  Rate
-------- -----  ----- ----- ----- ------ -------  ----- ----- ----- -------
frshm.lo   ###      9     9     0      0 100.00%    105   105     0 100.00%
strwp.lo   ###      9     9     0      0 100.00%     90    90     0 100.00%


warning: results file cpbtm.log  does not exist
warning: results file strwop.log does not exist
warning: results file volset.log does not exist
warning: results file extvol.log does not exist
warning: results file part.log   does not exist


6. Localization of FTtest.

   Currently these tests are supported for English and German.
   The *.lan files hold the language specific strings necessary for running 
   FTtest.  
   
   To generate a new *.lan file for an unsupported language run the
   script local.cmd.  Local.cmd will grab strings from the system and from
   windisk.exe and dump these strings into a *.lan file (you provide the root
   of the file name).  This language file can then specified under the
   Config Options dialog which is invoked when you "Run" the test.
   
   An important note is that you must have an unpartitioned "Free Space"
   on the machine in order to run local.cmd.  There should not be an 
   extended partition on the disk holding the "Free Space"

   Local.cmd takes four arguments.  The first argument is the localized word
   for the word "Yes" in whatever language you want to localize.  The second
   argument is the word representing "No".  The third argument is the name
   for the startup group and the fourth is the root word for the *.lan file.

   For instance for localizing german we would type:
     local.cmd ja nein autostart german

   There are at least three problems with local.cmd.  

   The first is that local.cmd runs windisk.exe under mstest, to determine 
   what the strings are.  This is a problem because when windisk.exe is 
   invoked for the first time or, if the physical disk configuration has 
   changed since the last time windisk was invoked, a popup will proceed
   the windisk.exe. 

   Local.mst has no means of avoiding this popup.  To avoid this popup you 
   should invoke windisk.exe first to clear it out of the way. Then exit
   windisk and run local.cmd.


   The second problem is that local.mst has no way of determinig what the 
   string is for and "OK" button.  In many languages this string is "OK",
   but in some (such as spanish) this string is different.  If the string
   represented in an "OK" button is not "OK", then you must manualy edit 
   the *.lan file after it is generated.

   If the string that represents "OK" contains special characters. Then
   the string should be edited inside of notepad.exe to make sure that
   the correct windows ansi charater code is recorded.  Editors such as
   edit.com save the OEM character set, which is different from the windows
   ansi character set.

   The third known problem is that local.cmd does non currently determine
   the string for the FtOrphaning popup.  This popup only occurs under the
   badsect.run runs.  This is not a problem for hct.run runs, and it is
   also not a problem for the two above supported languages.  These files
   have been already fixed.

   Any questions/problems can be directed to the NTFT mail alias.
